var portalCommon,pc,virtualAgentApp,vaApp,cantileverServiceSettings,awasaServicesSettings,WLSPHIP0,contentApp,ca,WLSPHIP1,microsoft,app;(function(n,t){"use strict";var i=t.module("ngAria");i.directive("ngModel",function(){return{restrict:"A",require:"?ngModel",priority:199,link:function(n,t,i,r){r.$validators||(r.$validators={})}}})})(window,window.angular);microsoft=microsoft||{};microsoft.support=microsoft.support||{};microsoft.support.client=microsoft.support.client||{};microsoft.support.client.web=microsoft.support.client.web||{};microsoft.support.client.web.chat=microsoft.support.client.web.chat||{};microsoft.support.client.web.chat.constants=microsoft.support.client.web.chat.constants||{},function(){var n=microsoft.support.client.web.chat.constants;n.flagKeys={surveyType:"surveyType"}}();Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){for(var i=t||0;i<this.length;++i)if(this[i]==n)return i;return-1});Array.prototype.map||(Array.prototype.map=function(n){for(var i=[],t=0;t<this.length;++t)i.push(n(this[t]));return i});Array.prototype.filter||(Array.prototype.filter=function(n){for(var i=[],t=0;t<this.length;++t)n(this[t])&&i.push(this[t]);return i});Array.prototype.forEach||(Array.prototype.forEach=function(n){for(var i=[],t=0;t<this.length;++t)i.push(n(this[t]));return i});Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"});Array.prototype.some||(Array.prototype.some=function(n){"use strict";var t;if(this==null)throw new TypeError("Array.prototype.some called on null or undefined");if(typeof n!="function")throw new TypeError;var i=Object(this),r=i.length>>>0,u=arguments.length>=2?arguments[1]:void 0;for(t=0;t<r;t++)if(t in i&&n.call(u,i[t],t,i))return!0;return!1});Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(t.prototype=this.prototype),i.prototype=new t,i});Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1)+"-"+this.getUTCDate()+"T"+this.getUTCHours()+":"+this.getUTCMinutes()+":"+this.getSeconds()+"."+this.getUTCMilliseconds()+"Z"});typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.repeat||(String.prototype.repeat=function(n){"use strict";var t,i;if(this==null)throw new TypeError("can't convert "+this+" to object");if(t=""+this,n=+n,n!=n&&(n=0),n<0)throw new RangeError("repeat count must be non-negative");if(n==Infinity)throw new RangeError("repeat count must be less than infinity");if(n=Math.floor(n),t.length==0||n==0)return"";if(t.length*n>=268435456)throw new RangeError("repeat count must not overflow maximum string size");for(i="";;){if((n&1)==1&&(i+=t),n>>>=1,n==0)break;t+=t}return i});Object.keys||(Object.keys=function(n){var t,i;if(n!==Object(n))throw new TypeError("Object.keys called on a non-object");t=[];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t});portalCommon="portalCommon";pc=angular.module(portalCommon,["ngSanitize","ngRoute","ngCookies","ngAria","ui.bootstrap","ngMessages","ngFileUpload"]);pc.value("clientConfig",{});pc.value("authConfiguration",{}),function(){var n=microsoft.support.client.web.chat;n.surveyTypes={DEFAULT:"DEFAULT",NONE:"NONE"}}(),function(n){n.factory("errorInterceptor",["$rootScope","$q",function(n,t){function r(n){return f.filter(function(t){return n&&n.config&&n.config.url.match(t)!==null}).length>0}function u(n){return!n||!n.config||!n.config.params?!0:n.config.params.shouldRequestErrorCrashExperience===!1?!1:!0}var i={},f=[/api\/search/i,/api\/content\/kb/i,/api\/content\/gwt/i,/api\/content\/article/i,/api\/content\/help/i,/api\/content\/instantanswers/i,/api\/content\/getcompasscontentforpage(?!(\/partnerconfig|\/widgetconfig|\/contactus\/.+))/i];return i.responseError=function(i){if(!u(i))return t.reject(i);var f=r(i);return f&&i.status===404?n.$broadcast("404Error"):f&&n.$broadcast("500Error",{reason:"Http request failed",response:i}),t.reject(i)},i}])}(angular.module(portalCommon)),function(n){n.config(["$provide",function(n){n.decorator("$exceptionHandler",["$delegate","$injector",function(n,t){return function(i,r){var u={},f=t.get("qosTelemetryService");u.message=i.message||"";u.stack=i.stack||"";u.context=i&&JSON.stringify(i)||"";f.createEvent(f.eventTypes.app.exception).reject(JSON.stringify(u));n(i,r)}}])}])}(angular.module(portalCommon)),function(n){n.service("navigationOverrideService",["$rootScope","$location","$route","$routeParams","$window","$log","compassService","breadcrumbsService",function(n,t,i,r,u,f,e,o){function s(){var n=t.search().flighting;n&&(u.document.cookie="smc_f="+decodeURIComponent(n)+";path=/;domain="+u.location.host)}n.$on("$routeChangeSuccess",function(i,r){var u=t.path().substring(1);e.fetchContent(u);r&&r.data&&r.data.noIndex===!0&&n.$broadcast("NoIndex")});n.$on("$routeChangeStart",function(){s()});n.$on("$routeChangeSuccess",function(){o.generateBreadcrumbs(i,r)});s()}])}(angular.module(portalCommon)),function(){function t(n){return n!==null&&typeof n=="object"}var n=function(n){var i,r;if(n&&n.data)try{try{i=t(n.data)?n.data:JSON.parse(n.data)}catch(u){console.info("Received cross-frame message, was unable to parse event.data: "+u);return}i.type==="$broadcast"&&i.name&&angular.element(document)&&angular.element(document).injector()&&(r=angular.element(document).injector().get("$rootScope"),r.$broadcast(i.name,i.args,n.source),r.$digest())}catch(u){console.error("Error parsing message as JSON: "+u)}};window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n)}(),function(n){n.service("ParentWindowBroadcaster",["$rootScope","$window","$log",function(n,t){function i(i){n.$on(i,function(n,r,f){t.window!==f&&u(i,r)})}function r(i,r){i.$on(r,function(i,u,f){t.window!==f&&n.$broadcast(r,u)})}function u(n,i){t.parent&&t.parent.postMessage(JSON.stringify({type:"$broadcast",name:n,args:i}),"*")}this.init=function(n,u){n.forEach(i);try{if(t&&t.parent&&t.parent.angular&&t.parent.angular.element(t.frameElement)){var f=t.parent.angular.element(t.frameElement).scope();f&&u.forEach(function(n){r(f,n)})}}catch(e){}};this.init([],[])}]).run(["ParentWindowBroadcaster",function(){}])}(angular.module(portalCommon)),function(n){n.service("seoService",["$http","$rootScope","$window","$timeout",function(n,t,i,r){function c(){u=u||n.pendingRequests.length;u&&!n.pendingRequests.length&&r(function(){u&&!n.pendingRequests.length&&(i.callPhantom(),e())},200)}function f(n,t){var r=t&&t.reason||"Page not found";i.callPhantom({error:!0,reason:r});e()}function e(){o();s();h()}var u=!1,o,s,h;typeof i.callPhantom=="function"&&(o=t.$watch(function(){return n.pendingRequests.length},c),s=t.$on("500Error",f),h=t.$on("404Error",f))}])}(angular.module(portalCommon)),function(n){n.service("authenticationHelperService",["$q","$window","$rootScope","$location","$timeout","$route","$injector","clientConfig","osService","languageService","locationService","flightService",function(n,t,i,r,u,f,e,o,s,h,c,l){function a(n,t){var i,u,h,a;n?(i=$(o.RpsSignInInfo.SignInLink).attr("href"),u="wreply"):(i=$(o.RpsSignInInfo.SignOutLink).attr("href"),u="ru");var e=c.getQueryStringParameters(i),l=c.getQueryStringParameters(r.absUrl()),v=c.getQueryStringParameters(e[u]);return $.each(v,function(n,t){l[n]=t}),!n&&f&&f.current&&f.current.data&&f.current.data.returnUrl?(h=f.current.data.returnUrl,h=y(h,f.current.params),a=r.protocol()+"://"+r.host()+h+"?"+$.param(l),e[u]=encodeURI(a)):e[u]=encodeURI(r.absUrl().substring(0,r.absUrl().indexOf(r.path())+r.path().length)+"?"+$.param(l)),n&&(s.isMobile()||t)&&(e.pcexp="false"),i.substring(0,i.indexOf("?")+1)+$.param(e)}function v(n,t){if(o.authInfo.authStatus()===2){var r=function(){o.authInfo.isLoggedIn()?n&&n():i.$broadcast("ProcessUserSignIn",t)},f=u(function(){r()},5e3);i.$on("AuthStatusChange",function(){u.cancel(f);r();i.$apply()})}else o.authInfo.authStatus()===1?n&&n():i.$broadcast("ProcessUserSignIn",t)}function y(n,t){return n&&n.indexOf(":")>=0&&t&&(n=n.replace(/:([a-zA-Z]+)/g,function(n,i){return t[i]?t[i]:n})),n}this.getSignInState=function(){function r(){o.authInfo.isLoggedIn()?t.resolve():t.reject()}var t=n.defer(),f,e;return o.authInfo.authStatus()===2?(f=u(r,5e3),e=i.$on("AuthStatusChange",function(){u.cancel(f);r();e()})):o.authInfo.authStatus()===1?t.resolve():t.reject(),t.promise};this.getUpdatedAuthenticationUrl=function(n,t){return a(n,t)};this.signIn=function(n){v(n,!1)};this.mobileSignIn=function(n){v(n,!0)};this.getShellOptions=function(){var n=t.msCommonShell;return{meControlOptions:{rpData:{msaInfo:{signInUrl:jQuery(o.RpsSignInInfo.SignInLink).attr("href"),signOutUrl:jQuery(o.RpsSignInInfo.SignOutLink).attr("href"),meUrl:o.RpsSignInInfo.MeControlLink}},userData:{idp:n.SupportedAuthIdp.MSA,firstName:null,lastName:null,memberName:null,cid:null,authenticatedState:n.AuthState.NotSignedIn},events:{onSignIn:function(){i.$broadcast("ProcessUserSignIn")},onBeforeSignOut:function(){i.$broadcast("ProcessUserSignOut")}}}}};i.$on("ProcessUserSignIn",function(n,i){var f=l.isUserInFlight("aad-1"),u;return f||(u=e.has("nativeAppService")?e.get("nativeAppService"):null,u&&(u.isNative()?u.signInUser(r.absUrl()):t.location=a(!0,!!i))),!1});i.$on("ProcessUserSignOut",function(){var n=l.isUserInFlight("aad-1");n||u(function(){t.location=a(!1,!1)},0)})}])}(angular.module(portalCommon)),function(n){n.factory("authService",["$rootScope","$window","$location","$q","$cookieStore","$timeout","$injector","clientConfig","osService","languageService","locationService","flightService","qosTelemetryService","adalAuthenticationService","authConfiguration","sdkProxyService","meControlService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){function pi(){var n=a.createEvent(a.eventTypes.auth.meControlLoad);try{w.shellDefined().then(function(){var i=t.msCommonShell,r=ht();i.load(r);et=!0;n.resolve()},function(){et=!1;n.reject()})}catch(i){et=!1;n.reject(i.message)}}function ft(){var n=ki();n===b.NONE?f(function(){ti()},500):n!==nt?f(function(){wi(n)},500):(tt=!0,nt===b.AAD?v.enableProtectedResourceInterceptor():v.disableProtectedResourceInterceptor(),st(n))}function wi(n){n===b.MSA?tr():n===b.AAD?ir():ti()}function ti(){at();vt()}function bi(){var n=a.createEvent(a.eventTypes.auth.aadSilentAuth);ci=!0;try{v.silentLoginAAD().then(function(){n.resolve();bt=!0;ft()},function(t){t&&!sr(t)?n.reject(t):n.resolve();bt=!0;ft()})}catch(t){n.resolve();ft()}}function ki(){return g.length===0?di():g.length===1?gi():g.length===2?nr():b.NONE}function di(){var n=b.NONE;return ut()&&rt()?n=b.MSA:rt()&&!ut()?n=b.MSA:!rt()&&ut()&&(n=b.AAD),n}function gi(){var n=b.NONE;return g[0]===b.MSA?rt()&&(n=b.MSA):g[0]===b.AAD&&ut()&&(n=b.AAD),n}function nr(){var n=b.NONE;return ai()&&(g[0]===b.MSA&&(n=rt()?b.MSA:b.AAD),g[0]===b.AAD&&(n=ut()?b.AAD:b.MSA)),n}function ii(){if(at(),l.isUserInFlight("aad-1")&&(!o.authInfo||!o.authInfo.puid)&&v&&v.userInfo&&v.userInfo.profile){if(o.authInfo.firstName=v.userInfo.profile.given_name,o.authInfo.lastName=v.userInfo.profile.family_name,v.userInfo.profile.altsecid){var n=v.userInfo.profile.altsecid,t=n.lastIndexOf(":");o.authInfo.puidAsHex=n.substring(t+1,n.length);o.authInfo.puid=n.substring(t+1,n.length)}o.authInfo.displayName=v.userInfo.profile.email;o.authInfo.cid="cid"}return k.firstName=o.authInfo.firstName,k.lastName=o.authInfo.lastName,k.displayName=o.authInfo.firstName+" "+o.authInfo.lastName,k.email=o.authInfo.displayName,k.puid=o.authInfo.puid,k.puidAsHex=o.authInfo.puidAsHex,k.cid=o.authInfo.cid,k}function ri(){return at(),k.firstName=v.userInfo.profile.given_name,k.lastName=v.userInfo.profile.family_name,k.displayName=v.userInfo.profile.name,k.email=v.userInfo.profile.upn,k.puid=v.userInfo.profile.puid,k}function at(){k={firstName:"",lastName:"",displayName:"",email:"",puid:"",puidAsHex:"",cid:"",roles:[],sg_groups:[]}}function vt(){if(et&&t&&t.msCommonShell){var n=t.msCommonShell,i=ht(),r={idp:n.SupportedAuthIdp.MSA,firstName:null,lastName:null,displayName:null,memberName:null,cid:null,authenticatedState:n.AuthState.NotSignedIn};yt(n,i,r)}v.disableProtectedResourceInterceptor();nt=b.NONE;tt=!0;st(b.NONE)}function tr(){var n,i,r;if(et&&t&&t.msCommonShell){if(n=t.msCommonShell,i=ht(),k=ii(),!k||!k.email||!k.cid)return vt();r={firstName:k.firstName,lastName:k.lastName,memberName:k.email,cid:k.cid,idp:b.MSA.toLowerCase(),authenticatedState:n.AuthState.SignedIn};yt(n,i,r)}v.disableProtectedResourceInterceptor();nt=b.MSA;tt=!0;st(b.MSA)}function ir(){var n,i,r;if(et&&t&&t.msCommonShell){if(n=t.msCommonShell,i=ht(),k=ri(),!k||!k.email)return vt();r={firstName:k.firstName,lastName:k.lastName,memberName:k.email,idp:b.AAD.toLowerCase(),authenticatedState:n.AuthState.SignedIn};yt(n,i,r)}v.enableProtectedResourceInterceptor();nt=b.AAD;tt=!0;st(b.AAD)}function yt(n,i,r){var u=a.createEvent(a.eventTypes.auth.meControlState),f;t.MSA&&t.MSA.MeControl&&t.MSA.MeControl.API?(f=t.MSA.MeControl.API,f.setActiveUser(r),u.resolve()):(i.meControlOptions.rpData.msaInfo.signOutUrl=y.signOutUri,i.meControlOptions.userData.authenticatedState=r.authenticatedState,n.load(i),u.reject())}function st(t){t&&(t===b.MSA?n.$broadcast(y.userSignedInMSAEvent):t===b.AAD?n.$broadcast(y.userSignedInAADEvent):t===b.NONE&&n.$broadcast(y.userNotSignedInEvent))}function rr(n){if(ui(n))g=n;else throw new Error("Unable to set page preference as invalid idp array values were passed in");}function ui(n){var t=!0;return!n||!n instanceof Array?t=!1:n.length===1&&n[0]!==b.MSA&&n[0]!==b.AAD?t=!1:n.length===2?(n[0]===n[1]&&(t=!1),n[0]!==b.MSA&&n[0]!==b.AAD&&(t=!1),n[1]!==b.MSA&&n[1]!==b.AAD&&(t=!1)):n.length>2&&(t=!1),t}function ur(){var t=r.defer(),i=a.createEvent(a.eventTypes.auth.unknownSilentAuth),u=f(function(){gt()?i.reject("Resolve Auth State Timed out after "+hi+"ms | Is Iframe: "+ei()+" | MSASilentAuthTriggered: "+wt+" | AADSilentAuthTriggered: "+ci+" | AADSilentAuthCompleted: "+bt):(i.resolve(),fi(t))},hi);if(gt())var e=n.$on(y.userSignedInMSAEvent,function(){i.resolve();f.cancel(u);t.resolve(b.MSA);e()}),o=n.$on(y.userSignedInAADEvent,function(){i.resolve();f.cancel(u);t.resolve(b.AAD);o()}),s=n.$on(y.userNotSignedInEvent,function(){i.resolve();f.cancel(u);t.resolve(b.NONE);s()});else i.resolve(),f.cancel(u),fi(t);return t.promise}function fi(n){ct()?n.resolve(b.MSA):lt()?n.resolve(b.AAD):n.resolve(b.NONE)}function ei(){try{return t.self!==t.top}catch(n){return!0}}function fr(n,t,i){return n?pt($(o.RpsSignInInfo.SignInLink).attr("href"),t,i,"wreply"):pt($(o.RpsSignInInfo.SignOutLink).attr("href"),t,i,"ru")}function er(n){return pt(o.RpsSignInInfo.AssureSignInLink,n,null,"wreply")}function pt(n,t,r,u){var f=c.getQueryStringParameters(n),o=c.getQueryStringParameters(f[u]),h=r?r:i.absUrl(),e=c.getQueryStringParameters(h);return $.each(o,function(n,t){e[n]=t}),f[u]=r?encodeURI(r.split("?")[0]+"?"+$.param(e)):encodeURI(i.absUrl().substring(0,i.absUrl().indexOf(i.path())+i.path().length)+"?"+$.param(e)),(s.isMobile()||t)&&(f.pcexp="false"),n.substring(0,n.indexOf("?")+1)+$.param(f)}function ht(){var i=t.msCommonShell;return{meControlOptions:{rpData:{msaInfo:{signInUrl:y.signInUri,signOutUrl:y.signOutUri,meUrl:o.RpsSignInInfo.MeControlLink},aadInfo:{signInUrl:y.signInUri,signOutUrl:y.signOutUri,siteUrl:y.siteUrl,appId:y.clienId,accountSettingsUrl:y.accountSettingsUrl}},userData:{idp:i.SupportedAuthIdp.MSA,firstName:null,lastName:null,displayName:null,memberName:null,cid:null,authenticatedState:i.AuthState.NotSignedIn},events:{onSignIn:function(){n.$broadcast("ProcessUserSignIn")},onBeforeSignOut:function(){n.$broadcast("ProcessUserSignOut")}}}}}function oi(){var n=window.navigator.userAgent,t=n.indexOf("MSIE "),r,i;return t>0?parseInt(n.substring(t+5,n.indexOf(".",t)),10):(r=n.indexOf("Trident/"),r>0)?(i=n.indexOf("rv:"),parseInt(n.substring(i+3,n.indexOf(".",i)),10)):!1}function or(){var n=oi();return n&&typeof n=="number"&&n<10?!0:!1}function sr(n){var t=!1;return y&&y.whitelistedAADErrorCodes&&y.whitelistedAADErrorCodes.every(function(i){return n&&i&&n.toLowerCase().indexOf(i.toLowerCase())>-1?(t=!0,!1):!0}),t}function si(){return i.path().indexOf(y.signInUri)>-1||i.path().indexOf(y.signOutUri)>-1}var d={},b={MSA:"MSA",AAD:"AAD",NONE:"NONE"},k={firstName:"",lastName:"",displayName:"",email:"",puid:"",puidAsHex:"",cid:"",roles:[],sg_groups:[]},ot=!1,gr=i.protocol()+"://"+i.host(),g=[],nt=b.NONE,hi=3e4,et=!1,tt=!1,wt=!1,ci=!1,bt=!1,it=e.has("nativeAppService")?e.get("nativeAppService"):null;n.$on("$routeChangeSuccess",function(n,t,i){var r,u;if(l.isUserInFlight("aad-1")&&t&&t.$$route){if(r=t.$$route,r.requireLogin)if(u=angular.isFunction(r.requireLogin)?r.requireLogin(l):r.requireLogin,ui(u))g=u;else throw new Error("Unable to set page preference as invalid idp array values were passed in");else g=[];typeof i!="undefined"&&(tt=!1,!angular.isFunction(o.authInfo.authStatus)||o.authInfo.authStatus()===2||v.loginInProgress()||v.renewActive()||ft())}});n.$on("UserSignedIn",function(){wt=!0;l.isUserInFlight("aad-1")&&(si()?ft():kt())});n.$on("UserSignedOut",function(){wt=!0;l.isUserInFlight("aad-1")&&(si()?ft():kt())});n.$on("adal:stateMismatch",function(n,t){if(t){var i=a.createEvent(a.eventTypes.auth.aadStateMismatch);t==="SUCCESS"?i.resolve():i.reject(t)}});var hr=function(){pi()},cr=function(n,t){it&&it.isNative()?it.signInUser(t):(ot=n?n:!1,li(n))},lr=function(){ct()?i.path(y.signOutPersonalUri):lt()&&i.path(y.signOutWorkUri)},kt=function(){v.loginInProgress()||v.renewActive()||or()?ft():(oi()&&vi()&&v.clearToken(),tt=!1,bi())},li=function(n){it&&it.isNative()?it.signInUser(i.absUrl()):g.length===1&&g[0]===b.MSA?dt(b.MSA,n):dt(b.AAD,n)},dt=function(n,r){p.isInSdk()&&p.config.hostType!=p.hostTypes.NONE&&p.proxy().then(function(n){n.dispatchEvent("SignInRedirect");p.disableUnload()});it.isNative()?it.signInUser(i.absUrl()):p.isInSdk()&&p.config.hostType==p.hostTypes.IFRAME?p.proxy().then(function(t){n===b.AAD?t.dispatchSignInRequest({type:n}):t.dispatchSignInRequest({type:n,policy:"MBI_SSL"})}):(n||(n=b.NONE),ot=r&&typeof r=="boolean"?r:ot,n===b.MSA?t.location=fr(!0,!!ot):n===b.AAD&&((g&&g.length===1&&g[0]===b.AAD||yi())&&(v.config.extraQueryParameter=y.msaFedParam),v.login()))},ar=function(){t.location=er(!1,!!ot)},vr=function(n){n||(n=nt);n===b.MSA?t.location=$(o.RpsSignInInfo.SignOutLink).attr("href"):n===b.AAD&&v.logOut()},yr=function(){return rt()&&ct()?ii():ut()&&lt()?ri():k},gt=function(){return!tt},ai=function(){return rt()||ut()},rt=function(){return u.get("smcloggedin")||ni()&&v.userInfo.isAuthenticated},ut=function(){return ni()?!1:v.userInfo.isAuthenticated},pr=function(){return nt},ct=function(){return nt===b.MSA&&tt===!0},lt=function(){return nt===b.AAD&&tt===!0},wr=function(){return nt===b.NONE&&tt===!0},br=function(){return b},kr=function(){return ur()},dr=function(n){rr(n)},vi=function(){return ei()},yi=function(){var n=window.location.hostname;return n===y.internalProdHost||n===y.internalUatHost||n===y.internalDevHost},ni=function(){return v&&v.userInfo&&v.userInfo.profile&&v.userInfo.profile.idp&&v.userInfo.profile.idp===y.msaFedIDP};return d.init=hr,d.login=li,d.logout=vr,d.loginUsingAccountType=dt,d.silentLoginAAD=kt,d.loginWithSAPIPolicy=ar,d.processUserSignIn=cr,d.processUserSignOut=lr,d.getSupportedIDP=br,d.getUserInfo=yr,d.resolveAuthState=kr,d.isAuthStatusUnknown=gt,d.isAuthenticated=ai,d.isAuthenticatedMSA=rt,d.isAuthenticatedAAD=ut,d.isSignedInMSA=ct,d.isSignedInAAD=lt,d.isNotSignedIn=wr,d.getCurrentSignedInAccountType=pr,d.setPagePreference=dr,d.isIframe=vi,d.isInternalDomain=yi,d.checkMSAFedSignOn=ni,d}])}(angular.module(portalCommon)),function(n){n.controller("F1FooterController",["$rootScope","$scope","compassService",function(n,t,i){function r(){var n=i.getF1Footer();n&&(t.viewlinkfarm=n.f1FooterView)}t.reset=function(){r()};t.reset();t.$on("CompassContentReady",function(){r()})}])}(angular.module(portalCommon)),function(n){n.controller("L0HeaderController",["$rootScope","$scope","$window","$location","$sce","$cookies","clientConfig","compassService","flightService","authenticationHelperService","authService","authConfiguration","meControlService",function(n,t,i,r,u,f,e,o,s,h,c,l,a){var v=s.isUserInFlight("aad-1"),y=!1,p=function(){v?c.init():t.signInLink=u.trustAsHtml(e.RpsSignInInfo.SignInLink);t.userDisplayName=null;t.$on("UserSignedIn",function(){v||(t.userDisplayName=e.authInfo.displayName,t.signInLink=u.trustAsHtml(e.RpsSignInInfo.SignOutLink))});t.$on("UserSignedOut",function(){v||(t.userDisplayName=null,t.signInLink=u.trustAsHtml(e.RpsSignInInfo.SignInLink))})};n.$on("ProcessUserSignIn",function(n,t){v&&(y=t||!1,c.processUserSignIn(y,r.path()))});t.$on("UserSignedIn",function(){v||a.shellDefined().then(function(){var t=i.msCommonShell,n=h.getShellOptions();n.meControlOptions.userData.firstName=e.authInfo.firstName;n.meControlOptions.userData.lastName=e.authInfo.lastName;n.meControlOptions.userData.memberName=e.authInfo.displayName;n.meControlOptions.userData.cid=e.authInfo.cid;n.meControlOptions.userData.authenticatedState=t.AuthState.SignedIn;t.load(n)})});t.$on("UserSignedOut",function(){v||a.shellDefined().then(function(){var n=i.msCommonShell;n.load(h.getShellOptions())})});p();t.signInText="Sign in";t.signOutText="Sign out";t.isSignedIn=!1;t.userInFlight=v;t.login=function(){v&&c.processUserSignIn(y,r.path())};t.logout=function(){v&&r.path(l.signOutUri)};n.$on(l.userSignedInMSAEvent,function(){if(v){var n=c.getUserInfo();n&&n.email&&(t.userDisplayName=n.email);t.isSignedIn=!0}});n.$on(l.userSignedInAADEvent,function(){if(v){var n=c.getUserInfo();n&&n.email&&(t.userDisplayName=n.email);t.isSignedIn=!0}});n.$on(l.userNotSignedInEvent,function(){v&&(t.userDisplayName=null,t.isSignedIn=!1)})}])}(angular.module(portalCommon)),function(n){n.directive("languaugeselector",["$rootScope",function(){return{restrict:"A",link:function(n){$(document).ready(function(){$('a[id="locale-picker-link"]').on("click",function(){n.$broadcast("languageSelectorClicked");n.$digest()})})}}}])}(angular.module(portalCommon)),function(n){n.controller("SelfHostFeedbackController",["$scope","$window","$http","$location","compassService","surveyCookieService",function(n,t,i,r,u,f){var e=function(){var e=f.setSurveyCookie(),t=u.getSelfhostFeedback(),i;t&&(n.viewfeedback=t,i=t.selfHostFeedbackEmailBody,i=i.replace(/(\n)+/g,"%0D%0A"),t.selfHostFeedbackEmailBody=i,n.currentUrl="%0D%0AUrl: "+r.absUrl(),n.icon=String.fromCharCode("0x"+t.selfHostFeedbackIcon))};e();n.$on("CompassContentReady",function(){e()})}])}(angular.module(portalCommon)),function(n){n.service("surveyContentService",["$q","$location","contentApiService","localStorageService",function(n,t,i,r){function e(n){var i=n,r=i.selfHostFeedbackEmailBody;return r=r.replace(/(\n)+/g,f),i.selfHostFeedbackEmailBody=r,i.feedbackUrlCurrent=f+"Url: "+t.absUrl(),i.feedbackIcon=String.fromCharCode("0x"+i.selfHostFeedbackIcon),i}var u="smc:survey:content",o="smcsurvey",f="%0D%0A";this.getSurveyContent=function(){var t=r.getCacheContent(u);return t?n.resolve(t):i.getCompassContentForPage(o).then(function(n){var t=n.data;return t.selfhostFeedbackView=e(t.selfHostFeedback),r.commit(u,t),t},function(){return null})}}])}(angular.module(portalCommon)),function(n){n.service("surveyCookieService",["$document",function(n){this.setSurveyCookie=function(){var t=this.getCookie("msresearch"),n="",i=(new Date).getTime(),r="",u,f,e;return(t?(u={},t.split(",").forEach(function(n){var t=n.split(":"),i;t[1]&&(u[t[0]]=t[1]);i=t[0].toString();i.indexOf("lastinvited")>-1&&(r=t[1])}),f='"lastinvited":'+r+",",e='"lastinvited":'+i+",",n=t.replace(f,e),this.setCookie("msresearch",n)):(n='"lastinvited":'+i+",",n='{ "version": "5.0", "state": { "name": "IDLE", "url": undefined, "timestamp": '+i+' }, "lastinvited": '+i+', "userid": "", "vendorid": 1, "surveys": [""], "graceperiod": 5, "trackertimestamp": 0 }',this.setCookie("msresearch",n)),n!=t)?!0:!1};this.getSurveyCookie=function(){return this.getCookie("msresearch")||""};this.setCookie=function(t,i){n[0].cookie=t+"="+i+";expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};this.getCookie=function(t){return t?decodeURIComponent(n[0].cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}}])}(angular.module(portalCommon)),function(n){n.service("surveyEligibilityService",["$q","$timeout","$location","$window","flightService","surveyContentService","surveyStatus","surveyStateStorageService","dateTimeExtensions",function(n,t,i,r,u,f,e,o,s){function v(){t(function(){h.resolve();h=null},w*1e3)}function g(){var n=i.search()["survey-pool-override"];return n&&n==="true"&&c()}function y(){var n=i.search()["survey-internal-override"];return n&&n==="true"&&c()}function nt(){var n=i.search()["survey-state-override"];return n&&n==="true"&&c()}function p(){var n=i.search()["survey-override-all"];return n&&n==="true"&&c()}function c(){return u.isUserInFlight(k+l)}function tt(){var n=u.isUserInFlight(ft+l),t=u.isUserInFlight(et+l),i=c();if(!n){h.reject();return}if(!rt()){h.reject();return}if(p()){h.resolve();return}if(i&&!y()){v();return}if(!t&&!g()){h.reject();return}if(!it()&&!nt()){h.reject();return}v()}function it(){var n=o.getSurveyResult(),t;return n?angular.isDate(n)?(t=s.dateDiffInDays(new Date,n),t>b):!0:!0}function rt(){var n=r.navigator.userAgent,t=0,u=n.indexOf("MSIE "),f,i;return(u>0&&(t=parseInt(n.substring(u+5,n.indexOf(".",u)),10)),f=n.indexOf("Trident/"),f>0&&(i=n.indexOf("rv:"),i>0&&(t=parseInt(n.substring(i+3,n.indexOf(".",i)),10))),t&&typeof t=="number"&&t<10)?!1:!0}function ut(n){w=n.surveyConfiguration.surveyInvitationTimeoutSeconds;b=n.surveyConfiguration.surveyEligibilityTimespanDays}var l="-1",w=5,b=0,ft="smc-survey-feat",et="smc-survey-elg",k="smc-survey-int",h=null,a=[],d=null;this.isEligibleForSurvey=function(){return h?h.promise:d.then(function(){return h=n.defer(),tt(),h.promise})};this.surveyCompleted=function(){o.saveSurveyResult();for(var n=0;n<a.length;n++)a[n]()};this.showInternalFeedback=function(){return u.isUserInFlight(k+l)&&!y()&&!p()};this.registerSurveyCompletedCallback=function(n){a.push(n)};d=f.getSurveyContent().then(function(n){ut(n)})}])}(angular.module(portalCommon)),function(n){n.component("surveyInvitation",{templateUrl:"/PartialViews/Chrome/survey.html",controller:["$rootScope","wedcsService","surveyModalService","surveyEligibilityService","surveyContentService","supportSDK","languageService",function(n,t,i,r,u,f,e){function l(){a();v().then(function(){s().then(function(){y()})})}function a(){r.registerSurveyCompletedCallback(function(){s()})}function v(){return u.getSurveyContent().then(function(n){o.internalFeedbackContent=n.selfhostFeedbackView;o.buttonLabel=n.surveyContent.surveyInvitationLabel;o.mobileButtonLabel=n.surveyContent.mobileSurveyInvitationLabel;o.mobileSurveyInvitationCloseButtonLabel=n.surveyContent.mobileSurveyInvitationCloseButtonLabel;o.showInternalFeedback=r.showInternalFeedback()})}function s(){return r.isEligibleForSurvey().then(function(){t.logCustomEvent("invitation-offered",w);f.ui.survey.logOfferResponse({surveyId:c,locale:e.langLocale(),offerState:f.ui.survey.OfferState.DISPLAYED});o.inviteClass=p;o.isElibigleForSurvey=!0},function(){o.inviteClass=h;o.isElibigleForSurvey=!1})}function y(){n.$on("$routeChangeSuccess",function(){s()})}var o=this,h=["survey-invite"],p=["survey-invite","survey-invite-slide-in"],w="smc-survey-event",c="sitesurvey";this.inviteClass=h;this.buttonLabel="Feedback";this.mobileButtonLabel="Feedback";this.showInternalFeedback=!1;this.internalFeedbackContent={};this.isElibigleForSurvey=!1;this.showPopupSurvey=function(){f.ui.survey.logOfferResponse({surveyId:c,locale:e.langLocale(),offerState:f.ui.survey.OfferState.ACCEPTED});i.showSurveyModal()};this.mobileInviteDismiss=function(){this.inviteClass=h;this.isElibigleForSurvey=!1;f.ui.survey.logOfferResponse({surveyId:c,locale:e.langLocale(),offerState:f.ui.survey.OfferState.REJECTED})};l()}]})}(angular.module(portalCommon)),function(n){n.controller("surveyModalInstanceController",["$scope","$uibModalInstance","languageService","surveyContentService","surveyState","surveyStatus","correlationVectorService","supportSDK",function(n,t,i,r,u,f,e,o){n.closeButtonClicked=function(){t.dismiss()};r.getSurveyContent().then(function(t){n.closeButtonLabel=t.surveyContent.surveyCloseButtonLabel;n.surveyContainerLabel=t.surveyContent.surveyContainerLabel;n.surveyContainerEndLabel=t.surveyContent.surveyContainerEndLabel});n.elementReadyShowSurvey=function(){o.ui.survey.render({surveyId:"sitesurvey",locale:i.langLocale(),correlationVector:e.getValue(),uiInfo:{type:o.ui.HostType.IFRAME,containerSelector:"#smc-survey-target"},onSurveyComplete:function(){u.status=f.Completed}})}}])}(angular.module(portalCommon)),function(n){n.value("surveyStatus",{Starting:"Starting",Started:"Started",Dismissed:"Dismissed",Completed:"Completed",Error:"Error"});n.service("surveyModalService",["$uibModal","wedcsService","surveyEligibilityService","surveyStatus",function(n,t,i,r){this.showSurveyModal=function(){var u={status:r.Starting},f="smc-survey-event",e=n.open({templateUrl:"/PartialViews/Chrome/surveyModal.html",backdropClass:"smc-modal-backdrop",windowTemplateUrl:"/PartialViews/Chrome/surveyModalTemplate.html",resolve:{surveyState:u},controller:"surveyModalInstanceController"});return e.opened.then(function(){u.status=r.Started},function(){u.status=r.Error}),e.result.then(function(){u.status=r.Completed;console.log("survey was closed")},function(){u.status=u.status!==r.Completed?r.Dismissed:r.Completed;console.log("survey was dismissed");console.log(u);u.status===r.Completed?(i.surveyCompleted(),t.logCustomEvent("survey-completed",f)):t.logCustomEvent("survey-dismissed",f)})}}])}(angular.module(portalCommon)),function(n){n.service("surveyStateStorageService",["$window","localStorageService",function(n){var i="smc-survey-completed",t=null;this.isLocalStorageAvailable=function(){var t=!1;if(n&&n.localStorage)try{n.localStorage.setItem("storageTest","");n.localStorage.removeItem("storageTest","");t=!0}catch(i){t=!1}return t};this.saveSurveyResult=function(){t&&n.localStorage.setItem(i,(new Date).toJSON())};this.getSurveyResult=function(){var r=null;return t&&(r=n.localStorage.getItem(i)),r?new Date(r):null};t=this.isLocalStorageAvailable()}])}(angular.module(portalCommon)),function(n){n.service("breadcrumbsService",[function(){function t(r,u,f){if(r&&r.data&&r.data.breadcrumb&&(n.length||r.data.breadcrumb.parent)){var e=r.data.breadcrumb;n.unshift({url:i(r.originalPath,f),text:i(e.text,f)});t(u[e.parent],u,f)}}function i(n,t){return n&&n.indexOf(":")>=0&&t&&(n=n.replace(/:([a-zA-Z]+)/g,function(n,i){return t[i]?t[i]:n})),n}var n=[];this.generateBreadcrumbs=function(i,r){var u=i.current;n=[];t(u.$$route,i.routes,r)};this.getBreadcrumbs=function(){return n}}])}(angular.module(portalCommon)),function(n){n.service("browserService",["$window",function(n){var i,t={Android:function(){return n.navigator.userAgent.match(/Android/i)},BlackBerry:function(){return n.navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return n.navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return n.navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return n.navigator.userAgent.match(/IEMobile/i)},Other:function(){return n.navigator.userAgent.indexOf("Mobi")>=0},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()||t.Other()}};this.getBrowser=function(){return i};this.isMobile=function(){return!!t.any()};this.determineBrowser=function(){var i=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,r,u,n,f,e,o,s,t,h;return i?"opera":(r=typeof InstallTrigger!="undefined",r)?"firefox":(u=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,u)?"safari":(n=!1,f=!!document.documentMode&&document.documentMode==11,f)?(n=!0,"ie11"):(e=!!document.documentMode&&document.documentMode==10,e)?(n=!0,"ie10"):(o=!!document.documentMode&&document.documentMode==9,o)?(n=!0,"ie9"):(s=!n&&!!window.StyleMedia,s)?"edge":(t=!!window.chrome&&!!window.chrome.webstore,t)?"chrome":(h=(t||i)&&!!window.CSS,h)?"blink":"Other"};i=this.determineBrowser()}])}(angular.module(portalCommon)),function(n){n.directive("compile",["$compile","$sanitize",function(n){return{restrict:"A",transclude:!0,scope:{compile:"="},link:function(t,i){t.$watch(function(n){return n.compile},function(r){if(r)try{i.html(r);n(i.contents())(t)}catch(u){console.log("Does not compile",u)}})}}}])}(angular.module(portalCommon)),function(n){n.directive("script",["$window","flightService",function(n,t){function i(n,t){return function(){var n=document.createElement("script"),i,r;n.type="text/javascript";i=t.attr("src");i!==undefined?n.src=i:(r=t.text(),n.text=r);document.head.appendChild(n);t.remove()}}return{restrict:"E",scope:!1,link:function(r,u,f){if(f.type==="text/cc-javascript")if(t.isUserInFlight("eu-cookie-consent-1")){if(!n.mscc||n.mscc.hasConsent())i(r,u,f)();else if(n.mscc)n.mscc.on("consent",i(r,u,f))}else i(r,u,f)()}}}])}(angular.module(portalCommon)),function(n){n.decorator("$cookies",["$delegate","$window","clientConfig",function(n,t,i){function u(n){return o.indexOf(n)>-1}function s(){if(!t.mscc||t.mscc.hasConsent()||u(arguments[0]))e.apply(n,arguments);else if(t.mscc){var i=arguments[0];r[i]=arguments}}function h(){return!t.mscc||t.mscc.hasConsent()||u(arguments[0])?c.apply(n,arguments):""}function f(){for(cookieKey in r)e.apply(n,r[cookieKey]),delete r[cookieKey]}var e=n.put,c=n.get,o=[],r;if(i&&i.CookieConsentConfig&&(o=i.CookieConsentConfig.CookieWhitelist||[]),r={},t.mscc)t.mscc.on("consent",f);return n.put=s,n.get=h,n.putBlockedCookies=f,n}])}(angular.module(portalCommon)),function(n){n.service("dateTimeExtensions",[function(){function n(n){return n==0&&(n=0),n}this.dateDiffInDays=function(t,i){var r=this.dateDiffInMilliseconds(t,i);return n(Math.round(r/864e5))};this.dateDiffInMilliseconds=function(t,i){var r=t.getTime(),u=i.getTime();return n(u-r)}}])}(angular.module(portalCommon)),function(n){n.directive("debug",["$routeParams",function(n){return{restrict:"A",scope:{debug:"="},link:function(t,i,r){t.enabled=n.debug;t.name=r.debug},template:'<pre ng-if="enabled"> {{name}}: {{debug | json}}<\/pre>'}}])}(angular.module(portalCommon)),function(n){n.service("delayService",["$q","$timeout",function(n,t){this.delay=function(i,r){return n.all([i,t(function(){},r)]).then(function(n){return n[0]})}}])}(angular.module(portalCommon)),function(n){n.directive("ngElementReady",[function(){return{priority:Number.MIN_SAFE_INTEGER,restrict:"A",link:function(n,t,i){n.$eval(i.ngElementReady)}}}])}(angular.module(portalCommon)),function(n){n.directive("focusContent",["$timeout","focusContentService",function(n,t){return{restrict:"A",link:function(i,r,u){function f(t){t===u.name&&e&&n(function(){r[0].focus()})}var e=!1;i.$on("FocusContent",function(n,t){f(t.name)});i.$watch(function(){return r.attr("data-condition")||r.attr("condition")},function(n){e=n&&n.toLowerCase()==="true"||typeof u.condition=="undefined"?!0:!1;f(u.name)});f(t.activeTarget)}}}])}(angular.module(portalCommon)),function(n){n.service("focusContentService",["$rootScope",function(n){this.activeTarget=null;this.focus=function(t){n.$broadcast("FocusContent",{name:t});this.activeTarget=t}}])}(angular.module(portalCommon)),function(n){n.service("getScriptService",["$timeout","$q","clientConfig",function(n,t,i){function e(){r.readyState&&r.readyState!="complete"||(r.onload=r.onreadystatechange=null,n.cancel(f),u.resolve())}function o(){r.onload=r.onreadystatechange=null;n.cancel(f);u.reject()}var u=t.defer(),f,r;this.addScript=function(t,s){var h=s&&s.element?s.element:angular.element("head");return r=document.createElement("script"),f=n(function(){u.reject({status:504})},i.ChatConfig.ChatDefaultTimeout),h.append(r),r.onload=r.onreadystatechange=e,r.onerror=o,r.src=t,u.promise}}])}(angular.module(portalCommon)),function(n){n.service("guidGenerator",["$window",function(n){this.newGuid=function(){var r=n.crypto||n.msCrypto,t,i;return r&&r.getRandomValues?(t=new Uint16Array(8),r.getRandomValues(t),i=function(n){for(var t=n.toString(16);t.length<4;)t="0"+t;return t},i(t[0])+i(t[1])+"-"+i(t[2])+"-"+i(t[3]&20479)+"-"+i(t[4]&16383|32768)+"-"+i(t[5])+i(t[6])+i(t[7])):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}}])}(angular.module(portalCommon)),function(n){n.factory("httpAppOptionsInterceptor",["authConfiguration","previewContentRequestedResolver",function(n,t){function i(n,t){n.params?angular.extend(n.params,t):n.params=t}var r={};return r.request=function(r){var u,f;return r&&r.headers&&!r.headers["Caller-Name"]&&(r.headers["Caller-Name"]="Angular"),u={},r.httpAppOptions&&(r.httpAppOptions.cacheBust&&(u.iecbust=(new Date).getTime()),r.httpAppOptions.allowPreview&&t.isPreviewContentRequested()&&(u.preview=!0),(u.iecbust||u.preview)&&i(r,u)),n&&n.protectedEndpoints&&(f=!1,n.protectedEndpoints.every(function(n){return n&&r.url&&r.url.toLowerCase().indexOf(n.toLowerCase())>-1?(f=!0,!1):!0}),f&&i(r,{iecbust:(new Date).getTime()})),r},r}])}(angular.module(portalCommon)),function(n){n.filter("icon",[function(){return function(n){return typeof n=="string"&&(n.indexOf("0x")===-1&&(n="0x"+n),n=String.fromCharCode(n)),n}}])}(angular.module(portalCommon));angular.module(portalCommon).filter("linkify",function(){return function(n){var t,i=n,u,r;if(n&&n.toLowerCase().indexOf("<a")!==-1&&n.toLowerCase().indexOf("<\/a>")!==-1){do if(t=n.match(/<a.*?(?=>)/i),t!==null){if(r=t.toString(),r.toLowerCase().indexOf("target")!==-1){u=n.match(/target\=.*?(?=\s|>)/i);i=i.replace(u,"target='_blank'");n=n.replace(t,"");continue}i=i.replace(t,t+" target='_blank'");n=n.replace(t,"")}while(t!==null)}else if(n)do t=n.match(/^(?:(?:https?):\/\/?|www\.)[a-zA-Z0-9+&@#/%=~_|$?!:.-]*[a-zA-Z0-9+&@#/%=~_|$]/),t!==null&&(r=t.toString(),r.indexOf("http")!==0&&(r="http://"+r),i=i.replace(t,"<a href='"+r+"' target='_blank'>"+t+"<\/a>"),n=n.replace(t,""));while(t!==null);return i}}),function(n){n.directive("loadingSpinner",["$rootScope","$timeout",function(n,t){return{restrict:"A",templateUrl:"/PartialViews/Common/LoadingSpinner.html",scope:{content:"=",deferred:"=",progressPercentage:"="},link:function(i,r,u){function s(){u.timeout&&(e=t(c,u.timeout));u.delay?o=t(h,u.delay):i.isStarted=!0;angular.isDefined(u.indeterminate)&&u.indeterminate==="false"&&(i.indeterminate=!1);i.indeterminate&&(u.type==="bar"?l():a())}function h(){i.isStarted=!0}function c(){u.message&&(n.$broadcast(u.message,i.content),n.$broadcast("QoS",{operation:"/app/"+u.message}))}function l(){i.progressClasses.indeterminate=!0;i.barClasses["indeterminate-bar"]=!0;i.indicatorClasses["indeterminate-indicator"]=!0;i.isBar=!0}function a(){i.progressClasses.ring=!0;i.progressClasses.indeterminate=!0;i.indicatorClasses["indeterminate-ring"]=!0;i.barClasses["vatheme-progress-symbol-dot"]=!0;u.size==="small"||(u.size==="large"?(i.indicatorClasses["indeterminate-large"]=!0,i.progressClasses["ring-large"]=!0):(i.indicatorClasses["indeterminate-medium"]=!0,i.progressClasses["ring-medium"]=!0))}function f(){e&&(t.cancel(e),e=null);o&&(t.cancel(o),o=null);i.isStarted=!1}i.isStarted=!1;i.progressClasses={};i.barClasses={};i.indicatorClasses={};i.isBar=!1;i.indeterminate=!0;var e,o;i.$watch("deferred",function(){i.deferred&&i.deferred.then&&(f(),s(),i.deferred.then(f,f))});i.$on("$destroy",f);r.on("$destroy",f);u.deferred||s()}}}])}(angular.module(portalCommon)),function(n){n.service("localStorageCacheProvider",["previewContentRequestedResolver","localStorageService",function(n,t){function i(){return!n.isPreviewContentRequested()}this.getValue=function(n){return i()?t.getCacheContent(n):undefined};this.setValue=function(n,r){i()&&t.commit(n,r)}}])}(angular.module(portalCommon)),function(n){n.service("localStorageService",["$window","$log","clientConfig","currentLanguageService",function(n,t,i,r){var f="cacheConfigKey",u=n&&n.navigator&&n.navigator.cookieEnabled&&n.localStorage;try{n.localStorage.setItem("storageTest","");n.localStorage.removeItem("storageTest","")}catch(l){u=!1}u||t.error("Local storage not supported");var e=function(){var n={};return n.language=r.getLang().toLowerCase(),i&&i.SiteContentConfig&&i.SiteContentConfig.BuildVersion&&(n.buildVersion=i.SiteContentConfig.BuildVersion),n},c=function(){var t,r,i;if(u&&n.localStorage[f]){t=JSON.parse(n.localStorage[f]);r=e();for(i in t)if(t[i]!=r[i])return!1;return!0}return!1},s=function(t){return u&&n.localStorage[t]},h=function(t){var r=JSON.parse(n.localStorage[t]),u=(new Date).getTime()-new Date(r.timestamp);return!r.noExpiration&&u>i.SiteContentConfig.ClientCompassCacheTimeout?(localStorage.removeItem(t),null):r.data},o=function(t,i,r){var u={data:i,timestamp:(new Date).getTime()};r&&(u.noExpiration=!0);n.localStorage.setItem(t,JSON.stringify(u))};this.getCacheContent=function(n){return s(n)?c()?h(n):(this.invalidateCache(),null):null};this.getAppCacheContent=function(n){return s(n)?h(n):null};this.commit=function(t,r){u&&i.SiteContentConfig&&i.SiteContentConfig.ClientCompassCachingEnabled&&i.SiteContentConfig.ClientCompassCacheTimeout&&(n.localStorage.setItem(f,JSON.stringify(e())),o(t,r))};this.commitAppContent=function(n,t){u&&o(n,t)};this.commitWithoutExpiration=function(t,i){u&&(n.localStorage.setItem(f,JSON.stringify(e())),o(t,i,!0))};this.invalidateCache=function(){var n,r,t;if(u&&i.SiteContentConfig&&i.SiteContentConfig.ClientCompassCachingEnabled&&i.SiteContentConfig.ClientCompassCacheTimeout)for(n=0,r=localStorage.length;n<r;++n)t=localStorage.key(n),t&&t.indexOf("adal")===-1&&localStorage.removeItem(localStorage.getItem(t))}}])}(angular.module(portalCommon)),function(n){n.service("locationService",["$window","$location","$route","$anchorScroll","$rootScope","$timeout",function(n,t,i,r,u,f){this.getQueryStringParameters=function(n){for(var i={},r=n.substring(n.indexOf("?")+1),u=/([^&=]+)=([^&]*)/g,t;t=u.exec(r);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i};this.getCurrentPath=function(){return t.url().replace(t.hash(),"")};this.setPathAndReload=function(t){n.location=t||this.getCurrentPath()};this.switchLocale=function(n,i){i=i||t.path();var r=i.split("/");return r.length>1&&r[1]!==n?(r[1]=n,r.join("/")):i};this.pathNoReload=function(n){var r=i.current,f=u.$on("$locationChangeSuccess",function(){i.current=r;f()});return t.path(n)};this.scrollTo=function(n,i){f(function(){var i=t.hash();t.hash(n);r();t.hash(i)},i)};this.appendCurrentRouteParams=function(n){var i=t.search(),r;if(Object.keys(i).length>0&&n){(r=n.indexOf("?")<0)?n+="?":r<n.length-1&&(n+="&");for(query in i)n+=query+"="+i[query]+"&";n=n.slice(0,-1)}return n};this.getPathSubset=function(n,i,r){return r=r?r.split("?")[0]:t.path(),r.split("/").slice(n,i).join("/")};this.getPathLength=function(n){n||(n=t.path());var i=n[0]==="/"?1:0,r=n[n.length-1]==="/"?-1:undefined;return n.split("/").slice(i,r).length};this.getReferrerDomain=function(){var t=/\/\/(.*?)(\/|$|\?)/;return n.document.referrer&&t.test(n.document.referrer)?n.document.referrer.match(t)[1]:null}}])}(angular.module(portalCommon)),function(n){n.directive("metatags",["$rootScope","$window","$interval","$cookies","$injector","metaTagsService","guidGenerator",function(n,t,i,r,u,f,e){return{restrict:"A",link:function(o){function s(n){return n?(queryStringIndex=n.indexOf("?"),fragmentIndex=n.indexOf("#"),outputLength=queryStringIndex>0?queryStringIndex:n.length,outputLength=fragmentIndex>0?Math.min(outputLength,fragmentIndex):outputLength,n.substring(0,outputLength)):n}function c(u,o,c){if(f.addOrUpdateMetaTag("ms.vlid",e.newGuid()),f.setMetaTag("ms.refView",c!==o&&s(c)||""),f.setMetaTag("ms.pageType",s(o)),f.doesMetaTagExist("ms.isNative")&&h&&f.setMetaTag("ms.isNative",(!!h.isNative()).toString()),f.doesMetaTagExist("ms.partnerId")&&f.setMetaTag("ms.partnerId",r.get("smcpartner")||""),f.doesMetaTagExist("ms.flightId")&&f.setMetaTag("ms.flightId",r.get("smc_f")||""),f.doesMetaTagExist("ms.cV")&&t&&t.Asimov&&t.Asimov.cv&&f.setMetaTag("ms.cV",t.Asimov.cv.getValue()||""),f.doesMetaTagExist("ms.muid")&&f.setMetaTag("ms.muid",r.get("MUID")||""),f.doesMetaTagExist("ms.auth"))if(f.getMetaTagContent("ms.auth"))n.$broadcast("metaTagsUpdated");else var l=i(function(){f.getMetaTagContent("ms.auth")&&(n.$broadcast("metaTagsUpdated"),i.cancel(l))},250,20);else n.$broadcast("metaTagsUpdated")}var h=u.has("nativeAppService")?u.get("nativeAppService"):null;o.reset=function(){};o.$on("$locationChangeSuccess",c);o.$on("UserSignedIn",function(){f.setMetaTag("ms.auth","1")});o.$on("UserSignedOut",function(){f.setMetaTag("ms.auth","0")});o.$on("UpdateMetaTag",function(n,t){f.addOrUpdateMetaTag(t.name,t.value)});o.$on("RemoveMetaTag",function(n,t){f.setMetaTag(t.name,"")});o.$on("awasaChatId",function(n,t){f.setMetaTag("ms.chatId",t.toString())});o.$on("awasaVisitId",function(n,t){f.setMetaTag("ms.visitId",t.toString())});o.$on("awasaEnqueueId",function(n,t){f.setMetaTag("ms.enqueueId",t.toString())});o.reset()}}}])}(angular.module(portalCommon)),function(n){n.service("metaTagsService",[function(){this.addOrUpdateMetaTag=function(n,t,i){this.doesMetaTagExist(n)||(i?$("head").prepend($('<meta name="'+n+'" content="" />')):$("head").append($('<meta name="'+n+'" content="" />')));this.setMetaTag(n,t)};this.setMetaTag=function(n,t){$('meta[name="'+n+'"]').attr("content",t)};this.doesMetaTagExist=function(n){return $('meta[name="'+n+'"]').attr("name")};this.getMetaTagContent=function(n){return $('meta[name="'+n+'"]').attr("content")}}])}(angular.module(portalCommon)),function(n){n.service("mwfService",["$q","$filter","languageService",function(n,t,i){function u(n,t){var i=r[t],u,f,e,o;if(i)for(u in i)if(i.hasOwnProperty(u)&&(f=i[u],f))for(e=0;e<f.length;e++)if(o=f[e],o&&o.toLowerCase()==n)return u;return"west-european"}var f="https://assets.onestore.ms/cdnfiles/external/mwf/long/v1/v1.4.0/css/mwf-{region}-default.css",r;this.getMwfCssUrl=function(){var n=i.langLocale(),r=i.currentDirection(),e=u(n,r);return t("compassFormat")(f,{region:e})};r={rtl:{arabic:["ar-ae","ar-bh","ar-dz","ar-eg","ar-gulf","ar-jo","ar-iq","ar-kw","ar-lb","ar-ly","ar-ma","ar-mr","ar-om","ar-ps","ar-qa","ar-sa","ar-so","ar-td","ar-tn","ar-ye","fa-ir","ku-arab-iq","pa-arab-pk","prs-af","sd-arab-pk","ug-cn","ur-pk"],hebrew:["he-il"]},ltr:{armenian:["hy-am"],"chinese-simplified":["zh-cn"],"chinese-traditional":["zh-hk","zh-tw"],cyrillic:["be-by","bg-bg","kk-kz","ky-kg","mk-mk","mn-mn","ru-by","ru-kz","ru-ru","ru-tm","sr-cyrl-ba","tg-cyrl-tj","tt-ru","uk-ua"],"east-european":["az-latn-az","bs-ba","cs-cz","et-ee","hr-ba","hr-hr","hu-hu","lt-lt","lv-lv","pl-pl","ro-md","ro-ro","sk-sk","sl-si","sr-latn-me","sr-latn-rs","tk-tm","tr-tr"],georgian:["ka-ge"],greek:["el-gr"],indian:["as-in","bn-bd","bn-in","gu-in","hi-in","kapp-ok-in","kn-in","kok-in","ml-in","mr-in","ne-np","or-in","pa-in","ta-in","te-in"],japanese:["ja-jp"],korean:["ko-kr"],thai:["th-th"],vietnamese:["vi-vn"],"west-european":["af-za","am-et","bs-latn-ba","ca-es","ca-es-valencia","cy-gb","da-dk","de-at","de-ch","de-de","de-li","en-ai","en-am","en-au","en-aw","en-bb","en-bd","en-ca","en-cy","en-dm","en-eg","en-fk","en-gb","en-gd","en-gh","en-gulf","en-gy","en-hk","en-ie","en-in","en-is","en-jm","en-jo","en-ke","en-kn","en-kw","en-lb","en-lc","en-lk","en-lr","en-ls","en-mh","en-ms","en-mt","en-mw","en-my","en-na","en-nf","en-ng","en-nz","en-pg","en-ph","en-pk","en-pw","en-sa","en-sg","en-sl","en-sz","en-tc","en-to","en-tt","en-tz","en-ug","en-us","en-vc","en-vg","en-vi","en-ws","en-za","en-zm","en-zw","es-ar","es-bo","es-cl","es-co","es-cr","es-do","es-ec","es-es","es-gt","es-hn","es-mx","es-ni","es-pa","es-pe","es-pr","es-py","es-sv","es-uy","es-ve","eu-es","fi-fi","fil-ph","fr-be","fr-bf","fr-bi","fr-bj","fr-ca","fr-cd","fr-ch","fr-ci","fr-cm","fr-dz","fr-fr","fr-gf","fr-gn","fr-gp","fr-ht","fr-ma","fr-mc","fr-ml","fr-mq","fr-ne","fr-rw","fr-sn","fr-tg","fr-tn","ga-ie","gd-gb","gl-es","ha-latn-ng","id-id","ig-ng","is-is","it-it","km-kh","lb-lu","lo-la","mi-nz","ms-bn","ms-my","mt-mt","nb-no","nl-be","nl-nl","nn-no","nso-za","pt-ao","pt-br","pt-mz","pt-pt","quc-latn-gt","quz-pe","rw-rw","si-lk","sq-al","sv-se","sw-ke","ti-et","tn-za","uz-latn-uz","wo-sn","xh-za","yo-ng","zu-za"]}}}])}(angular.module(portalCommon));angular.module(portalCommon).filter("objectOrderBy",function(){return function(n,t,i){var r=[];for(var u in n)n[u]!==undefined&&r.push(n[u]);return r.sort(function(n,i){return n[t]>i[t]?1:-1}),i&&r.reverse(),r}}),function(n){n.controller("OnlineController",["$scope","compassService",function(n,t){function i(){n.offlineMessage=t.getOfflineMessage()}n.$on("CompassContentReady",function(){i()});i()}])}(angular.module(portalCommon));angular.module(portalCommon).run(["$window","$rootScope",function(n,t){t.online=navigator.onLine?!0:!1;n.addEventListener&&(n.addEventListener("online",function(){t.online=!0;t.$apply();t.$broadcast("ClientReconnected")}),n.addEventListener("offline",function(){t.online=!1;t.$apply()}))}]),function(n){n.service("osService",["$window",function(n){var i,r={"Windows 2000":["Windows NT 5.0"],"Windows XP":["Windows NT 5.1"],"Windows 2003":["Windows NT 5.2"],"Windows Vista":["Windows NT 6.0"],"Windows 7":["Windows NT 6.1","Windows 7"],"Windows 8":["Windows NT 6.2","Windows 8"],"Windows 8.1":["Windows NT 6.3","Windows 8"],"Windows 10":["Windows NT 10"],Mac:["Mac"],X11:["Unix"],Linux:["Linux"],"Windows 10 Mobile":["Windows Phone 10"],"Windows 8.1 Mobile":["Windows Phone 8","Windows Phone 8.1"]},t={Android:function(){return n.navigator.userAgent.match(/Android/i)},BlackBerry:function(){return n.navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return n.navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return n.navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return n.navigator.userAgent.match(/IEMobile/i)},Other:function(){return n.navigator.userAgent.indexOf("Mobi")>=0},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()||t.Other()}};this.getOS=function(){return i};this.isMobile=function(){return!!t.any()};this.determineOS=function(){var f=n.navigator.platform,u=n.navigator.userAgent,t,i;for(t in r)if(i=r[t].filter(function(n){return u.indexOf(n)>-1}),i.length)return t;return"Other"};this.isWindows=function(){return n.navigator.platform.indexOf("Win")>=0};this.is64bitWindows=function(){return n.navigator.userAgent.indexOf("WOW64")>-1||n.navigator.platform=="Win64"};i=this.determineOS();this.isCorsEnabled=function(){return n.navigator.userAgent.indexOf("MSIE 8.0")>-1||n.navigator.userAgent.indexOf("MSIE 9.0")>-1?!1:!0}}])}(angular.module(portalCommon)),function(n){n.controller("PageController",["$rootScope","$scope","$window","$location","$route","$routeParams","compassService","osService","partnerDataService","languageService","flightService","nativeAppService","clientConfig","iframeService","authService","sessionStorageService","$cookies","virtualAgentConstants","mwfService","uhfService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function g(){t.noChrome=t.iFrame||r.search().nochrome||l.isNative()}function tt(){t.pageReferrer=document.referrer;t.iFrame=v.init(t.pageReferrer,parent);t.iFrame==v.noHostsList&&t.$on("CompassContentReady",function(){t.iFrame=v.init(t.pageReferrer,parent);g()})}function it(n){var i=e.getPageInfo();h.languages().then(function(n){t.languages=n});i&&(t.title=t.title&&n?t.title:i.pageTitle,t.alertBanner=i.alertBanner,i.alertBannerLink&&i.alertBannerLink.linkText&&i.alertBannerLink.linkUrl&&(t.alertBannerLink='<a id="alert-banner-link" href="'+i.alertBannerLink.linkUrl+'">'+i.alertBannerLink.linkText+"<\/a>"),i.alertBannerLink2&&i.alertBannerLink2.linkText&&i.alertBannerLink2.linkUrl&&(t.alertBannerLink2='<a id="alert-banner-link-2" href="'+i.alertBannerLink2.linkUrl+'">'+i.alertBannerLink2.linkText+"<\/a>"))}function rt(){t.skylightEntryView=e.getVirtualAgentEntry()}function ut(){t.errorStatus=i.navigator.cookieEnabled?null:"cookies"}function ft(n){d.getL1HeaderForTheRoute(n).then(function(n){n!=="undefined"&&i.msCommonShell.swapCategoryHeader(n)})}var et=c.isUserInFlight("aad-1"),ht=f.preview||w.get("smc_preview")||n.preview,ot=c.isUserInFlight("smc-cat-nav-1"),st="https://assets.onestore.ms/cdnfiles/external/webcore/4.19.0/stylesheets/WebCore.4.19.0."+h.currentDirection()+".light.min.css",nt;t.title="";t.noIndex=!1;t.isThemeLoaded=!0;t.locale=h.langLocale();t.noChrome=!1;t.iFrame=!1;t.metaTags=[];t.entryName=b.entrypoints.chromeButton;t.getExternalCssUrl=function(){return u.current&&u.current.data&&u.current.data.isMwf==!0?k.getMwfCssUrl():st};t.isThemeLoaded=!1;s.loadTheme().then(function(){t.isThemeLoaded=!0},function(){t.isThemeLoaded=!0});t.getCv=function(){return i&&i.Asimov&&i.Asimov.cv?i.Asimov.cv.getValue():null};t.reset=function(){t.isMobile=o.isMobile();it();rt();ut()};t.onEntrySeen=function(t){n.$broadcast("VirtualAgentEntry",{name:t,type:"view"})};t.onEntryClicked=function(){c.isUserInFlight("vafx-entry-point-1")&&p.set(b.session.virtualAgentEntryClicked,!0)};t.calculateEntryFlow=function(){return p.get(b.session.contactUsEntryClicked)?b.flows.contactUsToVirtualAgent:b.flows.virtualAgentEntry};t.$on("UpdateTitle",function(n,i){t.title=i});t.$on("AddMetaTags",function(n,i){var r,u;for(r in i)u=t.metaTags.map(function(n){return n.name}).indexOf(i[r].name),u>=0?t.metaTags[u]=i[r]:t.metaTags.push(i[r])});t.$on("CompassContentReady",function(){it(!0);rt()});t.$on("NoIndex",function(){t.noIndex=!0});t.$on("500Error",function(n,i){t.errorStatus||(t.errorStatus="500");t.errorContent=i&&i.errorContent});t.$on("404Error",function(n,i){t.errorStatus||i&&i.preventError||(t.errorStatus="404");t.errorContent=i&&i.errorContent});t.$on("$routeChangeStart",function(){t.errorStatus!=="cookies"&&(t.errorStatus=null);t.noIndex=!1});t.$on("$routeChangeSuccess",function(){if(t.canonicalUrl="https://support.microsoft.com"+r.path(),g(),t.hideSearch=u.current&&u.current.data&&u.current.data.hideSearch==!0,t.fluidContainer=u.current&&u.current.data&&u.current.data.fluidContainer==!0,t.isDefaultPremier=u.current&&u.current.data&&u.current.data.isDefaultPremier==!0,t.hasSkylightEntry=u.current&&u.current.data&&u.current.data.hasSkylightEntry===!0&&c.isUserInAnyFlight(b.flights.entryPoint),t.metaTags=[],ot){var n=r.path();ft(n)}});et&&y.isInternalDomain()?(nt=y.getSupportedIDP(),y.isIframe()?(tt(),g(),y.resolveAuthState().then(function(n){n===nt.AAD?t.reset():r.path(r.url()+"/internalsignin")})):y.resolveAuthState().then(function(n){n===nt.AAD?(g(),t.reset()):y.login()})):(y.isIframe()&&tt(),g(),t.reset())}])}(angular.module(portalCommon)),function(n){n.service("partnerDataService",["$rootScope","$cookies","$location","$q","$injector","contentApiService","resourceLoaderService","flightService","sessionStorageService","qosTelemetryService",function(n,t,i,r,u,f,e,o,s,h){function w(){var n=t.get("smcpartner");return(i.search().partnerId&&(n=i.search().partnerId,t.put("smcpartner",n)),!a)?(v||(v=f.getCompassContentForPage("partnerconfig")),v.then(function(t){var i=t.data&&t.data.configList&&t.data.configList[n]&&t.data.configList[n].partnerDefinition;return a=i&&r.resolve(i),i},function(n){return a=null,v=null,r.reject(n)})):a.then(function(n){return n})}var b="blue",a=null,v=null,c=i.search(),k="returnUrl",d=u.has("chatContextService")?u.get("chatContextService"):null,l,p,y;if(this.init=function(){w()},this.getPartnerData=function(n){return w().then(function(t){return t&&(n?t[n]:t)})},this.loadTheme=function(){return c&&angular.isString(c.theme)?e.loadCSS("/content/themes/"+c.theme+".css"):this.getPartnerData("theme").then(function(n){return e.loadCSS("/content/themes/"+(n||b)+".css")},function(){return e.loadCSS("/content/themes/"+b+".css")})},this.returnUrl=function(){return s.get(k)},this.decodeContext=function(n){try{if(decodeURIComponent(n)!==n){var t=decodeURIComponent(n);return decodeURIComponent(t)}return n}catch(i){return console.log(i),n}},this.escapeSpecialChars=function(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")},c&&angular.isString(c.context))try{l=this.decodeContext(c.context);l=unescape(l);l=this.escapeSpecialChars(l);c.partnerId&&(p=this.decodeContext(c.partnerId));y=angular.fromJson(l);p&&l&&Array.isArray(y)&&y.push({name:"partnerId",value:p});h.createEvent(h.eventTypes.partnerDataService.contextFormat).resolve();d?(d.setValues({prechatsurvey:JSON.stringify(y)}).then(function(){i.search("context",null).replace();i.search("hascontext","true").replace()}),h.createEvent(h.eventTypes.partnerDataService.chatContextService).resolve()):h.createEvent(h.eventTypes.partnerDataService.chatContextService).reject()}catch(g){h.createEvent(h.eventTypes.partnerDataService.contextFormat).reject();console.log(g)}i.search().return&&(s.set(k,i.search().return),i.search("return",null).replace());this.init()}])}(angular.module(portalCommon)),function(n){n.service("previewContentRequestedResolver",["$rootScope","$cookies","$routeParams",function(n,t,i){this.isPreviewContentRequested=function(){return i.preview||t.get("smc_preview")||n.preview}}])}(angular.module(portalCommon)),function(n){n.service("queryStringService",["$location",function(n){var t=function(){var t=n.search(),i={};for(var r in t)i[r.toLowerCase()]=t[r];return i};this.getQueryStringValue=function(n){var r=t(),i=r[n.toLowerCase()];return i?i.toString():undefined}}])}(angular.module(portalCommon)),function(n,t){t.service("resourceLoaderService",["$q","$document","qosTelemetryService",function(t,i,r){this.loadCSS=function(u){var f=t.defer(),e=r.createEvent(r.eventTypes.app.downloadCSS);return i[0].createStyleSheet?(i[0].createStyleSheet(u),f.resolve(),e.resolve(),f.promise):(n.element("head").append(n.element('<link rel="stylesheet" type="text/css" />').attr("href",u).on("load",function(){e.resolve();f.resolve()}).on("error",function(){e.reject();f.reject()})),f.promise)}}])}(angular,angular.module(portalCommon)),function(n){n.directive("scrollTo",["$location","$anchorScroll","$log","$timeout",function(n,t,i,r){return{restrict:"A",link:function(i,u,f){u.bind("click",function(){r(function(){f&&f.location&&(n.hash(f.location),t())})})}}}])}(angular.module(portalCommon)),function(n){n.directive("searchableDropdown",["$timeout",function(n){return{restrict:"AE",scope:{items:"=",prompt:"@",display:"@",modelObject:"=",onSelect:"&",preserveInput:"=?",resetOnClear:"=?",noLimit:"@?"},templateUrl:"/PartialViews/Common/SearchableDropdownTemplate.html",link:function(t){t.setCurrent=function(n){t.current=n};t.onItemSelected=function(i){t.model=i[t.display];t.modelObject=i;t.current=0;t.selected=!0;n(function(){t.onSelect();t.preserveInput&&t.preserveInput===!0||(t.model=null)})};t.actionOnKeyDown=function(n){if(n.keyCode==38&&t.current>0)t.current--;else if(n.keyCode==40&&t.current<t.filtered.length-1)t.current++;else if(n.keyCode==13){t.onItemSelected(t.filtered[t.current]);n.preventDefault()}};t.$watch("modelObject",function(n){t.selected&&t.modelObject==n||(t.current=0,t.selected=!1)});t.preserveInput&&t.preserveInput===!0&&(t.preserveInput&&t.preserveInput===!0&&t.modelObject&&(t.model=t.modelObject[t.display],t.selected=!0),t.resetOnClear&&t.resetOnClear===!0&&t.$watch("model",function(){t.model||(t.modelObject="",t.current=0,t.onSelect())}))}}}])}(angular.module(portalCommon)),function(n){n.service("sessionStorageService",["$window","$log",function(n,t){var i=!1;try{i=n&&n.sessionStorage;n.sessionStorage.setItem("storageTest","");n.sessionStorage.removeItem("storageTest","")}catch(r){i=!1}i||t.error("Local storage not supported");this.get=function(t){return i&&n.sessionStorage.getItem(t)?JSON.parse(n.sessionStorage.getItem(t)):null};this.set=function(t,r){i&&n.sessionStorage.setItem(t,JSON.stringify(r))}}])}(angular.module(portalCommon)),function(n){n.directive("smoothScroll",["$window","$document","$timeout",function(n,t,i){return{restrict:"A",link:function(r,u,f){function h(t){var f=c(),r=l(t),h=Math.abs(r-f),u=Math.round(h/25),v=Math.round(h/100);if(v>=o&&(v=o),u>=s&&(u=s),h<=a){n.scrollTo(0,r);return}e=i(function y(t){r>f?(t+=u,t>r&&(t=r)):(t-=u,t<r&&(t=r));n.scrollTo(0,t);t!==r&&(e=i(y.bind(this,t),v))}.bind(this,f))}function c(){return n.self.pageYOffset?n.self.pageYOffset:t[0].documentElement&&t[0].documentElement.scrollTop?t[0].documentElement.scrollTop:t[0].body&&t[0].body.scrollTop?t[0].body.scrollTop:0}function l(n){if(n){for(var i=n,r=i.offsetTop;i.offsetParent&&i.offsetParent!==t[0].body;)i=i.offsetParent,r+=i.offsetTop;return r}return 0}var e,o=parseInt(f.maxSpeed,10)||5,a=parseInt(f.minSkipDistance,10)||10,s=parseInt(f.maxStep,10)||15;r.$on("SmoothScroll",function(n,t){f.name===t&&h(u[0])});r.$on("$destroy",function(){i.cancel(e)})}}}])}(angular.module(portalCommon)),function(n){n.service("smoothScrollService",["$rootScope",function(n){this.scroll=function(t){n.$broadcast("SmoothScroll",t)}}])}(angular.module(portalCommon)),function(n){n.directive("starRating",["compassService",function(n){function t(){return n.getChatSurvey()}return{restrict:"A",templateUrl:"/PartialViews/Common/StarRating.html",scope:{ratingValue:"=value",scales:"=",view:"=?",name:"@",max:"=?",optional:"=?"},link:function(n){n.max=n.max||5;n.stars=new Array(n.max);n.view=t()||n.view;n.rate=function(t){n.ratingValue=t+1};n.preview=function(t){n.previewValue=t+1}}}}])}(angular.module(portalCommon)),function(n){n.service("uhfService",["$http",function(n){function i(n){try{return n.data}catch(i){return t(n.data)}}function t(n){var t={};try{n.data!=null&&(t=n.data.ErrorCode)}catch(i){t=0}return{}}this.getL1HeaderForTheRoute=function(r){var u={params:{requestedRoute:r}};return n.get("/api/UHF/GetL1Header/",u).then(i,t)}}])}(angular.module(portalCommon)),function(n){n.service("windowService",["$window","$document","flightService",function(n,t,i){var r=630,u=420;this.openPopupCenter=function(f,e,o){var h,s;o=o||{};o.width=o.width||u;o.height=o.height||r;var c=n.screenLeft!=undefined?n.screenLeft:n.screen.left,l=n.screenTop!=undefined?n.screenTop:n.screen.top,a=n.innerWidth?n.innerWidth:t.documentElement.clientWidth?t.documentElement.clientWidth:n.screen.width,v=n.innerHeight?n.innerHeight:t.documentElement.clientHeight?t.documentElement.clientHeight:n.screen.height;return o.left=a/2-o.width/2+c,o.top=v/2-o.height/2+l,i.isUserInFlight("vac-23")&&(o.left=o.left<0?0:o.left,o.top=o.top<0?0:o.top),h=Object.keys(o).map(function(n){return n+"="+o[n]}).join(","),s=n.open(f,e,h),s.focus&&s.focus(),s}}])}(angular.module(portalCommon)),function(n){n.filter("compassFormat",["languageService",function(n){return function(t,i){var r=t,u,f;if(r=r&&r.replace(/{lang-locale}/g,n.langLocale()),!r||!angular.isObject(i))return r;for(u in i)while(r.indexOf("{"+u+"}")>=0)f=new RegExp("\\{"+u+"\\}","g"),(i[u]===null||i[u]===undefined)&&(r=r.replace(f,"")),r=r.replace(f,i[u]);return r}}])}(angular.module(portalCommon)),function(n){n.service("compassService",["$q","$log","$rootScope","$cookies","contentApiService","currentLanguageService","clientConfig","localStorageService","locationService",function(n,t,i,r,u,f,e,o){function a(n){var t=s(n);return t||c("commercial"),t}function s(n,t){return t&&h&&h[n]&&h[n][t]?h[n][t]:!t&&h&&h[n]?h[n]:null}function c(n,t){var r;return v[n]?r=v[n]:(r=n!="allproducts/"&&n.indexOf("products/")>-1?u.getCompassContentForProductPages(n):u.getCompassContentForPage(n),v[n]=r,r.then(function(n){if(n){if(n.data){if(t)t(n.data);else for(var r in n.data)h[r]=n.data[r];o.commit(b(),h)}i.$broadcast("CompassContentReady")}else i.$broadcast("500Error",{reason:"Failed to load compass content",response:n})},function(n){n&&n.status&&n.status==404&&i.$broadcast("404Error",{reason:"Compass content not found",response:n})})["finally"](function(){v[n]&&(v[n]=null)})),r}function b(){return w.compassContentKey}function k(t){return h[t.key]?n.when(h[t.key]):c(t.url).then(function(n){return n.data[t.key]})}var h={},v={},w={compassContentKey:"CompassContent",contentNodes:[{condition:"",key:"search",url:""},{condition:"menu",key:"menus",url:"menu/"},{condition:"contactus",key:"landingPage",url:"contactus/"},{condition:"chat",key:"chat",url:"menu/"},{condition:"callback",key:"callback",url:"menu/"},{condition:"schedulecallback",key:"callback",url:"menu/"},{condition:"form",key:"form",url:"menu/"},{condition:"allproducts",key:"allProducts",url:"allproducts/"},{condition:"products",key:"productHubPage",url:"products/"},{condition:"search",key:"searchResults",url:"searchresults/"},{condition:"enterprise",key:"menus",url:"menu/"},{condition:"partner",key:"menus",url:"menu/"},{condition:"rat-phone",key:"menus",url:"menu/"},{condition:"commercial",key:"commercial",url:"commercial/"},{condition:"premier",key:"commercial",url:"commercial/"},{condition:"devices",key:"devices",url:"devices/"},{condition:"acpowercord",key:"devices",url:"acpowercord/"},{condition:"kinectadapter",key:"devices",url:"kinectadapter/"},{condition:"virtual-agent",key:"virtualAgent",url:"virtual-agent/"},{condition:"lifecycle",key:"lifecycle",url:"lifecycle/"},{condition:"enterpriseanswerdesk",key:"enterpriseanswerdesk",url:"enterpriseanswerdesk/"},{condition:"enterpriseanswerdeskv2",key:"enterpriseanswerdesk",url:"enterpriseanswerdeskv2/"},{condition:"verifyme",key:"verifyme",url:"verifyme/"},{condition:"fileexchange",key:"fileexchange",url:"fileexchange/"},{condition:"surfacerecoveryimage",key:"surfacerecoveryimage",url:"surfacerecoveryimage/"}]},y="productMenus",l="productHubPages",p="contactus",d="disabilityanswerdesk",g="enterpriseanswerdesk";this.getContentNodes=function(){return w.contentNodes};this.clearCache=function(){h={};v={};o.invalidateCache()};this.fetchContent=function(n){var o,s,e,u;for(r.get("smc_preview")&&(t.info("Preview mode: cache wiped for new fetch"),this.clearCache()),o=f.getLang(),pathParts=n.split("/"),o&&pathParts[0].toUpperCase()===o.toUpperCase()&&pathParts.shift(),s="",s=n.indexOf("products/")>-1?n:pathParts&&pathParts.length>=1?pathParts[0]:null,e=0;e<w.contentNodes.length;e++)if(u=w.contentNodes[e],u&&s===u.condition){h&&h[u.key]?(t.info("Cache hit for node",u),i.$broadcast("CompassContentReady")):(t.info("fetchContent internalFetch:"+n),c(u.url));break}h&&h.search||c("")};this.getContent=function(n){return s(n)};this.getPageInfo=function(){return s("basePage")};this.getMenu=function(t){return s("menus",t)?n.resolve(s("menus",t)):c("menu").then(function(){return s("menus",t)})};this.getContactUsHeader=function(){return h.contactUsHeader?n.resolve(h.contactUsHeader):c(p).then(function(n){return n.data.contactUsHeader})};this.getVirtualAgent=function(){return k({key:"virtualAgent",url:"virtual-agent/"})};this.getVirtualAgentEntry=function(){return h&&h.virtualAgentEntry};this.getAccessibilityView=function(){return h.accessibilityView?n.when(h.accessibilityView):c(d).then(function(n){return n.data.accessibilityView})};this.getEnterpriseAccessibilityView=function(){return h.enterpriseAccessibilityView?n.resolve(h.enterpriseAccessibilityView):c(g).then(function(n){return n.data.enterpriseAccessibilityView})};this.getEnterpriseAccessibilityV2View=function(){return h.enterpriseAccessibilityV2View?n.resolve(h.enterpriseAccessibilityV2View):c("enterpriseanswerdeskv2").then(function(n){return n.data.enterpriseAccessibilityV2View})};this.getHoursOfOperationView=function(){return h.hoursOfOperationView?n.resolve(h.hoursOfOperationView):c(p).then(function(n){return n.data.hoursOfOperationView})};this.getMLProblemClassificationSupportedLocales=function(){return h.mLProblemClassificationSupportedLocales?n.resolve(h.mLProblemClassificationSupportedLocales):c(p).then(function(n){return n.data.mLProblemClassificationSupportedLocales})};this.getContactUsView=function(){return h.contactUsView?n.resolve(h.contactUsView):c(p).then(function(n){return n.data.contactUsView})};this.getContactUsProducts=function(){return h.landingPage?n.resolve(h.landingPage):c(p).then(function(n){return n.data.landingPage})};this.getContactUsMenu=function(t){if(t==="contactus/")return this.getContactUsProducts();var i=s(y,t);return i?n.resolve(i):c(t,function(n){var t=n[y];h[y]||(h[y]={});for(contactusProductPage in t)h[y][contactusProductPage]=t[contactusProductPage]}).then(function(){return s(y,t)})};this.getContactUsMenuLinks=function(n){return this.getContactUsMenu(n).then(function(n){return n.links&&n.links.length>0?n.links:null})};this.getMenuExtras=function(){var n=s("menuExtras");return n&&n.menuExtras?{icon:n.menuExtraIcon,extras:n.menuExtras.links}:null};this.getPageSubjectId=function(n){var t=n&&n.subjectId,r,i,u;if(t&&t>=0)return t;for(r=0;r<n.links.length;r++)if(i=n.links[r].link.linkUrl,(i.indexOf("/chat/")>-1||i.indexOf("/callback/")>-1||i.indexOf("/phone/")>-1||i.indexOf("/form/")>-1)&&(u=i.split("/"),u.length>=3&&u[2]!=="{subject-id}")){if(t=parseInt(u[2],10),isNaN(t))continue;return t}return undefined};this.getMenuOptionsForId=function(n){return this.getMenu().then(function(t){var i,r;if(t)for(r in t)if(i=t[r],i.hasModality&&this.getPageSubjectId(i)===n)return i.links;return null}.bind(this))};this.getChat=function(){return s("chat")};this.getChatSurvey=function(){return s("chat","survey")};this.getCallback=function(){return s("callback")};this.getWaitStatusText=function(){return this.getContactUsView().then(function(n){return n&&{waitTimeSingular:n.waitTimeSingular,waitTimePlural:n.waitTimePlural,usersWaitingSingular:n.usersWaitingCountTextSingular,usersWaitingPlural:n.usersWaitingCountTextPlural,connecting:n.connectingWait}})};this.getSupportedLocales=function(){return s("callback","supportedLocales")};this.getUnauthForm=function(){return s("form")};this.getServiceAgreement=function(){var n=s("serviceAgreement"),t=s("serviceAgreementLink");return n&&t?{serviceAgreement:n,serviceAgreementLink:t}:null};this.getComingSoon=function(){return s("comingSoon")};this.getContactHeader=function(){return s("contactHeader")};this.getStepConfig=function(){return s("stepListConfig")};this.getContactSupportIcon=function(){return s("contactSupportIcon")};this.getPasscode=function(){return s("passcode")};this.getMicrosoftLogo=function(){return s("microsoftLogo")};this.getMicrosoftLogoAlt=function(){return s("microsoftLogoAlt")};this.getNavigationInterrupted=function(){return s("navigationInterrupted")};this.getSearchView=function(){return s("search")};this.getSearchResultsView=function(){return s("searchResults")};this.getProductView=function(){return s("products")};this.getProductHubPage=function(){return s("products")};this.getProductsMasterList=function(){return s("productsMasterList")};this.getDevicesView=function(){return s("devicesView")};this.getSurfaceRecoveryImageView=function(){return s("surfaceRecoveryImageView")};this.getlifecycleHomepageView=function(){return h.lifecycleHomepageView?n.when(h.lifecycleHomepageView):c("lifecycle").then(function(n){return n.data.lifecycleHomepageView})};this.getlifecycleSearchPageView=function(){return h.lifecycleSearchPageView?n.when(h.lifecycleSearchPageView):c("lifecycle").then(function(n){return n.data.lifecycleSearchPageView})};this.getVerifyMePageView=function(){return h.verifymePageView?n.when(h.verifymePageView):c("verifyme").then(function(n){return n.data.verifymePageView})};this.getFileExchangePageView=function(){return h.fileExchangeView?n.when(h.fileExchangeView):c("fileexchange").then(function(n){return n.data.fileExchangeView})};this.getOrdersView=function(){return s("ordersView")};this.getDeviceRegistrationView=function(){return s("deviceRegistrationView")};this.getLinkFarm=function(){return s("linkFarm")};this.getCommercialHubView=function(){return a("commercialHub")};this.getCommercialIncidentsHub=function(){return a("commercialIncidentsHub")};this.getCreateIncidentsHub=function(){return a("createIncidentsHub")};this.getIncidentDetailHub=function(){return a("incidentDetailHub")};this.getPremierHomeView=function(){return a("premierHomepage")};this.getPremierHomeView2=function(){return a("premierHomepage2")};this.getManageAccountHub=function(){return a("manageAccountHub")};this.getCommercialContactsHub=function(){return a("commercialContactsHub")};this.getCommercialServiceErrorMessages=function(){return a("serviceErrorMessages")};this.getCreateCaseHubAsync=function(){return h.createCasesHub?n.when(h.createCasesHub):c("commercial").then(function(n){return n.data.createCasesHub})};this.getBackText=function(){return s("basePage","contactSupportBack")};this.getCloseText=function(){return s("basePage","contactSupportClose")};this.getLanguageSelectorTitle=function(){return s("basePage","languageSelectorTitle")};this.getLanguages=function(){return s("basePage","languages")?n.resolve(s("basePage","languages")):c("").then(function(){return s("basePage","languages")})};this.getFeedbackCtrl=function(){return s("basePage","feedback")};this.getF1Footer=function(){return s("basePage","f1Footer")};this.getSelfhostFeedback=function(){return s("basePage","selfHostFeedbackView")};this.getOfflineMessage=function(){return s("basePage","offlineMessage")};this.getNotificationBanner=function(){return s("basePage","notificationBanner")};this.getNotificationBannersList=function(){return s("basePage","notificationBannersList")};this.getSmcEngagementValue=function(){return s("basePage","smcEngagementValue")?n.resolve(s("basePage","smcEngagementValue")):c("").then(function(){return s("basePage","smcEngagementValue")})};this.getAllProducts=function(){return s("allProducts")};this.getProductPage=function(){return s("productHubPage")};this.getProductPageCommonView=function(){return s("productPagesCommonView")};this.getProductDetails=function(n){var e=langLocale="/"+f.getLang().toLowerCase()+"/"+n,a=n+"/",o=e+"/",t=s(l,n),r,u;return t||(r=s(l,a)),u=!1,t||r?u=!0:(t=s(l,e),r=s(l,o),t||r?u=!0:(u=!1,c(n,function(c){var g=n.indexOf("?os=")>0?!0:!1,v="",y,p,w,b,k,d;g?v=n.substring(0,n.indexOf("?")):(y=n.lastIndexOf("/"),y=y==-1?n.length:y+1,v=n.substring(0,y));p=langLocale="/"+f.getLang().toLowerCase()+"/"+v;w=c[l];h[l]||(h[l]={});b=!1;k=0;for(productHubPage in w)k++,d={ProductHubPages:w[productHubPage],ProductCommonView:c.productPagesCommonView},h[l][productHubPage]=d,(n==productHubPage||e==productHubPage||a==productHubPage||o==productHubPage)&&(u=!0,t=s(l,e),t||(r=s(l,o))),(v==productHubPage||p==productHubPage||v+"/"==productHubPage||p+"/"==productHubPage)&&(b=!0);!u&&b&&k>1&&i.$broadcast("404Error",{reason:"Compass content not found",response:"404 Error - Compass Content Not Found"})}))),t||(t=r),t};this.getFrePage=function(t){var i=n.defer();return h&&h.fre&&h.fre[t]?i.resolve(h.fre[t]):c("fre/"+t).then(function(n){h.fre=h.fre||{};h.fre[t]=n.data;i.resolve(n.data)},function(n){i.reject(n)}),i.promise};this.getContentSurvey=function(){return s("contentView","contentSurvey")};this.getContentProperties=function(){return s("contentView","contentProperties")};this.getContentProductPicker=function(){return s("contentView","contentProductPicker")};this.getContentMediaWidget=function(){return s("contentView","contentMediaWidget")};this.getKbReferenceText=function(){return s("contentView","kbReference")};this.getMachineTranslation=function(){return s("contentView","machineTranslation")};this.getSelected=function(){return s("contentView","selected")};this.getProductList=function(){var t=n.defer();return h.productsInformation&&h.productsInformation.products?t.resolve(h.productsInformation.products):c("productsConfig").then(function(n){n&&n.data&&n.data.productsInformation&&n.data.productsInformation.products?t.resolve(n.data.productsInformation.products):t.reject("Products missing from compass config")}),t.promise};this.getProduct=function(t){var i=n.defer();return this.getProductList().then(function(n){var r=n.filter(function(n){return n&&n.ecoId==t});r.length==1?i.resolve(r[0]):i.reject("Product not found")}),i.promise};this.getLocaleMapping=function(){var t=n.defer();return h.mappingRules?t.resolve(h.mappingRules):c("localeMapping").then(function(n){n&&n.data&&n.data.mappingRules?t.resolve(n.data.mappingRules):t.reject("Locale mappings list not found")}),t.promise};this.getCollapsibleContentProperties=function(){return s("contentView","collapsibleContentProperties")};this.getInternalContentProperties=function(){return s("contentView","internalContentProperties")};this.getKbBanners=function(){return s("contentView","kbBanners")};this.getKbHotfixCaption=function(){return s("contentView","kbHotfixCaption")};this.getKbRetiredCaption=function(){return s("contentView","kbRetired")};this.getContentIframe=function(){return s("contentView","contentIframe")};this.getPlayVideoCaption=function(){return s("contentView","playVideoCaption")};h=e.SiteContentConfig&&e.SiteContentConfig.ClientCompassCachingEnabled&&e.SiteContentConfig.ClientCompassCacheTimeout?o.getCacheContent(b())||{}:{}}])}(angular.module(portalCommon)),function(n){n.service("contentApiService",["clientConfig","$q","currentLanguageService","restDataService","flightService",function(n,t,i,r){var e={},f=typeof microsoft!="undefined"&&microsoft.support&&microsoft.support.prefetchedArticle,u,o;f&&f.details.id&&f.details.locale&&(e[f.details.locale+"/"+f.details.id]=f);u="/api/content/";o="/app/content/api/content/";this.getAgentById=function(n){return r.get(u+"GetAgent/"+n)};this.getCompassContentForPage=function(n){return r.get(u+"GetCompassContentForPage/"+n)};this.getCompassContentForProductPages=function(n){return r.get(u+"GetCompassContentForProductPages/"+n)};this.getHelpArticle=function(n,i){var u=e[i+"/"+n],f;return u?t.when(u):(f=o+"help/"+i+"/"+n,r.get(f).then(function(n){var t=n.data;return t&&t.details.locale&&t.details.id&&(e[t.details.locale+"/"+t.details.id]=t),t}))};this.getInstantAnswer=function(n){return r.get(u+"InstantAnswers/"+n)};this.getAsset=function(t){if(n.AuthoringConfig&&n.AuthoringConfig.PreviewAssetApi)return r.get("/authoring/api/content/asset/"+t+"/"+i.getLang().toLowerCase());var u=o+"asset/"+i.getLang().toLowerCase()+"/"+t;return r.get(u)};this.getOneSiteResources=function(){return n&&n.SiteContentConfig&&n.SiteContentConfig.OneSiteEnabled?r.get(u+"OneSite"):null};this.getDevices=function(){return r.get(u+"devices/")}}])}(angular.module(portalCommon)),function(n){n.service("iframeService",["$document","$location","$log","$rootScope","$timeout","$window","compassService",function(n,t,i,r,u,f,e){this.noHostsList="no hosts list - compass not ready";this.init=function(o,s){var c=!1,l=e.getContentIframe(),p,v,h,a,y;if(l&&l.iframeContentHosts)p=l.iframeContentHosts;else return this.noHostsList;if(v=!1,l.iframeTestEnvironments&&angular.forEach(l.iframeTestEnvironments,function(n){n==t.host()&&(v=!0)}),h=o,h=h.indexOf("://")>-1?h.split("/")[2]:h.split("/")[0],h=h.split(":")[0],v?(c=!0,h="*"):angular.forEach(p,function(n){n&&h&&h.indexOf(n)>=0&&(c=!0,h=o)}),!c)return i.warn("Unknown iframe host: "+o),c;n.on("click","a:not(a[id])",function(){var t=$(this).attr("href"),n;t&&(n=this.href,n.protocol=="http"&&(n.protocol="https",$(this).attr("href",n)),$(this).attr("target","_parent"))});return a=null,y=function(n){a&&clearTimeout(a);a=u(function(){var t=n==0?n:n+1;s.postMessage(t,h)},5)},r.$watch(function(){return n[0].body.offsetHeight},function(){u(function(){y(n[0].body.offsetHeight)},0)}),angular.element(f).bind("resize",function(){y(n[0].body.offsetHeight)}),i.info("Page has been iframed by "+o),c}}])}(angular.module(portalCommon)),function(n){n.service("productsService",["$http","$q","$log","sessionStorageService","clientConfig","currentLanguageService",function(n,t,i,r,u,f){function o(n){var t=[];return n&&n.length&&e&&!angular.equals(e,{})&&angular.forEach(n,function(n){n&&e[n.controlType]&&t.push(n)}),t}var e={textArea:!0,textBox:!0};this.getSupportTopics=function(i){var o=f.getLang(),u="supportTopics,"+o+","+i,e=r.get(u);return e?t.when(e):n.get("/api/products/"+i+"/topics",{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetSupportTopics",description:"Get support topics for a product"}}}).then(function(n){var t=n.data;return r.set(u,t),t})};this.getScopingQuestions=function(i,u){var s,e,a=f.getLang(),h,c,l;return u&&(s=e=u[0].id,u[1]&&(e=u[1].id)),h="scopingQuestions,"+a+","+s+","+e,c=r.get(h),c?t.when(c):(l="/api/products/"+i+"/topics/"+s+"/subtopics/"+e+"/questions",n.get(l,{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetScopingQuestions",description:"Get support topics for a product"}}}).then(function(n){var t=n.data;return t=o(t),r.set(h,t),t}))};this.getCustomScopingQuestions=function(i){var c=f.getLang(),e="customScopingQuestions,"+c+","+i,s=r.get(e),l,h;return s?t.when(s):(l=u.ProductsServiceConfig.BaseUrl,h="/api/customsq/"+i,n.get(h,{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetCustomScopingQuestions",description:"Get custom scoping questions"}}}).then(function(n){var t=n.data;return t=o(t),r.set(e,t),t}))};this.getDiagnosticMetadata=function(i,e){var c=f.getLang(),o="diagnosticMetadata,"+c+","+i+","+e,s=r.get(o),l,h;return s?t.when(s):(l=u.ProductsServiceConfig.BaseUrl,h="/api/products/"+i+"/topics/"+e+"/assets",n.get(h,{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetDiagnosticMetadata",description:"Get diagnostic metadata"}}}).then(function(n){var t=n.data,i=t&&t.diagnostic;return r.set(o,i),i}))};this.getProductList=function(i){var l=f.getLang(),a="productList-"+l,s=[],v=[],e=r.get(a)||{},o,h,c;if(e){for(o=0;o<i.length;o++)h=i[o],c=e[h],c?s.push(c):v.push(h);return v.length==0?t.when(s):n.get(u.ProductsServiceConfig.BaseUrl+"/api/"+l+"/products/gds?gdsid="+i.join().trim(),{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetProductsList",description:"Get products list by Ids"}}}).then(function(n){for(var t,i=n.data,u=0;u<i.length;u++)t=i[u],t&&t.gdsId&&(e[t.gdsId]=t);return r.set(a,e),s.concat(i)},function(){return t.reject("ProductsService - Unable to retrieve product list")})}};this.getAllProducts=function(){var s=f.getLang(),o="allproducts",e=r.get(o);return e&&e.expiry&&e.expiry>(new Date).getTime()&&e.products?t.when(e.products):u&&u.ProductsServiceConfig&&u.ProductsServiceConfig.BaseUrl?n.get(u.ProductsServiceConfig.BaseUrl+"/api/"+s+"/products/gds",{httpAppOptions:{cacheBust:!0,qosOperation:{name:"ProductsService.GetAllProducts",description:"Get All known products"}}}).then(function(n){var t=n.data;return t&&t.length>0&&r.set(o,{products:t,expiry:(new Date).getTime()+36e5}),t},function(){return t.reject("ProductsService - Unable to retrieve all product list")}):(i.warn("no product service configuration found"),t.when([]))}}])}(angular.module(portalCommon)),function(n){n.service("restDataService",["$http","$q","$httpParamSerializer","localStorageCacheProvider",function(n,t,i,r){function f(n,t){return r.getValue(n+(t?"?"+i(t):""))}function e(n,t,u){r.setValue(n+(t?"?"+i(t):""),u)}function o(t,i){var r={httpAppOptions:{cacheBust:!0,allowPreview:!0}};return i=i?angular.extend(i,r):r,n.get(t,i)}var u=this;u.get=function(n,i,r,u){var s,h;return(u=typeof u=="undefined"?!1:!!u,u&&(s=f(n,i),s))?t.resolve(s):(h={},r&&(h.qosOperation=r),o(n,{params:angular.extend({},i),httpAppOptions:h}).then(function(t){return u&&e(n,i,t),t}))};u.getData=function(n,t,i,r){return u.get(n,t,i,r).then(function(n){return n.data})}}])}(angular.module(portalCommon)),function(n){n.service("flightService",["$cookies",function(n){var i=this,t={flightCookie:"smc_f",flightSeparator:"|"};this.isUserInFlight=function(n,t){var r=i.getUserFlights();return r&&(t||typeof n=="string")?r.some(function(i){return t?i.match(new RegExp(n)):i.toLowerCase()===n.toLowerCase()}):!1};this.getUserFlights=function(){if(n&&typeof n.get(t.flightCookie)=="string"){var i=n.get(t.flightCookie).toLowerCase();return i.split(t.flightSeparator)}return[]};this.isUserInAnyFlight=function(n){return n.some(function(n){return i.isUserInFlight(n)})}}])}(angular.module(portalCommon)),function(n){n.directive("hipScript",["clientConfig","languageService","getScriptService",function(n,t,i){function r(){return Math.floor(Math.random()*1e11)}var u=function(u,f){var e=n.HipConfig.WebEndpoint+"/GetHIP/GetHipObject/"+f+"?mkt="+t.langLocale()+"&fid="+r()+"&id="+n.HipConfig.PartnerId+"&type=visual&rnd="+r();i.addScript(e,{element:u})};return{restrict:"A",compile:function(n,t){u(n,t.objectName)}}}])}(angular.module(portalCommon)),function(n){n.service("currentLanguageService",["$document","$log","clientConfig","locationService",function(n,t,i){this.setLang=function(n){var i,t;return(i=n==null?location.pathname.substring(1):n.locale,t=h(i),t!=null?r("SMCsiteLang",t):r("SMCsiteLang",n.locale),e(n.direction),t!=null)?t:n.locale};this.getLang=function(){return u("SMCsiteLang")||"en-US"};this.getDirection=function(){return u("SMCsiteDir")||"ltr"};this.setDirection=function(n){return e(n)};this.getFallbackLocaleReverseLookup=function(n){var t=o();for(var i in t)if(t[i].Fallback==n)return t[i].Locale;return null};var s="."+window.location.host,f="; Domain="+s+";expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",r=function(i,r){n[0].cookie=i+"="+r+f;t.info("Set Cookie to:"+i+"="+r+f)},u=function(t){return!t||!n[0]?null:decodeURIComponent(n[0].cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},e=function(n){var t=u("SMCsiteDir");return(r("SMCsiteDir",n),n!=t)?!0:!1},h=function(n){var t=o();for(var i in t)if(t[i].Locale==n)return t[i].Fallback;return null},o=function(){if(i&&i.SupportedLocalesConfig&&i.SupportedLocalesConfig.LanguageFallbacks)return i.SupportedLocalesConfig.LanguageFallbacks}}])}(angular.module(portalCommon)),function(n){n.controller("LanguageController",["$window","$rootScope","$scope","$location","$document","languageService","clientConfig","compassService",function(n,t,r,u,f,e,o,s){var a=e.langLocale();r.displayLanguageSelector=!1;var h=function(){e.languages().then(function(n){r.languages=n;r.languagesListForLargeScreens=l()});r.currentLanguage=e.currentLanguage();r.currentTextDirection=e.currentDirection();r.languageSelectorTitle=s.getLanguageSelectorTitle()},c=function(){t.$digest();n.scrollTo(0,f[0].body.scrollHeight)},l=function(){var n=[],t=[];for($.each(r.languages,function(t,i){n.push(i)}),n=n.sort(function(n,t){return n.displayName<=t.displayName?-1:n.displayName>t.displayName?1:0}),i=0;i<=Math.floor(n.length/4);i++)t[i*4]=n[i];for(i=Math.floor(n.length/4)+1,j=0;i<=Math.floor(n.length/2);i++,j++)t[j*4+1]=n[i];for(i=Math.floor(n.length/2)+1,j=0;i<=Math.floor(n.length*(3/4));i++,j++)t[j*4+2]=n[i];for(i=Math.floor(n.length*(3/4))+1,j=0;i<=n.length;i++,j++)t[j*4+3]=n[i];return t};r.setLanguage=function(n){e.set(n)};r.closeClick=function(){r.displayLanguageSelector=!1;c()};r.$on("languageSelectorClicked",function(){o&&o.SiteContentConfig&&o.SiteContentConfig.LanguageSelectorEnabled&&(r.displayLanguageSelector=r.displayLanguageSelector?!1:!0,c())});r.$on("CompassContentReady",function(){h()});h()}])}(angular.module(portalCommon)),function(n){n.service("languageService",["$rootScope","$routeParams","$location","$q","currentLanguageService","compassService","locationService","clientConfig",function(n,t,i,r,u,f,e,o){var s={},l="displayName",h="",c;this.set=function(n,t){var i=u.getLang().toLowerCase(),r=u.setLang(n),f;i!=r&&(e.getCurrentPath().indexOf(i)==-1&&(i=u.getFallbackLocaleReverseLookup(i)),f=e.getCurrentPath().replace(i.toLowerCase(),r).toLowerCase(),t||e.setPathAndReload(f))};this.redirectWithLocale=function(n){return n!=this.langLocale()&&!u.getFallbackLocaleReverseLookup(n)?(i.path("/"+this.langLocale()+i.path()).replace(),!0):!1};this.langLocale=function(){return u.getLang().toLowerCase()};this.currentDirection=function(){return u.getDirection().toLowerCase()};this.currentLanguage=function(){var n=this.langLocale().toLowerCase();if(s[n])return s[n][l]};this.getLanguageInfo=function(n){var t,i;return!n||Object.keys(s).length===0||!(t=s[n.toLowerCase()])?null:(i=t.displayName.split("-"),angular.extend({country:i[0].trim(),language:i[1].trim()},t))};this.lang=function(){var t=this.langLocale(),n=t.split("-");return n.length>1&&n.pop(),n.join("-")};this.locale=function(){var t=this.langLocale(),n=t.split("-");return n[n.length-1]};this.languages=function(){return s[0]?r.resolve(s):f.getLanguages().then(function(n){return s=n})};this.languageSelectorTitle=function(){return h||(h=f.getLanguageSelectorTitle()),h};this.getSupportedLanguageForGivenCountry=function(n){var i=c(),r,t;for(r in i)if(t=i[r].Locale.split("-"),t[t.length-1].toLowerCase()==n.toLowerCase())return t[0];return null};c=function(){if(o&&o.SupportedLocalesConfig&&o.SupportedLocalesConfig.LanguageFallbacks)return o.SupportedLocalesConfig.LanguageFallbacks};t.langLocale&&this.set(t.langLocale)}])}(angular.module(portalCommon)),function(n){n.directive("textDirection",["currentLanguageService",function(n){return{restrict:"A",compile:function(t){var i=n.getDirection();t.removeAttr("text-direction");t.attr("dir",i);i==="rtl"&&t.addClass("css-rtl")}}}])}(angular.module(portalCommon)),function(n){n.controller("NotificationBannerController",["$scope","$rootScope","$route","$location","compassService","flightService","osService","browserService","notificationBannerService","productPagesService",function(n,t,i,r,u,f,e,o,s,h){function c(){var t,i;a?(n.bannerPlacement="",t=u.getNotificationBannersList(),t&&(n.bannersList=t,l())):(n.bannerPlacement="",i=u.getNotificationBanner(),i&&(n.banner=i,y()))}function v(){l()}function l(){var i,t;n.hasBanner=!1;n.bannersList||(i=u.getNotificationBannersList(),n.bannersList=i);t=s.filterRelevantBanner(n.osVersion,n.browser,n.bannersList);t&&(n.hasBanner=!0,n.isRight=t.alignment&&t.alignment=="right"?!0:!1,n.banner=t.banner,n.bannerPlacement=s.getBannerPlacement(n.bannersList.notificationBannerLayout))}function y(){var u,f,e,s,o,t;if(n.hasBanner=!1,u=!0,n.banner&&n.banner.exclusionPageList)for(f=n.banner.exclusionPageList,t=0;t<f.length;t++)r.path().search(f[t])>-1&&(u=!1);if(e=!1,n.banner&&n.banner.associatedOSList)for(s=h.getVersionValue(n.osVersion),o=n.banner.associatedOSList,t=0;t<o.length;t++)s==o[t]&&(e=!0);e==!0&&u==!0&&(n.hasBanner=!0,n.isRight=!0,n.bannerPlacement=i&&i.current&&i.current.data&&i.current.data.isLandingPage&&i.current.data.isLandingPage==!0?"above-search":"below-search")}var a=!1;n.reset=function(){n.osVersion=e.getOS();n.browser=o.determineBrowser();a=f.isUserInAnyFlight(["mnb-1"]);c()};n.$on("$routeChangeSuccess",function(){v()});n.$on("CompassContentReady",function(){c()});n.reset()}])}(angular.module(portalCommon)),function(n){n.service("notificationBannerService",["$rootScope","$log","$location","$window","compassService","languageService","osService","browserService","productPagesService",function(n,t,i,r,u,f,e,o,s){var h=s.getVersionValue(e.getOS()),c=o.determineBrowser(),l=f.langLocale();this.filterRelevantBanner=function(n,t,r){var u,o,s,c,a,v,f,e,y;if(r)for(u=0;u<r.notificationBannerList.length;u++){var p=!1,w=!1,b=!1,k=r.notificationBannerList[u];if(r.notificationBannerList[u].associatedOSList)if(o=r.notificationBannerList[u].associatedOSList.length,o==0)p=!0;else for(f=0;f<o;f++)h==r.notificationBannerList[u].associatedOSList[f]&&(p=!0);if(r.notificationBannerList[u].associatedBrowsersList)if(s=r.notificationBannerList[u].associatedBrowsersList.length,s==0)w=!0;else for(f=0;f<s;f++)t==r.notificationBannerList[u].associatedBrowsersList[f]&&(w=!0);if(r.notificationBannerList[u].associatedLocalesList)if(c=r.notificationBannerList[u].associatedLocalesList.length,c==0)b=!0;else for(f=0;f<c;f++)l==r.notificationBannerList[u].associatedLocalesList[f]&&(b=!0);if(a=!0,r.notificationBannerList[u].exclusionPageList)for(v=r.notificationBannerList[u].exclusionPageList,f=0;f<v.length;f++)i.path().search(v[f])>-1&&(a=!1);if(p==!0&&a==!0&&b==!0&&w==!0)return e=r.notificationBannerList[u],y=this.getimageClassName(e.productImageLocation),e.productImageLocation=y.imageClassName,{banner:e,alignment:y.alignment}}};this.getimageClassName=function(n){var t="",i="";n.indexOf("banner-image")>-1&&(n=n.substring(13,n.length));switch(n){case"top-right":t="banner-image-top-right";i="right";break;case"bottom-right":t="banner-image-bottom-right";i="right";break;case"right":t="banner-image-right";i="right";break;case"top-left":t="banner-image-top-left";i="left";break;case"bottom-left":t="banner-image-bottom-left";i="left";break;case"left":t="banner-image-left";i="left"}return{imageClassName:t,alignment:i}};this.getBannerPlacementFromCompass=function(){var n=u.getNotificationBannersList(),t="",i;return n&&n.notificationBannerList&&n.notificationBannerLayout&&(i=this.filterRelevantBanner(h,c,n),i&&(t=this.getBannerPlacement(n.notificationBannerLayout),t==""&&(t="above-search"))),t};this.getBannerPlacement=function(n){var u="",t,r;if(n)for(t=0;t<n.length;t++)for(r=0;r<n[t].assosicatedPagesList.length;r++)if(i.path().search(n[t].assosicatedPagesList[r])>-1){u=n[t].bannerLayout;break}return u};this.getLegacyBanner=function(){var n=u.getNotificationBanner();n}}])}(angular.module(portalCommon)),function(n){n.service("productPagesService",["$rootScope","$log","$location","$window","languageService","locationService","osService",function(n,t,i,r,u,f,e){this.checkProductforOSDetection=function(n){var i,h,r,t,f,o;if(n&&n.url){if(i=n.url,h="products/",n.subversions.length>0){var c=e.getOS(),l=this.getVersionValue(c),s="os=",u=!1;for(r=0;r<n.subversions.length;r++)if(t=n.subversions[r],f=i.search(s),f!=-1){t=i;u=!0;break}else if(o=t.substring(s.length-1,t.length),o===l){t=i+n.subversions[r];u=!0;break}return u||(t=i+n.subversions[0]),t}return n.url}};this.getParentPath=function(n){var r=n.split("/"),u,t,i;if(r.length-2!=0){for(u=r.length-1,t="products/",i=1;i<u;i++)t=t+r[i]+"/";return t}return n};this.getVersionValue=function(n){if(n){var t=n.toLowerCase();return t.split(" ").join("-")}}}])}(angular.module(portalCommon)),function(n){n.service("sdkProxyService",["$q","$window","$location",function(n,t){function h(){return r?n.resolve(r):f.promise}function c(){o=!0}function l(){return i&&i.isInSdk()}var r,u,e,o,f=n.defer(),i=window.SupportSdkIntegration,s;i&&(e=i.HostType,u=i.configFromUrl(window.location.href),s=i.createProxy(u,function(){r=s;f.resolve(r);$(t).bind("unload",function(){o||r.dispatchEvent("Unloaded")})},function(n){console.log(n.message);f.reject(n)}));this.config=u;this.hostTypes=e;this.proxy=h;this.disableUnload=c;this.isInSdk=l}])}(angular.module(portalCommon));microsoft=microsoft||{};microsoft.support=microsoft.support||{};microsoft.support.config=microsoft.support.config||{};microsoft.support.config.authInfo=microsoft.support.config.authInfo||{},function(n){n.authState=2;n.isLoggedIn=function(){return n.puid!=null};n.authStatus=function(){return n.authState};n.userSignedIn=function(t){n.puidAsHex=t.puidAsHex;n.displayName=t.displayName;n.puid=t.puid;n.firstName=t.firstName;n.lastName=t.lastName;n.cid=t.cid;n.authState=1;i();r()};n.userSignedOut=function(){n.puidAsHex=null;n.displayName=null;n.puid=null;n.firstName=null;n.lastName=null;n.cid=null;n.authState=0;i();u()};var r=function(){var n=t();n&&n.$broadcast("UserSignedIn")},u=function(){var n=t();n&&n.$broadcast("UserSignedOut")},i=function(){var n=t();n&&n.$broadcast("AuthStatusChange")},t=function(){var n=angular.element(document.body),t=n&&n.scope();return t&&t.$root};return n}(microsoft.support.config.authInfo),function(n){n.service("clientTelemetryService",["clientConfig","$window","$location","$cookies","languageService","osService","flightService","$injector",function(n,t,i,r,u,f,e,o){var l=this,a=e.isUserInFlight("aad-1"),h=o.has("nativeAppService")?o.get("nativeAppService"):null,c=o.has("chatStateService")?o.get("chatStateService"):null,s;t&&t.Asimov&&(t.Asimov.appId="JS:"+i.host());this.pushEvent=function(n){t&&t.Asimov&&t.Asimov.writeEvent&&t.Asimov.writeEvent(n)};this.populateDefaultFields=function(i){var l,s,e;return i.content[i.name].userAgent=t.navigator.userAgent,i.content[i.name].server=n.UserPropertyConfig&&n.UserPropertyConfig.EnvironmentType!==undefined?n.UserPropertyConfig.EnvironmentType:"",i.content[i.name].muid=r.get("MUID"),a?(l=o.has("authService")?o.get("authService"):null,l?(s=l.getUserInfo(),i.content[i.name].puid=s&&s.puid?s.puid:"0"):i.content[i.name].puid="0"):i.content[i.name].puid=n.authInfo&&n.authInfo.puid!==undefined?n.authInfo.puid:"0",i.content[i.name].language=u.lang()?u.lang():"",i.content[i.name].locale=u.locale()?u.locale():"",i.content[i.name].isNative=h&&h.isNative()?!0:!1,i.content[i.name].isMobile=f.isMobile(),i.content[i.name].partnerId=r.get("smcpartner"),i.content[i.name].flightId=r.get("smc_f"),i.content[i.name].parentCv=c&&c.getParentCv()?c.getParentCv().toString():"",e=r.get("ANON"),e!=null&&e.length>2&&(i.content[i.name].anid=e.substring(2,e.indexOf("&"))),i};n&&n.ClientLogConfig&&n.ClientLogConfig.ScriptErrorLogging&&(t.onerror=function(n,t,i,r,u){try{var e=u?u.stack:(new Error).stack,f={name:"Microsoft.Mac.SelfAssist.WindowOnError",content:{"Microsoft.Mac.SelfAssist.WindowOnError":{errorMessage:n,url:t,lineNumber:i,colNumber:r,errorObject:u?JSON.stringify(u):""}}};f=l.populateDefaultFields(f);l.pushEvent(f)}catch(o){}return!1});s=r.get("MS-CV");t&&t.Asimov&&t.Asimov.CorrelationVector&&(s!==null&&t.Asimov.CorrelationVector.isValid(s)?t.Asimov.cv.setValue(s):t.Asimov.CorrelationVector.init&&(s=t.Asimov.CorrelationVector.init()),r.put("MS-CV",s,{domain:"microsoft.com",path:"/"}));t&&t.location&&t.location.host&&t.location.host.indexOf("partner")<0&&(h&&h.isNative()?r.put("smcpartner","csapp"):r.put("smcpartner","smc")),function(){if(t&&t.Asimov){var n=t.Asimov._validateAndTranslateEvent;t.Asimov._validateAndTranslateEvent=function(i){var r;return r=n.call(t.Asimov,i),t.Asimov.appId!=null&&(r.event.appId=t.Asimov.appId),r}}}()}])}(angular.module(portalCommon)),function(n){n.service("correlationVectorService",["$window","$rootScope","$cookies",function(n,t,i){this.extendCv=function(){if(n&&n.Asimov&&n.Asimov.cv){n.Asimov.cv.extend();var r=i.get("MS-CV");r&&n.Asimov.CorrelationVector.isValid(r)&&i.put("MS-CV",n.Asimov.cv.getValue(),{domain:"microsoft.com",path:"/"});t.$broadcast("cvExtention",n.Asimov.cv.getValue())}};this.getValue=function(){return n&&n.Asimov&&n.Asimov.cv?n.Asimov.cv.getValue():""}}])}(angular.module(portalCommon)),function(n){n.service("jsllService",["$log",function(n){this.captureContentUpdateTimings=function(t,i){if(!window.awa||!window.awa.ct){n.warn("jsllService requires JSLL 4.0 or later");return}window.awa.ct.captureContentUpdate({pageName:t,timings:i})}}])}(angular.module(portalCommon)),function(n){n.service("linkTaggingService",["$document",function(n){this.tagContainerLinks=function(t,i){i=i?i+"-":"";angular.forEach(n.find(t+" a"),function(n,t){angular.element(n).attr("id",i+"link-"+(t+1))})}}])}(angular.module(portalCommon)),function(n){n.service("pageLoadTimeService",["$document","$log","performanceTimingService","performanceTelemetryService",function(n,t,i,r){function f(){var t,n;for(t in u.featureLogs)n=u.featureLogs[t],i.domLoading()>0&&i.fetchStart()>0&&(n.serverTime=i.domLoading()-i.fetchStart()),i.domComplete()>0&&i.domLoading()>0&&(n.browserTime=i.domComplete()-i.domLoading()),n.hasOwnProperty("featureComplete")&&n.hasOwnProperty("featureStart")&&(n.featureTime=n.featureComplete-n.featureStart),!n.hasOwnProperty("firstLoadRecorded")&&n.hasOwnProperty("featureComplete")&&i.fetchStart()>0&&(n.firstLoadRecorded=!0,n.experienceLoaded=n.featureComplete-i.fetchStart()),e(n)&&n.hasOwnProperty("experienceLoaded")&&delete n.experienceLoaded}function e(n){return o(n)?(r.push(n),!0):!1}function o(n){return angular.isNumber(n.serverTime)&&angular.isNumber(n.browserTime)&&angular.isNumber(n.featureTime)}var u=this;this.featureLogs={};this.featureLoadStarted=function(n){u.featureLogs.hasOwnProperty(n)||(u.featureLogs[n]={name:n});u.featureLogs[n].featureStart=i.now();f()};this.featureLoadCompleted=function(n){if(u.featureLogs[n]){u.featureLogs[n].featureComplete=i.now();f();return}t.warn("unknown feature during featureLoadCompleted call will be ignored")};n[0].onreadystatechange=function(){n[0].readyState==="complete"&&f()}}])}(angular.module(portalCommon)),function(n){n.service("performanceTelemetryService",["jsllService",function(n){this.push=function(t){var i={CLT:t.featureTime};t.hasOwnProperty("experienceLoaded")&&(i.ATV=t.experienceLoaded);n.captureContentUpdateTimings(t.name,i)}}])}(angular.module(portalCommon)),function(n){n.service("performanceTimingService",[function(){this.fetchStart=function(){return performance.timing.fetchStart};this.domLoading=function(){return performance.timing.domLoading};this.domComplete=function(){return performance.timing.domComplete};this.now=function(){return Date.now()}}])}(angular.module(portalCommon)),function(n){n.factory("qosTelemetryInterceptor",["$q","$rootScope","$log",function(n,t,i){function u(n){return o.some(function(t){return t.test(n)})}function f(n){var i={};i.latency=(new Date).getTime()-n.config.startTime;i.status=n.status;i.operation=n.config.url;n.config&&n.config.httpAppOptions&&n.config.httpAppOptions.qosOperation&&(i.qosOperation=n.config.httpAppOptions.qosOperation);t.$broadcast("QoS",i)}function e(n){var i={};i.operation="//app/invalid-request";i.status=500;i.latency=0;i.custom=JSON.stringify(n);t.$broadcast("QoS",i)}var r={},o=[/html$/,/^\/\/caribe/];return r.request=function(n){return n.startTime=(new Date).getTime(),n},r.response=function(n){return n&&n.config&&!u(n.config.url)&&f(n),n},r.responseError=function(t){return t&&t.config&&!u(t.config.url)?f(t):e(t),i.error("Error occurred during http request",JSON.stringify(t)),n.reject(t)},r}])}(angular.module(portalCommon)),function(n){n.service("qosTelemetryService",["$rootScope","$q","$window","$location","$injector","clientTelemetryService",function(n,t,i,r,u,f){function c(n){var t=n.operation.replace(/[?].*/,"");return t.match(/^\/api/)?t=t.split("/").splice(0,4).join("/"):t.match(/^https:\/\/dgps/)&&(t=o.dgps.suggest),t===o.awasa.error&&n.custom&&n.custom.errorCode&&(t=t+"/"+n.custom.errorCode.toLowerCase()),t}function l(n){return n.latency="latency"in n?n.latency:-1,n.operation="operation"in n?n.operation:"",n.status="status"in n?n.status+"":"",n.error="error"in n?n.error:-1,n.custom="custom"in n?n.custom:"",n.subject=h&&h.getSubject()||"",n}function s(n,t){var i,u,n;t=l(t);i=t.qosOperation!=null?t.qosOperation.name:c(t);u=t.qosOperation!=null?t.qosOperation.description:e[i]?e[i].description:"";angular.isObject(t.custom)&&(t.custom=JSON.stringify(t.custom));n={name:"Ms.Webi.OutgoingRequest",content:{"Ms.Qos.OutgoingServiceRequest":{operationName:i,dependencyName:"SelfAssistWeb",dependencyType:"WebService",dependencyOperationName:i,latencyMs:t.latency,targetUri:t.operation,succeeded:t.status>=200&&t.status<400,serviceErrorCode:t.error,protocolStatusCode:t.status},"Ms.Webi.OutgoingRequest":{description:u,route:r.url(),visitId:h&&h.getVisitId(),custom1:t.custom}}};n=f.populateDefaultFields(n);f.pushEvent(n)}var a=this,h=u.has("chatStateService")?u.get("chatStateService"):null,o={app:{exception:"//app/exception",error:"//app/error",unknownRoute:"//app/unknown-route",unknownCommand:"//app/unknown-command",commandError:"//app/command-error",dupeCommandError:"//app/dupe-command-error",invalidRequest:"//app/invalid-request",beginsharing:"//app/begin-sharing",pausesharingbyuser:"//app/pause-sharing-by-user",resumesharingbyuser:"//app/resume-sharing-by-user",endsharingbyuser:"//app/end-sharing-by-user",downloadCSS:"//app/download-css"},awasa:{error:"//awasa/error",callback:"//awasa/callback",chat:"//awasa/chat",times:"//awasa/times",sendMessage:"//awasa/message",disengage:"//awasa/disengage",download:"//awasa/download",initialize:"//awasa/initialize",lazyInitialize:"//awasa/initialize-lazy",channelDisconnect:"//awasa/channel-disconnect",channelReconnect:"//awasa/channel-reconnect",channelUnavailable:"//awasa/channel-unavailable",agentDisconnect:"//awasa/agent-disconnect",agentReconnect:"//awasa/agent-reconnect",sendCommand:"//awasa/send-command",channelStatus:"//awasa/channel-status",chatReconnectTimedOut:"//awasa/chat-reconnect-timeout",getQueueLength:"//awasa/get-queue-length",postChatTranscript:"//awasa/post-chat-transcript",setSubject:"//awasa/set"},dgps:{suggest:"//dgps/suggestions",unknownLocale:"//dgps/unknownlocale",invalid:"//dgps/invalid"},"native":{appStartContext:"//app/appStartContext"},dbs:{invalid:"//dbs/invalid"},hip:{download:"//hip/download"},geo:{init:"//geo/init",changes:"//geo/changes"},auth:{unknownSilentAuth:"//auth/unknown-silent-auth",aadSilentAuth:"//auth/aad-silent-auth",aadStateMismatch:"//auth/aad-state-mismatch",meControlLoad:"//auth/me-control-loaded",meControlState:"//auth/me-control-partial-state",meControlShellLoaded:"//aap//mecontrol-shell-loaded"},supportsdk:{getModalitiesApi:"//supportsdk/get-modalities-api",renderChatUI:"//supportsdk/render-chat-ui",renderCallbackUI:"//supportsdk/render-callback-ui",renderScheduleCallbackUI:"//supportsdk/render-schedulecallback-ui",renderVirtualAgentUI:"//supportsdk/render-virtualagent-ui"},partnerDataService:{chatContextService:"//service/missingchatcontextservice",contextFormat:"//service/contextformat"}},e;this.eventTypes=o;e={};e["/api/content/GetAgent"]={description:"Event triggered when agent information is requested from Awasa."};e["/api/content/GetCompassContentForPage"]={description:"Event triggered when resources such as strings and images are requested from Compass."};e["/api/content/GetCompassContentForProductPages"]={description:"Event triggered when resources such as strings and images for Product Pages are requested from Compass and or Portico."};e["/api/content/GetCompassContentForPartner"]={description:"Event triggered when resources such as strings are requested from Compass for a partner."};e["/api/Devices/Index"]={description:"Event triggered when device information associated with the user is requested from DDS."};e["/api/kb/GetKbArticle"]={description:"Event triggered when a KB article is requested."};e["/api/search/index"]={description:"Event triggered to provide search results for a given search term"};e["/api/Token/GetToken"]={description:"Event triggered when a security token to allow the user to use the chat and callback functionality is requested from the Awasa Security service."};e["/api/Token/GetUserState"]={description:"Event triggered when encryption of user information is requested from Awasa."};e["/api/v1/AutoSuggestion"]={description:"Event triggered when autosuggestions are requested from DGPS. This request goes directly to the DGPS endpoint."};e["/app/ScheduleCallbackTimesTimeout"]={description:"Event triggered when a timeout occurs while waiting for the times available to schedule a call."};e[o.app.error]={description:"Event triggered when an error occurs in the code running on the client side."};e[o.app.exception]={description:"Event triggered when exception is caught by the AngularJS exception handler."};e[o.app.unknownRoute]={description:"Event triggered when the user attempts to go to a route not rendered by support.microsoft.com"};e[o.app.unknownCommand]={description:"Event triggered when the a command received from the native app is not understood or is unknown to web"};e[o.app.commandError]={description:"Event triggered when a command received from the native app has failed"};e[o.app.dupeCommandError]={description:"Event triggered when a duplicate command is sent to the app for processing, only one of a type should fire at a time."};e[o.app.beginsharing]={description:"Event triggered when beginsharing command is sent from web to app"};e[o.app.pausesharingbyuser]={description:"Event triggered when pausesharingbyuser command is sent from web to app"};e[o.app.resumesharingbyuser]={description:"Event triggered when resumesharingbyuser command is sent from web to app"};e[o.app.endsharingbyuser]={description:"Event triggered when endsharingbyuser command is sent from web to app"};e[o.app.downloadCSS]={description:"Event triggered when CSS is downloaded"};e[o.awasa.callback]={description:"Event triggered when a callback (either schedule or immediate) is requested from Awasa. This request goes directly to the Awasa endpoint."};e[o.awasa.chat]={description:"Event triggered when a chat is queued. This request goes directly to the Awasa endpoint."};e[o.awasa.disengage]={description:"Event triggered when a chat is ended or a user leaves the queue. This request goes directly to the Awasa endpoint."};e[o.awasa.error]={description:"Event triggered when an error occurs in the client-side Awasa framework."};e[o.awasa.sendMessage]={description:"Event triggered when a message is sent or received from the chat experience. This request goes directly to the Awasa endpoint."};e[o.awasa.times]={description:"Event triggered when a user request to see the open time slots to schedule a call. This request goes directly to the Awasa endpoint."};e[o.awasa.download]={description:"Event triggered when the Awasa SDK is downloaded to the client"};e[o.awasa.initialize]={description:"Event triggered when the 'loaded' callback is called from the Awasa SDK. Indicates that the Awasa SDK has successfully been initialized."};e[o.awasa.channelReconnect]={description:"Event triggered from the Awasa SDK when the user reconnects to the chat after being disconnected"};e[o.awasa.channelDisconnect]={description:"Event triggered from the Awasa SDK when a connection issue occurs on the user side of a chat"};e[o.awasa.channelUnavailable]={description:"Event triggerd when a modality is in HOOPs but unavailable for other reasons"};e[o.awasa.agentDisconnect]={description:"Event triggered from the Awasa SDK when a connection issue occurs on the agent side of a chat"};e[o.awasa.agentReconnect]={description:"Event triggrered from the Awasa SDK when the agent reconnects to the chat after being disconnected"};e[o.awasa.sendCommand]={description:"Event triggered when a command is sent to the agent via the Awasa SDK."};e[o.awasa.channelStatus]={description:"Event triggered when chat and callback status is requested from the Awasa SDK."};e[o.awasa.chatReconnectTimedOut]={description:"Event triggered when attempting to reconnect chat times out."};e[o.native.appStartContext]={description:"Event triggered when the app starts and sends back context on how the app was launched."};e[o.awasa.getQueueLength]={description:"Event triggered from the Awasa SDK when it fails to retrieve the queue position."};e[o.awasa.postChatTranscript]={description:"Event triggered when a request to the Awasa post transcript API occurs."};e[o.awasa.setSubject]={description:"Event triggered when a request to the Awasa to set SubjectName API occurs."};e["//awasa/callback/channel_error"]={description:"Event triggered when there is an issue with the Awasa callback channel."};e["//awasa/callback/channel_contactinvalid"]={description:"Event triggered when the contact number is rejected as invalid by the telephony service"};e["//awasa/callback/request_unauthorized"]={description:"Event triggered when a callback API call is made with an invalid token"};e[o.geo.init]={description:"Event triggered by geoComponent when it is instantiated/used"};e[o.geo.changes]={description:"Event triggered by geoComponent when bindings are changed/updated"};e[o.auth.unknownSilentAuth]={description:"Event triggered when resolve auth state times out without resolving"};e[o.auth.aadSilentAuth]={description:"Event triggered when we are having issues with completing AAD silent auth flow"};e[o.auth.aadStateMismatch]={description:"Event triggered by auth service when we are having state mismatch issues with silent AAD auth"};e[o.auth.meControlLoad]={description:"Event triggered by auth service when we are having issues loading me control shell - when this happens we use the fallback L0Header as Universal Header is not available at all"};e[o.auth.meControlState]={description:"Event triggered by auth service me control is having issues and is in a partial working state i.e sign in/out works, dropdown and user pic does not"};e[o.auth.meControlShellLoaded]={description:"Event triggred when application uses to load me control shell"};e[o.supportsdk.getModalitiesApi]={description:"Event triggered when we use the support SDK to get modalities for a given product and issue."};e[o.supportsdk.renderChatUI]={description:"Event triggered when we load the chat popup window using the support sdk and wait for the loaded callback."};e[o.supportsdk.renderCallbackUI]={description:"Event triggered when we load the callback popup window using the support sdk and wait for the loaded callback."};e[o.supportsdk.renderScheduleCallbackUI]={description:"Event triggered when we load the schedulecallback popup window using the support sdk and wait for the loaded callback."};e[o.supportsdk.renderVirtualAgentUI]={description:"Event triggered when we load the virtualagent popup window using the support sdk and wait for the loaded callback."};e[o.partnerDataService.chatContextService]={description:"Event triggered when we use chatContextService to set context from partner."};e[o.partnerDataService.contextFormat]={description:"Event triggered when we try to parse the context from partner."};this.createEvent=function(n){var i={operation:n},r=(new Date).getTime(),u=t.defer();return u.promise.then(function(n){i.latency=(new Date).getTime()-r;i.status=200;i.custom=n||"";s({},i)},function(n){i.latency=(new Date).getTime()-r;i.status=n&&n.status||500;i.custom=n||"";s({},i)}),u};n.$on("QoS",s);n.$on("AutoSuggestBadResults",function(){a.createEvent(o.dgps.invalid).reject()});n.$on("500Error",function(n,t){t&&s(n,{operation:o.app.error,status:"500",custom:t})});n.$on("404Error",function(n,t){t&&s(n,{operation:o.app.unknownRoute,status:"404",custom:t})});n.$on("AppStartContext",function(n,t){s(n,{operation:o.native.appStartContext,status:"200",custom:t})})}])}(angular.module(portalCommon)),function(n){n.service("meControlService",["$window","$timeout","qosTelemetryService","$q",function(n,t,i,r){this.shellDefined=function(){var e=i.createEvent(i.eventTypes.auth.meControlShellLoaded),u=r.defer(),f;return n.msCommonShell?u.resolve():(f=t(function(){u.reject()},5e3),n.onShellReadyToLoad=function(){n.onShellReadyToLoad=null;t.cancel(f);n.msCommonShell?u.resolve():u.reject()}),u.promise}}])}(angular.module(portalCommon)),function(n){n.directive("scrollTrack",["$window","wedcsService",function(n,t){return{restrict:"A",link:function(i){var r=!1;angular.element(n).off("scroll");angular.element(n).on("scroll",function(){!r&&n&&n.scrollY&&n.innerHeight&&(n.scrollY>n.innerHeight||n.scrollY+n.innerHeight+1>=$(document).height())&&(r=!0,t.logCustomEvent("fullview-scroll"))});i.$on("destroy",function(){angular.element(n).off("scroll")})}}}])}(angular.module(portalCommon)),function(n){n.service("wedcsService",["$rootScope","$window","$timeout","$route",function(n,t,i,r){function h(n){return n.type=="checkbox"?n.checked+"_"+n.value:n.nodeName=="A"?n.href:n.value}function o(n){var t="";return n.id&&(t="elemId_"+n.id),n.name&&(t=t+"_elemName_"+n.name),n.parentNode&&n.parentNode.id&&(t=t+"_parId_"+n.parentNode.id),n.parentNode&&n.parentNode.name&&(t=t+"_parName_"+n.parentNode.name),n.parentNode&&n.parentNode.parentNode&&n.parentNode.parentNode.id&&(t=t+"_parParId_"+n.parentNode.parentNode.id),n.parentNode&&n.parentNode.parentNode&&n.parentNode.parentNode.name&&(t=t+"_parParName_"+n.parentNode.parentNode.name),n.parentNode&&n.parentNode.parentNode&&n.parentNode.parentNode.parentNode&&n.parentNode.parentNode.parentNode.id&&(t=t+"_parParParId_"+n.parentNode.parentNode.parentNode.id),n.parentNode&&n.parentNode.parentNode&&n.parentNode.parentNode.parentNode&&n.parentNode.parentNode.parentNode.name&&(t=t+"_parParParName_"+n.parentNode.parentNode.parentNode.name),n.className&&(t=t+"_elemClass_"+n.className),n.type&&(t=t+"_elemType_"+n.type),t}function f(n){n.hasAttribute("data-nolog")||u(o(n),"userAction",{"ms.scvalue":h(n)})}function s(n,t){n.hasAttribute("data-nolog")||u(t,"userAction",{"ms.scvalue":JSON.stringify({value:h(n),label:o(n)})})}function u(n,i,r){if(n&&t&&t.MscomCustomEvent){var u=[];r=r||{};r["ms.scn"]=n;i&&(r["ms.scnct"]=i);angular.forEach(r,function(n,t){u.push(t+"="+n)});t.MscomCustomEvent.apply(t,u)}}var c=!1,e;this.logWEDCS=f;this.logWEDCSElementEvent=s;this.logCustomEvent=u;$(document).ready(function(){var n={};$(document).on("click","input[type='radio'], input[type='checkbox'], button, a:not(a[id]), li",function(){f(this)});$(document).on("keydown","a",function(n){n.which==13&&s(this,"enter-key")});$(document).on("mouseover","input[type='radio'], input[type='checkbox'], button, a",function(){var t=o(this);n[t]&&i.cancel(n[t]);n[t]=i(function(){s(this,"hover");delete n[t]}.bind(this),1e3)});$(document).on("change","textarea, select",function(){f(this)})});n.$on("ButtonClickedAndDisabled",function(n,t){f(t.target)});n.$on("ChatMessageReceived",function(){u("agent-chat-post","chatAction")});n.$on("ChatMessageSendSuccess",function(){u("customer-chat-post","chatAction")});n.$on("$routeChangeSuccess",function(){r.current.controller!=="SupportMenuController"||c||(t&&t.MscomCustomEvent&&t.MscomCustomEvent("ms.scnct","CAD-Displayed"),c=!0)});n.$on("$routeChangeStart",function(){if(t&&t.MscomCustomEvent){n&&i.cancel(n);var n=i(function(){u("route-change-start","viewLoad",{cot:"0"})},250)}e&&i.cancel(e)});n.$on("PageResourcesDownloaded",function(n,t){i(function(){u("page-resources-downloaded","",t)},250);e=i(function(){u("no-bounce","",t);e=null},8e3)});n.$on("404Error",function(){u("page-resources-not-found","",{"ms.scvalue":"404"})});n.$on("500Error",function(){u("page-resources-download-failed","",{"ms.scvalue":"500"})})}])}(angular.module(portalCommon));angular.module("portalCommon").run(["$templateCache",function(n){n.put("/PartialViews/Chrome/survey.html",'<div ng-if="$ctrl.isElibigleForSurvey">\r\n    <div class="survey-tab" ng-class="$ctrl.inviteClass">\r\n        <button id="smc-survey-external-feedback-button" class="btn-primary" ng-if="!$ctrl.showInternalFeedback" ng-click="$ctrl.showPopupSurvey()">{{$ctrl.buttonLabel}}<\/button>\r\n        <a id="smc-survey-internal-feedback-button" class="btn btn-primary" ng-if="$ctrl.showInternalFeedback" ng-href="mailto:{{$ctrl.internalFeedbackContent.selfHostFeedbackEmailTo}}?subject={{$ctrl.internalFeedbackContent.selfHostFeedbackEmailSubject}}&body={{$ctrl.internalFeedbackContent.selfHostFeedbackEmailBody}}{{$ctrl.internalFeedbackContent.currentUrl}}">{{$ctrl.buttonLabel}}<\/a>\r\n    <\/div>\r\n    <div class="container-fluid survey-banner" ng-class="$ctrl.inviteClass">\r\n        <div class="row padded-row win-color-bg-10">\r\n            <div class="col-xs-18" ng-if="!$ctrl.showInternalFeedback">\r\n                <button id="smc-survey-external-feedback-button-mobile"\r\n                   class="btn text-align-left win-color-fg-accent win-color-bg-10 feedback-buttonlink"\r\n                   ng-click="$ctrl.showPopupSurvey()">{{$ctrl.mobileButtonLabel}}<\/button>\r\n            <\/div>\r\n            <div class="col-xs-18" ng-if="$ctrl.showInternalFeedback">\r\n                <button id="smc-survey-internal-feedback-button-mobile"\r\n                   class="btn text-align-left win-color-fg-accent win-color-bg-10 feedback-buttonlink"\r\n                   ng-href="mailto:{{$ctrl.internalFeedbackContent.selfHostFeedbackEmailTo}}?subject={{$ctrl.internalFeedbackContent.selfHostFeedbackEmailSubject}}&body={{$ctrl.internalFeedbackContent.selfHostFeedbackEmailBody}}{{$ctrl.internalFeedbackContent.currentUrl}}">{{$ctrl.mobileButtonLabel}}<\/button>\r\n            <\/div>\r\n            <div class="col-xs-6">\r\n                <button id="smc-survey-feedback-dismiss-mobile"\r\n                   aria-label="{{$ctrl.mobileSurveyInvitationCloseButtonLabel}}"\r\n                   ng-click="$ctrl.mobileInviteDismiss()"\r\n                   class="btn win-color-bg-10"><span aria-hidden="true" tabindex="-1" id="smc-survey-mobile-invite-dismiss" class="win-icon win-icon-Clear"><\/span><\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Chrome/surveyModal.html",'<div autofocus id="smc-survey-container" tabindex="0" aria-label="{{surveyContainerLabel}}"><\/div>\r\n<div class="survey-close-button-container">\r\n    <button id="smc-survey-modal-close-button" ng-click="closeButtonClicked()" class="win-icon win-icon-Clear pull-right" aria-label="{{closeButtonLabel}}"><\/button>\r\n<\/div>\r\n<div class="survey-iframe-container" ng-element-ready="elementReadyShowSurvey()" id="smc-survey-target"><\/div>\r\n<div tabindex="0" aria-label="{{surveyContainerEndLabel}}"><\/div>');n.put("/PartialViews/Chrome/surveyModalTemplate.html",'<div class="modal-dialog survey-modal-dialog"><div class="survey-modal-content" uib-modal-transclude><\/div><\/div>');n.put("/PartialViews/Common/F1Footer.html",'<div class="f1-footer" ng-controller="F1FooterController">\r\n    <!-- Needed to span the full page -->\r\n    <div class="container">\r\n        <div class="row">\r\n            <section class="col-sm-24 col-md-8 section remove-header-rule" ng-repeat="section in viewlinkfarm.sectionList">\r\n                <div class="section-header dropdown-no-toggle-header collapsed">\r\n                    <h3 class="text-base">{{section.header}}<\/h3>\r\n                <\/div>\r\n                <div class="section-header dropdown-toggle-header collapsed">\r\n                    <h3 class="text-base">{{section.header}}<a href="" aria-label="{{section.header}}" aria-expanded="false" role="button" data-toggle="collapse" class="text-title pull-right dropdown-toggle win-icon" data-target="#link-section-footer-{{$index}}"><\/a><\/h3>\r\n                <\/div>\r\n\r\n                <ul id="link-section-footer-{{$index}}" class="list-unstyled section-body collapse landing-section-content">\r\n                    <li ng-repeat="link in section.links"><a id="f1footer-{{link.htmlId}}" ng-href="{{link.linkUrl}}" target="_self">{{link.linkText}}<\/a><\/li>\r\n                <\/ul>\r\n            <\/section>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Common/L0Header.html",'<!-- L0Header.html is used as a fallback in both Portal and VA Verticals in case OneSiteResources are not configured properly or not available -->\r\n<div class="container">\r\n    <div class="row">\r\n        <div class="col-xs-24">\r\n            <div id="l0-header" class="pull-right text-body" ng-controller="L0HeaderController">\r\n                <span id=\'signin-container\' ng-if="userInFlight">\r\n                    <span id=\'signin-display-name\'>{{userDisplayName}}<\/span>\r\n                    <a href="#" ng-click="login()"  ng-hide="isSignedIn">{{ signInText }}<\/a>\r\n                    <a href="#" ng-click="logout()" ng-show="isSignedIn">{{ signOutText }}<\/a>\r\n                <\/span>\r\n                <span id=\'signin-container\' ng-if="!userInFlight">\r\n                    <span id=\'signin-display-name\'>{{userDisplayName}}<\/span>\r\n                    <span ng-bind-html=\'signInLink\'><\/span>\r\n                <\/span>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Common/LoadingSpinner.html",'<div class="progress vatheme-progress-symbol-dot-outline" ng-class="progressClasses" ng-if="isStarted">\r\n    <div class="indeterminate progress-bar vatheme-progress-symbol-dot-outline" role="progressbar" ng-if="indeterminate" ng-class="barClasses">\r\n        <div class="indeterminate-indicators" ng-if="isBar">\r\n            <div class="indicator-1 vatheme-progress-symbol-dot-outline" ng-class="indicatorClasses">\r\n                <div class="dot vatheme-progress-symbol-dot"><\/div>\r\n            <\/div>\r\n            <div class="indicator-2 vatheme-progress-symbol-dot-outline" ng-class="indicatorClasses">\r\n                <div class="dot vatheme-progress-symbol-dot"><\/div>\r\n            <\/div>\r\n            <div class="indicator-3 vatheme-progress-symbol-dot-outline" ng-class="indicatorClasses">\r\n                <div class="dot vatheme-progress-symbol-dot"><\/div>\r\n            <\/div>\r\n            <div class="indicator-4 vatheme-progress-symbol-dot-outline" ng-class="indicatorClasses">\r\n                <div class="dot vatheme-progress-symbol-dot"><\/div>\r\n            <\/div>\r\n            <div class="indicator-5 vatheme-progress-symbol-dot-outline" ng-class="indicatorClasses">\r\n                <div class="dot vatheme-progress-symbol-dot"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="indicator-1 vatheme-progress-symbol-dot-outline" ng-show="!isBar" ng-class="indicatorClasses"><\/div>\r\n        <div class="indicator-2 vatheme-progress-symbol-dot-outline" ng-show="!isBar" ng-class="indicatorClasses"><\/div>\r\n        <div class="indicator-3 vatheme-progress-symbol-dot-outline" ng-show="!isBar" ng-class="indicatorClasses"><\/div>\r\n        <div class="indicator-4 vatheme-progress-symbol-dot-outline" ng-show="!isBar" ng-class="indicatorClasses"><\/div>\r\n        <div class="indicator-5 vatheme-progress-symbol-dot-outline" ng-show="!isBar" ng-class="indicatorClasses"><\/div>\r\n    <\/div>\r\n    <div ng-if="!indeterminate" class="progress-bar" role="progressbar" aria-valuenow="{{progressPercentage}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width: progressPercentage + \'%\'}">\r\n        <span class="sr-only"><\/span>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Common/Locale.html",'<div class="language-selector-section" id="language-selector" ng-controller="LanguageController" ng-show="displayLanguageSelector">\r\n    <div class="container">\r\n        <div class="clearfix text-title spacer-20-top spacer-32-bottom language-selector-section">\r\n            {{ languageSelectorTitle }}\r\n            <a class="win-icon win-icon-Cancel pull-right" ng-click="closeClick()"><\/a>\r\n        <\/div>\r\n        <div class="row spacer-12-bottom hidden-sm hidden-md hidden-lg hidden-xl">\r\n            <div ng-repeat="language in languages | objectOrderBy:\'displayName\'" class="col-sm-6 col-xs-24">\r\n                <a ng-attr-id="{{\'mobile-language-\'+language.locale}}" href="" ng-click="setLanguage(language);">{{language.displayName}}<\/a>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="row spacer-12-bottom hidden-xs">\r\n            <div ng-repeat="language in languagesListForLargeScreens track by $index" class="col-sm-6 col-xs-24">\r\n                <a ng-attr-id="{{\'language-\'+language.locale}}" href="" ng-click="setLanguage(language);">{{language.displayName}}<\/a>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Common/SearchableDropdownTemplate.html",'<div class="searchable-dropdown">\r\n    <div class="search-bar">\r\n        <input class="form-control"\r\n               type="text"\r\n               ng-model="model"\r\n               placeholder="{{prompt}}"\r\n               ng-keydown="selected=false; actionOnKeyDown($event)" />\r\n        <span class="win-icon form-control-feedback" tabindex="-1"> &#xE721; <\/span>\r\n    <\/div>\r\n\r\n    <div class="dropdown">\r\n        <ul class="dropdown-menu item-block"\r\n            ng-hide="!model.length || selected">\r\n            <li class="item"\r\n                ng-repeat="item in filtered = (items | filter:model | limitTo:noLimit ? null : 6)  track by $index"\r\n                ng-click="onItemSelected(item)"\r\n                ng-class="{\'current-active\':current == $index}"\r\n                ng-mouseenter="setCurrent($index)">\r\n                <p class="title">{{item[display]}}<\/p>\r\n            <\/li>\r\n        <\/ul>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/Common/StarRating.html",'<span ng-repeat="star in stars track by $index">\r\n    <label class="star-rating win-icon win-icon-FavoriteStarFill radio"\r\n           aria-hidden="true"\r\n           ng-class="{\'filled\' : $index < ratingValue, \'preview\' : $index < previewValue}"\r\n           ng-mouseover="preview($index)"\r\n           ng-mouseleave="preview(-1)"\r\n           for="{{ name }}-{{$index}}">\r\n    <\/label>\r\n    <input type="radio"\r\n           id="{{ name }}-{{$index}}"\r\n           class="sr-only"\r\n           name="{{ name }}-{{$index}}"\r\n           aria-label="{{ view.starRating + \' \' + ($index + 1) + (($index === 0 || $index === max - 1) ? \' \' + ($index === 0 ? view.badRating : view.goodRating) : \'\') }}"\r\n           ng-click="rate($index)"\r\n           ng-keypress="$event.keyCode === 13 && rate($index)"\r\n           ng-blur="preview(-1)"\r\n           ng-focus="preview($index)"\r\n           ng-required="!optional" />\r\n<\/span>\r\n<div ng-if="ratingValue && scales && scales[ratingValue - 1]" class="text-body rating-scale-label">{{ scales[ratingValue - 1] }}<\/div>\r\n')}]);virtualAgentApp="virtualAgentApp";vaApp=angular.module(virtualAgentApp,["ngSanitize","ngRoute","ngCookies","ngAria","ui.bootstrap","ngMessages","ngFileUpload"]),function(n){n.directive("callback",["$rootScope","$log","$location","$sanitize","$routeParams","$filter","clientConfig","chatStateService","rccService","languageService","compassService","sessionStorageService","phoneNumberService","waitStatusService","modalityTags","unauthNames","authService","flightService","cantileverService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){function d(r){function g(){r.loadingTimes=!0;r.callInfo.times=[];r.callInfo.disableTimeSelect=!0;r.isUserInCantileverFlight?k.getCallbackTime(r.callInfo.date.toISOString().substring(0,19)+"Z",96,o.getSubject()):s.getCallbackTime(r.callInfo.date.toISOString().substring(0,19)+"Z",96,o.getSubject())}function it(n){for(var t=0;t<r.callInfo.availableCountries.length;t++)if(r.callInfo.availableCountries[t].locale.toUpperCase()===n.toUpperCase())return t.toString();return null}function nt(){r.callback=c.getCallback();r.status.waitingOnCompass=!r.callback}function u(n){r.callInfo.currentError=n;r.$apply(function(){r.callInfo.templateUrl="/PartialViews/VirtualAgent.Library/Contact/Callback/Error.html"});r.loadingTimes=!1}function rt(n){var i=[],t,r;for(i.push(new Date),t=1;t<n;t++)r=new Date((new Date).getTime()+t*864e5),r.setHours(0,0,0,0),i.push(r);return i}function tt(n){var f=r.callInfo.date.getDate(),u=[],t,i;for(t in n)i=new Date(n[t]),i.getDate()===f&&u.push({time:n[t],dateobject:i});return u}function d(n,t,i){if(typeof n!="undefined"){var r=parseInt(n,10);i(r)}else return t()}function ut(n){r.callInfo.countryCode=a.selectCountryCode(n);r.callInfo.placeholder=a.getCurrentMask();r.getValidNumber()}r.hoops={};r.config={templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Callback/Callback.html",hoopsEnabled:e.ChatConfig.AllowHoursOfOperation,timeout:e.ChatConfig.ChatDefaultTimeout};r.isCsaThemesFlight=b.isUserInFlight("csa-themes-1");r.isUserInCantileverFlight=b.isUserInFlight("cantilever-1");r.reset=function(){r.awaitingResponse=!0;r.status={waitingOnHoops:!1,waitingOnRcc:!0,waitingOnCompass:!0};r.callInfo={};r.callInfo.countryCodeProperty=function(n){return d(n,function(){return r.callInfo.countryCodeIndex},function(n){n>=0&&n<r.callInfo.availableCountries.length?(ut(r.callInfo.availableCountries[n].locale),r.callInfo.countryCodeIndex=n.toString()):t.error("Index for scope.callInfo.availableCountries is out of bounds. Index: "+n+". Array length: "+r.callInfo.availableCountries.length)})};r.callInfo.dateProperty=function(n){return d(n,function(){return r.callInfo.dateIndex},function(n){n>=0&&n<r.callInfo.availableDates.length?(r.callInfo.date=r.callInfo.availableDates[n],r.callInfo.dateIndex=n.toString(),r.callInfo.availableCountries&&g()):t.error("Index for scope.callInfo.availableDates is out of bounds. Index: "+n+". Array length: "+r.callInfo.availableDates.length)})};r.callInfo.timeProperty=function(n){return d(n,function(){return r.callInfo.timeIndexString},function(n){n>=0&&n<r.callInfo.times.length?(r.callInfo.time=r.callInfo.times[n],r.callInfo.timeIndexString=n.toString()):t.error("Index for scope.callInfo.times is out of bounds. Index: "+n+". Array length: "+r.callInfo.times.length)})};r.callInfo.number=r.phoneNumber||"";r.callInfo.invalidNumber=!1;r.callInfo.times=[];r.callInfo.availableDates=r.isScheduleCallback?rt(7):[];r.callInfo.dateProperty("0");r.callInfo.currentError="";r.callInfo.disableTimeSelect=!0;r.callInfo.number&&r.getValidNumber();var n=!l.get(p.storage),u=w.getSupportedIDP();r.isUserInCantileverFlight?k.init(n,u.MSA,undefined,function(){r.awaitingResponse=!1;r.status.waitingOnRcc=!1;r.config.hoopsEnabled&&!r.isScheduleCallback?(r.status.waitingOnHoops=!0,k.isWithinOperatingHours(o.getSubject(),y.callback).then(function(n){r.status.waitingOnHoops=!1;n[y.callback].isOpen?r.initCallback():i.path("/hoops/callback/"+o.getSubject())})):r.initCallback()}):s.init(n,u.MSA,undefined,function(){r.awaitingResponse=!1;r.status.waitingOnRcc=!1;r.config.hoopsEnabled&&!r.isScheduleCallback?(r.status.waitingOnHoops=!0,s.isWithinOperatingHours(o.getSubject(),y.callback).then(function(n){r.status.waitingOnHoops=!1;n[y.callback].isOpen?r.initCallback():i.path("/hoops/callback/"+o.getSubject())})):r.initCallback()});nt()};r.initCallback=function(){r.callInfo.availableCountries=a.populateDropdown();r.callInfo.countryCodeProperty(it(h.locale()));r.callInfo.templateUrl=r.config.templateUrl;r.isScheduleCallback&&g()};r.requestCall=function(t){if(r.getValidNumber(),!r.callInfo.invalidNumber){n.$broadcast("ButtonClickedAndDisabled",t);r.awaitingResponse=!0;var i=r.callInfo.countryCode.code+" "+r.callInfo.number;r.isScheduleCallback?r.isUserInCantileverFlight?k.enqueueCallback(i,o.getSubject(),a.getCurrentLocale(),r.callInfo.time.time):s.enqueueCallback(i,o.getSubject(),a.getCurrentLocale(),r.callInfo.time.time):r.isUserInCantileverFlight?k.enqueueCallback(i,o.getSubject(),a.getCurrentLocale()):s.enqueueCallback(i,o.getSubject(),a.getCurrentLocale())}};r.goToSuccess=function(){r.isScheduleCallback?(r.callInfo.displayDate=f("date")(r.callInfo.date,"fullDate"),r.callInfo.displayTime=f("date")(r.callInfo.time.dateobject,"shortTime"),r.loadingTimes=!1):v.getCallbackWaitTime().then(function(n){r.callInfo.waitTime=n});r.callInfo.templateUrl="/PartialViews/VirtualAgent.Library/Contact/Callback/Success.html"};r.checkIfValidNumber=function(){var n=a.checkIfValidNumber(r.callInfo);n||(r.callInfo.invalidNumber=!1)};r.getValidNumber=function(){r.callInfo=a.getValidNumber(r.callInfo)};r.disableConfirm=function(){var n=r.callInfo.invalidNumber||!r.callInfo.number||r.callInfo.number.length===0||r.awaitingResponse;return r.isScheduleCallback&&(n=n||r.loadingTimes||r.callInfo.disableTimeSelect),n};r.$on("CompassContentReady",nt);r.$on("CallbackPhoneValidation",function(n,t){t&&!t.isValid&&(r.currentError="invalidPhoneNumber",u())});r.$on("EnqueueCallbackSuccess",function(){r.awaitingResponse=!1;r.goToSuccess()});r.$on("EnqueueCallbackFailure",function(n,t){r.awaitingResponse=!1;t.errorCode==="CHANNEL_CONTACTSCHEDULED"?u("doubleCallback"):t.errorCode==="CHANNEL_CONTACTINVALID"?u("invalidPhoneNumber"):u()});r.$on("EnterCallbackQueueTimeout",function(){r.awaitingResponse=!1;u()});r.$on("CallbackPageTimeout",function(){r.isReady||(r.status.isScheduleCallback=r.isScheduleCallback,n.$broadcast("500Error",{reason:"Timeout occurred on a callback ASAP or schedule callback page",data:r.status}))});r.$on("GetCallbackTimeSuccess",function(n,t){r.callInfo.times=r.isUserInCantileverFlight?tt(t):tt(t.slots);r.callInfo.times.length===0?(r.callInfo.disableTimeSelect=!0,r.callInfo.times=[{dateobject:r.callback.scheduleCallback.noTimesAvailable}]):r.callInfo.disableTimeSelect=!1;r.callInfo.timeProperty("0");r.loadingTimes=!1});r.$on("ScheduleCallbackTimesTimeout",function(){r.loadingTimes=!1;r.awaitingResponse=!1;u()});r.$watchCollection("status",function(n){r.isReady=n&&!Object.keys(n).some(function(t){return n[t]})});r.reset()}return{restrict:"A",scope:{isScheduleCallback:"=",phoneNumber:"@?"},templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Callback/Container.html",link:d}}])}(angular.module(virtualAgentApp)),function(n){n.service("phoneNumberService",["$rootScope","rccService","compassService","flightService","cantileverService",function(n,t,i,r,u){function l(){var n=i.getSupportedLocales()||[c];s!==n.length&&(e=[],angular.copy(n,e),s=n.length,h=!1)}function o(n,i){i||(i="US");var r;return r=y?u.validateNumber(n,i):t.validateNumber(n,i),r?r:{isValid:!0,mask:"+1 XXX-XXX-XXXX",formattedContact:n}}var e,s,f,a,h,c={country:"United States",locale:"US"},v=0,y=r.isUserInFlight("cantilever-1");this.init=function(){l()};this.getCurrentCountryCode=function(){return f&&f.code?f.code:"+1"};this.getCurrentLocale=function(){return f&&f.locale?f.locale:"US"};this.getCurrentCountry=function(){return f&&f.country?f.country:"United States"};this.getCurrentMask=function(){return f&&f.mask?f.mask:this.getMask("US")};this.getFormattedNumber=function(n,t){var i=o(n,t),f=i.formattedContact.indexOf("+")>-1,r=i.formattedContact.indexOf(" "),u;return f&&r>0&&(u=i.formattedContact.substring(r+1)),u};this.getCountryCode=function(n){var t=o("",n),i=t.mask.indexOf(" ");return i>0?t.mask.slice(0,i):"+1"};this.getMask=function(n){var t=o("",n),i=t.mask.indexOf(" ");return i>0?t.mask.slice(i).trim():"XXX-XXX-XXXX"};this.populateDropdown=function(){var n=this;return h||(e.forEach(function(t,i){t.code=n.getCountryCode(t.locale);t.mask=n.getMask(t.locale);t.display=t.code+" - "+t.country;t.locale==="US"&&(c=t,v=i)}),h=!0),e};this.selectCountryCode=function(n){n=n.toUpperCase();for(var t=0;t<s;t++)if(n===e[t].locale)return f=e[t],a=t,e[t];return c};this.checkIfValidNumber=function(n){return n.number.length!==0&&!o(n.number,this.getCurrentLocale()).isValid};this.getValidNumber=function(n){if(n.number.length<=0)return n;var t=o(n.number,this.getCurrentLocale());return t.isValid?(n.invalidNumber=!1,n.number=this.getFormattedNumber(t.formattedContact,this.getCurrentLocale())):n.invalidNumber=!0,n};n.$on("CompassContentReady",l);this.init()}])}(angular.module(virtualAgentApp)),function(n){n.controller("PhoneScreenShareController",["$rootScope","$scope","$timeout","$log","rccService","compassService","flightService","clientConfig","chatStateService","nativeAppService","contactCommands","agentChatService","messageTypes","qosTelemetryService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function y(){t.content=f.getPasscode();t.content&&(t.status.waitingOnCompass=!1)}function p(){t.reconnectTimer||(t.reconnectTimer=i(function(){(t.showReconnectingMessage||t.showClientReconnectingMessage)&&(t.showReconnectingMessage=!1,t.showClientReconnectingMessage=!1,t.showDisconnectMessage=!0,v.createEvent(v.eventTypes.awasa.chatReconnectTimedOut).reject(),s.clearState(),u.endChat())},t.config.reconnectWaitTime))}function w(){t.showDisconnectMessage||t.showReconnectingMessage||t.showClientReconnectingMessage||t.reconnectTimer&&i.cancel(t.reconnectTimer)}t.config={timeout:o.ChatConfig.ChatDefaultTimeout,reconnectWaitTime:o.ChatConfig.ChatReconnectWaitTime,chatScreenShareEnabled:o.ChatConfig.AllowChatScreenShare&&h.hasCapability("ScreenSharing")};t.reset=function(){t.status={waitingOnRcc:!0,waitingOnCompass:!0};t.isNative=h.isNative();t.hasValidPasscode=!1;t.failedConnect=!1;t.agent=null;t.waitingOnAgent=!1;t.displayChatScreenShare=!1;t.sharingScreen=!1;t.showClientReconnectingMessage=!1;t.showReconnectingMessage=!1;t.showDisconnectMessage=!1;t.messages=[];t.sessionId="";t.subjectId="";y();u.isRatMode()||u.toggleRatMode();u.initLazy(function(){t.status.waitingOnRcc=!1})};t.connectToAgent=function(n){t.agent=n;n&&n.AgentId&&(t.failedConnect=!1,t.waitingOnAgent=!0,s.setAgent(n),s.setSubject(t.subjectId),u.enqueueChat({agentId:t.sessionId,ignoreAvailability:!0}))};t.cancel=function(){s.clearState();n.$broadcast("ChatBack")};t.$on("CompassContentReady",y);t.$on("PasscodeSuccess",function(n,i){t.hasValidPasscode=!0;t.waitingOnAgent=!0;t.sessionId=i.SessionId;t.subjectId=i.SubjectId;l.lookupAgent(i.ViewerId)});t.$on("ChatMessageReceived",function(n,i){(i.chatSender===a.SystemInfo||i.chatSender===a.SystemError)&&t.messages.push(i)});t.$on("AgentDataReady",function(n,i){t.connectToAgent(i)});t.$on("EnqueueChatFailure",function(n,i){t.failedConnect=!0;r.error("EunqueChatFailure was broadcast",JSON.stringify(i))});t.$on("ChatSessionEstablished",function(){t.waitingOnAgent=!1});t.$on("ChatSessionClosed",function(){t.displayChatScreenShare=!1;t.sharingScreen=!1});t.$on("ChatScreenShareRequest",function(){t.displayChatScreenShare=!0});t.$on("ChatScreenShareDenied",function(){t.displayChatScreenShare=!1});t.$on("ChatScreenShareClosed",function(){t.displayChatScreenShare=!1;t.sharingScreen=!1});t.$on("ChatScreenShareEstablished",function(){t.sharingScreen=!0});t.$on("ChatScreenShareConnectFailed",function(){t.displayChatScreenShare=!1});t.$on("MessageWindowTryAgain",function(){t.cancel()});t.$on("AgentDisconnected",function(){t.showClientReconnectingMessage||(t.showReconnectingMessage=!0);p()});t.$on("AgentReconnected",function(){t.showReconnectingMessage=!1;w()});t.$on("ChatChannelDisconnected",function(){t.showReconnectingMessage||(t.showClientReconnectingMessage=!0);p()});t.$on("ChatChannelReconnected",function(){t.showClientReconnectingMessage=!1;w()});t.$on("RATPhonePageTimeout",function(){t.isReady||n.$broadcast("500Error",{reason:"Timeout occurred on passcode page",data:t.status})});t.$on("$destroy",function(){u.isRatMode()&&u.toggleRatMode()});t.$watchCollection("status",function(n){t.isReady=n&&!Object.keys(n).some(function(t){return n[t]})});t.reset()}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).filter("timeslotDisplay",["$filter",function(n){return function(t){return t instanceof Date?n("date")(t,"shortTime"):t}}]),function(n){n.service("agentChatService",["$rootScope","contentApiService","chatStateService","compassService",function(n,t,i,r){this.lookupAgent=function(u){var e,h=i.getPlatform(),f,o,s;h=="sfb"?(f=r.getChat(),f&&f.chatting&&(e=f.chatting),o={},o.data={AgentId:u,DisplayName:e&&e.agentDisplayName||"",ImageUrl:"https://az473962.vo.msecnd.net/agentimages/844424931707765.png"},n.$broadcast("AgentDataReady",o.data)):(s=t.getAgentById(u),s.then(function(t){t.data&&n.$broadcast("AgentDataReady",t.data)},function(){}))}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("autoScrollContent",["$document","$interval","$q","$timeout","$rootScope",function(n,t,i,r,u){function f(n,r,u){var f=i.defer(),e=(u-$(n).scrollTop())/r*33,o=t(function(){var i=$(n).scrollTop();$(n).scrollTop(i+e);(i>=u||i===$(n).scrollTop())&&(t.cancel(o),f.resolve())},33);return f.promise}function e(n,t){t[0].documentElement?t[0].documentElement.scrollTop=n.scrollHeight:t[0].body.scrollTop=n.scrollHeight}function o(n,t){var i=n[0].scrollHeight,r,e,u,f;if(t){r=t.split(";");for(e in r)if(u=n.find(r[e]),u.length){f=u.first();i=f.position()&&f.position().top-50||i;break}}return i}return{restrict:"A",link:function(t,s,h){function v(t){if(c.tagName==="BODY")e(c,n);else{if(h.speed){var r=o(s,t);return f(c,h.speed,r)}$(c).scrollTop(c.scrollHeight)}return i.resolve()}var y=h.target&&$(h.target)||s,c=y[0],p=h.childSelector||"",l=null,a=null;t.$watch(function(){return c.offsetTop+c.scrollHeight+c.clientHeight},function(){l&&r.cancel(l);l=r(50).then(function(){return v(p)}).finally(function(){l=null})});u.$on("InstantAnswerTriggeredShowMore",function(n,t){a=t;s.bind("scroll",function(){a&&s[0].scrollHeight-s[0].scrollTop===s[0].clientHeight&&(u.$broadcast("InstantAnswerFullView",a),a=null,s.unbind("scroll"))})});t.$on("$destroy",function(){r.cancel(l)})}}}]),function(n){n.service("cantileverChatTokenService",["$http","$rootScope","chatStateService","authService",function(n,t,i,r){function f(t,i){var r={sessionId:i.sessionId};return i.phoneNumber&&(r.phoneNumber=i.phoneNumber),i.authToken&&(r.authToken=i.authToken),n.post(u.baseUrl+t,r)}var u={baseUrl:"/api/CantileverToken"};this.getTokenForUser=function(t){return t?n.get(u.baseUrl+"/GetRatToken/"):n.get(u.baseUrl+"/GetToken/")};this.getAADTokenForUser=function(){return n.get(u.baseUrl+"/GetAADToken/")};this.getUnauthTokenForUser=function(t){return n.post(u.baseUrl+"/GetUnauthenticatedToken/",t)};this.getDelegatedAuthTokenForUser=function(t){var i=[{Key:"delegatedAuthTokenValue",Value:t}];return n.post(u.baseUrl+"/GetDelegatedAuthToken/",i)};this.refreshToken=function(f,e,o){var h=r.getSupportedIDP(),s;return e?o==h.AAD?this.getAADTokenForUser():this.getTokenForUser(f):(s=i.getToken(),s!=null&&s.indexOf("PageController")>-1&&t.$broadcast("MalformedUnauthenticatedToken",s),n.post(u.baseUrl+"/RefreshUnauthenticatedToken/",{token:s}))};this.getEncryptedValueCookie=function(n,t){return f("/GetUserStateCookie/",{sessionId:n,phoneNumber:t})};this.getDelegatedEncryptedValueCookie=function(n,t,i){var r=[{Key:"delegatedAuthTokenValue",Value:i}];return f("/GetDelegatedUserStateCookie/",{sessionId:n,phoneNumber:t,authToken:r})};this.getAADEncryptedValueCookie=function(n,t){return f("/GetAADUserStateCookie/",{sessionId:n,phoneNumber:t})};this.getUnauthEncryptedValueCookie=function(n,t){return f("/GetUnauthenticatedUserStateCookie/",{sessionId:n,phoneNumber:t})}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatConnectingProgress",["$rootScope","$q","chatStateService","clientConfig","queueService","recurringOperationManagerService","flightService",function(n,t,i,r,u,f,e){function s(n){n.extendedWait=!1;n.positionStatus=u.getPositionStatus();n.timeRemaining=l.defaultWaitTime}function h(t){(t.timeRemaining--,t.timeRemaining>0)||(n.$broadcast("ChatExtendedWait"),t.timeRemaining=0,t.extendedWait=!0)}var c=1e3,o=f.getInstance(),l={defaultWaitTime:r.ChatConfig.ChatDefaultWaitTime};return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/Connecting.html",scope:!0,link:function(n){function r(){o.cleanup()}s(n);o.recurUntilSuccessfulOrCleanedUp(function(){return h(n),t.resolve()},c,function(){return i.getChatEstablished()||n.extendedWait});n.isCsaThemesFlight=e.isUserInFlight("csa-themes-1");n.$on("ChatVideoSession",function(){n.isVideoEnabled=!0});n.$on("ChatSessionEstablished",r);n.$on("500Error",r);n.$on("$destroy",r)}}}]),function(n){n.service("chatContextService",["$http","$q",function(n,t){var i="/api/chatContext/set/";this.setValues=function(r){return r?n({method:"POST",url:i,data:{values:JSON.stringify(r)}}):t.resolve()}}])}(angular.module(virtualAgentApp)),function(n){n.controller("ChatController",["$http","$scope","$rootScope","$timeout","$log","$routeParams","$window","$location","authService","agentChatService","chatStateService","clientConfig","languageService","messageTypes","messageService","nativeAppService","compassService","sessionStorageService","qosTelemetryService","navigationService","flightService","emailTranscriptService","modalityTags","chatService","unauthNames","locationService","sdkProxyService","chatTelemetryService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){function ot(n,t,r){var u=y.createMessage({text:n,senderName:t},r);return i.$broadcast("ChatMessageReceived",u),u}function vt(){t.chat=w.getChat();t.status.waitingOnCompass=!t.chat}function bt(){return t&&t.chat&&t.chat.chatting&&t.chat.chatting.sendFailure}function yt(){return t&&t.chat&&t.chat.chatting&&t.chat.chatting.userDisplayName}function lt(){return t&&t.chat&&t.chat.chatting&&t.chat.chatting.systemDisplayName}function kt(){return t&&t.chat&&t.chat.chatting&&t.chat.chatting.agentTransferred}function at(n,i,r){it.init({isAuth:i,authType:n,delegatedAuthToken:r,typingBoxId:t.config.chatTypingBoxId,room:ht}).then(function(){return t.status.waitingOnRcc=!1,t.status.waitingOnHoops=!0,it.isOpen()}).then(function(n){t.status.waitingOnHoops=!1;n?(it.enqueueChat(),t.chatWizard.templateUrl=t.config.templateUrl):o.path("/hoops/chat/"+c.getSubject())})}var pt=microsoft.support.client.web.chat,ht,wt,ct,st;t.chatWizard={};t.config={MaxChatMsgChars:l.ChatConfig.ChatMaxMessageChars,timeout:l.ChatConfig.ChatDefaultTimeout,chatTypingBoxId:"chat-client-message-input-textbox",chatReconnectWaitTime:l.ChatConfig.ChatReconnectWaitTime,hoopsEnabled:l.ChatConfig.AllowHoursOfOperation,chatTranscriptEnabled:g.isUserInFlight("ct"),chatScreenShareEnabled:l.ChatConfig.AllowChatScreenShare&&p.hasCapability("ScreenSharing"),userPauseResumeEnabled:p.hasCapability("PauseSharing"),templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/ChatControl.html"};t.senderTypes=v;t.isInNotificationFlight=g.isUserInFlight("chat-notifications-1");t.isDelegatedAuthFlight=g.isUserInFlight("delegatedauth-1");t.isCsaThemesFlight=g.isUserInFlight("csa-themes-1");t.audioAlert=null;t.firstChatMessageRecieved=!1;ht="Chat-Room";wt=g.isUserInFlight("aad-1");t.isUserInCantileverFlight=g.isUserInFlight("cantilever-1");ct=!1;t.isDelegatedAuthFlight&&f&&f.authType&&f.authType.toLowerCase()==="delegated"&&(ct=!0);t.chatWizard.resetChat=function(){var u=a.langLocale(),r,n;t.isNative=p.isNative();t.displayChatScreenShare=!1;t.sharingScreen=!1;t.status={waitingOnHoops:!1,waitingOnRcc:!0,waitingOnCompass:!0};t.chatWizard.templateUrl="";t.chatWizard.agentInfo={};t.chatWizard.chatInitialized=!1;t.chatWizard.chatInputBoxText="";t.chatWizard.inputIsDisabled=!1;t.chatWizard.chatMessages=[];t.chatWizard.typingStatus=it.getTypingStatus();t.chatWizard.showReconnectingMessage=!1;t.chatWizard.showClientReconnectingMessage=!1;t.chatWizard.showDisconnectMessage=!1;t.chatWizard.showCancelButton=p.isNative()&&ut.getReferrerDomain()||!d.isRoot();t.chatWizard.submitDisabled=!1;t.chatWizard.sendButtonIcon=null;t.chatWizard.chatEnded=!1;t.chatWizard.displayChatSurvey=!1;t.chatWizard.displayChatEndConfirmation=!1;t.longQueue=null;i.$broadcast("ChatReset");r=!b.get(rt.storage)&&!f.unauth;ct&&(r=!1);n=s.getSupportedIDP();wt?ct?ft.proxy().then(function(t){t.addEventListener("SignInResponse",function(t){st=t.data.token;c.setDelegatedAuthToken(st);at(f.useAAD?n.AAD:n.MSA,r,st)});t.dispatchSignInRequest([{type:"delegated"}])}):(f.useAAD?s.setPagePreference([n.AAD]):s.setPagePreference([n.MSA]),s.resolveAuthState().then(function(){at(f.useAAD?n.AAD:n.MSA,r,st)})):at(n.MSA,r,st);vt()};t.chatWizard.cancelChat=function(){i.$broadcast("ChatBack")};t.chatWizard.connectionFail=function(){t.chatWizard.templateUrl="/PartialViews/VirtualAgent.Library/Contact/Chat/ConnectionFailed.html"};t.chatWizard.chatSubmitClick=function(n){if(t.chatWizard.chatInputBoxText!==""){t.chatWizard.chatInputBoxText=t.chatWizard.chatInputBoxText.replace(/(?:\r\n|\r|\n)/g,"<br />");var i=ot(t.chatWizard.chatInputBoxText,yt(),v.User);it.sendMessage(i);t.chatWizard.chatInputBoxText="";n&&n.preventDefault()}};t.sendTypingIndicator=function(){i.$broadcast("UserStartTyping",{})};t.userEndChat=function(){i.$broadcast("ChatSessionClosed",{})};t.backToChat=function(){t.chatWizard.inputIsDisabled=!1;t.chatWizard.submitDisabled=!1;t.chatWizard.displayChatEndConfirmation=!1};t.showEndConfirmation=function(){t.chatWizard.chatEnded||(i.$broadcast("EndChatClicked"),t.chatWizard.inputIsDisabled=!0,t.chatWizard.submitDisabled=!0,t.chatWizard.displayChatEndConfirmation=!0)};t.endChat=function(){var n=f[pt.constants.flagKeys.surveyType];t.chatWizard.displayChatEndConfirmation=!1;t.chatWizard.displayChatSurvey=angular.isUndefined(n)||n.toString().toUpperCase()!==pt.surveyTypes.NONE;t.chatWizard.displayChatSurvey&&i.$broadcast("chatSurveyDisplayed");t.chatWizard.surveyData={agent:t.chatWizard.agentInfo.AgentId,chatId:c.getChatId()};t.chatWizard.inputIsDisabled=!0;t.chatWizard.submitDisabled=!0;t.chatWizard.chatEnded=!0;ot(t.chat.chatting.answerTechDisconnect,lt(),v.SystemInfo);it.endChat()};t.chatWizard.handleChatInterrupted=function(){t.chatWizard.submitDisabled=!0;t.chatWizard.inputIsDisabled=!0;t.chatReconnectTimer=r(function(){(t.chatWizard.showReconnectingMessage||t.chatWizard.showClientReconnectingMessage)&&(t.chatWizard.showReconnectingMessage=!1,t.chatWizard.showClientReconnectingMessage=!1,t.chatWizard.showDisconnectMessage=!0,t.displayChatScreenShare=!1,t.sharingScreen=!1,i.$broadcast("ChatScreenShareClosed"),k.createEvent(k.eventTypes.awasa.chatReconnectTimedOut).reject(),it.endChat(),t.chatWizard.chatInitialized||i.$broadcast("500Error",{reason:"Disconnected in Queue"}))},t.config.chatReconnectWaitTime)};t.chatWizard.handleChatReconnected=function(){t.chatWizard.showDisconnectMessage||t.chatWizard.showReconnectingMessage||t.chatWizard.showClientReconnectingMessage||(t.chatReconnectTimer&&r.cancel(t.chatReconnectTimer),t.chatWizard.submitDisabled=!1,t.chatWizard.inputIsDisabled=!1)};t.$on("ChatScreenShareRequest",function(){t.displayChatScreenShare=!0});t.$on("ChatScreenShareDenied",function(){t.displayChatScreenShare=!1});t.$on("ChatScreenShareEstablished",function(){t.sharingScreen=!0});t.$on("ChatScreenShareClosed",function(){t.displayChatScreenShare=!1;t.sharingScreen=!1});t.$on("ChatScreenShareConnectFailed",function(){t.displayChatScreenShare=!1});t.$on("ChatSessionClosed",function(){t.displayChatScreenShare=!1;t.sharingScreen=!1});t.$on("CompassContentReady",function(){vt()});t.$on("ChatError",function(n,i){i.nextStep==="callback"?o.path("/contact/callback/"+c.getSubject()+"/"):i.nextStep==="fail"&&t.chatWizard.connectionFail(n,i)});t.$on("ChatMessageSendError",function(){ot(bt(),lt(),v.SystemError)});t.$on("EnqueueChatFailure",function(n,t){i.$broadcast("500Error",{reason:"Failed to enqueue chat",data:t})});t.$on("EnqueueChatSuccess",function(){t.longQueue=r(function(){i.$broadcast("ChatLongQueue")},l.ChatConfig.ChatLongQueue)});t.$on("DisplayCallback",function(){t.chatWizard.scheduleCallback()});t.$on("ChatSessionEstablished",function(n,i){if(r.cancel(t.longQueue),t.isUserInCantileverFlight?h.lookupAgent(i.agentId.id):h.lookupAgent(i.agentId),c.setChatEstablished(!0),t.chatWizard.chatInitialized=c.getChatEstablished(),c.getProblemText()){var u=ot(c.getProblemText(),yt(),v.User);it.sendMessage(u)}});t.$on("AgentDataReady",function(n,i){i&&i!=="null"&&(t.chatWizard.agentInfo=i)});t.$on("ChatMessageReceived",function(n,r){if(t.chatWizard.chatMessages=y.getMessages(ht),t.firstChatMessageRecieved==!1){if(i.$broadcast("ShowToast",r.chatMessage),t.isInNotificationFlight&&("Notification"in e?Notification.permission==="granted"||e.document.hasFocus()?Notification.permission==="granted"&&i.$broadcast("Html5Notification","HasPermission"):(i.$broadcast("Html5Notification","NotificationPermissionRequested"),Notification.requestPermission(function(n){n==="denied"?i.$broadcast("Html5Notification","NotificationPermissionDenied"):n==="default"?i.$broadcast("Html5Notification","NotificationPermissionDismissed"):i.$broadcast("Html5Notification","NotificationPermissionGranted")})):i.$broadcast("Html5Notification","NotSupported"),!e.document.hasFocus()&&"Notification"in e&&Notification.permission==="granted"))var u=new Notification(r.chatMessage);t.firstChatMessageRecieved=!0}e.document.hasFocus()||(!t.audioAlert&&t.chat&&t.chat.audioAlertLink&&(t.audioAlert=new Audio(t.chat.audioAlertLink)),t.audioAlert&&!!(t.audioAlert.canPlayType&&t.audioAlert.canPlayType("audio/mpeg;"))&&t.audioAlert.play());et.pushChatMessageReceivedHandlerExecutedEvent("chatController chatRoom = "+ht)});t.$on("ChatSessionClosed",function(){t.endChat()});t.$on("ChatTransferred",function(n,i){i.agentId&&(t.isUserInCantileverFlight?h.lookupAgent(i.agentId.id):h.lookupAgent(i.agentId),ot(kt(),lt(),v.SystemInfo))});t.$on("$destroy",function(){(c.getChatEstablished()||c.getEnqueueId())&&it.endChat();c.clearState();r.cancel(t.longQueue)});t.$on("AgentDisconnected",function(n,i){!i.agentId||t.chatWizard.showClientReconnectingMessage||t.chatWizard.showReconnectingMessage||(t.chatWizard.showReconnectingMessage=!0,t.chatWizard.handleChatInterrupted())});t.$on("AgentReconnected",function(n,i){i.agentId&&t.chatWizard.showReconnectingMessage&&(t.chatWizard.showReconnectingMessage=!1,t.chatWizard.handleChatReconnected())});t.$on("ChatChannelDisconnected",function(){t.chatWizard.showReconnectingMessage||t.chatWizard.showClientReconnectingMessage||(t.chatWizard.showClientReconnectingMessage=!0,t.chatWizard.handleChatInterrupted())});t.$on("ChatChannelReconnected",function(){t.chatWizard.showClientReconnectingMessage&&(t.chatWizard.showClientReconnectingMessage=!1,t.chatWizard.handleChatReconnected())});t.$on("MessageWindowTryAgain",function(){t.chatWizard.cancelChat()});t.$on("ChatPageTimeout",function(){t.isReady||i.$broadcast("500Error",{reason:"Timeout occurred on a chat page",data:t.status})});t.$watch("chatWizard.chatInputBoxText",function(){t.chatWizard.chatInputBoxText===""?(t.chatWizard.submitDisabled=!0,t.isUserInCantileverFlight&&i.$broadcast("UserNotTyping",{})):(t.chatWizard.submitDisabled=!1,t.isUserInCantileverFlight&&i.$broadcast("UserTyping",{}))});t.$watchCollection("status",function(n){t.isReady=n&&!Object.keys(n).some(function(t){return n[t]})});t.chatWizard.resetChat()}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatQueue",[function(){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/ChatQueue.html",scope:{view:"="},link:function(n){n.positionInQueue=null;n.$on("ChatQueueStatus",function(t,i){n.positionInQueue=i.position})}}}]),function(n){n.service("chatRejoinUrlService",["$location","$routeParams","nativeAppService","languageService","chatStateService","authService",function(n,t,i,r,u,f){function e(t){var i=n.absUrl().toLowerCase();return i.indexOf("?"+t.toLowerCase())>=0||i.indexOf("&"+t.toLowerCase())>=0}var o=["unauth","useaad","visitid","rejoin","isnative"];this.getRejoinUrl=function(s,h,c){var p=f.getSupportedIDP(),l="/"+r.langLocale()+"/contact/chat/"+u.getSubject()+"/?visitId="+u.getVisitId()+"&rejoin=true",v,a,y;for(c==="sfb"&&(l+="&engagementId="+u.getEngagementId()),s||(l+="&unauth=true"),h===p.AAD&&(l+="&useAAD=true"),v=Object.keys(t),a=0;a<v.length;a++)y=v[a].toLowerCase(),e(y)&&o.indexOf(y)<0&&(l+="&"+v[a]+"="+encodeURIComponent(t[v[a]]));return i.isNative()?"ms-contact-support://rejoin"+l+"&isNative=true":"https://"+n.host()+l}}])}(angular.module(virtualAgentApp)),function(n){n.controller("ChatScreenShareController",["$scope","$rootScope","nativeAppService","messageTypes","messageService","contactCommands","compassService",function(n,t,i,r,u,f,e){function o(n,i,r){var f=u.createMessage({text:n,senderName:i},r);t.$broadcast("ChatMessageReceived",f)}function a(){return n&&n.chat&&n.chat.error&&n.chat.error.genericError}function v(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.screenEnd}function y(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.annotationStart}function p(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.annotationStop}function w(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.screenError}function s(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.systemDisplayName}function b(){return n&&n.chat&&n.chat.chatting&&n.chat.chatting.screenShareDeny}function l(){n.chat=e.getChat()}function k(){n.sharingScreen&&o(v(),s(),r.SystemInfo);n.reset()}var h=0,c={Reserved:0,Annotation:1,View:2,Interactive:3};n.config={maxRetry:3,userPauseResumeEnabled:i.hasCapability("PauseSharing")};n.reset=function(){n.displayChatScreenShare=!1;n.sharingScreen=!1;n.screenSharePaused=!1;n.waitingForResponse=!1;n.currentMode=null;n.requestedMode=null;n.reconnecting=!1;n.agentCommands={beginsharing:null};h=0;l()};n.grantScreenShare=function(){n.agentCommands.beginsharing&&(t.$broadcast("ChatScreenShareAccept"),i.sendAppCommand(n.agentCommands.beginsharing),n.waitingForResponse=!0)};n.denyScreenShare=function(){n.displayChatScreenShare=!1;n.agentCommands.beginsharing=null;o(b(),s(),r.SystemInfo);t.$broadcast("ChatScreenShareDenied");i.sendAgentRequestResponse(f.beginSharing,!1,"The user denied the request for remote assistance","")};n.toggleScreenShare=function(){var t;t=n.screenSharePaused?f.resumeSharingByUser:f.pauseSharingByUser;i.sendAgentUserRequest(t);n.waitingForResponse=!0};n.$on("CompassContentReady",l);n.$on("ChatScreenShareRequest",function(t,i){n.agentCommands.beginsharing=i;n.displayChatScreenShare=!0});n.$on("ChatScreenShareReconnect",function(){n.sharingScreen&&(n.screenSharePaused?t.$broadcast("ChatScreenShareClosed"):(n.reconnecting=!0,n.waitingForResponse=!0))});n.$on("ChatScreenShareEstablished",function(){n.reconnecting||(n.sharingScreen=!0,n.currentMode=c.Interactive);n.waitingForResponse=!1;n.reconnecting=!1;n.agentCommands.beginsharing=null});n.$on("ChatScreenShareClosed",k);n.$on("SetSharingModeRequest",function(t,i){i!==n.currentMode&&(n.requestedMode=i)});n.$on("SetSharingMode",function(){n.requestedMode&&(n.currentMode===c.Annotation&&o(p(),s(),r.SystemInfo),n.currentMode=n.requestedMode,n.requestedMode=null,n.currentMode===c.Annotation&&o(y(),s(),r.SystemInfo))});n.$on("ToggleScreenShare",function(t,i){n.screenSharePaused=i;n.waitingForResponse=!1});n.$on("ChatScreenShareConnectFailed",function(){h>=n.config.maxRetry?(o(a(),s(),r.SystemError),n.reset(),i.sendAgentUserRequest(f.sharingSessionFailed)):(h++,n.grantScreenShare())});n.$on("ChatScreenShareError",function(){o(w(),s(),r.SystemError);n.waitingForResponse=!1});n.$on("ChatSessionClosed",function(){n.reset()});n.reset()}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatscreenshare",[function(){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/ScreenShare.html",controller:"ChatScreenShareController"}}]),function(n){n.service("chatService",["$q","$log","$rootScope","$filter","$timeout","rccService","modalityTags","chatStateService","messageService","agentChatService","supportLinkService","qosTelemetryService","compassService","channelStatuses","flightService","chatTelemetryService","cantileverService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){function ht(n,t,i,u,f){return w.isWithinOperatingHours(n,t).then(function(n){for(var t in f){if(!y.isUserInFlight("hiva-1")){f[t].isOpen=n[t].isOpen;continue}if(n[t])switch(n[t].status){case v.OPEN:f[t].isOpen=!0;break;case v.CLOSED:f[t].hoursText=b&&b.hoursText;f[t].closedMessage=r("compassFormat")(b&&b.modalityClosedText,{"modality-name":f[t].link.linkText});f[t].closedScheduleText=b&&b.closed;f[t].scheduleInYourLocaleText=b&&b.subCaption;f[t].schedule=n[t].schedule;f[t].isClosed=!0;break;default:l.createEvent(l.eventTypes.awasa.channelUnavailable).reject(JSON.stringify({modality:t,channels:n}));f[t].unavailableMessage=r("compassFormat")(b&&b.unavailableWithLinkText,{"open-link-tag":"<a href='"+(b&&b.globalSupport)+"' target='_blank'>","close-link-tag":"<\/a>"});f[t].link.linkUrl=b&&b.globalSupport;f[t].externalLink=!0;f[t].clickableLink=!0;f[t].isUnavailable=!0}}return u})}function ct(n,t,i,u,e){return f.isWithinOperatingHours(n,t).then(function(n){for(var t in e){if(!y.isUserInFlight("hiva-1")){e[t].isOpen=n[t].isOpen;continue}if(n[t])switch(n[t].status){case v.OPEN:e[t].isOpen=!0;break;case v.CLOSED:e[t].hoursText=b&&b.hoursText;e[t].closedMessage=r("compassFormat")(b&&b.modalityClosedText,{"modality-name":e[t].link.linkText});e[t].closedScheduleText=b&&b.closed;e[t].scheduleInYourLocaleText=b&&b.subCaption;e[t].schedule=n[t].schedule;e[t].isClosed=!0;break;default:l.createEvent(l.eventTypes.awasa.channelUnavailable).reject(JSON.stringify({modality:t,channels:n}));e[t].unavailableMessage=r("compassFormat")(b&&b.unavailableWithLinkText,{"open-link-tag":"<a href='"+(b&&b.globalSupport)+"' target='_blank'>","close-link-tag":"<\/a>"});e[t].link.linkUrl=b&&b.globalSupport;e[t].externalLink=!0;e[t].clickableLink=!0;e[t].isUnavailable=!0}}return u})}function lt(){tt.isAgentTyping=!1;k.isConnected=!1;k.agent=null;k.prevAgent=null;g.isConnected=!1}function it(){a.getHoursOfOperationView().then(function(n){b=n})}var nt=this,rt=null,ut=null,ft=null,et=null,ot=null,b=null,st=n.resolve(),tt=Object.seal({isAgentTyping:!1}),k=Object.seal({agent:null,prevAgent:null,isConnected:!1}),g=Object.seal({isConnected:!1}),d=y.isUserInFlight("cantilever-1");this.getCurrentMessageRoom=function(){return rt};this.setCurrentMessageRoom=function(n){rt=n};this.init=function(t){var i=this;return it(),d?ut||(ut=n(function(n){w.init(t.isAuth,t.authType,t.delegatedAuthToken,function(){t.typingBoxId&&w.setChatTypingBoxId(t.typingBoxId);t.room&&i.setCurrentMessageRoom(t.room);n()})})):ft||(ft=n(function(n){f.init(t.isAuth,t.authType,t.delegatedAuthToken,function(){t.typingBoxId&&f.setChatTypingBoxId(t.typingBoxId);t.room&&i.setCurrentMessageRoom(t.room);n()})}))};this.initLazy=function(t){var i=this;return it(),d?et||(et=n(function(n){w.initLazy(function(){t.typingBoxId&&w.setChatTypingBoxId(t.typingBoxId);t.room&&i.setCurrentMessageRoom(t.room);n()})})):ot||(ot=n(function(n){f.initLazy(function(){t.typingBoxId&&f.setChatTypingBoxId(t.typingBoxId);t.room&&i.setCurrentMessageRoom(t.room);n()})}))};this.checkHours=function(n,t){var i=angular.copy(n),u=c.getModalities(i),r=c.getHoopsModalities(i);return t=t||o.getSubject(),d?ht(t,Object.keys(r),i,u,r):ct(t,Object.keys(r),i,u,r)};this.isOpen=function(n){return n=n||o.getSubject(),d?w.isWithinOperatingHours(n,e.chat).then(function(n){return!!(n[e.chat]&&n[e.chat].isOpen)},function(){return!1}):f.isWithinOperatingHours(n,e.chat).then(function(n){return!!(n[e.chat]&&n[e.chat].isOpen)},function(){return!1})};this.postBotTranscript=function(n,t){return this.init(n).then(function(){return t.forEach(function(n){n.from=n.from==="User"?o.getVisitId():n.from;n.to=n.to==="User"?o.getVisitId():n.to}),f.postTranscript(t,!0)})};this.enqueueChat=function(n){return this.init(n).then(function(){return d?w.isWithinOperatingHours(o.getSubject(),e.chat).then(function(t){if(t[e.chat].isOpen)return i.$broadcast("ChatRequested"),w.enqueueChat(n)}):f.isWithinOperatingHours(o.getSubject(),e.chat).then(function(t){if(t[e.chat].isOpen)return i.$broadcast("ChatRequested"),f.enqueueChat(n)})})};this.endChat=function(){return d?st.finally(function(){return o.clearState(),w.endChat()}):st.finally(function(){return o.clearState(),f.endChat()})};this.sendMessage=function(n){return d?w.sendMessage(n).then(function(i){t.log("Message was sent:",n,i)},function(n){t.error("Message failed:",n)}):f.sendMessage(n).then(function(i){t.log("Message was sent:",n,i)},function(n){t.error("Message failed:",n)})};this.getTypingStatus=function(){return tt};this.getAgentStatus=function(){return k};this.getChannelStatus=function(){return g};i.$on("ChatSessionClosed",function(){nt.endChat()});i.$on("ChatMessageReceived",function(n,i){var r=nt.getCurrentMessageRoom(),f=s.getMessages(r).length;s.appendMessage(r,i,i.messageType);u(function(){t.info("Timeout fired")});p.pushChatMessageReceivedHandlerExecutedEvent("chatTelemetryService chatRoom = "+r+", originalMessageRoomMessagesLength = "+f)});i.$on("ChatSessionEstablished",function(n,t){lt();d?h.lookupAgent(t.agentId.id):h.lookupAgent(t.agentId);o.setChatEstablished(!0);k.isConnected=!0;g.isConnected=!0});i.$on("AgentDataReady",function(n,t){o.setAgent(t);k.agent=t});i.$on("ChatTransferred",function(n,t){k.prevAgent=k.agent;d?h.lookupAgent(t.agentId.id):h.lookupAgent(t.agentId)});i.$on("AgentTyping",function(n,t){tt.isAgentTyping=t});i.$on("ChatMessageSendError",function(n,t){s.failedMessage(t,nt.getCurrentMessageRoom())});i.$on("EnqueueChatFailure",function(n,i){t.error("Chat enqueue failed:",JSON.stringify(i));nt.endChat()});i.$on("AgentDisconnected",function(){k.isConnected=!1});i.$on("AgentReconnected",function(){k.isConnected=!0});i.$on("ChatChannelDisconnected",function(){g.isConnected=!1});i.$on("ChatChannelReconnected",function(){g.isConnected=!0})}])}(angular.module(virtualAgentApp)),function(n){n.service("chatStateService",["$rootScope","$routeParams","$location","clientConfig","sessionStorageService",function(n,t,i,r,u){function h(){f=JSON.parse(JSON.stringify(s.defaultState));e()}function e(){u.set(s.chatStateKey,f)}function o(){var n=u.get(s.chatStateKey);return n?(f=n,!0):!1}var f,s={chatStateKey:"ChatState",defaultState:{visitId:null,token:null,agent:null,subject:null,validationKey:null,chatEstablished:!1,appStartContext:null,enqueueId:null,chatId:null,parentCv:null,survey:null,problem:null,wasRouted:null,delegatedAuthToken:null,cantileverVisitId:null,cantileverEngagementId:null,platform:null,engagementId:null,sdkInitState:null}};this.reset=function(){o()?(f.chatEstablished=!1,f.visitId=null,f.enqueueId=null,f.chatId=null,f.engagementId=null,e()):h()};this.setParentCv=function(n){f.parentCv=n;e()};this.getParentCv=function(){return o(),f.parentCv};this.setVisitId=function(n){f.visitId=n;e()};this.getVisitId=function(){return o(),f.visitId};this.setEngagementId=function(n){f.engagementId=n;e()};this.getEngagementId=function(){return o(),f.engagementId};this.setEnqueueId=function(n){f.enqueueId=n;e()};this.getEnqueueId=function(){return o(),f.enqueueId};this.setChatId=function(n){f.chatId=n;e()};this.getChatId=function(){return o(),f.chatId};this.setToken=function(n){f.token=n;e()};this.getToken=function(){return o(),f.token};this.setCesToken=function(n){f.Cestoken=n;e()};this.getCesToken=function(){return o(),f.Cestoken};this.setSfbToken=function(n){f.SfbToken=n;e()};this.getSfbToken=function(){return o(),f.SfbToken};this.setSdkInitState=function(n){f.sdkInitState=n;e()};this.getSdkInitState=function(){return o(),f.sdkInitState};this.setAgent=function(n){f.agent=n;e()};this.getAgent=function(){return o(),f.agent};this.setSubject=function(n){f.subject=n;e()};this.getSubject=function(){var n=i.search().subject||t.subject;return n?parseInt(n,10):(o(),f.subject)};this.setValidationKey=function(n){f.validationKey=n;e()};this.getValidationKey=function(){return o(),f.validationKey};this.setChatEstablished=function(n){f.chatEstablished=n;e()};this.getChatEstablished=function(){return o(),f.chatEstablished};this.setAppStartContext=function(n){f.appStartContext=n;e()};this.getAppStartContext=function(){return o(),f.appStartContext};this.setPrechatSurvey=function(n){f.survey=n;e()};this.getPrechatSurvey=function(){return o(),f.survey};this.setProblemText=function(n){f.problem=n;e()};this.getProblemText=function(){return o(),f.problem};this.setUserRouted=function(n){f.wasRouted=n;e()};this.getUserRouted=function(){return o(),f.wasRouted};this.setDelegatedAuthToken=function(n){f.delegatedAuthToken=n;e()};this.getDelegatedAuthToken=function(){return o(),f.delegatedAuthToken};this.setCantileverVisitId=function(n){f.cantileverVisitId=n;e()};this.getCantileverVisitId=function(){return o(),f.cantileverVisitId||""};this.setCantileverEngagementId=function(n){f.cantileverEngagementId=n;e()};this.getCantileverEngagementId=function(){return o(),f.cantileverEngagementId||""};this.setPlatform=function(n){f.platform=n;e()};this.getPlatform=function(){return o(),f.platform};this.clearState=function(){var n=f.visitId,t=f.token,i=f.subject,r=f.cantileverVisitId,u=f.cantileverEngagementId,o=f.appStartContext;h();f.visitId=n;f.token=t;f.subject=i;f.cantileverVisitId=r;f.cantileverEngagementId=u;f.appStartContext=o;e()};this.isReconnectValid=function(){return!1};this.isValidSubject=function(n){return n&&n>0};this.reset()}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatSurvey",["$rootScope","$routeParams","compassService","chatStateService","flightService","emailTranscriptService","clientConfig","authService",function(n,t,i,r,u,f,e,o){function c(i){function c(n){return i.view.optional&&i.view.optional.indexOf(n)>=0}i=s(i);i.surveyId=h;h++;var a="";a=l?o.getUserInfo()&&o.getUserInfo().email?o.getUserInfo().email:"":e.authInfo&&e.authInfo.displayName?e.authInfo.displayName:"";i.survey={userFeedback:null,userChoice:0,sendTranscript:u.isUserInFlight("ct"),userEmail:a,question1:0,question2:0,question3:0,question4:0,freeForm:""};i.disableSend=function(){return!i.survey.userFeedback&&!i.survey.userChoice&&!c("resolved")||i.view.surveyRatingQuestion1&&!i.survey.question1&&!c("sr1")||i.view.surveyRatingQuestion2&&!i.survey.question2&&!c("sr2")||i.view.surveyRatingQuestion3&&!i.survey.question3&&!c("sr3")||i.view.surveyRatingQuestion4&&!i.survey.question4&&!c("sr4")};i.closeSurvey=function(t){i.displayChatSurvey&&(t?i.cancelAction&&i.cancelAction():i.submitAction&&i.submitAction(),i.displayChatSurvey=!1);n.$broadcast("ChatSurvey",!1)};i.submitSurvey=function(){var o=i.eventName||(u.isUserInFlight(/^survey-/g,!0)?"ChatFeedbackFlighted":"ChatFeedback");n.$broadcast(o,{id:"1",helped:i.survey.userFeedback,choice:parseInt(i.survey.userChoice),optional:i.view&&i.view.optional,question1:i.survey.question1,question2:i.survey.question2,question3:i.survey.question3,question4:i.survey.question4,labeled:!!(i.view&&i.view.question1Scales&&i.view.question1Scales.length),freeForm:i.survey.freeForm,flighted:i.view&&i.view.flighted,version:i.view&&i.view.version,agentId:i.chatData.agent,chatId:i.chatData.chatId,mode:typeof t.mode!="undefined"?t.mode:e.ChatConfig.Mode});i.survey.sendTranscript&&f.emailChatTranscript(r.getVisitId(),i.survey.userEmail,(new Date).getTimezoneOffset()).then(function(t){n.$broadcast("EmailTranscriptSuccess",t.data)},function(t){n.$broadcast("EmailTranscriptFailure",t)});i.closeSurvey()};i.$on("CompassContentReady",function(){i=s(i)})}function s(n){var t=i.getChat();return n.view=n.view||(t&&t.survey?t.survey:null),n}var l=u.isUserInFlight("aad-1"),h=0;return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/ChatSurvey.html",scope:{displayChatSurvey:"=visible",chatData:"=chat",view:"=?",submitAction:"&?",cancelAction:"&?",eventName:"=?"},replace:!0,link:c}}]),function(n){n.service("chatTokenService",["$http","$rootScope","chatStateService","authService",function(n,t,i,r){function f(t,i){var r={sessionId:i.sessionId};return i.phoneNumber&&(r.phoneNumber=i.phoneNumber),i.authToken&&(r.authToken=i.authToken),n.post(u.baseUrl+t,r)}var u={baseUrl:"/api/Token"};this.getTokenForUser=function(t){return t?n.get(u.baseUrl+"/GetRatToken/"):n.get(u.baseUrl+"/GetToken/")};this.getAADTokenForUser=function(){return n.get(u.baseUrl+"/GetAADToken/")};this.getUnauthTokenForUser=function(t){return n.post(u.baseUrl+"/GetUnauthenticatedToken/",t)};this.getDelegatedAuthTokenForUser=function(t){var i=[{Key:"delegatedAuthTokenValue",Value:t}];return n.post(u.baseUrl+"/GetDelegatedAuthToken/",i)};this.refreshToken=function(f,e,o){var h=r.getSupportedIDP(),s;return e?o==h.AAD?this.getAADTokenForUser():this.getTokenForUser(f):(s=i.getToken(),s!=null&&s.indexOf("PageController")>-1&&t.$broadcast("MalformedUnauthenticatedToken",s),n.post(u.baseUrl+"/RefreshUnauthenticatedToken/",{token:s}))};this.getEncryptedValueCookie=function(n,t){return f("/GetUserStateCookie/",{sessionId:n,phoneNumber:t})};this.getDelegatedEncryptedValueCookie=function(n,t,i){var r=[{Key:"delegatedAuthTokenValue",Value:i}];return f("/GetDelegatedUserStateCookie/",{sessionId:n,phoneNumber:t,authToken:r})};this.getAADEncryptedValueCookie=function(n,t){return f("/GetAADUserStateCookie/",{sessionId:n,phoneNumber:t})};this.getUnauthEncryptedValueCookie=function(n,t){return f("/GetUnauthenticatedUserStateCookie/",{sessionId:n,phoneNumber:t})}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatVideo",["$window","$document","$rootScope","$timeout","widgetService","messageTypes","flightService","chatStateService","chatService",function(n,t,i,r,u,f,e,o,s){function c(n,u,o){var w=t[0].createElement("script"),b=t[0].getElementsByTagName("script")[0],k=u.find(".video-section"),c=null,p=null;l(n);w.src=a;b.parentNode.insertBefore(w,b);n.view=n.view||o.view;n.videoId=n.videoId||o.videoId;n.isPlaylist=n.isPlaylist&&n.isPlaylist()||o.isPlaylist;n.videoDescription=n.videoDescription||o.videoDescription;n.agent=null;n.isWatchingVideo=!0;n.inChatWithAgent=!1;n.isAgentTyping=!1;n.numMessagesReceived=0;n.typingStatus=s.getTypingStatus();n.toggleVideo=function(t){n.isWatchingVideo=!n.isWatchingVideo;t?i.$broadcast("ChatVideoAutoToggle"):i.$broadcast("ChatVideoToggled",n.isWatchingVideo);n.numMessagesReceived>0&&(i.$broadcast("ChatVideoAlertResponse",(new Date).getTime()-p.getTime()),p=null);n.isWatchingVideo||(n.player.pauseVideo(),n.numMessagesReceived=0,n.isAgentTyping=!1);h(k,n.isWatchingVideo)};i.$broadcast("ChatVideoSession");c=r(function(){i.$broadcast("ChatVideoMinTimeEngaged")},y);n.$on("AgentDataReady",function(t,i){n.agent=i});n.$on("ChatSessionEstablished",function(){n.isWatchingVideo=!1;n.inChatWithAgent=!0;n.numMessagesReceived=0;h(k,n.isWatchingVideo);n.player.pauseVideo();r.cancel(c)});n.$on("ChatMessageReceived",function(t,i){n.isWatchingVideo&&i.chatSender!==f.User?e.isUserInFlight(v)?n.toggleVideo(!0):(n.numMessagesReceived===0&&(p=new Date),n.numMessagesReceived++):i.chatSender===f.User&&(n.numMessagesReceived=0)});n.$on("$destroy",function(){r.cancel(c)})}function h(n,t){n.removeClass("slidedown slideup");n[0].offsetWidth=n[0].offsetWidth;t?(n.toggleClass("slidedown"),n.css("display","block")):(n.toggleClass("slideup"),r(function(){n.css("display","none")},1e3))}function l(t){n.onYouTubeIframeAPIReady=function(){var n={enablejsapi:1,fs:0,modestbranding:1,disablekb:1,cc_load_policy:1,list:t.isPlaylist?t.videoId:""};t.player=new YT.Player("player",{playerVars:n,videoId:t.isPlaylist?"":t.videoId});t.player.addEventListener("onStateChange","onPlayerStateChange");t.player.addEventListener("onError","onPlayerError")};n.onPlayerStateChange=function(n){var u={videoUrl:t.player.getVideoUrl(),videoTime:t.player.getCurrentTime(),playListIndex:t.player.getPlaylistIndex()},r=o.getChatEstablished();n.data===YT.PlayerState.PLAYING?i.$broadcast("ChatVideoPlaying",r):n.data===YT.PlayerState.PAUSED?i.$broadcast("ChatVideoPaused",r):n.data===YT.PlayerState.ENDED&&i.$broadcast("ChatVideoEnded",r);i.$broadcast("ChatVideoInfo",u)};n.onPlayerError=function(n){i.$broadcast("ChatVideoError",n)}}var a="https://www.youtube.com/iframe_api",v="chv-at-1",y=1e4;return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/ChatVideo.html",scope:{view:"=?",videoId:"@?",videoDescription:"@?",isPlaylist:"&?"},replace:!0,link:function(n,t){u.getWidgetConfig("Chat-Video").then(function(r){n.isVideoEnabled=!!r;n.isVideoEnabled&&c(n,t,r);i.$broadcast("ChatVideoPresent",n.isVideoEnabled)})}}}]);angular.module(virtualAgentApp).directive("imageFallback",[function(){return{restrict:"A",link:function(n,t,i){t.bind("error",function(){t.attr("src")!==i.imageFallback&&t.attr("src",i.imageFallback)})}}}]),function(n){var t=600,i=700;n.component("messageAnimation",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/MessageAnimation.html",bindings:{delay:"<?",duration:"<?"},controller:function(){this.delay=this.delay||t;this.duration=this.duration||i;this.dot1Style={"animation-delay":2*this.delay+"ms","animation-duration":this.duration+"ms"};this.dot2Style={"animation-delay":this.delay+"ms","animation-duration":this.duration+"ms"};this.dot3Style={"animation-duration":this.duration+"ms"}}})}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("messageWindow",["compassService","messageTypes",function(n,t){function u(){return i&&i.chatting&&i.chatting.reconnectingMessage}function f(){return i&&i.chatting&&i.chatting.reconnectingClientMessage}function e(){return i&&i.error&&i.error.tryAgainButton}function o(){return i&&i.error&&i.error.chatDisconnected}function r(r){i=n.getChat();r.senderTypes=t;r.reconnectingAgent=u();r.reconnectingClient=f();r.tryAgain=e();r.disconnected=o()}var i;return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/MessageWindow.html",scope:{messages:"=",isClientReconnecting:"=",isAgentReconnecting:"=",isDisconnected:"="},replace:!0,link:function(n){n.retry=function(){n.$emit("MessageWindowTryAgain")};n.isMessageType=function(n,t){return n&&n.messageType===t};n.$on("CompassContentReady",function(){r(n)});r(n)}}}]);angular.module(virtualAgentApp).directive("accessibleSelect",[function(){var n=9,r=32,t=13,i=27;return{restrict:"A",require:"ngModel",scope:{selectOnchange:"&"},link:function(u,f,e,o){function c(){return(f.attr("aria-expanded")||"").toLowerCase()==="true"}function s(n){n=!!n;f.attr("aria-expanded",n.toString())}function h(){return u.changed?(u.selectOnchange&&angular.isFunction(u.selectOnchange)&&o.$modelValue&&o.$modelValue.value&&u.selectOnchange(),u.changed=!1,!0):!1}function l(){u.changed||(u.changed=!0,h());s(!1)}function a(){u.changed=!0;s(!c())}function v(f){f&&(f.keyCode===n||f.keyCode===t||f.keyCode===i)?(u.changed=!0,h()):u.changed=!1;f&&f.keyCode===r&&s(!0);f&&f.keyCode===t&&s(!c());f&&(f.keyCode===i||f.keyCode===n)&&s(!1)}if(u.changed=!1,f[0].size<=1){s(c());f.on("blur",l);f.on("change",h);f.on("keydown",v);f.on("click",a);u.$on("$destroy",function(){f.off("blur",l);f.off("change",h);f.off("keydown",v);f.off("click",a)})}}}}]);angular.module(virtualAgentApp).directive("agentHeader",["compassService","flightService",function(n,t){function i(t){var i=n.getChat();i&&i.chatting&&(t.view=i.chatting)}return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/AgentHeader.html",scope:{agent:"="},replace:!0,link:function(n){n.$on("CompassContentReady",function(){i(n)});i(n);n.isCsaThemesFlight=t.isUserInFlight("csa-themes-1")}}}]);angular.module(virtualAgentApp).component("agentInfo",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/AgentInfo.html",bindings:{agent:"<",view:"<",isJoining:"<"},controller:[function(){this.$onChanges=function(n){!this.agentClone&&n.agent&&n.agent.currentValue&&(this.agentClone=angular.copy(this.agent))}}]});angular.module(virtualAgentApp).component("agentTransfer",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/AgentTransfer.html",bindings:{oldAgent:"<",newAgent:"<",view:"<"},controller:function(){this.$onChanges=function(n){!this.oldAgentClone&&n.oldAgent&&n.oldAgent.currentValue&&(this.oldAgentClone=angular.copy(this.oldAgent));!this.newAgentClone&&n.newAgent&&n.newAgent.currentValue&&(this.newAgentClone=angular.copy(this.newAgent))}}});cantileverServiceSettings=cantileverServiceSettings||{},function(n){n.service("cantileverService",["$log","$window","$cookies","$interval","$q","$timeout","$rootScope","$routeParams","$location","clientConfig","languageService","channelReaderService","chatTokenService","cantileverChatTokenService","messageService","chatStateService","messageTypes","qosTelemetryService","nativeAppService","correlationVectorService","flightService","authenticationHelperService","getScriptService","chatContextService","modalityTags","authService","sdkProxyService","chatRejoinUrlService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){function fi(){if(!yi&&ui.length>0){yi=!0;workItem=ui.shift();var t=function(){yi=!1;fi()};ur(workItem).then(t,function(i){n.error("Work queue item failed: "+workItem.command+".  Error: "+i);t()})}}function ur(n){var t=u.defer(),i=function(){n.callback&&n.callback();t.resolve()};return n.command==="init"?pi(n.authReq,n.authType,n.delegatedAuthToken,i):n.command==="initlazy"?fr(i):t.reject("Unknown command type: "+n.command),t.promise}function pi(n,t,r,u){if(ht=ht||n,at=t,r=r,ii&&gt){pt?u():vt.push(u);return}ht?nr?ut.resolveAuthState().then(function(n){n===t?ei(u):(e.$broadcast("ChatRedirectToLogin",i.getAll()),ut.loginUsingAccountType(t,!0))}):nt.mobileSignIn(function(){ei(u)}):ei(u)}function fr(n){if(gt){var t=p.getDelegatedAuthToken();pi(!1,at?at:ut.getSupportedIDP().MSA,t,n)}else pt?n():(dt.push(n),ii||(cantileverServiceSettings.lazyLoad=!0,wi(),ni(),p.setSdkInitState(!1)))}function wi(){cantileverServiceSettings.organizationId=h.ChatConfig.OrganizationId;cantileverServiceSettings.partnerId=h.ChatConfig.PartnerId;cantileverServiceSettings.tier=1;cantileverServiceSettings.mode=typeof o.mode!="undefined"?o.mode:h.ChatConfig.Mode;cantileverServiceSettings.developerKey=lt?h.ChatConfig.RatPartnerId:h.ChatConfig.PartnerId;cantileverServiceSettings.language=c.lang();cantileverServiceSettings.country=c.locale();cantileverServiceSettings.callback=or;cantileverServiceSettings.chatTypingBoxId=ri.chatTypingBoxId;cantileverServiceSettings.correlationVector=d.getValue();cantileverServiceSettings.reset=!0;cantileverServiceSettings.disableCookie=!0;ii=!0}function ei(n){var f,t,i,s,r;vt.push(n);e.$broadcast("ChatInitStart");f=ut.getSupportedIDP();s=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&ti||!1;ht?at===f.AAD?(t=a.getAADTokenForUser(),i=v.getAADTokenForUser()):(t=a.getTokenForUser(lt),i=v.getTokenForUser(lt)):s?(r=p.getDelegatedAuthToken(),t=a.getDelegatedAuthTokenForUser(r),i=v.getDelegatedAuthTokenForUser(r)):(t=a.refreshToken(lt,ht),i=v.refreshToken(lt,ht));u.all([t,i]).then(function(n){var t=p.getSdkInitState();ii&&t?pt&&!gt&&(cantileverServiceSettings.session=!0,cantileverServiceSettings.lazyLoad=!1,cantileverServiceSettings.cesToken=n[0].data,cantileverServiceSettings.cantileverToken=n[1].data,n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenRccAlreadyLoaded",n.data),p.setCesToken(n[0].data),p.setSfbToken(n[1].data),gt=!0,vt.forEach(function(n){n()}),vt=[],ct=b.createEvent(b.eventTypes.awasa.initialize)):(n&&(n[1]&&n[1].data&&(cantileverServiceSettings.cantileverToken=n[1].data),n[0]&&n[0].data&&(cantileverServiceSettings.cesToken=n[0].data)),cantileverServiceSettings.session=!0,cantileverServiceSettings.lazyLoad=!1,wi(),n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenInitialRccLoad",n.data),n&&(n[1]&&n[1].data&&p.setSfbToken(n[1].data),n[0]&&n[0].data&&p.setCesToken(n[0].data)),gt=!0,p.isReconnectValid()&&(cantileverServiceSettings.reconnectChat=!0,cantileverServiceSettings.restoreId=p.getVisitId()),o.visitId&&(cantileverServiceSettings.restoreId=o.visitId,cantileverServiceSettings.reconnect=!1),ni(),p.setSdkInitState(!0));sr()},function(n){n.status===401&&(nr?ut.loginUsingAccountType(at,!0):e.$broadcast("ProcessUserSignIn",!0))})}function ni(){vi=!1;wt=b.createEvent(b.eventTypes.awasa.download);var t=b.createEvent(b.eventTypes.awasa.chat);tt.addScript(h.ChatConfig.UnifiedSdkServerPath).then(function(){n.log("Adding new channel-services-sdk");wt.resolve();wt=null;var t=cantileverServiceSettings.lazyLoad?b.eventTypes.awasa.lazyInitialize:b.eventTypes.awasa.initialize;ct=b.createEvent(t);cantileverServiceSettings.subject=p.getSubject();cantileverServiceSettings.isAuthenticated=!0;o.rejoin==="true"&&(cantileverServiceSettings.isRejoin=!0,o.visitId&&(cantileverServiceSettings.visitId=o.visitId),o.engagementId&&(cantileverServiceSettings.engagementId=o.engagementId));window.channelServices.initClientSdk(cantileverServiceSettings,function(n){window.clientSdk=n;cantileverServices=window.clientSdk;ot=n;o.rejoin==="true"?(o.visitId&&(cantileverServiceSettings.visitId=o.visitId,p.setVisitId(o.visitId)),o.engagementId&&(cantileverServiceSettings.engagementId=o.engagementId,p.setVisitId(o.engagementId))):(cantileverServiceSettings.visitId=window.clientSdk.getVisitId(),p.setVisitId(window.clientSdk.getVisitId()));er();p.setPlatform(window.clientSdk.getPlatform());dt.forEach(function(n){n()});dt=[];pt=!0;e.$broadcast("ChatInitComplete")},function(n){console.log(n)})},function(n){wt.reject(n);wt=null})}function er(){ot.chatChannel.event.on(ot.chatChannel.events.isAgentTyping,st.AgentTyping);ot.chatChannel.event.on(ot.chatChannel.events.chatMessageAdded,st.ChatMessageReceived);ot.chatChannel.event.on(ot.chatChannel.events.queueStatus,st.ChatQueueStatus);ot.chatChannel.event.on(ot.chatChannel.events.chatQueued,st.ChatQueued);ot.chatChannel.event.on(ot.chatChannel.events.chatEnqueueFailed,st.ChatRejected);ot.chatChannel.event.on(ot.chatChannel.events.chatChannelUnavailable,st.ChatSessionClosed);ot.chatChannel.event.on(ot.chatChannel.events.agentJoined,st.ChatSessionEstablished);ot.chatChannel.event.on(ot.chatChannel.events.chatRejoined,st.ChatSessionEstablished);ot.chatChannel.event.on(ot.chatChannel.events.ChatTimeout,st.ChatTimeout);ot.chatChannel.event.on(ot.chatChannel.events.chatTransferred,st.ChatTransferred);ot.chatChannel.event.on(ot.chatChannel.events.commandReceived,st.CommandMessageReceived);ot.chatChannel.event.on(ot.chatChannel.events.enqueuedPositionChanged,st.EstimatedWaitTime);ot.chatChannel.event.on(ot.chatChannel.events.chatTransferred,st.TransferSessionEstablished);ot.chatChannel.event.on(ot.chatChannel.events.chatChannelDisconnected,st.ChatChannelDisconnected);ot.chatChannel.event.on(ot.chatChannel.events.chatChannelReconnected,st.ChatChannelReconnected);ot.chatChannel.event.on(ot.chatChannel.events.agentLeft,st.AgentDisconnected);ot.chatChannel.event.on(ot.chatChannel.events.agentDisconnected,st.AgentDisconnected);ot.chatChannel.event.on(ot.chatChannel.events.agentReconnected,st.AgentReconnected);f(function(){if(p.getCesToken()||p.getSfbToken()){var n=p.getPlatform();n==yt?ot.setToken(p.getSfbToken()):ot.setToken(p.getCesToken());cantileverServiceSettings.cesToken=p.getCesToken();cantileverServiceSettings.cantileverToken=p.getSfbToken();vt.forEach(function(n){n()});vt=[];pt=!0;e.$broadcast("ChatInitComplete")}})}function oi(){d.extendCv();cantileverServiceSettings.correlationVector=d.getValue()}function or(t,i){var s,o,r,u;switch(i.type){case"exception":s=b.createEvent(b.eventTypes.awasa.error);n.error("Exception received: Sender: "+JSON.stringify(t),i);ir.indexOf(i.errorCode)===-1&&s.reject(i);break;case"FacadeReady":ct&&(ct.resolve(),ct=null);ot=ot?ot:i.instance;f(function(){dt.forEach(function(n){n()});dt=[];pt=!0;e.$broadcast("ChatInitComplete")});break;case"loaded":n.log("Loaded callback received");ct&&(ct.resolve(),ct=null);ot=i.instance;o=ot.getVisitId();e.$broadcast("awasaVisitId",o);p.setVisitId(o);ot.chatChannel.event.on(ot.chatChannel.events.AgentTyping,st.AgentTyping);ot.chatChannel.event.on(ot.chatChannel.events.ChatMessageReceived,st.ChatMessageReceived);ot.chatChannel.event.on(ot.chatChannel.events.ChatQueueStatus,st.ChatQueueStatus);ot.chatChannel.event.on(ot.chatChannel.events.ChatQueued,st.ChatQueued);ot.chatChannel.event.on(ot.chatChannel.events.ChatRejected,st.ChatRejected);ot.chatChannel.event.on(ot.chatChannel.events.ChatSessionClosed,st.ChatSessionClosed);ot.chatChannel.event.on(ot.chatChannel.events.ChatSessionEstablished,st.ChatSessionEstablished);ot.chatChannel.event.on(ot.chatChannel.events.ChatSessionReconnected,st.ChatSessionReconnected);ot.chatChannel.event.on(ot.chatChannel.events.ChatTimeout,st.ChatTimeout);ot.chatChannel.event.on(ot.chatChannel.events.ChatTransferred,st.ChatTransferred);ot.chatChannel.event.on(ot.chatChannel.events.CommandMessageReceived,st.CommandMessageReceived);ot.chatChannel.event.on(ot.chatChannel.events.EstimatedWaitTime,st.EstimatedWaitTime);ot.chatChannel.event.on(ot.chatChannel.events.SessionRestored,st.SessionRestored);ot.chatChannel.event.on(ot.chatChannel.events.TransferSessionEstablished,st.TransferSessionEstablished);ot.chatChannel.event.on(ot.chatChannel.events.Validation,st.Validation);ot.chatChannel.event.on(ot.chatChannel.events.ChatChannelDisconnected,st.ChatChannelDisconnected);ot.chatChannel.event.on(ot.chatChannel.events.ChatChannelReconnected,st.ChatChannelReconnected);ot.chatChannel.event.on(ot.chatChannel.events.AgentDisconnected,st.AgentDisconnected);if(ot.subscribe(ot.chatChannel.events.AgentReconnected,st.AgentReconnected),i&&i.restored)for(r=0;r<i.attributes.length;r++)i.attributes[r].name=="AgentId"&&(u=p.getAgent(),u||(u={}),u.AgentId=i.attributes[r].value,p.setAgent(u));f(function(){if(p.getToken()){var n=p.getPlatform();n==yt?ot.setToken(p.getSfbToken()):ot.setToken(p.getCesToken());cantileverServiceSettings.cesToken=p.getCesToken();cantileverServiceSettings.cantileverToken=p.getSfbToken();vt.forEach(function(n){n()});vt=[];pt=!0;e.$broadcast("ChatInitComplete")}})}}function si(){bt&&r.cancel(bt)}function sr(){si();bt=r(function(){hr()},ri.tokenRefreshInterval)}function hr(){var t=function(t){if(i==yt?p.setSfbToken(t):p.setCesToken(t),typeof ot=="undefined")bt&&r.cancel(bt);else{n.log("User token refreshed");var i=p.getPlatform();i==yt?ot.setToken(p.getSfbToken()):ot.setToken(p.getCesToken());cantileverServiceSettings.cesToken=p.getCesToken();cantileverServiceSettings.cantileverToken=p.getSfbToken()}},i=li();i.refreshToken(lt,ht,at).then(function(n){n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenFromRefresh",n.data);t(n.data)})}function bi(){kt&&(r.cancel(kt),kt=undefined,window.clientSdk.chatChannel.sendIsTyping(!1))}function cr(){if(!angular.isDefined(kt)){var n=1;window.clientSdk.chatChannel.sendIsTyping(!0);kt=r(function(){n>=0?n=n-1:bi()},200)}}function ki(t){var i=b.createEvent(b.eventTypes.awasa.chat);return u(function(r,u){for(var w,b,nt=p.getSubject(),h,c,k,d,g,a,v,y,f,l=window.clientSdk.getPlatform(),s=0;s<t.attributes.length;s++){w=t.attributes[s].name;switch(w){case"WindowsLiveUserPUID":k=t.attributes[s].value;break;case"IsAuthenticated":d=t.attributes[s].value;break;case"WebStartContext":g=t.attributes[s].value;break;case"AppStartContext":a=t.attributes[s].value;break;case"rejoinurl":v=t.attributes[s].value;break;case"prechatsurvey":y=t.attributes[s].value}}f={context:{WindowsLiveUserPUID:k,WebStartContext:g},accessibility:!1};a&&(f.context.AppStartContext=a);v&&l==tr&&(f.context.rejoinurl=v);y&&(f.context.prechatsurvey=y);f.context.IsAuthenticated=l==tr?d:"true";t.rejoin==!0?(o.rejoin==="true"&&(o.visitId&&(f.context.visitId=o.visitId),o.engagementId&&(f.context.engagementId=o.engagementId)),b=window.clientSdk.chatChannel.restoreEngagement(f).then(function(){var n=rr.getEstimatedChatWaitTime().then(function(n){var f,u,s,t;c=window.clientSdk.getEngagementId();p.setEngagementId(c);visitId=window.clientSdk.getVisitId();p.setVisitId(visitId);h=ai();f=n?n:0;l==yt&&(u=et.getRejoinUrl(ht,at,l),ft.proxy().then(function(n){n.dispatchEvent("chatRejoinUrl",u)}),s=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&ti||!1,s||window.clientSdk.updateContext({rejoinurl:u}));t={visitId:visitId,engagementId:c,waitTimeEstimate:f,enqueueId:h};i.resolve(t);e.$broadcast("EnqueueChatSuccess",t);r(t);e.$broadcast("awasaEnqueueId",h);p.setEnqueueId(h)})},function(t){i.reject(t);n.error("Chat failed to enqueue",t);e.$broadcast("EnqueueChatFailure",t);u(t)})):b=window.clientSdk.chatChannel.startEngagement(f).then(function(){var n=rr.getEstimatedChatWaitTime().then(function(n){var f,u,s,t;c=window.clientSdk.getEngagementId();p.setEngagementId(c);visitId=window.clientSdk.getVisitId();p.setVisitId(visitId);h=ai();f=n?n:0;l==yt&&(u=et.getRejoinUrl(ht,at,l),ft.proxy().then(function(n){n.dispatchEvent("chatRejoinUrl",u)}),s=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&ti||!1,s||window.clientSdk.updateContext({rejoinurl:u}));t={visitId:visitId,engagementId:c,waitTimeEstimate:f,enqueueId:h};i.resolve(t);e.$broadcast("EnqueueChatSuccess",t);r(t);e.$broadcast("awasaEnqueueId",h);p.setEnqueueId(h)})},function(t){i.reject(t);n.error("Chat failed to enqueue",t);e.$broadcast("EnqueueChatFailure",t);u(t)})})}function di(t,i,r,f){for(var a,o,y={test:h&&h.ChatConfig&&h.ChatConfig.UseTestCallbackQueue,attributes:t},w=JSON.stringify(y),c=b.createEvent(b.eventTypes.awasa.callback),l,v="",s=0;s<t.length;s++)a=t[s].name,a=="CallbackNumber"&&(v=t[s].value);o={callbackNumber:v};f&&(o.timeslot=f);var k={subject:p.getSubject(),context:o},d=u.defer(),g=window.clientSdk.callbackChannel.startEngagement(k).then(function(){engagementId=window.clientSdk.getEngagementId();visitId=window.clientSdk.getVisitId();p.setEngagementId(engagementId);l=ai();var t={context:w},n={visitId:visitId,engagementId:engagementId,enqueueId:l,methodParameters:t};c.resolve(n);e.$broadcast("EnqueueCallbackSuccess",n);p.setEnqueueId(l)},function(t){t&&t.errorCode&&(ir.indexOf(t.errorCode)!=-1||(vr.indexOf(o.errorCode)!=-1?(o.status="400",c.reject(t)):c.reject(t)));n.error("Callback failed to enqueue"+JSON.stringify(o));o.locale=r;e.$broadcast("EnqueueCallbackFailure",o)});return d.promise}function lr(n,t){for(var i in n)if(n[i].Id==t)return n[i].Name;return null}function ar(n,t,i){var u,r;for(u in n)if(n[u].Id==i)return r=n[u].Channels.filter(function(n){return n.Type==t})[0],r&&(r.AverageWaitTime=r.AverageWaitTime*1),r;return null}function hi(n){if(si(),ot&&typeof ot.chatChannel.disengage=="function"){var t=b.createEvent(b.eventTypes.awasa.disengage);ot.chatChannel.disengage(function(i){return e.$broadcast("NotifyAppClosingComplete"),i.visitId=p.getVisitId(),e.$broadcast("ChatDisengageSuccess",i),t.resolve(i),n&&ni(),!0},function(i){return e.$broadcast("NotifyAppClosingComplete"),i.visitId=p.getVisitId(),e.$broadcast("ChatDisengageFailure",i),t.reject(i),n&&ni(),!0})}else e.$broadcast("NotifyAppClosingComplete");return!1}function ci(n){for(var i=[],t=0;t<n.length;t++)n[t].Key=="prechatsurvey"?i.push({name:n[t].Key,value:n[t].Value,encrypted:!1}):i.push({name:n[t].Key,value:n[t].Value,encrypted:!0});return i}function gi(){var r=i.get("ChatValues"),n,u;r&&(n={},u=r.split("&"),u.forEach(function(i){splitValue=i.match(/^(\w+?)\=(.*)/);splitValue&&splitValue.length===3&&(n[splitValue[1]]=t.atob(splitValue[2]))}),e.$broadcast("PrechatText",JSON.stringify(n)))}function li(){var t=p.getPlatform(),n=a;return t==yt&&(n=v),n}function ai(){return(new Date).getTime()}var nr=g.isUserInFlight("aad-1"),ti=g.isUserInFlight("delegatedauth-1"),ot,bt,kt,ii=!1,pt=!1,vi=!1,dt=[],vt=[],ri={tokenRefreshInterval:18e4},tr="ces",yt="sfb",ir=["CHAT_MESSAGE_ERROR","CHANNEL_CONTACTSCHEDULED"],vr=["CHANNEL_CONTACTINVALID","CHANNEL_APPTUNAVAILABLE"],wt,ct,rr=this,lt=!1,gt=!1,ht=!1,at=null,ui=[],yi=!1,st={AgentTyping:function(n){f(function(){e.$broadcast("AgentTyping",n.isTyping)})},ChatMessageReceived:function(t){t.direction=="Incoming"&&f(function(){n.log("Chat Message Received"+JSON.stringify(t));e.$broadcast("ChatMessageReceived",{text:t.textMessage,senderName:p.getAgent()&&p.getAgent().DisplayName,messageType:w.Agent});e.$broadcast("AgentTyping",!1)})},ChatQueueStatus:function(t){f(function(){n.log("Chat Queue Status"+JSON.stringify(t));e.$broadcast("ChatQueueStatus",t)})},ChatQueued:function(){n.log("Chat Queued")},ChatRejected:function(t){n.log("Chat Rejected"+JSON.stringify(t))},ChatSessionClosed:function(t){f(function(){n.log("Chat Session Closed"+JSON.stringify(t));e.$broadcast("ChatSessionClosed",{})})},ChatSessionEstablished:function(t){f(function(){n.log("Chat Session Established"+JSON.stringify(t));e.$broadcast("ChatSessionEstablished",{agentId:t[0]})})},ChatSessionReconnected:function(t){f(function(){n.log("Chat Session Reconnected"+JSON.stringify(t));e.$broadcast("ChatSessionRestored",t)})},ChatTimeout:function(t){n.log("Chat Timeout"+JSON.stringify(t))},ChatTransferred:function(t){f(function(){n.log("Chat Transferred"+JSON.stringify(t));e.$broadcast("awasaChatId",t.chatId);p.setChatId(t.chatId);oi();e.$broadcast("ChatTransferred",t)})},CommandMessageReceived:function(t){f(function(){n.log("Command Message Received"+JSON.stringify(t));e.$broadcast("CommandMessageReceived",t)})},EstimatedWaitTime:function(n){f(function(){e.$broadcast("ChatEstimateWaitTimeUpdate",n)})},SessionRestored:function(t){n.log("Session Restored"+JSON.stringify(t))},TransferSessionEstablished:function(t){n.log("Transfer Session Established"+JSON.stringify(t))},Validation:function(t){n.log("Validation"+JSON.stringify(t))},AgentReconnected:function(t){f(function(){b.createEvent(b.eventTypes.awasa.agentReconnect).resolve();n.log("Agent Connection Restored"+JSON.stringify(t));e.$broadcast("AgentReconnected",{agentId:t[0].id})})},AgentDisconnected:function(t){f(function(){b.createEvent(b.eventTypes.awasa.agentDisconnect).reject();n.log("Agent Connection Disconnected"+JSON.stringify(t));t&&t[0]&&t[0].reason&&t[0].reason=="EndChat"?e.$broadcast("ChatSessionClosed",{}):e.$broadcast("AgentDisconnected",{agentId:t[0].id})})},ChatChannelReconnected:function(){f(function(){b.createEvent(b.eventTypes.awasa.channelReconnect).resolve();n.log("Customer Connection Restored");e.$broadcast("ChatChannelReconnected")})},ChatChannelDisconnected:function(){f(function(){b.createEvent(b.eventTypes.awasa.channelDisconnect).reject();n.log("Customer Connection Disconnected");e.$broadcast("ChatChannelDisconnected")})}};this.toggleRatMode=function(){lt=!lt};this.isRatMode=function(){return lt};this.init=function(n,t,i,r){ui.push({command:"init",authReq:n,authType:t,delegatedAuthToken:i,callback:r});fi()};this.initLazy=function(n){ui.push({command:"initlazy",callback:n});fi()};this.getChatTypingBoxId=function(){return ri.chatTypingBoxId};this.setChatTypingBoxId=function(n){cantileverServiceSettings&&(cantileverServiceSettings.chatTypingBoxId=n)};e.$on("UserTyping",function(){cr()});e.$on("UserNotTyping",function(){bi()});this.enqueueChat=function(i){var f,l,s,c,a,r,u,v;if(p.getChatEstablished()){e.$broadcast("DoubleChatEnqueued");n.error("Chat already exists. Can't enqueue again.",i);return}oi();i=i||{};i.attributes=i.attributes||[];i.mode=i.mode||(typeof o.mode!="undefined"?o.mode:h.ChatConfig.Mode);i.disability=i.disability||p.getSubject()==h.ChatConfig.DisabilityAnswerDeskId;i.accessibility=i.accessibility||p.getSubject()==h.ChatConfig.DisabilityAnswerDeskId;gi();p.getAppStartContext()&&i.attributes.push({name:"AppStartContext",value:JSON.stringify(p.getAppStartContext()),encrypted:!1});f="";try{f=parent&&parent.window&&parent.window.location&&parent.window.location.href}catch(y){}return o.rejoin!=="true"&&i.attributes.push({name:"WebStartContext",value:JSON.stringify({url:t&&t.location&&t.location.href,parentUrl:f,userAgent:navigator&&navigator.userAgent,VATranscriptInfo:{visitId:i&&i.cantileverVisitId||"",engagementId:i&&i.cantileverEngagementId||""}}),encrypted:!1}),lt?ki(i):(o.rejoin==="true"&&(i.rejoin=!0,p.getAgent()&&(i.agentId=p.getAgent().AgentId)),h.ChatConfig&&h.ChatConfig.ExplicitAgentId&&h.ChatConfig.ExplicitAgentId>0&&(i.agentId=h.ChatConfig.ExplicitAgentId),l=p.getPlatform(),s=et.getRejoinUrl(ht,at,l),ft.proxy().then(function(n){n.dispatchEvent("chatRejoinUrl",s)}),c=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&ti||!1,c||i.attributes.push({name:"rejoinurl",value:s,encrypted:!1}),a=ut.getSupportedIDP(),r=li(),ht?u=at===a.AAD?r.getAADEncryptedValueCookie(p.getVisitId(),null):r.getEncryptedValueCookie(p.getVisitId(),null):c?(v=p.getDelegatedAuthToken(),u=r.getDelegatedEncryptedValueCookie(p.getVisitId(),null,v)):u=r.getUnauthEncryptedValueCookie(p.getVisitId(),null),u.then(function(t){for(var u=ci(t.data),r=0;r<u.length;r++)n.log(u[r]),i.attributes.push(u[r]);return ki(i)}))};this.getChatTypingBoxId=function(){return ri.chatTypingBoxId};this.getCallbackTime=function(t,i,r){var c={test:h&&h.ChatConfig&&h.ChatConfig.UseTestCallbackQueue,count:i},o=b.createEvent(b.eventTypes.awasa.times),f=u.defer(),s={subject:r,time:t,test:h&&h.ChatConfig&&h.ChatConfig.UseTestCallbackQueue,count:i};return ot.callbackChannel.getCallbackTime(s).then(function(n){o.resolve(n);f.resolve(n);e.$broadcast("GetCallbackTimeSuccess",n)},function(t){o.reject(t);n.error("failure: "+t);f.reject(t);e.$broadcast("GetCallbackTimeFailure",t)}),f.promise};this.enqueueCallback=function(n,t,i,r){var u=this.validateNumber(n,i),o,f,s,n;oi();gi();o=li();e.$broadcast("CallbackPhoneValidation",u);u&&u.isValid&&(f=u.formattedContact,s=p.getPlatform(),s==yt&&(n=u.formattedContact,f=n.replace(/\D/g,"")),ht?o.getEncryptedValueCookie(p.getVisitId(),f).then(function(n){var u=ci(n.data);di(u,t,i,r)}):o.getUnauthEncryptedValueCookie(p.getVisitId(),f).then(function(n){var u=ci(n.data);di(u,t,i,r)}))};this.postTranscript=function(n,t){var i=b.createEvent(b.eventTypes.awasa.postChatTranscript),r={transcript:n,isBotConversation:t};return ot.postChatTranscript(r,i.resolve,i.reject),i.promise};this.validateNumber=function(n,t){return ot?ot.callbackChannel.validatePhoneNumber(n,{country:t}):null};this.sendMessage=function(t){return u(function(i,r){var f,u;vi?(t.text=="agentend"?e.$broadcast("ChatSessionClosed",{}):(f=y.createMessage({text:"Echo: "+t.text,senderName:"Emulator Agent"},w.Agent),p.setAgent(),e.$broadcast("ChatMessageReceived",f)),i()):(u=b.createEvent(b.eventTypes.awasa.sendMessage),ot.chatChannel.sendMessage(t.text,function(n){n.visitId=p.getVisitId();u.resolve();e.$broadcast("ChatMessageSendSuccess",n);i(n)},function(i){i.visitId=p.getVisitId();u.reject(i);n.error("Failed to send message"+JSON.stringify(i));e.$broadcast("ChatMessageSendError",t);r(i)}))})};this.getEstimatedCallbackWaitTime=function(n){var t=ot.getEstimatedWaitTime();return n||(n=p.getSubject()),ar(t,"Callback",n)};this.getEstimatedChatWaitTime=function(n){var i={subject:n,language:cantileverServiceSettings.language,country:cantileverServiceSettings.country,tier:cantileverServiceSettings.tier,mode:cantileverServiceSettings.mode},t=u.defer();return ot.chatChannel.getQueueLength(i).then(function(i){n||(n=p.getSubject());t.resolve(i)}).catch(function(n){console.log(n);t.resolve(errorOperations)}),t.promise};this.getSubjectName=function(n){var t=ot&&ot.getEstimatedWaitTime();return n||(n=p.getSubject()),lr(t,n)};this.isWithinOperatingHours=function(n,t){var r=b.createEvent(b.eventTypes.awasa.channelStatus),c={mode:typeof o.mode!="undefined"?o.mode:h.ChatConfig.Mode},a={isOpen:!1,isAvailable:!1,status:l.getStatus(!1,!1),schedule:[]},f={},i={description:"",subjectId:n?n:" ",channels:[]},s,e;return(typeof o.scheduleAsOf!="undefined"&&(c.scheduleAsOf=o.scheduleAsOf),!t||t.length===0)?(i.description="no channels provided",i.status=400,r.reject(i),u.resolve(f)):(t=Array.isArray(t)?t:[t],t.forEach(function(n){f[n]=a}),i.channels=t.join("|"),!n)?(i.description="subject id is blank",i.status=400,r.reject(i),u.resolve(f)):(s={subject:n,language:cantileverServiceSettings.language,country:cantileverServiceSettings.country,tier:cantileverServiceSettings.tier,mode:cantileverServiceSettings.mode},e=u.defer(),ot.getChannelStatus(s).then(function(n){console.log("HOOPS: "+JSON.stringify(n));var f=l.getChannelOperations(n,t),u=l.getChannelOutages(f);u&&u.length>0?(i.description="The following are unavailable for this subject",i.channels=u.join("|"),r.reject(i)):(i.description="The following are available for this subject",r.resolve(i));e.resolve(f)}).catch(function(n){console.log(n);r.reject(n);e.resolve(f)}),e.promise)};this.endChat=function(n){return hi(n)};e.$on("ChatSessionClosed",function(){si()});e.$on("NativeAppClosing",function(){hi()});e.$on("ForwardToAgent",function(n,t){var i=b.createEvent(b.eventTypes.awasa.sendCommand);ot.sendCommand(t,function(n){i.resolve();e.$broadcast("ForwardToAgentSuccess",n)},function(n){i.reject(n);e.$broadcast("ForwardToAgentFailure",n)})});e.$on("ChatPageTimeout",function(){wt&&wt.reject("Chat page timed out while attempting to download the awasa sdk");ct&&ct.reject("Chat page timed out while attempting to initialize the awasa sdk")});h&&h.TestConfig&&h.TestConfig.AllowChatEmulator&&e.$on("ChatEmulate",function(){vi=!0;hi(!1);e.$broadcast("ChatSessionEstablished",{agentId:123456789})})}])}(angular.module(virtualAgentApp)),function(n){n.directive("card",[function(){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/Card.html",scope:{header:"=",showCancel:"=",cancelAction:"&",cancelText:"="},transclude:!0,replace:!0}}])}(angular.module(virtualAgentApp)),function(n){n.value("channelStatuses",{UNAVAILABLE:0,OPEN:1,CLOSED:2});n.service("channelReaderService",["$log","$filter","$routeParams","channelStatuses",function(n,t,i,r){function u(n){var t=n.split(" ")[0].split(":"),i=new Date,r=parseInt(t[0],10),u=parseInt(t[1],10),f=parseInt(t[2],10);return i.setUTCHours(r,u,f),i}function f(){var i=[],n=new Date,t;for(n.setDate(n.getDate()-n.getDay()),t=0;t<7;t++)i.push(new Date(n)),n.setDate(n.getDate()+1);return i}function e(n,t){var i=n.getMonth(),r=t.getMonth();return i===r?n.getDate()<t.getDate()?-1:n.getDate()>t.getDate()?1:0:i<r?-1:1}function o(n){var s=[],e;if(n&&n.length===7){var a=f(),i,r="",u="",o=[];for(e=1;e<8;e++){var l=e%7,h=n[l],c=t("date")(a[l],"EEE");i?i.join(", ")==h.join(", ")?u=c:(o=u==""?[r]:[r,u],s.push({days:o,shifts:i}),r=c,u="",i=h):(r=c,i=h)}o=u==""?[r]:[r,u];s.push({days:o,shifts:i})}return s}var s=this;this.getChannelOperations=function(n,t){var i={e2eSchedule:{}};return t.forEach(function(t){i[t]=s.getChannelOperation(n,t);i.e2eSchedule[t]=i[t].e2eSchedule}),i};this.getChannelOperation=function(t,i){t&&Array.isArray(t)||(t=t?[t]:[]);i!==""&&(i=i.toLowerCase(),t=t.filter(function(n){return n.Type&&(n.Type=n.Type.toLowerCase()),n&&n.Type===i}));t.length===0&&n.error("No channels found for channelType:",i);var r={e2eSchedule:null,isOpen:!0,isAvailable:!1,status:this.getStatus(!0,!1),schedule:[]};return t.some(function(n){return r=this.getOperationStatus(n),r.isOpen&&r.isAvailable}.bind(this)),r};this.getChannelOutages=function(n){var t=[];return Object.keys(n).forEach(function(i){n[i].status===r.UNAVAILABLE&&t.push(i)}),t};this.getStatus=function(n,t){return n?t||typeof i.scheduleAsOf!="undefined"?r.OPEN:r.UNAVAILABLE:r.CLOSED};this.getOperationStatus=function(i){var l,f,s;if(typeof i=="undefined"||typeof i.IsAvailable=="undefined"||typeof i.HOOPsStatus=="undefined")return n.error("malformatted status",JSON.stringify(i)),{e2eSchedule:null,isAvailable:!0,isOpen:!0,status:this.getStatus(!0,!0),schedule:[]};var h=i.HOOPsStatus!==r.CLOSED,c=i.Type==="phone"||i.IsAvailable,a=[];if(!h||!c){for(l=0;l<7;l++)a[l]=[];for(f=0;f<7;f++){if(s=i.HoopsSchedule[f],s&&!Array.isArray(s))return n.error("malformatted channel schedule",JSON.stringify(s)),{e2eSchedule:null,isAvailable:c,isOpen:h,status:this.getStatus(h,c),schedule:[]};s&&s.length>0&&s.forEach(function(n){var i=u(n.StartTime),r=u(n.EndTime),o=t("date")(i,"shortTime")+"-"+t("date")(r,"shortTime"),s;e(i,r)<0?(s=f-1<0?6:f-1,a[s].push(o)):a[f].push(o)})}}return{e2eSchedule:i.HoopsSchedule,isAvailable:c,isOpen:h,status:this.getStatus(h,c),schedule:o(a)}}}])}(angular.module(virtualAgentApp)),function(n){var t=0;n.component("commonMessage",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/CommonMessage.html",bindings:{message:"<"},controller:["messageService","messageTypes",function(n,i){function f(){return function(n){this.message.slots=null;this.message.slotAction(n)}}function u(){r&&r()}var r;this.$onInit=function(){this.messageTypes=i;this.isMessageType=n.isMessageType.bind(null,this.message);this.slotsHidden=!this.message.slots||this.message.slots.length<=0;this.message.slots&&this.message.slotAction&&(this.onSlotClick=f(),this.message.room&&(r=n.notifyOnMessage(this.message.room,"common-message-slots-"+t,this.hideSlots.bind(this))));t++};this.hideSlots=function(){this.slotsHidden=!0;u()};this.$onDestroy=u}]})}(angular.module(virtualAgentApp)),function(n){n.controller("ContactDisplayController",["$route","$scope","$rootScope","$window","$location","nativeAppService","navigationService","compassService","chatStateService","partnerDataService","flightService","virtualAgentService",function(n,t,i,r,u,f,e,o,s,h,c,l){function a(){t.isNative=f.isNative();t.isEnterprise=n.current&&n.current.data&&n.current.data.isEnterprise;u.search().inAppSdk||t.isEnterprise||(!t.isNative||!t.isVirtualAgentEnabled)&&t.isNative||(t.showHeader=!0)}function v(){t.contactHeader=o.getContactHeader();t.msLogo=o.getMicrosoftLogo();t.msLogoAlt=o.getMicrosoftLogoAlt();t.comingSoon=o.getComingSoon()}function y(){return u.search()&&typeof u.search().disableassistedsupport!="undefined"&&u.search().disableassistedsupport==="true"}t.config={disableAssistedSupport:y()};t.isVAInAppFlight=c.isUserInFlight("va-inapp-1");t.reset=function(){v()};t.navInterruptCondition=function(){return!f.isNative()&&s.getChatEstablished()};t.navInterruptedMessage=function(){return o.getNavigationInterrupted()};t.isVirtualAgentEnabled=l.isEnabled();t.$on("$routeChangeSuccess",function(){a()});t.$on("CompassContentReady",v);t.$on("NativeCookieUpdate",a);t.$on("$viewContentLoaded",e.update);t.$on("NativeSignInFailed",function(){r.document.referrer&&r.history.back();u.url().indexOf("/virtual-agent/")==-1&&i.$broadcast("500Error")});t.$on("ChatBack",function(){var n=h.returnUrl();n?r.open(n,"_self"):(!e.isRoot()||f.isNative())&&(r.document.referrer.indexOf("live.com")>=0?e.goToRoot():r.history.back())});t.$on("ChatVideoPresent",function(n,i){t.hasChatVideo=i});t.reset()}])}(angular.module(virtualAgentApp)),function(n){n.controller("ContactFrameController",["$scope","$rootScope","$route","navigationService","compassService","languageService","partnerDataService","virtualAgentConstants","virtualAgentSDKService",function(n,t,i,r,u,f,e,o,s){function l(){n.contactHeader=u.getContactHeader();n.backText=u.getBackText();n.icon=u.getContactSupportIcon()}function a(n,t){s.raiseSdkEvent({type:o.sdkEvents.controlUpdated,data:{type:n,visible:t}})}function h(){n.headerText="";n.headerImage="";var t=i.current.data&&i.current.data.isLandingPage,u=r.isRoot(),f=e.returnUrl();n.showBackButton=!1;n.showIcon=!1;c||!f&&(t||u)?n.showIcon=!0:n.showBackButton=!0}var c=!1;n.reset=function(){n.chatSource="/"+f.langLocale()+"/contact/menu/";n.showBackButton=!0;n.isRTL=f.currentDirection()==="rtl";l();h()};n.backClick=function(){t.$broadcast("ChatBack")};n.requestSurvey=function(){t.$broadcast("ChatSurveyRequested")};n.endChat=function(){t.$broadcast("ChatSessionClosed",{})};n.startOver=function(){t.$broadcast("VirtualAgentReset")};n.$on("CompassContentReady",l);n.$on("ChatSessionEstablished",function(){c=!0;h()});n.$on("ChatSessionClosed",function(){c=!1;h()});n.$on("ChatFrameHeader",function(t,i){i&&(n.headerText=i.text||n.headerText,n.headerImage=i.image||n.headerImage,n.endText=i.endText||n.endText,n.resetLabel=i.resetLabel||n.resetLabel,n.survey=i.survey||n.survey,n.showIcon=i.showIcon,n.showEndChat=i.showEnd,n.showReset=i.showReset,n.showBackButton=typeof i.showBackButton!="undefined"?i.showBackButton:n.showBackButton,i.isVirtualAgent!==undefined&&(n.isVirtualAgent=i.isVirtualAgent),n.isVirtualAgent&&(typeof i.showReset!="undefined"&&a(o.sdkControlTypes.startover,i.showReset),typeof i.showEnd!="undefined"&&a(o.sdkControlTypes.endchat,i.showEnd)))});n.$on("$routeChangeSuccess",function(){h()});n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.service("emailTranscriptService",["$http",function(n){this.emailChatTranscript=function(t,i,r){var u={params:{visitId:t,email:i,timeOffset:r}};return n.get("/api/emailTranscript",u)}}])}(angular.module(virtualAgentApp)),function(n){n.controller("HoopsController",["$rootScope","$scope","$location","compassService","chatStateService","rccService","clientConfig","modalityTags","cantileverService","flightService",function(n,t,i,r,u,f,e,o,s,h){function c(){var n=i.path().split("/");return n.length>=3?n[2]:""}function l(n){return n&&n.metaTags.indexOf(o.scheduleCallback)>-1}function a(){t.options=t.options||[];t.options=t.options.filter(l)}function v(){r.getHoursOfOperationView().then(function(n){t.hoursOfOperation=n;r.getMenuOptionsForId(u.getSubject()).then(function(n){t.options=n;a()});t.status.waitingOnCompass=!t.hoursOfOperation})}t.config={timeout:e.ChatConfig.ChatDefaultTimeout};t.reset=function(){t.status={waitingOnRcc:!0,waitingOnCompass:!0,waitingOnHoops:!0};t.isUserInCantileverFlight=h.isUserInFlight("cantilever-1");t.isUserInCantileverFlight?s.initLazy(function(){t.status.waitingOnRcc=!1;var n=c();s.isWithinOperatingHours(u.getSubject(),n).then(function(i){t.status.waitingOnHoops=!1;t.hoopsSchedule=i[n].schedule})}):f.initLazy(function(){t.status.waitingOnRcc=!1;var n=c();f.isWithinOperatingHours(u.getSubject(),n).then(function(i){t.status.waitingOnHoops=!1;t.hoopsSchedule=i[n].schedule})});v()};t.$on("HoopsMenuPageTimeout",function(){t.isReady||n.$broadcast("500Error",{reason:"Timeout occurred on a hours of operation page",data:t.status})});t.$watchCollection("status",function(n){t.isReady=n&&!Object.keys(n).some(function(t){return n[t]})});t.reset()}])}(angular.module(virtualAgentApp)),function(n){n.directive("supHoops",[function(){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/ContactUs/Hoops.html",scope:{modality:"="}}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("menuExtras",["$rootScope","$document","$location","$window",function(n,t,i,r){function u(n){n.wasButtonClicked=!1;n.wasElemClicked=!1;n.isMenuShown=!1}function f(n){n.wasButtonClicked||n.wasElemClicked||!n.isMenuShown||(n.isMenuShown=!1);n.wasButtonClicked=!1;n.wasElemClicked=!1}function e(n){n.wasButtonClicked||(n.wasElemClicked=!0)}return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/SupportMenu/MenuExtras.html",scope:{extras:"=",icon:"="},link:function(o,s){var h=function(){e(o);o.$apply()},c=function(){f(o);o.$apply()};o.menuExtraClick=function(t){t.externalLink?r.open(t.link.linkUrl):i.path(t.link.linkUrl);n.$broadcast("MenuExtraClicked",t)};o.toggleMenu=function(){o.isMenuShown=!o.isMenuShown;o.wasButtonClicked=!0};t.bind("click",c);s.bind("click",h);o.$on("$destroy",function(){t.unbind("click",c);s.unbind("click",h)});u(o)}}}]),function(n){var t=400;n.component("message",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/Message.html",bindings:{message:"<content",loadingText:"="},controller:["$timeout","messageTypes","messageService","focusContentService",function(n,i,r,u){var o=this.message.loadingTime||0,e=null,f=this;this.$onInit=function(){this.messageTypes=i;this.isMessageType=r.isMessageType.bind(null,this.message);this.messageStyle={};this.messageTextStyle={};this.focusIndex=-1;typeof this.message.action=="function"||this.message.actionIsUrl||(this.message.action=null);this.message.loadingType?this.loadMessage():(this.message.isVisible=!0,this.message.loadingType=null)};this.loadMessage=function(){this.message.isVisible=!1;r.delayMessage(this.message,o,function(n,t){f.message.loadingType==="message"&&(f.messageTextStyle={opacity:"0"});f.message.isVisible=!0;e=t},function(){f.message.loadingType==="message"&&(f.messageStyle={"animation-name":"message-slide-out","animation-duration":t+"ms","animation-fill-mode":"forwards"},e=n(function(){f.messageTextStyle={opacity:"1"}},t));f.message.loadingType=null})};this.showMoreOrLess=function(n){this.focusIndex=n;u.focus("search-result-item");this.message.showMore=!this.message.showMore};this.$onDestroy=function(){n.cancel(e)}}]})}(angular.module(virtualAgentApp)),function(n){n.service("messageScrubberService",[function(){var n=new RegExp("\\b(?:4\\d{3}([\\ \\-]?)(?:\\d{4}\\1){2}\\d(?:\\d{3})?|3[47]\\d\\d([\\ \\-]?)\\d{6}\\2\\d{5}|5[1-5]\\d{2}([\\ \\-]?)\\d{4}\\3\\d{4}\\3\\d{4}|6(?:011|22(?:1(?=[\\ \\-]?(?:2[6-9]|[3-9]))|[2-8]|9(?=[\\ \\-]?(?:[01]|2[0-5])))|4[4-9]\\d|5\\d\\d)([\\ \\-]?)\\d{4}\\4\\d{4}\\4\\d{4})\\b","igm"),t=/\d/igm;this.scrub=function(i){return!i||i.search(t)<0?i:((i.match(n)||[]).forEach(function(n){i=i.replace(n,"*".repeat(n.length))}),i)}}])}(angular.module(virtualAgentApp)),function(n){n.value("messageTypes",{User:0,Agent:1,SystemInfo:2,SystemError:3,VirtualAgent:4,InstantAnswer:5,Results:6,ModalitySelection:7,AgentEnd:8,Survey:9,Transfer:10});n.service("messageService",["$timeout","messageTypes","localStorageService",function(n,t,i){function u(){return{messages:[],archivedMessages:[],subscribers:{}}}function h(n){Object.keys(r[n].subscribers).forEach(function(t){r[n].subscribers[t]()})}function c(n,t){n.index=t.messages.length;t.messages.push(n)}function s(t,i,r,u){var o=n(function(){if(u&&u(t),f.length>0){var n=f.shift();s(n.msg,n.delay,n.startCb,n.delayCb)}else e=!1},i);r&&r(t,o)}var r={},f=[],e=!1,o=0;this.createMessage=function(n,t){return angular.extend({},n,{messageType:t,timeStamp:(new Date).getTime(),reachedDestination:!0,id:o++})};this.appendMessage=function(n,t,i){r[n]||(r[n]=u());var f=this.createMessage(t,i);return c(f,r[n]),h(n),f};this.getAllMessages=function(n){return this.getArchivedMessages(n).concat(this.getMessages(n))};this.getArchivedMessages=function(n){return r[n]&&r[n].archivedMessages||[]};this.getMessages=function(n){return r[n]&&r[n].messages||[]};this.getMessageRoom=function(n){return r[n]||{}};this.failedMessage=function(n,t){r[t]&&r[t].messages[n.index]&&(r[t].messages[n.index].reachedDestination=!1)};this.numMessages=function(n){return r[n]&&r[n].messages&&r[n].messages.length||0};this.delayMessage=function(n,t,i,r){e?f.push({msg:n,delay:t,startCb:i,delayCb:r}):(e=!0,s(n,t,i,r))};this.notifyOnMessage=function(n,t,i){return r[n]||(r[n]=u()),r[n].subscribers[t]=i,function(){delete r[n].subscribers[t]}};this.clearMessages=function(n,t){if(n)r[n]=u(),t&&i.commitAppContent("messages-"+n,{});else for(room in r)r[room]=u(),t&&i.commitAppContent("messages-"+room,{})};this.hasMessageType=function(n,t){return(n||[]).some(function(n){return this.isMessageType(n,t)}.bind(this))};this.isMessageType=function(n,t){return Array.isArray(t)?t.some(function(t){return n.messageType===t}):n.messageType===t};this.archiveMessages=function(n){if(r[n]){var t=r[n]||{};Array.prototype.push.apply(t.archivedMessages,t.messages);t.messages=[]}};this.unarchiveMessages=function(n){if(r[n]){var t=r[n]||{};Array.prototype.push.apply(t.messages,t.archivedMessages);t.archivedMessages=[]}};this.restoreMessages=function(n,t){var u=i.getAppCacheContent("messages-"+n);return u&&u.messages&&(r[n]=u,o=u.idCounter,t&&this.unarchiveMessages(n)),r[n]&&r[n].messages||[]};this.storeMessages=function(n){r[n]&&(r[n].idCounter=o,i.commitAppContent("messages-"+n,r[n]))}}])}(angular.module(virtualAgentApp)),function(n){var t={listSlotsCutoff:7,animationDuration:600};n.component("messageSlots",{templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Common/MessageSlots.html",bindings:{slots:"<",view:"<",hideSlots:"<?",onSlotClick:"&",listSlotsCutoff:"<?",slotIdSuffix:"<"},controller:["$timeout",function(n){function r(){i&&n.cancel(i)}var i;this.$onInit=function(){this.numSlots=this.slots&&this.slots.length||0;this.listSlotsCutoff=this.listSlotsCutoff||t.listSlotsCutoff;this.selected={slot:null};this.slotSlideUp=!1};this.$onChanges=function(n){n.hideSlots.currentValue&&this.slotSelected(!0,!0)};this.$onDestroy=r;this.slotSelected=function(r,u){this.slotSlideUp=!0;this.selected.slot=r;i=n(function(){if(!u)this.onSlotClick({slot:r})}.bind(this),t.animationDuration)}}]})}(angular.module(virtualAgentApp)),function(n){n.directive("supModality",["$filter","$rootScope","$interval","$timeout","widgetService","clientConfig","compassService","rccService","locationService","qosTelemetryService","modalityTags","chatStateService","channelStatuses","supportLinkService","waitStatusService","languageService","flightService","recurringOperationManagerService","nativeAppService","supportSDK",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/ContactUs/Modality.html",scope:{view:"=?",links:"=?",modalities:"=?",oldFlow:"&?",fallbackUrl:"@?",hideTitle:"@?"},link:function(n){function g(t,i,u){u||(u=st);var e=h.createEvent(i),o=r(function(){e.reject("timed out waiting for loaded event")},u);t.render({uiInfo:{type:d.ui.HostType.POPUP,height:f.ContactUsConfig.CadPopupHeight,width:f.ContactUsConfig.CadPopupWidth},modalities:n.modalities}).then(function(){r.cancel(o);e.resolve()},function(n){r.cancel(o);e.reject(n)})}function rt(t){if(n.followLink=function(t){n.modalities&&w.isUserInFlight("wsdk-1")&&t.metaTags===c.chat&&!k.isNative()?g(d.ui.chat,h.eventTypes.supportsdk.renderChatUI):n.modalities&&w.isUserInFlight("wsdk-1")&&t.metaTags===c.callback&&!k.isNative()?g(d.ui.callback,h.eventTypes.supportsdk.renderCallbackUI):n.modalities&&w.isUserInFlight("wsdk-1")&&t.metaTags===c.scheduleCallback&&!k.isNative()?g(d.ui.scheduleCallback,h.eventTypes.supportsdk.renderScheduleCallbackUI):(t.isModality=!0,t.fromOldFlow=n.oldFlow,v.followLink(t))},n.modalitiesReady=!!n.links,n.view=n.view||!n.oldFlow&&t.view,ot=!1,e.getHoursOfOperationView().then(function(n){i=n}),n.links){n.displayLinks=angular.copy(n.links);tt();return}e.getContactUsMenu(s.getPathSubset(2)).then(function(t){t&&t.hasModality&&(n.displayLinks=angular.copy(t.links),n.modalitiesReady=!0,tt())})}function tt(){o.initLazy(function(){var t=v.getHoopsModalities(n.displayLinks);Object.keys(t).length<=0||o.isWithinOperatingHours(l.getSubject(),Object.keys(t)).then(function(r){n.e2eSchedule=r.e2eSchedule;for(var u in t)if(r[u]){if(n.shouldHandleUnknownChannelStatusAsUnavailable)switch(r[u].status){case a.OPEN:break;case a.CLOSED:t[u].description=i&&i.currentlyClosed;t[u].link.linkUrl=v.transformHoopsUrl(t[u].link.linkUrl);t[u].clickableLink=!0;break;default:h.createEvent(h.eventTypes.awasa.channelUnavailable).reject(JSON.stringify({modality:u,channels:r}));t[u].description=i&&i.outage;t[u].link.linkUrl=i&&i.globalSupport;t[u].externalLink=!0;t[u].clickableLink=!0}else r[u].status===a.CLOSED&&(t[u].description=i&&i.currentlyClosed,t[u].link.linkUrl=v.transformHoopsUrl(t[u].link.linkUrl),t[u].clickableLink=!0),r[u].status===a.UNAVAILABLE&&(h.createEvent(h.eventTypes.awasa.channelUnavailable).reject(JSON.stringify({modality:u,channels:r})),t[u].description=i&&i.outage,t[u].link.linkUrl=i&&i.globalSupport,t[u].externalLink=!0,t[u].clickableLink=!0);t[u].isOpen=r[u].status===a.OPEN}ut(v.getWaitStatusModalities(n.displayLinks))})})}function ut(t){t[c.chat]&&n.shouldShowChatQueuePosition&&nt.recurUntilCleanedUp(function(){return y.getChatQueueLength().then(ft)},it);t[c.callback]&&nt.recurUntilCleanedUp(function(){return y.getCallbackWaitTime().then(et)},it)}function ft(t){return n&&n.shouldShowChatQueuePosition&&t!==null&&(n.waitStatusText.chat=y.getUsersWaitingText(t)),t}function et(t){return n&&t!==null&&(n.waitStatusText.callback=y.getWaitTimeText(t)),t}n.shouldShowChatQueuePosition=w.isUserInFlight("cqpm-1");n.shouldHandleUnknownChannelStatusAsUnavailable=w.isUserInFlight("hucsu-1");var i,it=15e3,nt=b.getInstance(),ot,st=15e3;n.$on("$destroy",function(){nt.cleanup()});n.oldFlow=!!(n.oldFlow&&n.oldFlow());n.oldPath=n.oldFlow?"/"+p.langLocale()+"/contact"+s.getCurrentPath():null;n.waitStatusText=n.waitStatusText||{chat:null,callback:null};u.getWidgetConfig("Modality",n.oldPath).then(function(t){n.isModalityEnabled=!!t;n.useGeoLocation=t&&t.useGeoLocation;n.isModalityEnabled&&rt(t)});n.canDisplayWaitStatus=function(t){return n.shouldShowChatQueuePosition&&v.getModalityName(t)===c.chat?!0:v.isWaitStatusModality(t)};n.getModality=function(n){return v.getModalityName(n)};n.onGeoContinue=function(i){i&&t.$broadcast("GeoContinue",p.langLocale());n.useGeoLocation=!1};n.onGeoSelection=function(i){n.modalitiesReady=!1;t.$broadcast("GeoAccess",i.locale);var r=s.switchLocale(i.locale,n.oldPath),u=n.oldFlow?e.getMenu(s.getPathSubset(3,r.length,r)):e.getContactUsMenu(s.getPathSubset(2,r.length,r));u.then(function(i){i&&i.hasModality&&i.links&&i.links.length>0?s.setPathAndReload(r):(t.$broadcast("GeoNotAvailable",r),s.setPathAndReload(n.fallbackUrl))})}}}}])}(angular.module(virtualAgentApp)),function(n){n.service("navigationService",["$window","sessionStorageService",function(n,t){var i="contactapphistory";this.update=function(){var r=t.get(i);r||(basePage=n.location.pathname,t.set(i,basePage))};this.isRoot=function(){this.update();var r=t.get(i);return!!(r&&r===n.location.pathname)};this.goToRoot=function(){var r=t.get(i);r&&(n.location.pathname=r)}}])}(angular.module(virtualAgentApp)),function(n){n.value("oemParameters",{manufacturer:"manufacturer",deviceModel:"devicemodel",manufacturerSupportLink:"manufacturersupportlink",mobileOperatorSupportLink:"mobileoperatorsupportlink",mobileOperator:"mobileoperator"});n.factory("oemTags",["clientConfig",function(n){return{customDevice:"device-custom",anonManufacturer:"anon-oem",manufacturer:"manufacturer",msDevice:"ms-device",operator:"operator",msManufacturerID:n.AppConfig.MicrosoftManufacturerName}}]);n.service("oemService",["$rootScope","$filter","$routeParams","oemParameters","oemTags","nativeAppService","osService",function(n,t,i,r,u,f,e){function s(){return{manufacturerName:i[r.manufacturer]||"",deviceModel:i[r.deviceModel]||"",manufacturerLink:i[r.manufacturerSupportLink]||"",mobileOperatorLink:i[r.mobileOperatorSupportLink]||"",mobileOperator:i[r.mobileOperator]||""}}function h(n,t){var i=l(n);return v?(a(t,i)?c||t.deviceModel||(n.link.linkText=n.link.linkText.replace(/\(.+?\)/,"")):n.link.linkText="",n):(n.link.linkText="",n)}function l(n){var t=n.metaTags||"";return c?t.indexOf(u.operator)>-1?o.mobileOperator:t.indexOf(u.msDevice)>-1?o.msMobileOEM:t.indexOf(u.manufacturer)>-1?o.customMobileOEM:o.anonMobileOEM:t.indexOf(u.msDevice)>-1?o.msDesktopOEM:t.indexOf(u.anonManufacturer)>-1?o.anonDesktopOEM:o.customDesktopOEM}function a(n,t){if(t==o.msDesktopOEM&&n.manufacturerName!==u.msManufacturerID)return!1;if(t!=o.customDesktopOEM||n.manufacturerName&&n.manufacturerName!=u.msManufacturerID&&n.manufacturerLink){if(t==o.anonDesktopOEM&&(n.manufacturerName||!n.manufacturerLink))return!1;if(t!=o.mobileOperator||n.mobileOperator&&n.mobileOperatorLink)if(t!=o.msMobileOEM||n.manufacturerName===u.msManufacturerID&&n.deviceModel)if(t!=o.customMobileOEM||n.deviceModel&&n.manufacturerName&&n.manufacturerLink&&n.manufacturerName!=u.msManufacturerID){if(t==o.anonMobileOEM&&(n.deviceModel&&n.manufacturerName&&n.manufacturerLink||n.manufacturerName==u.msManufacturerID&&n.deviceModel))return!1}else return!1;else return!1;else return!1}else return!1;return!0}var v=f.isNative(),c=e.isMobile(),o={customDesktopOEM:"customDesktopOEM",anonDesktopOEM:"anonDesktopOEM",msDesktopOEM:"msDesktopOEM",mobileOperator:"mobileOperator",customMobileOEM:"customMobileOEM",anonMobileOEM:"anonMobileOEM",msMobileOEM:"msMobileOEM"};this.applyOEM=function(n){var i=s();n&&n.links&&i&&(n.header=t("compassFormat")(n.header,i),n.links=n.links.map(function(n){return n.metaTags.indexOf(u.customDevice)>-1&&(n=h(n,i),n.description=t("compassFormat")(n.description,i),n.link.linkText=t("compassFormat")(n.link.linkText,i),n.link.linkUrl=t("compassFormat")(n.link.linkUrl,i)),n}))};this.applyOEMforVA=function(n){var i=s();n&&i&&(n=n.map(function(n){return n.metaTags.indexOf(u.customDevice)>-1&&(n=h(n,i),n.description=t("compassFormat")(n.description,i),n.link.linkText=t("compassFormat")(n.link.linkText,i),n.link.linkUrl=t("compassFormat")(n.link.linkUrl,i)),n}))}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("passcode",["$rootScope","passcodeService","clientConfig",function(n,t,i){function u(n){n.config=r;n.code="";n.hasError=!1;n.hasValidPasscode=!1;n.waitingForResponse=!1;n.passcodeSuccess=n.passcodeSuccess||null;n.passcodeFailure=n.passcodeFailure||null}var r={passcodeLength:i.PasscodeConfig.PasscodeLength};return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/RatPhone/Passcode.html",scope:{view:"=",passcodeSuccess:"@",passcodeFailure:"@"},link:function(i){i.sendCode=function(r){i.waitingForResponse=!0;t.getRatRequest(r).then(function(t){i.waitingForResponse=!1;t&&(i.hasValidPasscode=!0,i.passcodeSuccess&&n.$broadcast(i.passcodeSuccess,t))},function(t){i.waitingForResponse=!1;t.status===404?(i.hasError=!0,i.passcodeFailure&&n.$broadcast(i.passcodeFailure,r)):n.$broadcast("500Error",{reason:"Azure table down or multiple request objects made for same passcode"})})};i.isValid=function(n){return!isNaN(n)&&n.length===r.passcodeLength};i.resetError=function(){i.hasError=!1};u(i)}}}]),function(n){n.service("passcodeService",["$http",function(n){this.getRatRequest=function(t){var i={params:{passcode:t}};return n.get("/api/passcode/RatRequest/",i).then(function(n){return n.data})}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).service("queueService",["$http","$rootScope","$window","$q","$log","$routeParams","clientConfig","chatStateService","languageService",function(n,t,i,r,u,f,e,o,s){function l(n){return"?"+$.param(n)}function a(n){return{subject:o.getSubject(),language:s.lang(),country:s.locale(),mode:typeof f.mode!="undefined"?f.mode:e.ChatConfig.Mode,disability:!1,modality:n}}function p(n){var t=a(n);return t.position=c.position,t}var v="/api/queue/",w=v+"waittime",b=v+"length",h=null,y=null,c=Object.seal({position:null});this.waitTime=function(t){var i=p(t),u;return o.isValidSubject(i.subject)?(u=l(i),n.get(w+u)):r.reject("Cannot call queueService.waitTime web service when a valid chatStateService.subject cannot be resolved")};this.getPositionStatus=function(){return c};this.getChatQueueLength=function(){var t=a("chat"),i;return o.isValidSubject(t.subject)?(i=l(t),n.get(b+i)):r.reject("Cannot call queueService.length web service when a valid chatStateService.subject cannot be resolved")};t.$on("ChatQueueStatus",function(n,t){c.position=t.position});t.$on("ChatSessionEstablished",function(){y=h?((new Date).getTime()-h)/6e4:-1;t.$broadcast("ChatWaitTimeActual",y)}.bind(this));t.$on("EnqueueChatSuccess",function(){h=(new Date).getTime()})}]);awasaServicesSettings=awasaServicesSettings||{},function(n){n.service("rccService",["$log","$window","$cookies","$interval","$q","$timeout","$rootScope","$routeParams","$location","clientConfig","languageService","channelReaderService","chatTokenService","messageService","chatStateService","messageTypes","qosTelemetryService","nativeAppService","correlationVectorService","flightService","authenticationHelperService","getScriptService","chatContextService","modalityTags","authService","sdkProxyService","chatRejoinUrlService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft){function ni(){if(!oi&&gt.length>0){oi=!0;workItem=gt.shift();var t=function(){oi=!1;ni()};ki(workItem).then(t,function(i){n.error("Work queue item failed: "+workItem.command+".  Error: "+i);t()})}}function ki(n){var t=u.defer(),i=function(){n.callback&&n.callback();t.resolve()};return n.command==="init"?si(n.authReq,n.authType,n.delegatedAuthToken,i):n.command==="initlazy"?di(i):t.reject("Unknown command type: "+n.command),t.promise}function si(n,t,r,u){if(ht=ht||n,lt=t,r=r,bt&&pt){yt?u():kt.push(u);return}ht?pi?rt.resolveAuthState().then(function(n){n===t?ti(u):(e.$broadcast("ChatRedirectToLogin",i.getAll()),rt.loginUsingAccountType(t,!0))}):g.mobileSignIn(function(){ti(u)}):ti(u)}function di(n){if(pt){var t=y.getDelegatedAuthToken();si(!1,lt?lt:rt.getSupportedIDP().MSA,t,n)}else yt?n():(ei.push(n),bt||(awasaServicesSettings.lazyLoad=!0,hi(),wt()))}function hi(){awasaServicesSettings.developerKey=ct?h.ChatConfig.RatPartnerId:h.ChatConfig.PartnerId;awasaServicesSettings.language=c.lang();awasaServicesSettings.country=c.locale();awasaServicesSettings.messaging=!0;awasaServicesSettings.callback=gi;awasaServicesSettings.chatTypingBoxId=dt.chatTypingBoxId;awasaServicesSettings.reset=!0;awasaServicesSettings.disableCookie=!0;awasaServicesSettings.correlationVector=k.getValue();bt=!0}function ti(n){var i,t,r,u;kt.push(n);e.$broadcast("ChatInitStart");i=rt.getSupportedIDP();r=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&wi||!1;ht?t=lt===i.AAD?a.getAADTokenForUser():a.getTokenForUser(ct):r?(u=y.getDelegatedAuthToken(),t=a.getDelegatedAuthTokenForUser(u)):t=a.refreshToken(ct,ht);t.then(function(n){bt?yt&&!pt&&(awasaServicesSettings.session=!0,awasaServicesSettings.token=n.data,n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenRccAlreadyLoaded",n.data),y.setToken(n.data),pt=!0,st=w.createEvent(w.eventTypes.awasa.initialize),et.load(y.getToken())):(awasaServicesSettings.token=n.data,awasaServicesSettings.session=!0,hi(),n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenInitialRccLoad",n.data),y.setToken(n.data),pt=!0,y.isReconnectValid()&&(awasaServicesSettings.reconnectChat=!0,awasaServicesSettings.restoreId=y.getVisitId()),o.visitId&&(awasaServicesSettings.restoreId=o.visitId,awasaServicesSettings.reconnect=!1),wt());nr()},function(n){n.status===401&&(pi?rt.loginUsingAccountType(lt,!0):e.$broadcast("ProcessUserSignIn",!0))})}function wt(){fi=!1;at=w.createEvent(w.eventTypes.awasa.download);nt.addScript(h.ChatConfig.ChannelSdkServerPath).then(function(){n.log("Adding new channel-services-sdk");at.resolve();at=null;var t=awasaServicesSettings.lazyLoad?w.eventTypes.awasa.lazyInitialize:w.eventTypes.awasa.initialize;st=w.createEvent(t)},function(n){at.reject(n);at=null})}function ii(){k.extendCv();awasaServicesSettings.correlationVector=k.getValue()}function gi(t,i){var s,o,r,u;switch(i.type){case"exception":s=w.createEvent(w.eventTypes.awasa.error);n.error("Exception received: Sender: "+JSON.stringify(t),i);bi.indexOf(i.errorCode)===-1&&s.reject(i);break;case"FacadeReady":st&&(st.resolve(),st=null);et=et?et:i.instance;f(function(){ei.forEach(function(n){n()});ei=[];yt=!0;e.$broadcast("ChatInitComplete")});break;case"loaded":if(n.log("Loaded callback received"),st&&(st.resolve(),st=null),et=i.instance,o=et.getVisitId(),e.$broadcast("awasaVisitId",o),y.setVisitId(o),et.subscribe(et.events.AgentTyping,ot.AgentTyping),et.subscribe(et.events.ChatMessageReceived,ot.ChatMessageReceived),et.subscribe(et.events.ChatQueueStatus,ot.ChatQueueStatus),et.subscribe(et.events.ChatQueued,ot.ChatQueued),et.subscribe(et.events.ChatRejected,ot.ChatRejected),et.subscribe(et.events.ChatSessionClosed,ot.ChatSessionClosed),et.subscribe(et.events.ChatSessionEstablished,ot.ChatSessionEstablished),et.subscribe(et.events.ChatSessionReconnected,ot.ChatSessionReconnected),et.subscribe(et.events.ChatTimeout,ot.ChatTimeout),et.subscribe(et.events.ChatTransferred,ot.ChatTransferred),et.subscribe(et.events.CommandMessageReceived,ot.CommandMessageReceived),et.subscribe(et.events.EstimatedWaitTime,ot.EstimatedWaitTime),et.subscribe(et.events.SessionRestored,ot.SessionRestored),et.subscribe(et.events.TransferSessionEstablished,ot.TransferSessionEstablished),et.subscribe(et.events.Validation,ot.Validation),et.subscribe(et.events.ChatChannelDisconnected,ot.ChatChannelDisconnected),et.subscribe(et.events.ChatChannelReconnected,ot.ChatChannelReconnected),et.subscribe(et.events.AgentDisconnected,ot.AgentDisconnected),et.subscribe(et.events.AgentReconnected,ot.AgentReconnected),i&&i.restored)for(r=0;r<i.attributes.length;r++)i.attributes[r].name=="AgentId"&&(u=y.getAgent(),u||(u={}),u.AgentId=i.attributes[r].value,y.setAgent(u));f(function(){y.getToken()&&(et.setToken(y.getToken()),kt.forEach(function(n){n()}),kt=[],yt=!0,e.$broadcast("ChatInitComplete"))})}}function ci(){vt&&r.cancel(vt)}function nr(){ci();vt=r(function(){tr()},dt.tokenRefreshInterval)}function tr(){var t=function(t){y.setToken(t);typeof et=="undefined"?vt&&r.cancel(vt):(n.log("User token refreshed"),et.setToken(y.getToken()))};a.refreshToken(ct,ht,lt).then(function(n){n!=null&&n.data!=null&&n.data.indexOf("PageController")>-1&&e.$broadcast("MalformedUnauthenticatedTokenFromRefresh",n.data);t(n.data)})}function li(t){var i=w.createEvent(w.eventTypes.awasa.chat);return u(function(r,f){var s=y.getSubject(),h=ir(s),o=u.defer(),l=et.set("Subject",h,!1,function(t){return w.createEvent(w.eventTypes.awasa.setSubject).resolve(),n.log("Set Subject Name succeeded before Enequeue for subjectId: "+s+"subjectName: "+h),o.resolve(t),o.promise},function(t){return w.createEvent(w.eventTypes.awasa.setSubject).reject(),n.log("Set Subject Name Failed before Enequeue for subjectId: "+s+"subjectName: "+h),o.reject(t),o.promise}),c=et.enqueue("chat",y.getSubject(),t,function(n){var t=fr.getEstimatedChatWaitTime();n.visitId=y.getVisitId();n.waitTimeEstimate=t?t.AverageWaitTime:0;n.enqueueId=c;i.resolve(n);e.$broadcast("EnqueueChatSuccess",n);r(n)},function(t){t.visitId=y.getVisitId();i.reject(t);n.error("Chat failed to enqueue",t);e.$broadcast("EnqueueChatFailure",t);f(t)});e.$broadcast("awasaEnqueueId",c);y.setEnqueueId(c)})}function ir(n){var r="",i=et.getSubjects(),t;if(i)for(t=0;t<i.length;t++)if(i[t].Id==n){r=i[t].Name;break}return r}function ai(t,i,r,u){var o={test:h&&h.ChatConfig&&h.ChatConfig.UseTestCallbackQueue,attributes:t},f,s;u&&(o.timeslot=u);f=w.createEvent(w.eventTypes.awasa.callback);s=et.enqueue("callback",i,o,function(n){n.visitId=y.getVisitId();n.locale=r;f.resolve(n);e.$broadcast("EnqueueCallbackSuccess",n)},function(t){t&&t.errorCode&&(bi.indexOf(t.errorCode)!=-1||(ur.indexOf(t.errorCode)!=-1?(t.status="400",f.reject(t)):f.reject(t)));n.error("Callback failed to enqueue"+JSON.stringify(t));t.locale=r;e.$broadcast("EnqueueCallbackFailure",t)});y.setEnqueueId(s)}function rr(n,t){for(var i in n)if(n[i].Id==t)return n[i].Name;return null}function vi(n,t,i){var u,r;for(u in n)if(n[u].Id==i)return r=n[u].Channels.filter(function(n){return n.Type==t})[0],r&&(r.AverageWaitTime=r.AverageWaitTime*1),r;return null}function ri(n){if(et&&typeof et.disengageChat=="function"){var t=w.createEvent(w.eventTypes.awasa.disengage);et.disengageChat(function(i){return e.$broadcast("NotifyAppClosingComplete"),i.visitId=y.getVisitId(),e.$broadcast("ChatDisengageSuccess",i),t.resolve(i),n&&wt(),!0},function(i){return e.$broadcast("NotifyAppClosingComplete"),i.visitId=y.getVisitId(),e.$broadcast("ChatDisengageFailure",i),t.reject(i),n&&wt(),!0})}else e.$broadcast("NotifyAppClosingComplete");return!1}function ui(n){for(var i=[],t=0;t<n.length;t++)i.push({name:n[t].Key,value:n[t].Value,encrypted:!0});return i}function yi(){var r=i.get("ChatValues"),n,u;r&&(n={},u=r.split("&"),u.forEach(function(i){splitValue=i.match(/^(\w+?)\=(.*)/);splitValue&&splitValue.length===3&&(n[splitValue[1]]=t.atob(splitValue[2]))}),e.$broadcast("PrechatText",JSON.stringify(n)))}var pi=d.isUserInFlight("aad-1"),wi=d.isUserInFlight("delegatedauth-1"),et,vt,bt=!1,yt=!1,fi=!1,ei=[],kt=[],dt={tokenRefreshInterval:18e4},bi=["CHAT_MESSAGE_ERROR","CHANNEL_CONTACTSCHEDULED"],ur=["CHANNEL_CONTACTINVALID","CHANNEL_APPTUNAVAILABLE"],at,st,fr=this,ct=!1,pt=!1,ht=!1,lt=null,gt=[],oi=!1,ot={AgentTyping:function(n){f(function(){e.$broadcast("AgentTyping",n.isTyping)})},ChatMessageReceived:function(t){f(function(){n.log("Chat Message Received"+JSON.stringify(t));e.$broadcast("ChatMessageReceived",{text:t.msg,senderName:y.getAgent()&&y.getAgent().DisplayName,messageType:p.Agent});e.$broadcast("AgentTyping",!1)})},ChatQueueStatus:function(t){f(function(){n.log("Chat Queue Status"+JSON.stringify(t));e.$broadcast("ChatQueueStatus",t)})},ChatQueued:function(t){n.log("Chat Queued"+JSON.stringify(t))},ChatRejected:function(t){n.log("Chat Rejected"+JSON.stringify(t))},ChatSessionClosed:function(t){f(function(){n.log("Chat Session Closed"+JSON.stringify(t));e.$broadcast("ChatSessionClosed",{})})},ChatSessionEstablished:function(t){f(function(){n.log("Chat Session Established"+JSON.stringify(t));e.$broadcast("awasaChatId",t.chatId);y.setChatId(t.chatId);e.$broadcast("ChatSessionEstablished",{agentId:t.agentId})})},ChatSessionReconnected:function(t){f(function(){n.log("Chat Session Reconnected"+JSON.stringify(t));e.$broadcast("ChatSessionRestored",t)})},ChatTimeout:function(t){n.log("Chat Timeout"+JSON.stringify(t))},ChatTransferred:function(t){f(function(){n.log("Chat Transferred"+JSON.stringify(t));e.$broadcast("awasaChatId",t.chatId);y.setChatId(t.chatId);ii();e.$broadcast("ChatTransferred",t)})},CommandMessageReceived:function(t){f(function(){n.log("Command Message Received"+JSON.stringify(t));e.$broadcast("CommandMessageReceived",t)})},EstimatedWaitTime:function(n){f(function(){e.$broadcast("ChatEstimateWaitTimeUpdate",n)})},SessionRestored:function(t){n.log("Session Restored"+JSON.stringify(t))},TransferSessionEstablished:function(t){n.log("Transfer Session Established"+JSON.stringify(t))},Validation:function(t){n.log("Validation"+JSON.stringify(t))},AgentReconnected:function(t){f(function(){w.createEvent(w.eventTypes.awasa.agentReconnect).resolve();n.log("Agent Connection Restored"+JSON.stringify(t));e.$broadcast("AgentReconnected",{agentId:t.agentId})})},AgentDisconnected:function(t){f(function(){w.createEvent(w.eventTypes.awasa.agentDisconnect).reject();n.log("Agent Connection Disconnected"+JSON.stringify(t));e.$broadcast("AgentDisconnected",{agentId:t.agentId})})},ChatChannelReconnected:function(){f(function(){w.createEvent(w.eventTypes.awasa.channelReconnect).resolve();n.log("Customer Connection Restored");e.$broadcast("ChatChannelReconnected")})},ChatChannelDisconnected:function(){f(function(){w.createEvent(w.eventTypes.awasa.channelDisconnect).reject();n.log("Customer Connection Disconnected");e.$broadcast("ChatChannelDisconnected")})}};this.toggleRatMode=function(){ct=!ct};this.isRatMode=function(){return ct};this.init=function(n,t,i,r){gt.push({command:"init",authReq:n,authType:t,delegatedAuthToken:i,callback:r});ni()};this.initLazy=function(n){gt.push({command:"initlazy",callback:n});ni()};this.getChatTypingBoxId=function(){return dt.chatTypingBoxId};this.setChatTypingBoxId=function(n){awasaServicesSettings&&(awasaServicesSettings.chatTypingBoxId=n)};this.enqueueChat=function(i){var u,f,s,c,r,l;if(y.getChatEstablished()){e.$broadcast("DoubleChatEnqueued");n.error("Chat already exists. Can't enqueue again.",i);return}ii();i=i||{};i.attributes=i.attributes||[];i.mode=i.mode||(typeof o.mode!="undefined"?o.mode:h.ChatConfig.Mode);i.disability=i.disability||y.getSubject()==h.ChatConfig.DisabilityAnswerDeskId;i.accessibility=i.accessibility||y.getSubject()==h.ChatConfig.DisabilityAnswerDeskId;yi();y.getAppStartContext()&&i.attributes.push({name:"AppStartContext",value:JSON.stringify(y.getAppStartContext()),encrypted:!1});u="";try{u=parent&&parent.window&&parent.window.location&&parent.window.location.href}catch(v){}return o.rejoin!=="true"&&i.attributes.push({name:"WebStartContext",value:JSON.stringify({url:t&&t.location&&t.location.href,parentUrl:u,userAgent:navigator&&navigator.userAgent,VATranscriptInfo:{visitId:i&&i.cantileverVisitId||"",engagementId:i&&i.cantileverEngagementId||""}}),encrypted:!1}),ct?li(i):(o.rejoin==="true"&&(i.rejoin=!0,y.getAgent()&&(i.agentId=y.getAgent().AgentId)),h.ChatConfig&&h.ChatConfig.ExplicitAgentId&&h.ChatConfig.ExplicitAgentId>0&&(i.agentId=h.ChatConfig.ExplicitAgentId),f=ft.getRejoinUrl(ht,lt,"ces"),ut.proxy().then(function(n){n.dispatchEvent("chatRejoinUrl",f)}),s=o&&o.authType&&o.authType.toLowerCase()==="delegated"&&wi||!1,s||i.attributes.push({name:"rejoinurl",value:f,encrypted:!1}),c=rt.getSupportedIDP(),ht?r=lt===c.AAD?a.getAADEncryptedValueCookie(y.getVisitId(),null):a.getEncryptedValueCookie(y.getVisitId(),null):s?(l=y.getDelegatedAuthToken(),r=a.getDelegatedEncryptedValueCookie(y.getVisitId(),null,l)):r=a.getUnauthEncryptedValueCookie(y.getVisitId(),null),r.then(function(t){for(var u=ui(t.data),r=0;r<u.length;r++)n.log(u[r]),i.attributes.push(u[r]);return li(i)}))};this.getChatTypingBoxId=function(){return dt.chatTypingBoxId};this.getCallbackTime=function(t,i,r){var f={test:h&&h.ChatConfig&&h.ChatConfig.UseTestCallbackQueue,count:i},u=w.createEvent(w.eventTypes.awasa.times);et.getCallbackTime(r,t,f,function(n){n.visitId=y.getVisitId();u.resolve(n);e.$broadcast("GetCallbackTimeSuccess",n)},function(t){t.visitId=y.getVisitId();u.reject(t);n.error("failure: "+t);e.$broadcast("GetCallbackTimeFailure",t)})};this.enqueueCallback=function(n,t,i,r){var u=this.validateNumber(n,i);ii();yi();e.$broadcast("CallbackPhoneValidation",u);u&&u.isValid&&(ht?a.getEncryptedValueCookie(y.getVisitId(),u.formattedContact).then(function(n){var u=ui(n.data);ai(u,t,i,r)}):a.getUnauthEncryptedValueCookie(y.getVisitId(),u.formattedContact).then(function(n){var u=ui(n.data);ai(u,t,i,r)}))};this.postTranscript=function(n,t){var i=w.createEvent(w.eventTypes.awasa.postChatTranscript),r={transcript:n,isBotConversation:t};return et.postChatTranscript(r,i.resolve,i.reject),i.promise};this.validateNumber=function(n,t){return et?et.validate("callback",n,{country:t}):null};this.sendMessage=function(t){return u(function(i,r){var f,u;fi?(t.text=="agentend"?e.$broadcast("ChatSessionClosed",{}):(f=v.createMessage({text:"Echo: "+t.text,senderName:"Emulator Agent"},p.Agent),y.setAgent(),e.$broadcast("ChatMessageReceived",f)),i()):(u=w.createEvent(w.eventTypes.awasa.sendMessage),et.sendChat(t.text,function(n){n.visitId=y.getVisitId();u.resolve();e.$broadcast("ChatMessageSendSuccess",n);i(n)},function(i){i.visitId=y.getVisitId();u.reject(i);n.error("Failed to send message"+JSON.stringify(i));e.$broadcast("ChatMessageSendError",t);r(i)}))})};this.getEstimatedCallbackWaitTime=function(n){var t=et.getEstimatedWaitTime();return n||(n=y.getSubject()),vi(t,"Callback",n)};this.getEstimatedChatWaitTime=function(n){var t=et.getEstimatedWaitTime();return n||(n=y.getSubject()),vi(t,"Chat",n)};this.getSubjectName=function(n){var t=et&&et.getEstimatedWaitTime();return n||(n=y.getSubject()),rr(t,n)};this.isWithinOperatingHours=function(n,t){var r=w.createEvent(w.eventTypes.awasa.channelStatus),e={mode:typeof o.mode!="undefined"?o.mode:h.ChatConfig.Mode},s={isOpen:!1,isAvailable:!1,status:l.getStatus(!1,!1),schedule:[]},f={},i={description:"",subjectId:n?n:" ",channels:[]};return(typeof o.scheduleAsOf!="undefined"&&(e.scheduleAsOf=o.scheduleAsOf),!t||t.length===0)?(i.description="no channels provided",i.status=400,r.reject(i),u.resolve(f)):(t=Array.isArray(t)?t:[t],t.forEach(function(n){f[n]=s}),i.channels=t.join("|"),!n)?(i.description="subject id is blank",i.status=400,r.reject(i),u.resolve(f)):u(function(u){et.getChannelStatus(n,e,function(n){var e=l.getChannelOperations(n,t),f=l.getChannelOutages(e);f&&f.length>0?(i.description="The following are unavailable for this subject",i.channels=f.join("|"),r.reject(i)):(i.description="The following are available for this subject",r.resolve(i));u(e)},function(n){r.reject(n);u(f)})})};this.endChat=function(n){return ri(n)};e.$on("ChatSessionClosed",function(){ci()});e.$on("NativeAppClosing",function(){ri()});e.$on("ForwardToAgent",function(n,t){var i=w.createEvent(w.eventTypes.awasa.sendCommand);et.sendCommand(t,function(n){i.resolve();e.$broadcast("ForwardToAgentSuccess",n)},function(n){i.reject(n);e.$broadcast("ForwardToAgentFailure",n)})});e.$on("ChatPageTimeout",function(){at&&at.reject("Chat page timed out while attempting to download the awasa sdk");st&&st.reject("Chat page timed out while attempting to initialize the awasa sdk")});h&&h.TestConfig&&h.TestConfig.AllowChatEmulator&&e.$on("ChatEmulate",function(){fi=!0;ri(!1);e.$broadcast("ChatSessionEstablished",{agentId:123456789})})}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).service("recurringOperationManagerService",["$timeout",function(n){function t(){function t(i,r){r&&(r.isSuccessfulFunction(i)||r.operationCancelled||(r.currentTimeoutPromise=n(r.operationFunction,r.delayInMilliseconds),r.currentTimeoutPromise.then(function(n){t(n,r)}).catch(function(){t(null,r)})))}function r(n,t,r){var u={operationFunction:n,delayInMilliseconds:t,isSuccessfulFunction:r,operationCancelled:!1,currentTimeoutPromise:null};return i.push(u),u}var i=[];this.recurUntilSuccessfulOrCleanedUp=function(n,i,u){var f=r(n,i,u);f.operationFunction().then(function(n){t(n,f)}).catch(function(){t(null,f)})};this.recurUntilCleanedUp=function(n,t){this.recurUntilSuccessfulOrCleanedUp(n,t,function(){return!1})};this.cleanup=function(){for(var t,r=0;r<i.length;r++)(t=i[r],t)&&(t.operationCancelled=!0,t.currentTimeoutPromise)&&(n.cancel(t.currentTimeoutPromise),t.currentTimeoutPromise=null)}}this.getInstance=function(){return new t}}]),function(n){n.service("relayService",["$http","clientConfig",function(n,t){this.getNearestRelay=function(){return n.get(t.ChatConfig.NearestRelayProbeUrl)}}])}(angular.module(virtualAgentApp)),function(n){n.directive("selfHelp",["$rootScope","$timeout","virtualAgentService","searchResultsService","flightService","widgetService",function(n,t,i,r,u,f){function s(n,i){if(n.view=n.view||i.view,n.answer=null,n.selfHelpLinks=null,n.selfHelpReady=!1,n.showMoreresults=!1,n.searchResultsPageUrl=r.getSearchResultsUrl(n.query),!n.query||n.query.length===0){n.onReady({isPresent:!1});n.selfHelpReady=!0;return}var u={query:n.query,queryChannel:"contactus",page:1,shouldRequestErrorCrashExperience:!1};e=t(function(){n.onReady({isPresent:!1})},o.timeoutLength);r.fetchResults(u).then(h.bind(this,n)).catch(function(){n.onReady({isPresent:!1});n.selfHelpReady=!0})}function h(n,i){if(t.cancel(e),i.instantAnswer){n.answer=i.instantAnswer;c(i.instantAnswer);n.onReady({isPresent:!0})}else if(i.results&&i.results.length>0){n.selfHelpLinks=i.results.slice(0,o.maxSelfHelpLinks);n.onReady({isPresent:!0})}else n.onReady({isPresent:!1});n.selfHelpReady=!0}function c(t){t.problem&&t.problem.name&&t.problem.name.substr(t.problem.name.length-1)==="?"&&n.$broadcast("instantAnswerWithQuestion",{text:t.problem.name,sourceId:t.sourceId});t.solutions&&t.solutions[0].description&&t.solutions[0].description.substr(t.solutions[0].description.length-1)=="?"&&n.$broadcast("instantAnswerWithQuestion",{text:t.solutions[0].description,sourceId:t.sourceId})}var e,o={maxSelfHelpLinks:7,virtualAgentEnabled:!1,timeoutLength:3e3};return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/ContactUs/SelfHelp.html",scope:{query:"@",view:"=?",onReady:"&"},link:function(n){f.getWidgetConfig("Self-Help").then(function(t){n.isSelfHelpEnabled=!!t;n.isSelfHelpEnabled&&s(n,t)});n.isCSANonEnUsFlight=u.isUserInFlight("csa-nonenus-1");n.showMoreresultsSection=function(t){n.showMoreresults=t}}}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).value("modalityTags",{deviceCustom:"device-custom",deviceCustomAnon:"device-custom,anon-oem",deviceCustomMsDevice:"device-custom,ms-device",callback:"callback",scheduleCallback:"schedule-call",chat:"chat",tollFree:"phone",email:"email"}).factory("hoopsModalities",["modalityTags",function(n){return[n.chat,n.callback,n.tollFree]}]).factory("waitStatusModalities",["modalityTags",function(n){return[n.chat,n.callback]}]).service("supportLinkService",["$filter","$window","$log","$location","$rootScope","$cookies","languageService","clientConfig","chatStateService","modalityTags","hoopsModalities","waitStatusModalities","locationService","windowService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function p(t){return t&&t.link&&t.link.linkUrl&&(t.link.linkUrl=n("compassFormat")(t.link.linkUrl,{"subject-id":s.getSubject()})),t}function w(n,t){return n&&n.metaTags&&n.metaTags.split(";").some(function(n){return n===t})}function b(n){return a.appendCurrentRouteParams("https://"+r.host()+"/"+e.langLocale().toLowerCase()+"/contact"+n)}var k="smcpartner",d="smc",y="/hoops",g="/chat/",nt="/callback/";this.extractSubject=function(n){if(this.isModality(n)){var t=n.link.linkUrl.split("/");if(t.length>=3&&t[2]!=="{subject-id}")return parseInt(t[2],10)}return-1};this.extractSubjectFromList=function(n){for(var i=-1,r=n&&n.length||0,t=0;t<r;t++)if((i=this.extractSubject(n[t]))>-1)return i;return-1};this.hasModality=function(n,t){var i=this.getModalities(n);return!!i[t]};this.hasAnyModalities=function(n,t){var i=this.getModalities(n);return t.some(function(n){return!!i[n]})};this.hasModalities=function(n,t){var i=this.getModalities(n);return!t.some(function(n){return!i[n]})};this.isModality=function(n,t){return t?w(n,t):Object.keys(h).some(function(t){return w(n,h[t])})};this.getModalities=function(n){var t={};return n&&n.forEach(function(n){this.isModality(n)&&(t[this.getModalityName(n)]=n)}.bind(this)),t};this.isHoopsModality=function(n){return c.some(function(t){return this.isModality(n,t)}.bind(this))};this.isWaitStatusModality=function(n){return l.some(function(t){return this.isModality(n,t)}.bind(this))};this.getWaitStatusModalities=function(n){var t=this.getModalities(n);return Object.keys(t).forEach(function(n){this.isWaitStatusModality(t[n])||delete t[n]}.bind(this)),t};this.getHoopsModalities=function(n){var t=this.getModalities(n);return Object.keys(t).forEach(function(n){this.isHoopsModality(t[n])||delete t[n]}.bind(this)),t};this.getLinkId=function(n){return n=p(n),n.link.linkUrl};this.getModalityName=function(n){for(var t in h)if(this.isModality(n,h[t]))return h[t];return null};this.openContactWindow=function(n,t){t=t||{};var i=b(n),r={width:t.width||o.ContactUsConfig.CadPopupWidth,height:t.height||o.ContactUsConfig.CadPopupHeight,resizable:"yes",scrollbars:"yes"};v.openPopupCenter(i,"contactSupport",r)};this.transformHoopsUrl=function(n){var t=n.match(/form\/(\d*?)\/(.*)/);return!t||t.length<2?y+n:t[2]&&/call\/?$/i.test(t[2])?y+nt+t[1]:y+g+t[1]};this.followLink=function(n){if(!n||n.clickableLink&&(!n.link||!n.link.linkUrl))return i.error("Invalid Link: ",n);if(n.clickableLink){if(n.isModality&&(n=p(n)),n.externalLink)t.open(n.link.linkUrl,"_blank");else if(n.isModality&&!n.fromOldFlow)if(f.get(k)==d)u.$broadcast("setParentCv"),this.openContactWindow(n.link.linkUrl);else{var o=b(n.link.linkUrl);t.open(o,"_self")}else n.fromOldFlow?r.path(n.link.linkUrl):r.path("/"+e.langLocale().toLowerCase()+"/"+n.link.linkUrl);n.fromOldFlow?u.$broadcast("MenuLinkClicked",n):u.$broadcast("ContactUsLinkClicked",n)}};this.getSpecifiedModalities=function(n,t){var i={};return!t||!n?i:(angular.forEach(t,function(t){var r=n.filter(function(n){return n.metaTags.indexOf(t)!==-1})[0];r&&(i[t]=r,r.isOpen=!0)}),i)}}]),function(n){n.controller("SupportMenuController",["$scope","$rootScope","$location","$filter","$window","$route","$routeParams","compassService","clientConfig","chatStateService","osService","nativeAppService","supportLinkService","oemService","flightService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function w(n){var t=n&&n.hasModality?o.getPageSubjectId(n):null;h.isValidSubject(t)&&h.setSubject(t)}function p(){var t=o.getServiceAgreement(),r=o.getMenuExtras();o.getMenu(i.path().substring(1)).then(function(t){t&&(n.menuWizard.page=t,n.status&&(n.status.waitingOnCompass=!1),w(t),v.applyOEM(t))});r&&(n.menuWizard.menuExtras=r);t&&(n.menuWizard.serviceAgreement=t.serviceAgreement,n.menuWizard.serviceAgreementLink=t.serviceAgreementLink)}n.config={timeout:s.ChatConfig.ChatDefaultTimeout};n.menuWizard={};n.isCsaThemesFlight=y.isUserInFlight("csa-themes-1");n.isEnterprise=f.current&&f.current.data&&f.current.data.isEnterprise==!0;n.isCSAEnterpriseFlight=y.isUserInFlight("csa-enterprise-1");n.menuWizard.reset=function(){n.status={waitingOnRcc:!1,waitingOnCompass:!0,waitingOnHoops:!1};n.isLandingPage=f.current.data.isLandingPage;n.isMobile=c.isMobile();n.isNative=l.isNative();p()};n.openServiceAgreement=function(){n.menuWizard.serviceAgreementLink&&n.menuWizard.serviceAgreementLink.linkUrl&&u.open(n.menuWizard.serviceAgreementLink.linkUrl)};n.followLink=function(n){n.fromOldFlow=!0;a.followLink(n)};n.getLinkId=a.getLinkId;n.$on("CompassContentReady",p);n.$on("SupportMenuPageTimeout",function(){n.isReady||t.$broadcast("500Error",{reason:"Timeout occurred on a support menu page",data:n.status})});n.enterpriseData=function(){o.getContactUsView().then(function(t){t&&(n.contactUsView=t)})};n.enterpriseData();n.$watchCollection("status",function(t){n.isReady=t&&!Object.keys(t).some(function(n){return t[n]})});n.menuWizard.reset()}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).service("waitStatusService",["$filter","$log","compassService","queueService",function(n,t,i,r){function f(n){return r.waitTime(n).then(function(n){return n.data.WaitTime&&n.data.WaitTime>0?Math.ceil(n.data.WaitTime/60):1}).catch(function(n){t.warn("Error calling WaitTime web service: "+n);throw n;})}function e(){return i.getWaitStatusText().then(function(n){u=n})}var u;this.reset=function(){u=null;e()};this.getCallbackWaitTime=function(){return f("callback")};this.isValidWaitTimeResponse=function(n){return n>-1};this.getWaitTimeText=function(t){return isNaN(t)||t===1?u.waitTimeSingular:n("compassFormat")(u.waitTimePlural,{"wait-time":t})};this.getUsersWaitingText=function(t){return isNaN(t)||t===1?u.usersWaitingSingular:n("compassFormat")(u.usersWaitingPlural,{"users-waiting-count":t})};this.getChatQueueLength=function(){return r.getChatQueueLength().then(function(n){return n.data&&n.data.Length!==undefined?n.data.Length:1}).catch(function(n){t.warn("Error calling ChatQueueLength web service: "+n);throw n;})};this.reset()}]),function(n){n.service("widgetService",["$location","$q","contentApiService",function(n,t,i){function f(){return u?u.then(function(n){return n}):(r||(r=i.getCompassContentForPage("widgetconfig")),r.then(s,h))}function s(n){n=n&&n.data;var i=n&&n.areaPathWidgetConfig;return u=i&&t.resolve(i),e=n&&n.defaultWidgets,i}function h(n){return r=null,t.reject(n)}function c(n,t){var i=null;return t.some(function(t){var r=new RegExp(t,"i").test(n);return r&&(i=t),r}),i}function o(n){return f().then(function(t){var i=c(n,Object.keys(t));return i&&t[i]})}var u=null,r=null,e=null;this.init=function(){f()};this.clearCaching=function(){u=null;r=null};this.hasWidgets=function(t,i){i=i&&i.toLowerCase()||n.path()&&n.path().toLowerCase();var r={},u=angular.isArray(t);return u||(t=[t]),t.forEach(function(n){r[n]=!1}),o(i).then(function(n){return t.forEach(function(t){r[t]=!!n&&!!n[t&&t.toLowerCase()]}),u?r:r[t[0]]},function(){return u?r:r[t[0]]})};this.getDefaultWidgets=function(){return f().then(function(){return e},function(){return null})};this.getWidgetConfig=function(t,i){return i=i&&i.toLowerCase()||n.path()&&n.path().toLowerCase(),o(i).then(function(n){return n&&n[t&&t.toLowerCase()]||e[t&&t.toLowerCase()]},function(){return null})};this.init()}])}(angular.module(virtualAgentApp)),function(n){n.value("yesNoResults",{yes:"POSITIVE",weakYes:"POSITIVE-",maybe:"NEUTRAL",no:"NEGATIVE"});n.service("chatClassificationService",["$q","$http","$window","$location","$rootScope","contactUsMenuService","compassService","locationService","messageTypes","virtualAgentService","virtualAgentSessionService",function(n,t,i,r,u,f,e,o,s,h,c){function v(n){if(n&&n.Product&&a.indexOf(n.Product)==-1){var t=n.Issue||n.IssueCategory;return t&&a.indexOf(t)==-1?{product:n.Product,issue:t}:{product:n.Product,issue:null}}return{product:null,issue:null}}var l="/api/chatClassification",a=["other","n/a","bad","fraud","support"];this.getRoute=function(n,i,r,f){return t({url:l+"/Routing/",method:"POST",data:{query:n,referrer:r,product:f||"",sessionId:c.id()||"",clientId:i||""}}).then(function(n){var t=v(n.data),i={parsedResult:t,actualResult:n.data};return u.$broadcast("RoutingServiceResult",i),t})};this.getMenuLinksForRoute=function(t,i,r,u){return this.getRoute(t,i,r,u).then(f.getLinkForRoutingResult).then(function(t){return t.externalLink?n.reject(t):t.link&&t.link.linkUrl?e.getContactUsMenuLinks(t.link.linkUrl).then(function(n){return n.product=t,n}):n.reject(null)})};this.getYesNoForAnswer=function(n,i){return t({url:l+"/YesNo/",method:"POST",params:{query:n,question:i,sessionId:c.id()}}).then(function(t){return u.$broadcast("VirtualAgentSolutionFeedback",{text:n,result:t.data}),t.data})}}])}(angular.module(virtualAgentApp)),function(n){n.controller("ContactUsController",["$scope","$rootScope","$location","$window","$route","$timeout","compassService","languageService","clientConfig","chatStateService","flightService","locationService","chatClassificationService","qosTelemetryService","supportLinkService","oemService","contactUsMenuService","modalityTags","nativeAppService","virtualAgentLinkService","supportSDK","sessionStorageService","virtualAgentConstants","virtualAgentService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){function ct(){var t=h.getAppStartContext();t&&t.SearchKey&&(n.trainingData=t.SearchKey)}function lt(){var n=l.getPathSubset(2);return n&&(n[n.length-1]!=="/"?n+"/":n)}function kt(n){return ot(n)&&"contactus/"+ot(n)+"/"}function at(){var t=n.mlProblemClassificationSupportedLocales,r,i;if(!t||t.length===0)return!1;for(r=o.langLocale().toLowerCase(),i=0;i<t.length;i++)if(r===t[i].toLowerCase())return!0;return!1}function vt(n){var t=n&&n.hasModality?e.getPageSubjectId(n):null;h.isValidSubject(t)&&h.setSubject(t)}function ft(n,t){n&&t&&(n.externalLink?i.path(t+n.metaTags+"/"):y.followLink(n))}function dt(){ii(lt());e.getContactUsView().then(function(i){i&&(n.contactUsView=i,t.$broadcast("UpdateTitle",n.contactUsView.pageTitle));rt()});e.getMLProblemClassificationSupportedLocales().then(function(t){t&&(n.mlProblemClassificationSupportedLocales=t);rt()});e.getContactUsProducts().then(function(t){t&&(n.contactUsProducts=t);ut?gt():(n.pageState.currentView=st.collection,rt())})}function gt(){n.pageState.selectedProduct=w.getLinkByMetatag(ut,n.contactUsProducts.links);n.pageState.selectedProduct?n.pageState.selectedProduct.externalLink?(n.pageState.currentView=st.result,n.externalLinkCard=!0,n.externalLink=n.pageState.selectedProduct,rt()):e.getContactUsMenu(kt(i.path())).then(function(t){t?(n.pageState.currentView=st.result,n.productView=t,selectedIssueName?ni():n.productView&&n.productView.links&&n.productView.links.length===1&&n.selectIssue(n.productView.links[0]),rt(),selectedIssueName||f(function(){try{r.document.getElementById("result-issue-selection").focus()}catch(n){r.console.log(n)}},50)):et({status:404},!0)},function(n){et(n,!0)}):(ut=null,et({status:404},!0))}function ni(){n.pageState.selectedIssue=w.getLinkByMetatag(selectedIssueName,n.productView.links);n.pageState.selectedIssue?n.pageState.selectedIssue.externalLink?(n.externalLinkCard=!0,n.externalLink=n.pageState.selectedIssue,rt()):e.getContactUsMenu(lt()).then(function(t){if(t)if(c.isUserInFlight("wsdk-1")){var i=v.createEvent(v.eventTypes.supportsdk.getModalitiesApi);ri(ut,selectedIssueName).then(function(r){i.resolve();n.modalities=r;ht(t)},function(n){ht(t);i.reject(n)})}else p.applyOEM(t),vt(t),n.issueView=t,rt();else et({status:404},!1)},function(n){et(n,!1)}):(ut=null,et({status:404},!0))}function ot(n){return n&&/(?:contactus)\/(?!products).+?\//.test(n)&&n.match(/(?:contactus)\/(.+?)\//)[1]}function ti(n){return n&&/contactus\/(?!:products).+?\/.+?\//.test(n)&&n.match(/contactus\/.+?\/(.+?)\//)[1]}function ii(n){ut=ot(n);selectedIssueName=ti(n)}function rt(){n.pageState.currentView&&n.contactUsView&&n.mlProblemClassificationSupportedLocales&&n.contactUsProducts&&(!ut||n.pageState.selectedProduct)&&(!selectedIssueName||n.pageState.selectedIssue&&n.status.selfHelpReady)&&(n.status.waitingOnCompass=!1)}function et(r,u){r&&r.status==404&&t.$broadcast("404Error",{location:i.absUrl(),preventError:!0});u&&(ut=null,selectedIssueName=null,n.changeProblem())}function ri(n,t){return g.api.modalities.get({environment:i.host(),product:n,issue:t,language:o.lang(),country:o.locale()}).then(function(n){return n})}function yt(t){t&&t.link&&t.link.linkUrl!==l.getPathSubset(2)&&(n.pageState.selectedProduct=null,n.pageState.selectedIssue=null,n.productView=null,n.issueView=null)}var ut,pt="contactus",wt="mseg_contactus",bt="contactus-ml-training",st={collection:"/PartialViews/VirtualAgent.Library/ContactUs/Collection.html",result:"/PartialViews/VirtualAgent.Library/ContactUs/Result.html"},ht;n.reset=function(){n.config={homePage:"/"+o.langLocale().toLowerCase()+"/"+pt+"/",productsPage:"/"+o.langLocale().toLowerCase()+"/"+pt+"/products/",isNative:k.isNative(),timeout:s.ChatConfig.ChatDefaultTimeout,viewMoreLinkNumber:s.ContactUsConfig.ViewMoreLinkNumber,virtualAgentUrl:"/virtual-agent"};n.status={loadingResults:!1,waitingOnCompass:!0,selfHelpReady:!1,selfHelpPresent:!1};n.pageState={currentView:null};n.externalLinkCard=!1;n.isVAInAppFlight=c.isUserInFlight("va-inapp-1");n.isCSANonEnUsFlight=c.isUserInFlight("csa-nonenus-1");n.virtualAgentLocale=it.isEnabled()?!0:!1;n.isNative=k.isNative();n.trainingData=h.getProblemText()||null;n.trainingData||(n.status.selfHelpReady=!0),{}.isVirtualAgent=!0;n.isNative&&n.isVAInAppFlight&&o.langLocale().toLowerCase()==="en-us"?(n.showTextBox=!1,i.path("/virtual-agent")):n.showTextBox=!!n.trainingData||k.isNative();ct();dt()};n.startExp=function(){var t,r,u;n.isVA=!c.isUserInFlight("vac-contactus-v2-reverse-1")&&o.langLocale().toLowerCase()==="en-us";n.isVA&&!n.isNative?(t=tt.flows.contactUsEntry,c.isUserInFlight("vafx-entry-point-1")&&nt.set(tt.session.contactUsEntryClicked,!0),t=nt.get(tt.session.virtualAgentEntryClicked)?tt.flows.virtualAgentToContactus:t,c.isUserInFlight("wsdk-va-1")?(r=v.createEvent(v.eventTypes.supportsdk.renderVirtualAgentUI),u=f(function(){r.reject("timed out waiting for loaded event")},15e3),g.ui.virtualAgent.render({uiInfo:{type:g.ui.HostType.POPUP,height:s.ContactUsConfig.CadPopupHeight,width:s.ContactUsConfig.VirtualAgentWidth},environment:i.host(),locale:o.langLocale(),flowId:t}).then(function(){f.cancel(u);r.resolve()},function(n){f.cancel(u);r.reject(n)})):d.openPopup({flowId:t})):n.isVA&&n.isNative&&n.isVAInAppFlight?i.path("/virtual-agent"):(n.showTextBox=!0,n.focusProblemTextbox())};n.focusProblemTextbox=function(){n.showTextBox&&f(function(){var n=r.document.getElementById(bt);n&&n.focus()})};t.$on("AppStartContext",function(){ct()});n.userProvidedProductInfo=function(t){n.userSelectedProduct=t};n.selectProduct=function(t){if(yt(t),n.pageState.selectedProduct=t,!at()||!n.trainingData||h.getUserRouted()){ft(t,n.config.homePage);return}h.setUserRouted(!0);a.getRoute(n.trainingData+" "+n.pageState.selectedProduct.link.linkText,wt,l.getReferrerDomain()).then(function(i){w.getLinkForRoutingResult(i).then(function(t){ft(t,n.config.homePage)}).catch(function(){ft(t,n.config.homePage)})}).catch(function(){ft(t,n.config.homePage)})};n.selectIssue=function(t){yt(t);n.pageState.selectedIssue=t;ft(t,i.path().match(/(^.*?\/.*?\/.*?\/.*?\/).*/)[1])};n.openExternalLink=function(n){y.followLink(n)};n.changeProblem=function(){i.path(n.config.homePage)};n.changeProduct=function(){i.path(n.config.productsPage)};n.submitData=function(){var t=r.document.getElementById(bt).value;if(n.trainingData=t,h.setProblemText(n.trainingData),!at()){n.changeProduct();return}n.status.loadingResults=!0;a.getRoute(t,wt,l.getReferrerDomain()).then(function(t){h.setUserRouted(t.product?!0:!1);w.getLinkForRoutingResult(t).then(function(t){ft(t,n.config.homePage)}).catch(function(){h.setUserRouted(!1);n.changeProduct()})}).catch(function(){h.setUserRouted(!1);n.changeProduct()}).finally(function(){n.status.loadingResults=!1})};n.showAllProducts=function(t){n.pageState.showAllProducts=t};n.selfHelpIsReady=function(t){n.status.selfHelpReady=!0;n.status.selfHelpPresent=t;rt()};ht=function(t){p.applyOEM(t);vt(t);n.issueView=t;rt()};n.$on("ContactUsPageTimeout",function(){t.$broadcast("500Error",{reason:"Timeout occurred on the contact us page content",data:n.status})});n.$on("$routeChangeSuccess",function(){n.showProductsList=u.current&&u.current.data&&u.current.data.showProductsList==!0});n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.service("contactUsMenuService",["$q","compassService",function(n,t){var i=this;this.getLinkByMetatag=function(n,t){for(var i,u,f=null,r=0;r<t.length;r++)i=t[r],u=i.metaTags.split(","),u.some(function(t){if(t.trim()===n)return f=i,!0});return f};this.getLinkForRoutingResult=function(r){return r.product?t.getContactUsProducts().then(function(u){var f=i.getLinkByMetatag(r.product,u.links);return f?f.externalLink||!r.issue?f:t.getContactUsMenu(f.link.linkUrl).then(function(n){var t=i.getLinkByMetatag(r.issue,n.links);return t?t:f}):n.reject()}):n.reject()}}])}(angular.module(virtualAgentApp)),function(n){n.service("contactUsTelemetryService",["$rootScope","clientTelemetryService","wedcsService",function(n,t,i){function r(n,t){i.logCustomEvent("cadworkflow",n,{"ms.scvalue":JSON.stringify({issue:t.issue,product:t.product})})}n.$on("RoutingServiceResult",function(n,t){t.actualResult&&t.parsedResult?i.logCustomEvent("cadworkflow","machinelearning",{"ms.scvalue":JSON.stringify({issue:t.parsedResult.issue,product:t.parsedResult.product,productConfidenceScore:t.actualResult.ProductConfidenceScore,issueCategoryConfidenceScore:t.actualResult.IssueCategoryConfidenceScore,errorMessage:t.actualResult.ErrorMessage,traceId:t.actualResult.TraceId})}):t.parsedResult&&r("machinelearning",t.parsedResult)});n.$on("ProductIssueManualSelection",function(n,t){r("manualSelection",t)})}])}(angular.module(virtualAgentApp)),function(n){n.component("geo",{templateUrl:"/PartialViews/VirtualAgent.Library/ContactUs/Geo.html",bindings:{view:"<?",path:"@?",onSelection:"&",onContinue:"&"},controller:["$log","$rootScope","$location","geoService","languageService","compassService","widgetService",function(n,t,i,r,u,f,e){var o=this;this.continue=function(t){this.isVisible=!1;this.onContinue?this.onContinue({isUserInitiated:t}):n.log("No onContinue passed in - geo")};this.access=function(t){u.set(t,!0);f.clearCache();this.isVisible=!1;this.onSelection?this.onSelection({language:t}):n.log("No onSelection passed in - geo")};this.$onInit=function(){this.languages=[];this.isReady=!1;u.languages().then(r.getLocationInfo).then(function(n){if(!n.LocationRequestMismatch||!n.LanguageList||n.LanguageList.length===0){o.continue(!1);return}t.$broadcast("GeoOptionsPresented",i.path());o.currentLanguage=u.getLanguageInfo(u.langLocale());o.languages=n.LanguageList.map(function(n){return u.getLanguageInfo(n)}).filter(function(n){return!!n})},function(t){n.error(t);o.continue(!1)})["finally"](function(){o.isReady=!0})};this.$onChanges=function(t){t.view&&t.view.currentValue?(this.componentView=this.view,this.isVisible=!0):e.getWidgetConfig("Geo",this.path).then(function(t){t?(o.componentView=t.view,o.isVisible=!0):(n.error("Geo view not available for this path: "+i.path()),o.continue(!1))},function(t){n.error(t);o.continue(!1)})}}]})}(angular.module(virtualAgentApp)),function(n){n.service("geoService",["$http","$routeParams",function(n,t){var i="/api/geo/location";this.getLocationInfo=function(){var r={};return t.ip&&(r.ip=t.ip),n.get(i,{params:r}).then(function(n){return n.data})}}])}(angular.module(virtualAgentApp)),function(n){n.service("getUserInfoService",["$routeParams","authService",function(n,t){this.getUserInfo=function(){return t.getUserInfo()};this.getUserDevice=function(){var n=this.getUserInfo();return n.deviceId}}])}(angular.module(virtualAgentApp)),function(n){n.value("contactCommands",{notifyChatStarted:"NotifyChatStarted",notifyChatEnded:"NotifyChatEnded",angularJsReady:"angularjsready",notifyAppClosingComplete:"notifyappclosingcomplete",showtoast:"showtoast",notifychatenqueue:"notifychatenqueue",notifychatdequeue:"notifychatdequeue",signInUser:"signinuser",appStartContext:"appstartcontext",getRelayInfo:"getrelayinfo",forwardToAgent:"forwardtoagent",sharingSessionConnected:"sharingsessionconnected",sharingSessionFailed:"sharingsessionconnectionfailed",notifyAppClosing:"notifyappclosing",signInFailed:"signinfailed",getAppContext:"getappcontext",beginSharing:"beginsharing",endSharing:"endsharing",pauseSharingByAgent:"pausesharingbyagent",resumeSharingByAgent:"resumesharingbyagent",clearCanvas:"clearcanvas",changeBrushColor:"changebrushcolor",changeBrushSize:"changebrushsize",setSharingMode:"setsharingmode",endSharingByUser:"endsharingbyuser",pauseSharingByUser:"pausesharingbyuser",resumeSharingByUser:"resumesharingbyuser"});n.value("contactMessageTypes",{requestResponse:"requestresponse",userRequest:"userrequest"});n.service("nativeAppService",["$log","$window","$rootScope","$cookies","$location","contactCommands","contactMessageTypes","chatStateService","relayService","queryStringService",function(n,t,i,r,u,f,e,o,s,h){function a(n,t){t&&(n={command:f.forwardToAgent,context:n});v(n,!0)}function v(n,r){n&&n.command&&(r&&n.context?i.$broadcast("ForwardToAgent",JSON.stringify(n.context)):t&&t.external&&"notify"in t.external&&(i.$broadcast("AppActionStart",n.command),t.external.notify(JSON.stringify(n))))}function b(t){switch(t.command){case f.appStartContext:return t.context&&(et(t.context.EffectiveCapabilities),o.setAppStartContext(t.context),i.$broadcast("AppStartContext",t.context)),!0;case f.forwardToAgent:return tt(t.context)||a(t,!1),k(t.context),!0;case f.signInFailed:return i.$broadcast("NativeSignInFailed"),!0;case f.notifyAppClosing:return i.$broadcast("NativeAppClosing"),!0;default:n.error("Unknown App Command: '"+t.command+"' received")}return!1}function k(t){switch(t.command){case e.userRequest:case e.requestResponse:return it(t.command,t.context)?rt(t.command,t.context):ut(t.command,t.context),!0;default:n.error("Unknown App Message Type: '"+t.command+"' received")}return!1}function d(t){switch(t.command){case f.getAppContext:return c.sendAgentRequestResponse(f.getAppContext,!0,"App start context in custom field","",o.getAppStartContext()),!0;case f.getRelayInfo:return s.getNearestRelay().then(function(n){c.sendAgentRequestResponse(f.getRelayInfo,!0,"Nearest relay information in custom field","",{relayEndpoint:n.data.HostName})},function(n){c.sendAgentRequestResponse(f.getRelayInfo,!1,"Nearest Relay information error in custom field","",{error:n})}),!0;case f.beginSharing:return t.context&&t.context.promptuser?i.$broadcast("ChatScreenShareRequest",t):(i.$broadcast("ChatScreenShareReconnect"),c.sendAppCommand(t)),!0;case f.endSharing:case f.pauseSharingByAgent:case f.resumeSharingByAgent:case f.clearCanvas:case f.changeBrushColor:case f.changeBrushSize:return c.sendAppCommand(t),!0;case f.setSharingMode:return i.$broadcast("SetSharingModeRequest",t.context.sharingmode),c.sendAppCommand(t),!0;default:n.error("Unknown Agent Command: '"+t.command+"' received")}return!1}function g(n){return n&&n.requestname}function nt(n){return n&&n.responsename&&n.success}function tt(n){if(n&&n.command&&n.context){var t=y(n.command,n.context);return t===f.sharingSessionFailed}return!1}function it(n,t){switch(n){case e.userRequest:return g(t)&&c.isUnderstoodCommand(t.requestname);case e.requestResponse:return nt(t)&&c.isUnderstoodCommand(t.responsename)}return!1}function y(n,t){switch(n){case e.userRequest:return t.requestname;case e.requestResponse:return t.responsename}return null}function rt(n,t){var r=y(n,t);i.$broadcast("AppActionEnd",{command:r,success:!0});switch(r){case f.sharingSessionConnected:return i.$broadcast("ChatScreenShareEstablished"),!0;case f.sharingSessionFailed:return i.$broadcast("ChatScreenShareConnectFailed"),!0;case f.endSharing:case f.endSharingByUser:return i.$broadcast("ChatScreenShareClosed"),!0;case f.pauseSharingByAgent:case f.pauseSharingByUser:return i.$broadcast("ToggleScreenShare",!0),!0;case f.resumeSharingByAgent:case f.resumeSharingByUser:return i.$broadcast("ToggleScreenShare",!1),!0;case f.setSharingMode:return i.$broadcast("SetSharingMode"),!0;case f.beginSharing:case f.clearCanvas:case f.changeBrushColor:case f.changeBrushSize:return!0}return!1}function ut(t,r){var u=y(t,r);i.$broadcast("AppActionEnd",{command:u,success:!1});switch(u){case f.beginSharing:case f.pauseSharingByUser:case f.resumeSharingByUser:return i.$broadcast("ChatScreenShareError",u),n.error("Native Command: "+r.command+" failed with context: "+JSON.stringify(r.context)),!0;case f.endSharing:case f.pauseSharingByAgent:case f.resumeSharingByAgent:case f.clearCanvas:case f.changeBrushColor:case f.changeBrushSize:case f.setSharingMode:return!0}return!1}function ft(){document.cookie=p.isNative+"="+l+";path=/"}function et(n){n&&n.map(function(n){typeof w[n]!="undefined"&&(w[n]=!0)})}var p={isNative:"isNative"},w={ScreenSharing:!1,Annotation:!1,FullControl:!1,PauseSharing:!1},c=this,l;this.setNative=function(n){var t=l;l=n;l!==t&&i.$broadcast("NativeCookieUpdate");ft()};this.isNative=function(){var n=h.getQueryStringValue(p.isNative);return typeof n!="undefined"?n:l||!1};this.hasCapability=function(n){return!!w[n]};this.isUnderstoodCommand=function(n){for(var t in f)if(f[t]===n)return!0;return!1};this.receiveCommand=function(n,t){return l&&n&&n.command?t?d(n):b(n):!1};this.signInUser=function(n){v({command:f.signInUser,context:{successUrl:n}},!1)};this.sendAppCommand=function(n){l&&v(n,!1)};this.sendAgentUserRequest=function(n,t){a({command:e.userRequest,context:{requestname:n,data:t||null}},!0)};this.sendAgentRequestResponse=function(n,t,i,r,u){a({command:e.requestResponse,context:{responsename:n,success:t,message:i,errorcode:r,custom:u||null}},!0)};this.fetchDeviceInfo=function(){var n=o.getAppStartContext();if(!n)return undefined;var t=n.systemproductname,i=n.systemmanufacturer,r=n.SystemInfo.productname,u=n.SystemInfo.edition,f=n.SystemInfo.buildnumber,e=n.SystemInfo.majorversionnumber,s=n.SystemInfo.minorversionnumber;return{"deviceContext-model":t,"deviceContext-manufacturer":i,"deviceContext-ProductName":r,"deviceContext-Edition":u,"deviceContext-BuildNumber":f,"deviceContext-MajorBuildNumber":e,"deviceContext-MinorBuildNumber":s}};i.$on("CommandMessageReceived",function(n,t){c.receiveCommand(t,!0)});i.$on("ChatSessionEstablished",function(){c.sendAppCommand({command:f.notifyChatStarted})});i.$on("ChatSessionClosed",function(){c.sendAppCommand({command:f.notifyChatEnded})});i.$on("NotifyAppClosingComplete",function(){c.sendAppCommand({command:f.notifyAppClosingComplete})});i.$on("ShowToast",function(n,t){c.sendAppCommand({command:f.showtoast,context:{text:t}})});i.$on("EnqueueChatSuccess",function(){c.sendAppCommand({command:f.notifychatenqueue})});i.$on("ChatDisengageSuccess",function(){c.sendAppCommand({command:f.notifychatdequeue})});i.$on("AngularJsReady",function(){c.sendAppCommand({command:f.angularJsReady})});u.search()&&typeof u.search().isNative!="undefined"?this.setNative(u.search().isNative):l=r.get(p.isNative)}])}(angular.module(virtualAgentApp));window&&(window.supportPortal=window.supportPortal||{},window.supportPortal.receiveCommand=function(n){return angular.element(document).injector().get("nativeAppService").receiveCommand(n,!1).toString()},window.selfAssistWeb=window.selfAssistWeb||{},window.selfAssistWeb.receiveCommand=window.supportPortal.receiveCommand),function(n){n.service("appCommandQosTelemetryService",["$rootScope","$timeout","clientConfig","qosTelemetryService","contactCommands","nativeAppService","virtualAgentConstants",function(n,t,i,r,u,f,e){function s(n){return l.some(function(t){return n===t})}function c(t){var i,r;f.isUnderstoodCommand(t)?(i="//app/command-error",r="Command: "+t+" failed"):(i="//app/unknown-command",r="Unknown command: "+t+" failed");n.$broadcast(e.qos.qosBroadcastKey,{operation:i,status:500,custom:r})}var l=[u.beginSharing,u.pauseSharingByUser,u.resumeSharingByUser,u.endSharingByUser],o=this,h={timeout:i.AppConfig&&i.AppConfig.AppCommandTimeoutInMilliseconds};this.qosActions={};n.$on("AppActionStart",function(n,i){if(s(i)){o.qosActions[i]?o.qosActions[i].length>=1&&r.createEvent(r.eventTypes.app.dupeCommandError).reject(i):o.qosActions[i]=[];var u=r.createEvent(i);o.qosActions[i].push({promise:u,timer:t(function(){u.reject(i+" timed out after "+h.timeout+" milliseconds.")},h.timeout)})}});n.$on("AppActionEnd",function(n,i){var r=i.command,u;s(r)?o.qosActions[r]&&o.qosActions[r].length>0&&(u=o.qosActions[r].shift(),t.cancel(u.timer),i.success?u.promise.resolve():u.promise.reject(r)):c(r)})}])}(angular.module(virtualAgentApp)),function(n){n.service("callbackTelemetryService",["$rootScope","$cookies","clientConfig","clientTelemetryService","nativeAppService","languageService","rccService","serverInfo","phoneNumberService","chatStateService","wedcsService","sdkProxyService","virtualAgentSessionService",function(n,t,i,r,u,f,e,o,s,h,c,l,a){var p="callbackAction",v={unknown:"unknown",EnqueueImmediateCallback:"enqueueImmediateCallback",EnqueueScheduledCallback:"enqueueScheduledCallback",EnqueueCallback:"enqueueCallback"},y=function(n,i){var u={name:"Microsoft.Mac.SelfAssist.CallbackAction",content:{"Microsoft.Mac.SelfAssist.CallbackAction":{actionName:n,callbackTime:i&&i.timeslot?i.timeslot:"",errorCode:i&&i.errorCode?i.errorCode:"",immediateCallbackDelay:i&&!(i.immediateCallbackDelay==null)?i.immediateCallbackDelay:1,subjectName:e.getSubjectName()?e.getSubjectName():"",countryCode:i.locale?s.selectCountryCode(i.locale).code:"",subjectId:h.getSubject()?h.getSubject().toString():"",visitId:h.getVisitId()?h.getVisitId():"",enqueueId:h.getEnqueueId()?h.getEnqueueId().toString():"",skylightId:a.id()||"",interactionId:i&&i.interactionId?i.interactionId:"",wedcsId:t.get("MSFPC"),context:i?JSON.stringify(i):""}}};u=r.populateDefaultFields(u);r.pushEvent(u)};n.$on("EnqueueCallbackFailure",function(n,t){l.proxy().then(function(n){n.dispatchEvent("CallbackRejected")});y(v.EnqueueCallback,t)});n.$on("EnqueueCallbackSuccess",function(n,t){var i,r;c.logCustomEvent("callback-requested",p);i=JSON.parse(t.methodParameters.context);i.timeslot?(t.timeslot=i.timeslot,l.proxy().then(function(n){n.dispatchEvent("CallbackAccepted",{datetime:t.timeslot})}),y(v.EnqueueScheduledCallback,t)):(r=e.getEstimatedCallbackWaitTime(t.methodParameters.subject),r&&(t.immediateCallbackDelay=r.AverageWaitTime),l.proxy().then(function(n){n.dispatchEvent("CallbackAccepted")}),y(v.EnqueueImmediateCallback,t))})}])}(angular.module(virtualAgentApp)),function(n){n.service("chatTelemetryService",["$rootScope","$window","$cookies","clientConfig","serverInfo","chatStateService","clientTelemetryService","rccService","wedcsService","metaTagsService","sdkProxyService","virtualAgentSessionService",function(n,t,i,r,u,f,e,o,s,h,c,l){function p(n,t){h.addOrUpdateMetaTag("ms.subjectId",f.getSubject()||"");var i={};t&&(t=typeof t=="object"?JSON.stringify(t):t,i["ms.scvalue"]=t);s.logCustomEvent(n,b,i)}var w=this,b="chatAction",y={chatQueued:"ChatQueued",chatQueueUpdated:"ChatQueueUpdated",chatMessage:"ChatMessage",chatClosed:"ChatClosed",chatEstablished:"ChatEstablished",chatTransferred:"ChatTransferred"},a={unknown:"unknown",chatFeedback:"chatFeedback",chatFeedbackFlighted:"chatFeedbackFlighted",chatRequested:"chatRequested",chatEnded:"chatEnded",endChatClicked:"endChatClicked",chatMessageSent:"chatMessageSent",chatMessageRecieved:"chatMessageRecieved",chatMessageReceivedHandlerExecuted:"chatMessageReceivedHandlerExecuted",chatSessionEstablished:"chatSessionEstablished",agentDataReady:"agentDataReady",chatInitComplete:"chatInitComplete",enqueueChat:"enqueueChat",dequeueChat:"dequeueChat",chatExtendedWait:"chatExtendedWait",chatQueueStatus:"chatQueueStatus",chatTransferred:"chatTransferred",chatLongQueue:"chatLongQueue",chatScreenShareAccept:"chatScreenShareAccept",chatScreenShareDenied:"chatScreenShareDenied",chatScreenShareEstablished:"chatScreenShareEstablished",chatScreenShareRequest:"chatScreenShareRequest",chatScreenShareError:"chatScreenShareError",chatScreenShareConnectFailed:"chatScreenShareConnectFailed",html5Hotification:"html5Hotification",chatSurveyDisplayed:"chatSurveyDisplayed",cvExtention:"cvExtention",awasaVisitId:"awasaVisitId",awasaEnqueueId:"awasaEnqueueId",awasaChatId:"awasaChatId",chatReset:"chatReset",doubleChatEnqueued:"doubleChatEnqueued",passcodeSuccess:"passcodeSuccess",passcodeFailure:"passcodeFailure",prechatText:"prechatText",chatVideoPresent:"chatVideoPresent",chatVideoToggled:"chatVideoToggled",chatVideoPlaying:"chatVideoPlaying",chatVideoPaused:"chatVideoPaused",chatVideoEnded:"chatVideoEnded",chatVideoError:"chatVideoError",chatVideoSession:"chatVideoSession",chatVideoMinTimeEngaged:"chatVideoMinTimeEngaged",chatVideoAlertResponse:"chatVideoAlertResponse",chatVideoInfo:"chatVideoInfo",chatVideoAutoToggle:"chatVideoAutoToggle",malformedUnauthenticatedToken:"malformedUnauthenticatedToken",malformedUnauthenticatedTokenFromHip:"malformedUnauthenticatedTokenFromHip",malformedUnauthenticatedTokenFromRefresh:"malformedUnauthenticatedTokenFromRefresh",malformedUnauthenticatedTokenInitialRccLoad:"malformedUnauthenticatedTokenInitialRccLoad",malformedUnauthenticatedTokenRccAlreadyLoaded:"malformedUnauthenticatedTokenRccAlreadyLoaded",chatWaitTimeEstimate:"chatWaitTimeEstimate",chatWaitTimeActual:"chatWaitTimeActual",chatLongEstimate:"chatLongEstimate",unauthAuthFallback:"unauthToAuthFallback",redirectToLogin:"redirectToLogin"},v=function(n,r,u){r=typeof r!="undefined"?r:"";u=u?u.toString():f.getEnqueueId()?f.getEnqueueId().toString():"";var s={name:"Microsoft.Mac.SelfAssist.ChatAction",content:{"Microsoft.Mac.SelfAssist.ChatAction":{actionName:n,agentID:f.getAgent()&&f.getAgent().AgentId?f.getAgent().AgentId.toString():"",activityID:f.getVisitId()?f.getVisitId():"",subjectName:o.getSubjectName()?o.getSubjectName():"",subjectId:f.getSubject()?f.getSubject().toString():"",visitId:f.getVisitId()?f.getVisitId():"",enqueueId:u,chatId:f.getChatId()?f.getChatId().toString():"",skylightId:l.id()||"",pageHasFocus:t.document.hasFocus(),isRatMode:o.isRatMode(),wedcsId:i.get("MSFPC"),custom1:r,wedcsSessionId:i.get("MS0"),engagementId:f.getEngagementId()?f.getEngagementId():""}}};s=e.populateDefaultFields(s);e.pushEvent(s)};this.pushChatMessageReceivedHandlerExecutedEvent=function(n){n=n||"";v(a.chatMessageReceivedHandlerExecuted,n)};n.$on("ChatReset",function(){v(a.chatReset)});n.$on("DoubleChatEnqueued",function(){v(a.doubleChatEnqueued)});n.$on("ChatRequested",function(){v(a.chatRequested);p("chat-requested")});n.$on("AgentDataReady",function(){v(a.agentDataReady)});n.$on("ChatSessionEstablished",function(){c.proxy().then(function(n){n.dispatchEvent(y.chatEstablished)});v(a.chatSessionEstablished);p("chat-established")});n.$on("ChatInitComplete",function(){v(a.chatInitComplete)});n.$on("ChatMessageReceived",function(n,t){c.proxy().then(function(n){n.dispatchEvent(y.chatMessage,{sender:{senderName:t.senderName}})});v(a.chatMessageRecieved);w.pushChatMessageReceivedHandlerExecutedEvent("chatTelemetryService")});n.$on("EndChatClicked",function(){v(a.endChatClicked)});n.$on("ChatSessionClosed",function(){c.proxy().then(function(n){n.dispatchEvent(y.chatClosed)});v(a.chatEnded);p("chat-ended")});n.$on("ChatMessageSendSuccess",function(){c.proxy().then(function(n){n.dispatchEvent(y.chatMessage,{sender:{senderName:"user"}})});v(a.chatMessageSent)});n.$on("ChatExtendedWait",function(){v(a.chatExtendedWait)});n.$on("ChatQueueStatus",function(n,t){c.proxy().then(function(n){n.dispatchEvent(y.chatQueueUpdated,{position:t.position})});v(a.chatQueueStatus,t.position+"")});n.$on("ChatFeedback",function(n,t){v(a.chatFeedback,JSON.stringify(t));p("chat-feedback",t)});n.$on("ChatFeedbackFlighted",function(n,t){v(a.chatFeedbackFlighted,JSON.stringify(t))});n.$on("EnqueueChatSuccess",function(n,t){c.proxy().then(function(n){n.dispatchEvent(y.chatQueued)});v(a.enqueueChat,t.waitTimeEstimate+"",t.enqueueId)});n.$on("ChatScreenShareAccept",function(){v(a.chatScreenShareAccept)});n.$on("ChatScreenShareDenied",function(){v(a.chatScreenShareDenied)});n.$on("ChatScreenShareEstablished",function(){v(a.chatScreenShareEstablished)});n.$on("ChatScreenShareRequest",function(){v(a.chatScreenShareRequest)});n.$on("ChatScreenShareError",function(n,t){v(a.chatScreenShareError,t.command+"")});n.$on("ChatScreenShareConnectFailed",function(){v(a.chatScreenShareConnectFailed)});n.$on("ChatDisengageSuccess",function(){v(a.dequeueChat)});n.$on("ChatTransferred",function(){c.proxy().then(function(n){n.dispatchEvent(y.chatTransferred)});v(a.chatTransferred);p("chat-transfer")});n.$on("ChatLongQueue",function(){v(a.chatLongQueue)});n.$on("setParentCv",function(){t&&t.Asimov&&t.Asimov.cv&&f.setParentCv(t.Asimov.cv.getValue())});n.$on("chatSurveyDisplayed",function(){v(a.chatSurveyDisplayed)});n.$on("Html5Notification",function(n,t){v(a.html5Hotification,t)});n.$on("cvExtention",function(n,t){v(a.cvExtention,t)});n.$on("awasaVisitId",function(n,t){v(a.awasaVisitId,t.toString())});n.$on("awasaEnqueueId",function(n,t){v(a.awasaEnqueueId,t.toString())});n.$on("awasaChatId",function(n,t){v(a.awasaChatId,t.toString())});n.$on("PasscodeSuccess",function(){v(a.passcodeSuccess)});n.$on("PasscodeFailure",function(n,t){v(a.passcodeFailure,t)});n.$on("PrechatText",function(n,t){v(a.prechatText,t)});n.$on("ChatVideoPresent",function(n,t){v(a.chatVideoPresent,t+"")});n.$on("ChatVideoToggled",function(n,t){v(a.chatVideoToggled,t+"")});n.$on("ChatVideoPlaying",function(n,t){v(a.chatVideoPlaying,t+"")});n.$on("ChatVideoPaused",function(n,t){v(a.chatVideoPaused,t+"")});n.$on("ChatVideoEnded",function(n,t){v(a.chatVideoEnded,t+"")});n.$on("ChatVideoInfo",function(n,t){v(a.chatVideoInfo,JSON.stringify(t))});n.$on("ChatVideoError",function(n,t){v(a.chatVideoError,JSON.stringify(t))});n.$on("ChatVideoSession",function(){v(a.chatVideoSession)});n.$on("ChatVideoMinTimeEngaged",function(){v(a.chatVideoMinTimeEngaged)});n.$on("ChatVideoAlertResponse",function(n,t){v(a.chatVideoAlertResponse,t+"")});n.$on("ChatVideoAutoToggle",function(){v(a.chatVideoAutoToggle)});n.$on("MalformedUnauthenticatedToken",function(n,t){v(a.malformedUnauthenticatedToken,t+"")});n.$on("MalformedUnauthenticatedTokenFromHip",function(n,t){v(a.malformedUnauthenticatedTokenFromHip,t+"")});n.$on("MalformedUnauthenticatedTokenFromRefresh",function(n,t){v(a.malformedUnauthenticatedTokenFromRefresh,t+"")});n.$on("MalformedUnauthenticatedTokenInitialRccLoad",function(n,t){v(a.malformedUnauthenticatedTokenInitialRccLoad,t+"")});n.$on("MalformedUnauthenticatedTokenRccAlreadyLoaded",function(n,t){v(a.malformedUnauthenticatedTokenRccAlreadyLoaded,t+"")});n.$on("ChatWaitTimeEstimate",function(n,t){v(a.chatWaitTimeEstimate,t+"")});n.$on("ChatWaitTimeActual",function(n,t){v(a.chatWaitTimeActual,t+"")});n.$on("ChatLongEstimate",function(n,t){v(a.chatLongEstimate,t+"")});n.$on("UnauthAuthFallback",function(){v(a.unauthAuthFallback)});n.$on("ChatRedirectToLogin",function(n,t){v(a.redirectToLogin,JSON.stringify(t))})}])}(angular.module(virtualAgentApp)),function(n){n.service("geoTelemetryService",["$rootScope","wedcsService",function(n,t){var i={geoOptionsPresented:"geoOptionsPresented",geoAccess:"geoAccess",geoContinue:"geoContinue",geoNotAvailable:"geoNotAvailable"},r="geoAction";n.$on("GeoOptionsPresented",function(n,u){t.logCustomEvent(i.geoOptionsPresented,r,{"ms.scvalue":u})});n.$on("GeoContinue",function(n,u){t.logCustomEvent(i.geoContinue,r,{"ms.scvalue":u})});n.$on("GeoAccess",function(n,u){t.logCustomEvent(i.geoAccess,r,{"ms.scvalue":u})});n.$on("GeoNotAvailable",function(n,u){t.logCustomEvent(i.geoNotAvailable,r,{"ms.scvalue":u})})}])}(angular.module(virtualAgentApp)),function(n){n.service("menuTelemetryService",["$window","$rootScope","$location","clientConfig","clientTelemetryService","nativeAppService","languageService","serverInfo",function(n,t,i,r,u){var f={unknown:"unknown",menuLinkClicked:"menuLinkClicked",menuExtraClicked:"menuExtraClicked"},e={nativeAppClosing:"nativeAppClosing",notifyAppClosingComplete:"notifyAppClosingComplete"},o=function(n,t){var i={name:"Microsoft.Mac.SelfAssist.SupportMenuAction",content:{"Microsoft.Mac.SelfAssist.SupportMenuAction":{actionName:n,link:t&&t.link&&t.link.linkUrl?t.link.linkUrl:""}}};i=u.populateDefaultFields(i);u.pushEvent(i)},l=function(n,t){var i={name:"Microsoft.Mac.SelfAssist.ContactUsAction",content:{"Microsoft.Mac.SelfAssist.ContactUsAction":{actionName:n,link:t&&t.link&&t.link.linkUrl?t.link.linkUrl:""}}};i=u.populateDefaultFields(i);u.pushEvent(i)},c=function(n){var t={name:"Microsoft.Mac.SelfAssist.SiteFeedback",content:{"Microsoft.Mac.SelfAssist.SiteFeedback":{actionName:"SiteFeedback",type:n&&n.type?n.type:"",comment:n&&n.comment?n.comment:""}}};t=u.populateDefaultFields(t);u.pushEvent(t)},s=function(){var n={name:"Microsoft.Mac.SelfAssist.PageAction",content:{"Microsoft.Mac.SelfAssist.PageAction":{actionName:"PageUnload",custom1:i.absUrl()}}};n=u.populateDefaultFields(n);u.pushEvent(n)},h=function(n){var t={name:"Microsoft.Mac.SelfAssist.SupportAppAction",content:{"Microsoft.Mac.SelfAssist.SupportAppAction":{actionName:n}}};t=u.populateDefaultFields(t);u.pushEvent(t)};t.$on("MenuLinkClicked",function(n,t){o(f.menuLinkClicked,t)});t.$on("MenuExtraClicked",function(n,t){o(f.menuExtraClicked,t)});t.$on("SiteFeedback",function(n,t){c(t)});t.$on("NativeAppClosing",function(){h(e.nativeAppClosing)});t.$on("NotifyAppClosingComplete",function(){h(e.notifyAppClosingComplete)});$(n).bind("unload",s);$(n).bind("onunload",s)}])}(angular.module(virtualAgentApp));WLSPHIP0={error:0,cssSet:{cssCdHIPInput:"form-control"},holder:"ispHIPHIP",scriptHolder:"ispHIPScript",type:"visual",postLoad:function(){},getSolution:function(){},reloadHIP:function(){},switchHIP:function(){},setFocus:function(){},clientValidation:function(){},verify:function(){}},function(n){n.value("hipFormObject",WLSPHIP0);n.service("hipService",["$rootScope","$http","rccService","chatTokenService","chatStateService","hipFormObject",function(n,t,i,r,u,f){function e(t,i){r.getUnauthTokenForUser(JSON.stringify({Solution:t,Token:i,Datacenter:f.dataCenter,FlowId:f.urlFid})).then(function(t){t!=null&&t.data!=null&&t.data.indexOf("PageController")>-1&&n.$broadcast("MalformedUnauthenticatedTokenFromHip",t.data);u.setToken(t.data);n.$broadcast("HipSuccess")},function(){f.reloadHIP();n.$broadcast("HipFailure")})}this.verifyHip=function(){f.verify(e,"")};this.cycleHip=function(){f.reloadHIP();f.setFocus()}}])}(angular.module(virtualAgentApp)),function(n){n.value("unauthNames",{storage:"noAuth"});n.controller("UnauthFormController",["$scope","$rootScope","$location","$routeParams","chatStateService","rccService","compassService","sessionStorageService","flightService","hipService","clientConfig","chatContextService","unauthNames","authService",function(n,t,r,u,f,e,o,s,h,c,l,a,v,y){function g(t){var r={attributes:{},prechatSurvey:[]};for(i=0;i<t.length;i++)n.form.questions[i].contextName?r.attributes[n.form.questions[i].contextName]=t[i]:r.prechatSurvey.push({name:n.form.questions[i].questionText.text,value:t[i]});return r}function b(){var t=o.getUnauthForm();t&&(n.form=t[u.name],w())}function k(){var t=!0;for(i=0;i<n.form.questions.length;i++)n.form.questions[i].isRequired&&!n.responses[i]&&(t=!1,n.form.questions[i].hasError=!0);return t}function p(){u.modality==="call"?r.path("/callback/"+u.id+"/"):r.path("/chat/"+u.id+"/")}function w(){d?y.resolveAuthState().then(function(i){var r=y.getSupportedIDP();i===r.MSA?n.form&&n.form.authFallback?(t.$broadcast("UnauthAuthFallback"),s.set(v.storage,!1),p()):n.form&&(s.set(v.storage,!0),n.isReady=!0):n.form&&(s.set(v.storage,!0),n.isReady=!0)}):n.form&&n.form.authFallback&&l.authInfo.authStatus()===1?(t.$broadcast("UnauthAuthFallback"),s.set(v.storage,!1),p()):n.form&&l.authInfo.authStatus()!=2&&(s.set(v.storage,!0),n.isReady=!0)}var d=h.isUserInFlight("aad-1");n.config={timeout:l.ChatConfig.ChatDefaultTimeout};n.reset=function(){n.responses=[];n.wrongCaptcha=!1;n.awaitingResponse=!1;b()};n.removeError=function(t){n.form.questions[t].hasError=!1};n.submit=function(){k()&&(n.awaitingResponse=!0,c.verifyHip())};n.reset();n.$on("CompassContentReady",b);n.$on("HipSuccess",function(){var t,i;n.awaitingResponse=!1;k()?(t=g(n.responses),t.attributes&&t.attributes.length>0||t.prechatSurvey&&t.prechatSurvey.length>0?(i=t.attributes,i.prechatsurvey=JSON.stringify(t.prechatSurvey),a.setValues(i).then(function(){p()})):p()):c.cycleHip()});d?n.$on("UserSignedInMSA",w):n.$on("UserSignedIn",w);n.$on("UserSignedOut",w);n.$on("HipFailure",function(){n.awaitingResponse=!1;n.wrongCaptcha=!0})}])}(angular.module(virtualAgentApp)),function(n){n.controller("ChatEmulatorController",["$scope","$rootScope","clientConfig",function(n,t,i){n.emulatorHidden=!0;i.TestConfig.AllowChatEmulator&&(n.emulatorHidden=!1,n.chatEmulate=function(){t.$broadcast("ChatEmulate")})}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("chatemulator",["clientConfig","$log",function(n,t){return n.TestConfig.AllowChatEmulator?(t.info("Chat Emulator loaded"),{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Contact/Chat/Emulator.html"}):{template:""}}]);angular.module(virtualAgentApp).directive("autoSuggest",["$rootScope","$timeout","$document",function(n,t,i){return{restrict:"A",templateUrl:function(n,t){return t.templateUrl},scope:{queryFunction:"&",submitHandler:"&",queryModelMapper:"&?",suggestionHtmlGenerator:"&?",inputQuery:"=",selectedSuggestion:"=?"},link:function(r,u,f){function v(t,i){n.$broadcast(a,{suggestion:r.selected,query:o,suggestionIndex:t,suggestionCount:i})}function y(n){if(s==0||n&&n.length>=s){o=n;var t=r.queryFunction({query:n});t.then(function(n){r.result=n})}}function c(){t(function(){r.isVisible=!1},0)}function p(){r.isVisible=!0;r.$digest()}function w(n,t){var u=r.result.suggestions.indexOf(r.selected),i=Math.abs(t-n);i=i==0?0:i/(t-n);u===-1?(r.selected=r.result.suggestions[n],r.selectedSuggestion&&(r.selectedSuggestion.selected=r.result.suggestions[n])):u===t?(r.selected=null,r.selectedSuggestion&&(r.selectedSuggestion.selected=null)):(r.selected=r.result.suggestions[u+i],r.selectedSuggestion&&(r.selectedSuggestion.selected=r.result.suggestions[u+i]));k()}function d(n){if(r.result&&r.result.suggestions&&r.result.suggestions.length)if(n.which===27)c();else{if(r.isVisible==!1&&p(),n.which===40)return w(0,r.result.suggestions.length-1),r.$digest(),!1;if(n.which===38)return w(r.result.suggestions.length-1,0),r.$digest(),!1;if(n.which===13){var t=-1;a&&(r.selected&&(t=r.result.suggestions.indexOf(r.selected)),v(t,r.result.suggestions.length),r.selected=null);r.result&&(r.result.suggestions=[]);r.$digest()}}}function b(n){angular.equals(i[0].activeElement,e[0])&&(r.selected&&n===h(r.selected)||n===o||l||(l=!0,y(n),t(function(){l=!1;b(r.inputQuery)},300)))}function k(){r.inputQuery=r.selected!==null?h(r.selected):o}function h(n){if(r.queryModelMapper&&typeof r.queryModelMapper=="function")return r.queryModelMapper({suggestion:n});if(typeof n=="string")return n;throw new Error("queryModelMapper function missing");}var e=$(f.inputSource),o="",l=!1,a=f.telemetryEventName,s=f.minimumLetters?parseInt(f.minimumLetters,10):0;s=s<0?0:s;r.isVisible=!1;r.generateSuggestionHtml=function(n){if(r.suggestionHtmlGenerator&&typeof r.suggestionHtmlGenerator=="function"){var t=o.toLowerCase();return r.suggestionHtmlGenerator({query:t,suggestion:h(n)})}return h(n)};r.isSelected=function(n){return n===r.selected};r.clickSuggestion=function(n,i){r.selected=n;r.selectedSuggestion&&(r.selectedSuggestion.selected=n);k();c();t(function(){if(a){var n=0;r.result&&r.result.suggestions&&(n=r.result.suggestions.length);v(i,n);r.selected=null}r.submitHandler({})},0)};t(function(){e=$(f.inputSource);r.$watch("inputQuery",b);e.keydown(d);e.focus(p);e.blur(c);y("")},0)}}}]),function(n){n.factory("autoSuggestFactory",["$injector","clientConfig",function(n,t){var i=t.AutosuggestConfig;return i&&i.Utility&&i.Utility==="DGPS"?n.get("dgpsAutoSuggestService"):n.get("bingAutoSuggestService")}])}(angular.module(virtualAgentApp)),function(n){n.service("bingAutoSuggestService",["$http","$rootScope","clientConfig","languageService",function(n,t,i,r){var u=i.AutosuggestConfig;this.getSuggestions=function(t){if(t===""||!u.Enabled)return null;var r=e(t),i={};return n.get(r).then(function(n){f(n.data)||o(i,n.data)}),i};var f=function(n){return!n||!n.AS||!n.AS.Results?(t.$broadcast("AutoSuggestBadResults",n),!0):!1},e=function(n){var t=u.ServiceUri,i=u.AppId;return t.replace("{0}",i).replace("{1}",n).replace("{2}",r.langLocale())},o=function(n,t){var i=t.AS.Results.filter(function(n){return n.Type==="AS"})[0].Suggests;n.suggestions=i.map(function(n){return n.Txt})}}])}(angular.module(virtualAgentApp)),function(n){n.service("dgpsAutoSuggestService",["$http","$q","$filter","$log","clientConfig","languageService","osService","qosTelemetryService",function(n,t,i,r,u,f,e,o){function s(n){return!n||n==="null"?!0:n.AutoSuggestions?!1:!0}function h(n){var t=u.AutosuggestConfig.ServiceUri;return t=t.replace("{0}",encodeURIComponent(n)),t=t.replace("{1}",f.langLocale()),t.replace("{2}",e.getOS())}function c(n){return i("limitTo")(n.AutoSuggestions,10)}this.getSuggestions=function(i){var f=t.defer(),a=e.isCorsEnabled(),l;return!u.AutosuggestConfig.Enabled||!a||!i?f.promise:(l=h(i),n.get(l).then(function(n){var t=n.data,i;s(t)?(t&&t!=="null"&&(r.error("Improperly structured Dynamic GPS result set",t),o.createEvent(o.eventTypes.dgps.invalid).reject({results:t})),f.reject(t)):(i=c(t),f.resolve({suggestions:i}))},function(n){f.reject(n)}),f.promise)}}])}(angular.module(virtualAgentApp)),function(n){n.directive("instantAnswer",["$sce","$timeout","$rootScope","virtualAgentFeedbackService","focusContentService","smoothScrollService","$window",function(n,t,i,r,u,f){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Search/InstantAnswer.html",scope:{answer:"=instantAnswer",view:"=",feedbackAction:"&?",target:"=?",displaySurvey:"=?hasSurvey",displayFeedback:"=?hasFeedback",maxHeight:"=?"},link:function(e,o){function s(){e.instantAnswerStyle={};e.hasShowMoreButton=!1;e.inShowMoreState=!1}e.reset=function(){e.target=e.target||"_blank";e.displayFeedback===undefined&&(e.displayFeedback=!0);e.solution=e.solution||{active:e.answer&&e.answer.solutions&&e.answer.solutions.length>0?e.answer.solutions[0]:null};e.instantAnswerFeedbackName="instant-answer-feedback";e.feedbackSuccessActive=!1;e.feedbackFailureActive=!1;e.maxHeight&&e.setShowMoreLessState();$(o).find("a").on("mousedown",function(){e.pingbackUrl=r.getClickUrl({resultId:e.answer.resultId,link:this.href});e.$digest()})};e.setShowMoreLessState=function(){s();t(function(){e.hasShowMoreButton=o.prop("offsetHeight")>1.25*e.maxHeight;e.toggleShowMoreLess(e.hasShowMoreButton);e.hasShowMoreButton&&i.$broadcast("InstantAnswerCollapsable",{name:e.answer.problem.name,resultId:e.answer.resultId,sourceId:e.answer.sourceId,maxHeight:e.maxHeight,elemHeight:o.prop("offsetHeight")})})};e.toggleShowMoreLess=function(n){e.inShowMoreState=n;n?e.instantAnswerStyle["max-height"]=e.maxHeight:(i.$broadcast("InstantAnswerTriggeredShowMore",{name:e.answer.problem.name,resultId:e.answer.resultId,sourceId:e.answer.sourceId}),e.instantAnswerStyle={})};e.trustSrc=function(t){return n.trustAsResourceUrl(t)};e.provideFeedback=function(n){e.feedbackProvided=!0;e.feedbackResult=n;u.focus(e.instantAnswerFeedbackName);f.scroll(e.instantAnswerFeedbackName);e.feedbackAction&&e.feedbackAction({feedback:n,id:e.answer.resultId})};e.setFeedbackSuccessActiveState=function(n){e.feedbackSuccessActive=n};e.setFeedbackFailureActiveState=function(n){e.feedbackFailureActive=n};e.reset()}}}])}(angular.module(virtualAgentApp));angular.module(virtualAgentApp).directive("paginator",["$document","compassService",function(n){return{restrict:"A",require:"ngModel",templateUrl:"/PartialViews/VirtualAgent.Library/Search/Paginator.html",scope:{maxCount:"=",view:"="},link:function(t,i,r,u){function e(n){var o,i,e,u;for(t.lastPage=!1,o=n<f+1?1:n-f,i=n+f,i>t.maxCount/r.itemsPerPage&&(i=Math.ceil(t.maxCount/r.itemsPerPage),t.lastPage=n==i),e=[],u=o;u<=i;++u)e.push(u);return e}var f=4;t.ngModel=u;t.lastPage=!1;t.selectPage=function(i){u.$setViewValue(i);t.pages=e(i);n[0]&&n[0].activeElement&&n[0].activeElement.blur()};t.$watch("maxCount",function(){t.selectPage(u.$viewValue||1)})}}}]),function(n){n.controller("SearchController",["$scope","$rootScope","$route","$location","$window","compassService","languageService","osService","clientConfig","flightService","autoSuggestFactory","searchResultsService","supportLinkService","authenticationHelperService","osService","browserService","productPagesService","notificationBannerService","authService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,o,y,p,w,b){function k(){var t=f.getSearchView(),i,r;t&&(tt(t),n.view=t,n.isCommercial&&(i=f.getPremierHomeView2(),i&&(n.view.premierQuickNavLinks=i.quickNavLinks)));n.isCommercial&&(r=f.getPremierHomeView(),r&&(n.alerts=r.siteAlerts),g())}function tt(n){var i=-1,r=-1,t;if(n&&n.quickNavLinks)for(t=0;t<n.quickNavLinks.length;t++)n.quickNavLinks[t].key==="contact-support"&&(r=t),n.quickNavLinks[t].key==="contact-us-next"&&(i=t);i>=0&&r>=0&&(h.isUserInFlight("vafx-usvc-1")?(n.quickNavLinks[r].hidden=!0,n.quickNavLinks[i].hidden=!1):(n.quickNavLinks[r].hidden=!1,n.quickNavLinks[i].hidden=!0))}function d(){n.displayAllContent=i.current&&i.current.data&&i.current.data.isLandingPage==!0;n.isCommercial=i.current&&i.current.data&&i.current.data.isCommercial==!0;n.enablePremierAlert=i.current&&i.current.data&&i.current.data.enablePremierAlert==!0;g()}function g(){var i,u,e,o,h,s,t;if(nt.notificationBanner)n.bannerPlacement="",n.bannerPlacement=w.getBannerPlacementFromCompass();else if(i=f.getNotificationBanner(),n.bannerPlacement="",i){if(n.hasBanner=!1,n.banner=i,u=!0,n.banner&&n.banner.exclusionPageList)for(e=n.banner.exclusionPageList,t=0;t<e.length;t++)r.path().search(e[t])>-1&&(u=!1);if(o=!1,n.banner&&n.banner.associatedOSList)for(h=p.getVersionValue(n.osVersion),s=n.banner.associatedOSList,t=0;t<s.length;t++)h==s[t]&&(o=!0);o==!0&&u==!0&&(n.hasBanner=!0,n.isRight=!0,n.bannerPlacement=n.displayAllContent?"above-search":"below-search")}}var rt=h.isUserInFlight("aad-1"),it=c,nt={};n.reset=function(){n.userQuery=r.search().query||"";n.userQuery=unescape(n.userQuery);n.osVersion=o.getOS();n.browser=y.determineBrowser();t.isEnterprisePage=!1;d();k();nt={notificationBanner:h.isUserInAnyFlight(["mnb-1"])}};n.primarySearchClicked=function(){n.userQuery&&(t.$broadcast("SearchPrimaryClicked",{Location:"Primary",SearchString:n.userQuery}),r.url(l.getSearchResultsUrl(n.userQuery)))};n.linkClick=function(n,t){var i;switch(t){case"contact-support":i=e.langLocale()+"/contactus/";r.path(i);n.preventDefault();break;case"contact-us-next":h.isUserInFlight("vafx-usvc-1")&&(i=u.location.origin+"/"+e.langLocale()+"/contactus/",u.location=i)}};n.getCompleteText=function(n){return n.CompletionText};n.getSuggestions=function(n){return it.getSuggestions(n)};n.generateSuggestionHtml=function(n,t){return n!=undefined&&t!=undefined?(n=n.toLowerCase(),!n.length)?t:(n+=n==="b"?" ":"",t="<b>"+t.toLowerCase()+"<\/b>",t.replace(n,"<\/b>"+n+"<b>")):""};n.$on("$routeChangeSuccess",function(){d()});n.$on("CompassContentReady",function(){k()});n.checkVisibility=function(t){return t?t.key==="contact-support"&&n.isEnterprisePage||t.key==="microsoft-account"&&b.isSignedInAAD()||t.key==="work-account"&&!b.isSignedInAAD()||t.hidden:!1};n.userLocale=e.langLocale();n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.directive("searchResult",["virtualAgentFeedbackService",function(n){return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/Search/SearchResult.html",scope:{result:"=searchResult",id:"=",size:"=?",target:"=?",showLink:"=?",focusIndex:"="},link:function(t){t.size=t.size||"medium";t.target=t.target||"_self";t.selectResult=function(){t.pingbackUrl=t.result.pingbackUrl;t.result.resultId&&(t.pingbackUrl=n.getClickUrl(t.result))}}}}])}(angular.module(virtualAgentApp)),function(n){n.constant("SearchResultsPerPage",10);n.controller("SearchResultsController",["$scope","$routeParams","$window","osService","searchResultsService","compassService","clientConfig","locationService","SearchResultsPerPage",function(n,t,i,r,u,f,e,o,s){function c(){if(n.userQuery.length){n.results=[];n.answer=null;n.isSearching=!0;var t={query:n.userQuery,queryChannel:"search",page:n.currentPage};u.fetchResults(t).then(l,a)}}function l(t){n.count=t.totalCount;n.results=t.results;n.answer=t.instantAnswer;n.isSearching=!1;r.isMobile()&&o.scrollTo("search-results-container")}function a(){n.isSearching=!1}function h(){var t=f.getSearchResultsView();t&&(n.view=t)}n.reset=function(){n.userQuery=t.query||"";n.userQuery=unescape(n.userQuery);n.currentPage=1;n.results=[];n.answer=null;n.isSearching=!1;n.devicesEnabled=e.SearchConfig.DeviceRefinementEnabled;h()};n.calculateAbsolutePosition=function(n,t){return(t-1)*s+n};n.generalSearch=function(){i.location.href=n.view.generalSearchLink.linkUrl.replace("{0}",encodeURIComponent(n.userQuery))};n.$watch("currentPage",function(){c()});n.$on("SearchResultsTimeout",function(){n.isSearching=!1});n.$on("CompassContentReady",function(){h()});n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.service("searchResultsService",["$http","$rootScope","languageService","virtualAgentService","flightService",function(n,t,i,r,u){function e(n){return n&&n.HelpContent?(helpContent=n.HelpContent.replace(new RegExp(String.fromCharCode(57356),"g"),"<strong>").replace(new RegExp(String.fromCharCode(57344),"g"),"<strong>").replace(new RegExp(String.fromCharCode(57357),"g"),"<\/strong>").replace(new RegExp(String.fromCharCode(57345),"g"),"<\/strong>"),f(JSON.parse(helpContent))):null}function f(n){var i=!1,r=0;for(var t in n)n.hasOwnProperty(t)&&(r++,angular.isObject(n[t])&&(n[t]=f(n[t])),i=t==="value");return i&&r===1?n.value:n}function o(n){var t=n.Title.replace(/\<\/?strong\>/g,"");return{simpleTitle:t,title:n.Title,description:n.Description,link:n.Link,displayLink:n.DisplayLink,pingbackUrl:n.PingbackUrl}}this.fetchResults=function(i){if(r.isEnabled()&&i.queryChannel!=="contactus"&&u.isUserInFlight("smc-search-toronto-1"))return r.fetchContent(i);var f={params:{query:encodeURIComponent(i.query),page:i.page}};return i.shouldRequestErrorCrashExperience!==undefined&&(f.params.shouldRequestErrorCrashExperience=i.shouldRequestErrorCrashExperience),n.get("/api/search/index",f).then(function(n){var r=n.data.Results.map(o),i={};return i.results=r,i.totalCount=n.data.TotalCount,i.instantAnswer=e(n.data),t.$broadcast("SearchResponse",{item:i,caller:"search"}),i})};this.getSearchResultsUrl=function(n){return"/"+i.langLocale()+"/search?query="+encodeURIComponent(n)}}])}(angular.module(virtualAgentApp)),function(n){function t(n){var t=this;t.$onInit=function(){(t.shouldDoVirtualAgentTheming=n.shouldDoVirtualAgentTheming(),t.shouldDoVirtualAgentTheming)&&n.getVirtualAgentTheme().then(function(n){t.themeClasses=n})}}n.component("vaTheme",{templateUrl:"/PartialViews/VirtualAgent.Library/Theming/Theme.html",controller:["virtualAgentThemeService",t]})}(angular.module(virtualAgentApp)),function(n){n.service("themeTransforms",["virtualAgentConstants",function(n){function t(n,t,i,f){if(!n[t]){n[t]=r(" "+i+": "+f);return}var e=u(n[t]);e[i]=r(f);n[t]=o(e)}function f(n,t,i,r){if(!e(n[t],i)){if(n[t]){n[t]+=" "+i+": "+r;return}n[t]=i+": "+r}}function u(n){for(var r,t,u={},f=n.split(";"),i=0;i<f.length;i++)(r=f[i].trim(),t=r.split(":"),t.length===2)&&(u[t[0].trim()]=t[1].trim());return u}function e(n,t){var i,r;if(!n)return!1;i=u(n);for(r in i)if(i.hasOwnProperty(r)&&r.toLowerCase()===t.toLowerCase())return!0;return!1}function o(n){var t="";for(var i in n)t+=i+": "+n[i]+"; ";return t}function s(n,t){var r=u(n[t]||""),i=r["background-color"];t&&(f(n,t+"::after","border-top-color",i+";"),f(n,t+"::after","border-bottom-color",i+";"))}function r(n){var t=n.trim();return t.endsWith(";")||(t+=";"),t}function i(n,i,u){i.foreground&&t(n,u,"color",r(i.foreground));i.background&&(t(n,u,"background-color",r(i.background)),s(n,u))}this.generateHidingStyles=function(i,r){var u=angular.extend({},i);return r?(r.theme&&(r.theme.titleBar&&r.theme.titleBar.type&&r.theme.titleBar.type===n.displayTypes.none&&t(u,".vatheme-header","display","none"),r.theme.lineSeperator&&r.theme.lineSeperator.type&&r.theme.lineSeperator.type===n.displayTypes.none&&t(u,".section .vatheme-section-header","border-bottom-color","rgba(0, 0, 0, 0)"),r.theme.feedbackButton&&r.theme.feedbackButton.type&&r.theme.feedbackButton.type===n.displayTypes.none&&t(u,".vatheme-header .survey-btn","display","none")),r.content&&(r.content.bigImage&&r.content.bigImage.display&&r.content.bigImage.display.type&&r.content.bigImage.display.type===n.displayTypes.none&&t(u,".vatheme-intro-image","display","none"),r.content.smallImage&&r.content.smallImage.display&&r.content.smallImage.display.type&&r.content.smallImage.display.type===n.displayTypes.none&&t(u,".frame-header .header-image","display","none")),u):u};this.applyDefaultColoring=function(n,i){var r=angular.extend({},n),f,e,u;return!i||!i.theme||!i.theme.default?r:(i.theme.default.background&&(f=i.theme.default.background,t(r,".vatheme-primary-bgcolor","background-color",f+" !important"),t(r,".vatheme-modal-dialog .modal-content","background-color",f)),i.theme.default.foreground&&(e=i.theme.default.foreground,t(r,".section .vatheme-section-title","color",e),t(r,".vatheme-modal-dialog","color",e)),i.theme.default.accent&&(u=i.theme.default.accent,t(r,".vatheme-header","background-color",u),t(r,".vatheme-input-border:focus","border-color",u),t(r,".vatheme-message-button","background-color",u),t(r,".vatheme-message-button","border-color",u),t(r,".modal .modal-dialog","border-color",u),t(r,".btn.btn-primary","border-color",u),t(r,".btn.btn-primary","background-color",u),t(r,".btn.btn-primary:hover","border-color",u),t(r,".btn.btn-primary:focus","border-color",u),t(r,"input[type='text']:focus","border-color",u),t(r,"textarea:focus","border-color",u),t(r,".radio label input:checked ~ span::before","border-color",u),t(r,".star-rating.filled","color",u)),r)};this.expandProgressSymbolColor=function(n,i){var r=angular.extend({},n),u;return!i||!i.theme||!i.theme.default||!i.theme.default.accent?r:(u=i.theme.default.accent,t(r,".vatheme-progress-symbol-dot","color",u),t(r,".vatheme-progress-symbol-dot","background-color",u),t(r,".vatheme-progress-symbol-dot-outline","color",u),t(r,".vatheme-progress-symbol-dot-outline","outline-color",u),t(r,".vatheme-progress-symbol-dot-outline::after","background-color",u),t(r,".progress.indeterminate .indeterminate-ring::after","background-color",u),t(r,".progress.indeterminate .indeterminate-indicator::after","background-color",u),t(r,".progress-bar.indeterminate-bar .dot","background-color",u),r)};this.expandMessageBubbleStyling=function(n,t){var r=angular.extend({},n);return!t||!t.theme?r:(t.theme.virtualAgentMessageBubble&&i(r,t.theme.virtualAgentMessageBubble,".message .message-text.vatheme-virtual-agent-message-text"),t.theme.userMessageBubble&&i(r,t.theme.userMessageBubble,".message .message-text.vatheme-user-message-text"),t.theme.agentMessageBubble&&i(r,t.theme.agentMessageBubble,".message .message-text.vatheme-agent-message-text"),t.theme.systemInfoMessageBubble&&i(r,t.theme.systemInfoMessageBubble,".message .message-text.vatheme-system-info-text"),t.theme.systemErrorMessageBubble&&i(r,t.theme.systemErrorMessageBubble,".message .message-text.vatheme-system-error-text"),r)}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentThemeService",["flightService","queryStringService","themeTransforms","virtualAgentConfigurationService",function(n,t,i,r){function u(){return!!t.getQueryStringValue(f)}var f="theme";this.shouldDoVirtualAgentTheming=function(){return n.isUserInFlight("vatheme-1")&&!u()};this.getVirtualAgentTheme=function(){return r.sdkClientConfig.then(function(n){var t=i.generateHidingStyles({},n);return t=i.applyDefaultColoring(t,n),t=i.expandMessageBubbleStyling(t,n),i.expandProgressSymbolColor(t,n)})}}])}(angular.module(virtualAgentApp)),function(n){n.directive("ajaxLoad",["$http",function(n){var t=5e3;return{restrict:"A",link:function(i,r,u){u.src&&n.get(u.src,{responseType:"arraybuffer",httpAppOptions:{qosOperation:"//app/image/ajax-load"}}).then(function(n){for(var u=new Uint8Array(n.data),f="",i=0;i<u.length;i+=t)f+=String.fromCharCode.apply(null,u.subarray(i,i+t));r[0].src="data:image/png;base64,"+btoa(f)})}}}])}(angular.module(virtualAgentApp)),function(n){n.service("dwellTimeMonitoringService",["$location","$rootScope","$window","$interval",function(n,t,i,r){function k(n,t){this.startTime=n;this.endTime=t}function d(){var t,n;if(u===undefined||u.length===0)return 0;for(t=0,n=0;n<u.length;n++)u[n].endTime instanceof Date&&u[n].startTime instanceof Date&&(t+=u[n].endTime-u[n].startTime);return Math.round(t/1e3)}function v(){var n=new k(new Date);u.push(n)}function y(){h&&c();l=0;h=!1}function g(){h===!1&&l>a?(h=!0,nt()):l+=b}function s(){if(u!==undefined&&u.length!==0){var n=u[u.length-1];n.endTime=new Date}}function p(){s();e("window-lost-focus")}function nt(){s();e("window-in-idle-state")}function w(){s();e("window-closed")}function c(){v();e("window-focused")}function tt(){if(i.addEventListener("blur",p,!1),i.addEventListener("focus",c,!1),o&&f)for(var n=0;n<f.length;n++)i.document.addEventListener(f[n],y,!1);i.addEventListener("beforeunload",w,!1);onRouteChangeOff=t.$on("$locationChangeStart",it)}function it(){if(i.removeEventListener("blur",p,!1),i.removeEventListener("focus",c,!1),i.removeEventListener("beforeunload",w,!1),o&&f)for(var n=0;n<f.length;n++)i.document.removeEventListener(f[n],y,!1);s();e("locationChangeStart");onRouteChangeOff&&onRouteChangeOff()}function e(n){if(n){var i={dwellTime:d(),event:n};t.$broadcast("VirtualAgentWindowInteraction",i)}}var b=250,u=[],h=!1,l=0,a=3e4,o=!1,f=["mousemove","keyup","touchstart","scroll"];this.initialize=function(n,t){a=t||a;o=n||o;v();o&&r(g,b);tt()}}])}(angular.module(virtualAgentApp)),function(n){n.constant("mbfDirectLineConstants",{domain:"https://directline.botframework.com/v3/directline/",timeout:5e3,interval:1e3,connectionRetries:3,pollRetries:60}).config(["$sceDelegateProvider","mbfDirectLineConstants",function(n,t){n.resourceUrlWhitelist(["self",t.domain+"/**"])}]).factory("mbfDirectLineClient",["$http","$q","$interval","$timeout","$rootScope","mbfDirectLineConstants","virtualAgentSessionService",function(n,t,i,r,u,f,e){function s(){function ut(){var n=r&&r.expires_in||0;return(new Date).getTime()+500*n-f.timeout<(new Date).getTime()}function v(n){return r.conversationId?n===!0?t.reject(s||r.token||c):ut()?t.reject(r.token||c||s):t.resolve(r):et(ft,[s||r.token||c],f.connectionRetries,f.timeout)}function k(n){return angular.isString(n)?p(n,"POST","/tokens/refresh").catch(function(){return t.reject(s||n)}):t.reject(n)}function y(n){return angular.isString(n)?p(n,"GET",["/conversations",r.conversationId,"?watermark="+w].join("/")):t.reject(n)}function ft(n){return p(n,"POST","/conversations")}function p(i,u,o){return h=i&&t.resolve(i)||h,h=h||n.post("/api/botframework/token",{}).then(function(n){return n.data.token}).then(function(t){return n({method:u,url:f.domain+o,headers:{Accept:"application/json",Authorization:"Bearer "+t},timeout:f.timeout}).then(function(n){if(n.data)return r=n.data,e.botConnection(r),n.data})})}function d(n){if(n.data){var t=typeof n.data=="object"?n.data:JSON.parse(n.data);t.activities&&(w=t.watermark,rt&&angular.forEach(t.activities,function(n){n.from&&tt.indexOf(n.from.id)===-1&&(it.push({data:JSON.parse(n.text)}),b&&b())}))}}function g(){angular.isDefined(l)&&(i.cancel(l),l=undefined)}function et(n,i,r,u){return t(function(t,f){var e,o=function(){r==0?f(e):n.apply(null,i).then(t).catch(function(n){r--;e=n;ot(n)?f(e):setTimeout(function(){o()},u)})};o()})}function ot(n){return n?n.status&&n.status>=400&&n.status<600?(o.close(),!0):void 0:!1}function st(n){return g(),l=i(n,f.interval)}var s,c,nt,r=e.botConnection()||{},l,w,ht,tt=["AnonymousUser","default-user"],it=[],u,a,rt=!1,h,b;this.sendActivityToBot=function(t,i){return rt=!0,v().catch(k).catch(y).then(function(t){var r={type:"message",channelId:"directline",text:JSON.stringify(i),channelData:"",from:{id:tt[0]},timestamp:(new Date).toISOString()};return n.post([f.domain,"conversations",t.conversationId,"activities"].join("/"),JSON.stringify(r),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token},timeout:f.timeout}).then(function(n){return ht=n.data.id,n.data.id})})};this.webSocketActivity=function(n){v(n).catch(y).then(function(){if(!r.streamUrl)return o.pollingGetActivity();u=new WebSocket(r.streamUrl);u.onclose=function(){a&&i.cancel(a);o.webSocketActivity(!0)};u.onopen=function(){a=i(function(){u.send(null)},f.timeout)};u.onmessage=d})};this.pollingGetActivity=function(){return v().catch(k).catch(y).then(function(){st(function(){return n.get([f.domain,"conversations",r.conversationId,"activities"].join("/")+"?watermark="+w,{headers:{Accept:"application/json",Authorization:"Bearer "+r.token},timeout:f.timeout}).then(d,o.pollingGetActivity)})})};this.getResponse=function(){return t.resolve(it.shift())};this.setUserId=function(n){n&&(n=n)};this.close=function(){g();u&&(u.onopen=function(){},u.onclose=function(){},i.cancel(a),u.close())};h=null;this.setListenerCallback=function(n){angular.isFunction(n)&&(b=n,nt!==!0&&"WebSocket"in window?o.webSocketActivity():o.pollingGetActivity())};this.setDirectLineOptions=function(n){angular.isObject(n)&&!angular.equals({},n)&&(s=n.secret,c=n.token,nt=n.enablePolling)}}var o;return{DirectLineClient:function(n){return angular.isDefined(o)||(o=new s),o.setDirectLineOptions(n),o}}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentActionsService",["$q","$rootScope","virtualAgentAuthService","virtualAgentConstants",function(n,t,i,r){function f(n){var t={};return t.actionName=n.followUp.name,t.query=n.followUp.response,t.custom=n.followUp.context||{},t.customResponse=n.followUp.customResponse,t.callBack=n.followUp.callBack,t.telemetryEvent=n.followUp.telemetryEvent,t}function o(n,r){return r=r||{},r.state={activeAction:n},i.signInAndContinue(r).then(function(){return t.$broadcast("VirtualAgentAuthStatus",{initiator:n.type}),f(n)})}function s(n,t){var f=i.getAuthState();return f&&f.MSA?null:t&&{question:n.metaData.reason||t.question,options:[{type:r.slotTypes.login,displayText:t.options.login.slotText,followUp:{response:u.success,name:n.action.name}},{type:r.slotTypes.login,displayText:t.options.dismiss.slotText,followUp:{response:u.fail}}]}}var e={login:{name:"Login",dialogGenerator:s}},u={success:"Yes",fail:"No"};this.getDialogForAction=function(n,t){if(!n.action||!n.action.prereq)return n.dialog;var i=e[n.action.prereq];return i.dialogGenerator(n,t.actions.dialogs[n.action.prereq])};this.completeAction=function(t,i){return(t.type===e.login.name||t.type===r.actionDetails.initialSignIn)&&t.followUp.response===u.success?o(t,i):t.followUp?n.resolve(f(t)):n.reject()};this.initialSignInGenerator=function(n){return{question:n.question,options:[{type:r.slotTypes.initialSignIn,displayText:n.options.login.slotText,followUp:{response:u.success,customResponse:n.options.login.responseMessage}},{type:r.slotTypes.initialSignIn,displayText:n.options.dismiss.slotText,followUp:{response:u.fail,customResponse:n.options.dismiss.responseMessage}},{displayText:n.options.needhelp.slotText,value:n.options.needhelp.slotText}]}};this.inlineSurveyGenerator=function(n,i){return{question:n&&n.messageText,options:[{type:r.slotTypes.inlineSurvey,displayText:n&&n.options&&n.options.yes&&n.options.yes.slotText,followUp:{customResponse:n&&n.options&&n.options.yes&&n.options.yes.responseMessage,telemetryEvent:function(){t.$broadcast("VirtualAgentSurvey",{choice:1,version:9,flighted:!0})}}},{type:r.slotTypes.inlineSurvey,displayText:n&&n.options&&n.options.no&&n.options.no.slotText,followUp:{callBack:i,telemetryEvent:function(){t.$broadcast("VirtualAgentSurvey",{choice:3,version:9,flighted:!0})}}}]}}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentAuthService",["$q","authService","authenticationHelperService","flightService","virtualAgentSessionService",function(n,t,i,r,u){function e(){return{MSA:t.isAuthenticatedMSA()?!0:!1,AAD:t.isAuthenticatedAAD()}}var f=!1;this.reset=function(){f=r.isUserInFlight("aad-1")};this.signInAndContinue=function(r){return t.isAuthenticatedMSA()||u.shouldRehydrate(!0),f?t.resolveAuthState().then(function(i){var f=t.getSupportedIDP();if(i!==f.MSA)return r&&r.isRestart||(u.state(r&&r.state),t.loginUsingAccountType(f.MSA)),n.reject()}):i.getSignInState().catch(function(){return r&&r.isRestart||(u.state(r&&r.state),i.signIn()),n.reject()})};this.resolveAuthState=function(){var n;return n=f?t.resolveAuthState():i.getSignInState(),n.finally().then(e)};this.getAuthState=function(){return!t.isAuthStatusUnknown()&&e()};this.reset()}])}(angular.module(virtualAgentApp)),function(n){n.component("virtualAgentBanner",{templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentBanner.html",bindings:{name:"@",view:"<",onSeen:"&",onAction:"&",onDismiss:"&"},controller:[function(){this.$onInit=function(){this.bannerDismissed=!1;this.onSeen({name:this.name})};this.doAction=function(){this.bannerDismissed=!0;this.onAction()};this.doDismiss=function(){this.bannerDismissed=!0;this.onDismiss()}}]})}(angular.module(virtualAgentApp)),function(n){n.factory("virtualAgentConfigurationService",["$location","$cookies","$window","$http","$q","$rootScope","nativeAppService","virtualAgentConstants","queryStringService","virtualAgentSDKService","$routeParams","clientConfig","flightService",function(n,t,i,r,u,f,e,o,s,h,c,l,a){function y(){return p||h.getClientConfig().then(function(n){return p=u.resolve(n),n}).catch(function(n){return f.$broadcast(o.qos.qosBroadcastKey,{operation:k,status:500,custom:JSON.stringify(n)}),undefined})}function v(n,t){return typeof n!="undefined"&&(n==="true"||n===!0)||t}function w(n){if(n){if(n=="success"||n=="failure")return{any:n};var t={};return n.split(";").forEach(function(n){var i=n.split("=");t[i[0]]=i[1]}),t}return{}}function b(n){var t=angular.extend({},e.fetchDeviceInfo());return t.hostType=e.isNative()?o.hosts.windows:o.hosts.web,n&&n.split(";").forEach(function(n){var i=n.split("=");t[i[0]]=i[1]}),t}var p,k="//app/vasdk-client-config-failure";return{get defaultRequestOptions(){return{withDialog:!1,isPreview:v(s.getQueryStringValue("sky.preview"),!1),backEndFlightId:s.getQueryStringValue("sky.engineFlight")||"",mockActions:w(s.getQueryStringValue("sky.mockActions")),queryChannel:s.getQueryStringValue("sky.queryChannel")||this.partnerId||"dialog",userAgent:i.navigator.userAgent,flights:a.getUserFlights(),augments:{TalkToHumanEnabled:!0},dialogScriptId:s.getQueryStringValue("sky.dialogScriptId")||"",custom:b(s.getQueryStringValue("sky.context"))}},get shouldRehydrate(){return v(s.getQueryStringValue("shouldRehydrate"),!1)},get sdkClientConfig(){return y()},getInitialUserInput:function(n){return c.userInput||n&&n.content&&n.content.userInput},get flowId(){var n=s.getQueryStringValue(o.configuration.flowId);return n?u.resolve(n):y().then(function(n){return n&&n.flowId||""})},get partnerId(){return s.getQueryStringValue(o.configuration.partnerId)||t.get(o.cookies.smcPartner)},get cantileverConfig(){var t=n.search();return{visitId:t.cantileverVisitId||"",engagementId:t.cantileverEngagementId||"",accessToken:t.cantileverAccessToken||""}},get botConnection(){var t=n.search();return{secret:t.bot_s,token:t.bot_t,enabled:a.isUserInAnyFlight(["vac-marco-1","vafx-marco-1","vac-bot-1","vafx-bot-1"]),enablePolling:v(t.bot_poll,!1)}}}}])}(angular.module(virtualAgentApp)),function(n){n.constant("virtualAgentConstants",{messaging:{slideOutTime:400,thinkingTime:1200,contentThinkingTime:2e3,maxLength:1024,room:"Virtual-Agent",maxWaitTimes:{normal:3e4,action:6e4}},content:{instantAnswerMaxHeight:280,listSlotsCutoff:7,talkToPersonClass:"virtual-agent-talk-to-agent-message"},flows:{virtualAgentEntry:"smc-virtual-agent",contactUsEntry:"smc-contactus",contactUsToVirtualAgent:"smc-contactus-to-va",virtualAgentToContactus:"smc-va-to-contactus"},configuration:{flowId:"flowId",partnerId:"partnerId",appId:"appid"},messageClassifications:{failure:{key:"Fail",values:["Fail"]},success:{key:"Success",values:["FinalAnswer.Chitchat"]},noResults:{key:"NoResults",values:["Chitchat.RestrictedWords","NoResult","NotUnderstanding"]},agentRequested:{key:"AgentRequested",values:["TalkToAPerson"]},followWithSurvey:{key:"AnswerContent",values:[]},action:{key:"Action",values:["Action"]},answer:{key:"Answer",values:[]}},cookies:{smcPartner:"smcpartner"},flights:{entryPoint:["vafx-entry-point-1","vafx-entry-point-2"]},session:{storageKey:"virtual-agent-session",contactUsEntryClicked:"contact-us-entry-clicked",virtualAgentEntryClicked:"va-entry-clicked",virtualAgentIsFirstLaunch:"va-is-first-launch",virtualAgentTranscript:"va-transcript-posted"},assistedSupportStatus:{immediate:0,normal:1,none:2},hosts:{windows:"windows",web:"web"},systemMessageTypes:{talkToPerson:"TalkToPerson",introduction:"Introduction",restart:"RestartConversation",assistedSupportOptions:"AssistedSupportOptions",feedbackRequested:"FeedbackRequested",feedbackComplete:"FeedbackComplete",assistedSupportChatAgentJoined:"AssistedSupportChatAgentJoin",assistedSupportChatAgentLeft:"AssistedSupportChatAgentLeft",assistedSupportCallbackScheduled:"AssistedSupportCallbackScheduled",error:"Error",initialSignIn:"InitialSignIn",inlineSurvey:"InlineSurvey"},entrypoints:{chromeButton:"smc-entry-chrome"},sdkEvents:{message:"VAMessage",initialized:"VAInitialized",inputBoxUpdated:"VAInputBoxUpdated",startOver:"VAStartOver",endChat:"VAEndChat",showFeedback:"VAShowFeedback",controlUpdated:"VAControlUpdated",flowExtensionActivated:"VAFlowExtensionActivated"},sdkControlTypes:{startover:"startover",endchat:"endchat"},sdkFlowExtensionTypes:{disabled:"disabled"},actors:{virtualAgent:"VirtualAgent",user:"User"},actionDetails:{initialSignIn:"initial-sign-in"},signInInitiators:{launch:"launch",talkToAPerson:"talk-to-a-person"},slotTypes:{login:"Login",initialSignIn:"initial-sign-in",inlineSurvey:"inline-survey"},modalities:{productIssueLinkBase:"contactus/"},displayTypes:{none:"none"},qos:{qosBroadcastKey:"Qos"}})}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentContentService",["$http","$q","$rootScope","compassService","virtualAgentFlowDefinitionService","virtualAgentConstants","virtualAgentConfigurationService",function(n,t,i,r,u,f,e){function h(n){return u.getFlowDefinition().then(function(t){if(n.introduction.message=t.introductionOverride||t.content&&t.content.welcomeMessage||n.introduction.message,n.introduction.image=t.imageOverride||t.content&&t.content.bigImage&&t.content.bigImage.source&&{url:t.content.bigImage.source}||n.introduction.image,n.introduction.headerIcon=t.headerIconOverride||t.content&&t.content.smallImage&&t.content.smallImage.source||n.introduction.headerIcon,n.introduction.placeholder=t.placeholderOverride||t.content&&t.content.placeholderInputText&&t.content.placeholderInputText.content||n.introduction.placeholder,n.results.followUpAction=t.nextAction&&t.nextAction.linkText||t.content&&t.content.flowExtensionOption&&t.content.flowExtensionOption.actionText||n.results.followUpAction,n.results.followUpActionUrl=t.nextAction&&t.nextAction.linkUrl||t.content&&t.content.flowExtensionOption&&t.content.flowExtensionOption.url||n.results.followUpActionUrl,t.followUpMessageOverrides){overridingFollowUpMessages=o(t.followUpMessageOverrides);for(messageType in overridingFollowUpMessages)n.followUpMessages[messageType]=overridingFollowUpMessages[messageType];return n}return t.content&&t.content.responses&&(Object.keys(t.content.responses).forEach(function(i){var r=i.substr(0,1).toUpperCase()+i.substr(1);n.followUpMessages[r]=n.followUpMessages[r]||{};n.followUpMessages[r].messageText=t.content.responses[i]}),n.followUpMessages[f.messageClassifications.followWithSurvey.key]=n.followUpMessages[f.messageClassifications.followWithSurvey.key]||{},n.followUpMessages[f.messageClassifications.followWithSurvey.key].messageText=n.followUpMessages[f.messageClassifications.answer.key].messageText||n.followUpMessages[f.messageClassifications.followWithSurvey.key].messageText),n}).catch(function(){return n})}function c(n){return e.sdkClientConfig.then(function(t){return t?(n.introduction.header=t.content&&t.content.name||n.introduction.header,n.introduction.title=t.content&&t.content.greeting||n.introduction.title,n.introduction.unauthTitle=t.content&&t.content.greeting||n.introduction.unauthTitle,n.introduction.headerIcon=t.content&&t.content.smallImage&&t.content.smallImage.source&&{url:t.content.smallImage.source}||n.introduction.headerIcon,n.introduction.messageSlotPlaceholder=t.content&&t.content.placeHolderInputText&&t.content.placeHolderInputText.conversation||n.introduction.messageSlotPlaceholder,n.introduction.exampleQuestion=t.content&&t.content.placeHolderInputText&&t.content.placeHolderInputText.initial||n.introduction.exampleQuestion,n.introduction.placeholder=t.content&&t.content.placeHolderInputText&&t.content.placeHolderInputText.content||n.introduction.placeholder,n):n})}function o(n){if(!n)return{};var t={};return n.forEach(function(n){t[n.messageType]={messageText:n.messageText};n.options&&Object.keys(n.options).length>0&&(t[n.messageType].options=n.options)}),t}var l=this,s=null;this.getContent=function(){return s=s||r.getVirtualAgent().then(function(n){return n.followUpMessages=o(n&&n.results&&n.results.followUpMessages),n.instantAnswer=n&&n.results&&n.results.instantAnswer,n}).then(h).then(c)}}])}(angular.module(virtualAgentApp)),function(n){n.controller("VirtualAgentController",["$scope","$timeout","$rootScope","$routeParams","$location","$cookies","$q","virtualAgentDialogService","virtualAgentConfigurationService","messageService","messageTypes","chatService","chatStateService","clientConfig","flightService","chatContextService","virtualAgentResetModalService","virtualAgentFeedbackService","authenticationHelperService","modalityTags","authService","virtualAgentConstants","virtualAgentSurveyModalService","sessionStorageService","virtualAgentSessionService","virtualAgentContentService","virtualAgentAuthService","virtualAgentMessagePackingService","chatClassificationService","mbfDirectLineClient","virtualAgentService","virtualAgentSDKService","virtualAgentFlowDefinitionService","dwellTimeMonitoringService","virtualAgentTranscriptService","resourceLoaderService","nativeAppService","virtualAgentTemplateCacheService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt){function ai(n,t){if(n&&n.content&&n.content.flowExtensionOption&&n.content.flowExtensionOption.product&&n.content.flowExtensionOption.issue)return e.resolve(!0);if(t.assistedSupportStatus!==nt.assistedSupportStatus.immediate)return e.resolve(!1);var i=et.packageUserMessages(h.getAllMessages(nt.messaging.room));return ot.getRoute(i,t.routingClientId,u.search().referrer,t.routingProduct).then(function(n){return!!(n&&(n.product||n.issue))})}function vi(){var t=rt.state();t&&t.activeAction&&n.slotAction(t.activeAction,{isRestart:!0})}function ni(t,r){var e={query:t,actionName:r,augments:ii},u=!1,f=function(){angular.isDefined(t)&&(i.$broadcast("VirtualAgentDialogUserResponse",{searchText:t}),u=!0)};return rt.id()&&f(),n.virtualAgentRequest=o.fetchDialogContentAsMessage(e,n.view).then(function(n){ei(n)},function(){si()})["finally"](function(){u||f()}),n.virtualAgentRequest}function kt(t){typeof t!="undefined"&&(n.placeholder=t.placeholder||n.placeholder,n.userInputboxLabel=t.userInputboxLabel||n.userInputboxLabel,n.isInputDisabled=typeof t.disabled!="undefined"?t.disabled:n.isInputDisabled,ct.raiseSdkEvent({type:nt.sdkEvents.inputBoxUpdated,data:{placeholder:n.placeholder,enabled:!n.isInputDisabled}}))}function fi(n){kt({disabled:!0});n["finally"](function(){kt({disabled:!1})})}function ei(t){t&&(t.length||t.status)&&(kt({placeholder:n.view.introduction.placeholder,userInputboxLabel:n.view.introduction.placeholder}),t.forEach(function(t){t.messageType===c.InstantAnswer&&(t.feedbackAction=n.reportIAFeedback);t.slots&&(t.slotAction=n.slotAction,kt({placeholder:n.view.introduction.messageSlotPlaceholder,userInputboxLabel:n.view.introduction.messageSlotPlaceholder}));bt(t,t.messageType)}),t.action&&!t.action.prereq?(n.waitTime=nt.messaging.maxWaitTimes.action,fi(ni(null,t.action.name).then(function(){n.waitTime=nt.messaging.maxWaitTimes.normal}))):t.action&&t.action.prereq&&kt({disabled:!0}),yi(t))}function yi(i){if(i.followUps){var u=i.followUps[i.status]||n.view.followUpMessages[i.status]&&n.view.followUpMessages[i.status].messageText,r=i.status,f={};r===nt.messageClassifications.followWithSurvey.key&&(f.customClass=nt.content.talkToPersonClass);bi.indexOf(r)>-1?ui(u,f):u&&bt({text:u},c.VirtualAgent,r);r!==nt.messageClassifications.agentRequested.key||gt||t(ti,nt.messaging.thinkingTime)}}function ui(t,i,r){var u=n.view.results.followUpActionUrl||!gt&&ti,e=!!u&&u!==ti,f=nt.systemMessageTypes.talkToPerson;u?r?bt(angular.extend(i,{text:t,actionText:n.view.results.followUpAction,action:u,actionIsUrl:e}),c.VirtualAgent,f):oi().then(function(r){if(r){var h=n.view.followUpMessages[nt.messageClassifications.followWithSurvey.key],l=function(){bt(angular.extend(i,{fragments:[{text:h.options.no.responseMessage},{text:n.view.results.followUpAction,action:u,actionIsUrl:e,id:"virtual-agent-talk-to-agent-inline-survey"}]}),c.VirtualAgent,f);n.isInputDisabled=!1},s=o.getInlineSurveyDialog(h,l);s.slotAction=n.slotAction;bt(s,s.messageType,nt.systemMessageTypes.inlineSurvey);n.isInputDisabled=!0}else bt(angular.extend(i,{fragments:[{text:t},{text:n.view.results.followUpAction,action:u,actionIsUrl:e,id:"virtual-agent-talk-to-agent"}]}),c.VirtualAgent,f)}):bt({text:t},c.VirtualAgent,f)}function oi(){var n=[nt.flows.contactUsEntry,nt.flows.contactUsToVirtualAgent,nt.flows.virtualAgentToContactus];return y.isUserInAnyFlight(["vac-inline-1","vafx-inline-1"])&&s.partnerId.toLowerCase()==="smc"?s.flowId.then(function(t){return n.indexOf(t)>-1}):e.resolve(!1)}function ti(){n.pingbackUrl=b.getContactUsUrl();bt({view:{modalities:n.view.modalities,chat:{queue:n.view.chat.queue,agent:n.view.chat.agent}},modalityAction:n.selectModality,context:et.packageUserMessages(h.getAllMessages(nt.messaging.room)),phoneNumber:r.phoneNumber&&r.phoneNumber.trim()||""},c.ModalitySelection,nt.systemMessageTypes.assistedSupportOptions);kt({disabled:!0});t(function(){n.messages.forEach(function(n){n.actionDisabled=!0})})}function bt(t,r,u){var f=o.addMessage(t,r);return n.messages=h.getMessages(nt.messaging.room),u&&i.$broadcast("VirtualAgentMessage",{text:t.text,type:u,actor:nt.actors.virtualAgent}),f}function pi(){return n.view&&n.view.resetModal&&n.view.resetModal.resetButtonLabel}function si(){if(n.view.results.followUpActionUrl){ui(n.view&&n.view.introduction&&n.view.introduction.errorResponse);return}bt({text:n.view&&n.view.introduction&&n.view.introduction.errorResponse},c.VirtualAgent,nt.systemMessageTypes.error);gt||ti()}function hi(){var t=a.getAppStartContext();t&&t.SearchKey&&(n.userInput=t.SearchKey)}function ci(){var t=n.view&&n.view.introduction&&n.view.introduction.resetMessage;rt.clearSession(!0);bt({text:t,loadingType:""},c.VirtualAgent,nt.systemMessageTypes.restart);i.$broadcast("ChatFrameHeader",{showReset:!1});kt({placeholder:n.view.introduction.exampleQuestion,userInputboxLabel:n.view.introduction.userInputBoxDescription,disabled:!1});l.endChat();ct.raiseSdkEvent({type:nt.sdkEvents.initialized})}var wi=g.getSupportedIDP(),li=y.isUserInFlight("aad-1"),ii,bi=[nt.messageClassifications.noResults.key,nt.messageClassifications.followWithSurvey.key,nt.messageClassifications.failure.key],ki=["message:nth-last-child(1) .card.virtual-agent-modalities","message:nth-last-child(2) .content-spinner","message:nth-last-child(2) .card","message:nth-last-child(2) ."+nt.content.talkToPersonClass,"message:nth-last-child(1) .content-spinner","message:nth-last-child(1) .card"],di={maxLength:nt.messaging.maxLength},gi="va-banner-seen-",gt=!1,dt,ri;pt.isNative()&&yt.loadCSS("/app/virtualagentclient/content/getHelpNativeApp.css");n.reset=function(){var t=s.botConnection;t.enabled&&ht.setMbfDirectLineListenerCallback(t,ni);wt.init();at.initialize();n.config=di;r.partnerId&&f.put("smcpartner",r.partnerId);n.waitTime=nt.messaging.maxWaitTimes.normal;kt({disabled:!1});n.agentStatus=l.getAgentStatus();n.channelStatus=l.getChannelStatus();n.typingStatus=l.getTypingStatus();n.messageTypes=c;n.isInAppSdk=!!r.inAppSdk;n.scrollSelectors=ki.join(";");n.userName="";l.setCurrentMessageRoom(nt.messaging.room);n.messages=h.getMessages(nt.messaging.room);ii={};o.bindModalityCallbacks(n.messages,n.selectModality);hi();ut.getContent().then(function(t){return n.view=t,oi().then(function(t){i.$broadcast("ChatFrameHeader",{text:n.view.introduction.header,image:n.view.introduction.headerIcon,resetLabel:pi(),endText:n.view.chat.endChat,showReset:n.messages.length>1,isVirtualAgent:!0,survey:{visible:!t,label:n.view.header.surveyLabel,icon:n.view.header.surveyIcon}});i.$broadcast("UpdateTitle",n.view.pageTitle)}),s.sdkClientConfig}).then(function(n){return dt=n,lt.getFlowDefinition()}).then(function(n){return ri=n,gt=ri.assistedSupportStatus===nt.assistedSupportStatus.none,ii.TalkToHumanEnabled=r["aug.TalkToHumanEnabled"]||!gt,ai(dt,ri)}).then(function(t){n.messages&&n.messages.length||(ri.assistedSupportStatus===nt.assistedSupportStatus.immediate?t?ui(n.view.introduction.immediateAssistanceMessage,{loadingType:"",customClass:nt.content.talkToPersonClass},!1):bt({text:n.view.introduction.moreDetailsMessage,loadingType:""},c.VirtualAgent,nt.systemMessageTypes.introduction):(bt({text:n.view.introduction.message,loadingType:""},c.VirtualAgent,nt.systemMessageTypes.introduction),sessionStorage.getItem(nt.session.virtualAgentIsFirstLaunch)||(i.$broadcast("VirtualAgentAuthStatus",{initiator:nt.signInInitiators.launch}),sessionStorage.setItem(nt.session.virtualAgentIsFirstLaunch,!0))));s.getInitialUserInput(dt)?n.submit(null,s.getInitialUserInput(dt)):kt({placeholder:n.view.introduction.exampleQuestion,userInputboxLabel:n.view.introduction.userInputBoxDescription});vi()})["finally"](function(){n.isReady=!0;ct.raiseSdkEvent({type:nt.sdkEvents.initialized})});li&&g.resolveAuthState();ct.registerInputHook(function(t){n.submit(null,t)});ct.registerResetHook(ci);ct.registerShowFeedbackHook(function(){i.$broadcast("ChatSurveyRequested")});ct.registerEndChatHook(function(){n.$broadcast("ChatSessionClosed",{})})};n.triggerDigestOnInputClick=function(){t(250)};n.selectModality=function(t,i){kt({disabled:!0});i===d.chat?n.initChat(t):i===d.callback||i===d.scheduleCallback?n.initCallback(t):i===d.email&&(n.onChatSurveyCompleted(),kt({disabled:!1}))};n.initChat=function(n){ft.signInAndContinue(n).then(function(){var n={isAuth:!0,authType:wi.MSA,attributes:[]};p.setValues(dt&&dt.context).catch(function(){}).then(function(){return vt.postTranscript().then(function(t){n.cantileverVisitId=t&&t.visitId||"";n.cantileverEngagementId=t&&t.engagementId||""})}).finally(function(){return l.enqueueChat(n)})});i.$broadcast("VirtualAgentAuthStatus",{initiator:nt.signInInitiators.talkToAPerson})};n.initCallback=function(n){ft.signInAndContinue(n);i.$broadcast("VirtualAgentAuthStatus",{initiator:nt.signInInitiators.talkToAPerson})};n.onChatSurveyCompleted=function(){bt({text:n.view.chat.followUp},c.VirtualAgent,nt.systemMessageTypes.feedbackComplete)};n.submit=function(t,r){if(t&&t.preventDefault(),r){var u=bt({text:r,errorView:n.view&&n.view.chat&&n.view.chat.error&&n.view.chat.error.failedMessage},c.User);n.userInput="";a.getChatEstablished()?l.sendMessage(u):(i.$broadcast("ChatFrameHeader",{showReset:!0}),ni(r))}};n.reportIAFeedback=function(t,i){n.pingbackUrl=b.getIAFeedback(t,i)};n.slotAction=function(t,r){var f={augments:ii},u=o.getSlotConfiguration(t.type);n.waitTime=nt.messaging.maxWaitTimes.action;n.virtualAgentRequest=o.completeAction(t,n.view,r,f,u).then(function(t){n.waitTime=nt.messaging.maxWaitTimes.normal;ei(t)});fi(n.virtualAgentRequest);u.displayUserInput&&bt({text:t.displayText,errorView:n.view&&n.view.chat&&n.view.chat.error&&n.view.chat.error.failedMessage},c.User);u.fetchContent&&ni(t.value);i.$broadcast("ChatFrameHeader",{showReset:!0})};n.displaySurvey=function(){tt.requestSurvey({header:n.view.chat.survey.surveyTitle,view:n.view.chat.survey,surveyData:{}}).then(function(){bt({text:n.view.followUpMessages.FeedbackProvided.messageText},c.VirtualAgent,nt.systemMessageTypes.feedbackRequested)})};n.seenBanner=function(n){it.set(gi+n,!0);i.$broadcast("VirtualAgentBannerSeen",{name:n})};n.$on("AgentDataReady",function(t,r){kt({disabled:!1});n.agentStatus.prevAgent&&bt({header:n.view.chat.agent.agentTransferHeader,view:n.view.chat.agent,oldAgent:n.agentStatus.prevAgent,newAgent:r},c.Transfer,nt.systemMessageTypes.assistedSupportChatAgentJoined);i.$broadcast("ChatFrameHeader",{text:r.DisplayName,image:{url:r.ImageUrl},showEnd:!0,showReset:!1})});i.$on("AppStartContext",function(){hi()});n.$on("ChatSessionClosed",function(){bt({header:n.view.chat.endingText,view:n.view.chat.agent,agent:n.agentStatus.agent,isJoining:!1},c.AgentEnd,nt.systemMessageTypes.assistedSupportChatAgentLeft);i.$broadcast("ChatFrameHeader",{text:n.view.introduction.header,image:n.view.introduction.headerIcon,showEnd:!1,showReset:!0});bt({header:n.view.chat.survey.surveyTitle,view:n.view.chat.survey,surveyData:{agent:n.agentStatus.agent.AgentId,chatId:a.getChatId()},surveyAction:n.onChatSurveyCompleted},c.Survey,nt.systemMessageTypes.feedbackRequested)});n.$on("EnqueueCallbackSuccess",function(){kt({disabled:!1});bt({text:n.view.modalities.callbackFollowUp},c.VirtualAgent,nt.systemMessageTypes.assistedSupportCallbackScheduled)});y.isUserInFlight("vafx-pi-classify-all-1")&&i.$on("VirtualAgentDialogUserResponse",function(){lt.getFlowDefinition().then(function(n){var t=n.routingProduct,i=n.routingClientId,r=u.search().referrer,f=h.getAllMessages(nt.messaging.room),e=et.packageUserMessages(f);ot.getRoute(e,i,r,t)})});n.$on("VirtualAgentReset",function(){w.confirmReset().then(ci)});n.$on("ChatSurveyRequested",n.displaySurvey);li?n.$on("UserSignedInMSA",function(){var t=g.getUserInfo();t&&t.firstName&&(n.userName=t.firstName||"")}):n.$on("UserSignedIn",function(){n.userName=v&&v.authInfo&&v.authInfo.firstName||""});n.$on("VirtualAgentDialogTimeout",function(){si()});n.$on("$destroy",function(){ct&&(ct.unregisterInputHook(),ct.unregisterResetHook(),ct.unregisterEndChatHook())});$(window).focus(function(){n.pingbackUrl=b.getPageFocusUrl()||n.pingbackUrl;n.$digest()});n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentDialogService",["$http","$q","$rootScope","$window","virtualAgentService","virtualAgentConstants","delayService","messageTypes","flightService","messageService","virtualAgentActionsService","virtualAgentSessionService","virtualAgentFlowDefinitionService","virtualAgentConfigurationService","messageScrubberService",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function k(n){return n=n||{},a.getFlowDefinition().then(function(t){var i={page:1,withDialog:!0,forceRefresh:!0,delay:300,areaId:t.areaId||"",sessionContext:l.context()};return n.query=y.scrub(n.query),angular.extend(i,n)}).then(function(n){return v.sdkClientConfig.then(function(t){return!t||!t.context?n:(n.custom=angular.merge(n.custom||{},t.context),n)})})}function d(n,t){var i=[],r,u,e,s;return(i.status={},n.FromDirectLine)?i:(r=b(n.chitChat),u=b(n.leadingMessage),i.status=g(n),e=c.getDialogForAction(n,t),n.dialog=e||n.dialog,i.action=n.action,i.action&&!e&&(i.action.prereq=null),u&&i.push({messageType:o.VirtualAgent,text:u}),n.instantAnswer&&!i.status?i.push({messageType:o.InstantAnswer,instantAnswer:n.instantAnswer,header:t.results.answerHeader,view:t.instantAnswer,maxHeight:f.content.instantAnswerMaxHeight,hasFeedback:!0,hasSurvey:!0}):r&&!i.status?i.push({messageType:o.VirtualAgent,text:r}):i.status||n.dialog.question||!n.results.length||i.push({messageType:o.Results,results:n.results,header:t.results.resultsHeader||t.results.answerHeader,view:{showLess:t.instantAnswer.showLess,showMore:t.instantAnswer.showMore}}),n.dialog.question&&(!i.status||i.status===f.messageClassifications.action.key)&&i.push(w(n.dialog,t)),s=n.metaData.modality=="none",i.status=i.status||i.some(function(n){return n.messageType!==o.VirtualAgent})&&i.length===1&&!s&&f.messageClassifications.followWithSurvey.key,i.followUps={},i.followUps[f.messageClassifications.success.key]=i.status===f.messageClassifications.success.key&&r,i)}function b(n){return n&&(n.problem.name||n.solutions[0].description)}function w(n,t){var i={messageType:o.VirtualAgent,text:n.question};return n.options&&n.options.length>0&&(i.slots=n.options.map(function(n){return n.externalLink=n.externalLink||n.value&&n.value.split("#")[1]||"",n.value=n.value||n.displayText,n}),i.listSlotsCutoff=f.content.listSlotsCutoff,i.room=f.messaging.room,i.slotView={dropDownPlaceholder:t.introduction&&t.introduction.messageSlotDropdownPlaceholder}),i}function g(n){var t="";return n.engineStatus&&angular.forEach(f.messageClassifications,function(i){t=i.values.indexOf(n.engineStatus)!==-1?i.key:t}),t}var nt=this,tt=[o.InstantAnswer,o.Results,o.ModalitySelection],p={"default":{displayUserInput:!0,fetchContent:!0,fireTelemetryEvent:!1}};p[f.slotTypes.login]={displayUserInput:!1,fetchContent:!1,fireTelemetryEvent:!1};p[f.slotTypes.initialSignIn]={displayUserInput:!1,fetchContent:!1,fireTelemetryEvent:!1};p[f.slotTypes.inlineSurvey]={displayUserInput:!0,fetchContent:!1,fireTelemetryEvent:!0};this.getSlotConfiguration=function(n){return p[n]||p["default"]};this.fetchDialogContentAsMessage=function(n,t){var i;return k(n).then(function(n){return i=n.delay,u.fetchContent(n)}).then(function(n){return l.context(n.context),d(n,t)}).then(function(n){return e.delay(n,i)})};this.completeAction=function(n,t,i,r,u){return c.completeAction(n,i).then(function(n){return(r.query=n.query,r.actionName=n.actionName,r.custom=r.custom||{},u.fireTelemetryEvent&&typeof n.telemetryEvent=="function"&&n.telemetryEvent(),typeof n.callBack=="function")?n.callBack():n.customResponse?[{messageType:o.VirtualAgent,text:n.customResponse}]:nt.fetchDialogContentAsMessage(r,t)})};this.getInitialSignInMessage=function(n){var t=n.actions.dialogs[f.actionDetails.initialSignIn],i=c.initialSignInGenerator(t);return w(i,n)};this.getInlineSurveyDialog=function(n,t){var r=c.inlineSurveyGenerator(n,t),i=w(r,n);return i.slotIdSuffix="inline-survey",i.loadingType="message",i};this.bindModalityCallbacks=function(n,t){n&&n.forEach(function(n){n.messageType==o.ModalitySelection&&(n.modalityAction=t)})};this.addMessage=function(n,t){return tt.indexOf(t)>-1&&(n.loadingType="spinner",n.loadingTime=f.messaging.contentThinkingTime),t===o.VirtualAgent&&(n.loadingType=typeof n.loadingType=="undefined"?"message":n.loadingType,n.loadingTime=f.messaging.thinkingTime),h.appendMessage(f.messaging.room,n,t)}}])}(angular.module(virtualAgentApp)),function(n){var t="va-entry-seen-";n.component("virtualAgentEntry",{templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentEntry.html",bindings:{name:"@",view:"<",flow:"@",messageDelay:"<?",messageDuration:"<?",onSeen:"&",onClicked:"&"},controller:["$timeout","$window","virtualAgentLinkService","sessionStorageService","virtualAgentConstants",function(n,i,r,u,f){function h(){n.cancel(o)}var o=null,e=this,s="";this.$onInit=function(){this.isThinking=!1;this.isMessageVisible=!1;this.isMessageTextVisible=!1;this.hasShownMessage=!1;this.isSlidOut=!1;s=this.flow||s};this.$onDestroy=h;this.toggleBubble=function(n){this.hasShownMessage&&(n?(this.isThinking=!1,this.isMessageTextVisible=!0,this.isMessageVisible=!0):this.isMessageVisible=!1)};this.messageBubbleStart=function(t,i){if((t===0||t)&&(i===0||i))return(o=n(function(){e.isThinking=!0;e.isMessageVisible=!0},t)).then(function(){return o=n(function(){e.isThinking=!1;e.isSlidOut=!0},f.messaging.thinkingTime)}).then(function(){return o=n(function(){e.isMessageTextVisible=!0;e.hasShownMessage=!0},f.messaging.slideOutTime)}).then(function(){return o=n(function(){e.toggleBubble(!1)},i)})};this.openVirtualAgent=function(){h();r.openPopup({flowId:this.flow,"sky.queryChannel":this.name});this.onClicked()};i.onload=function(){var n=t+s;e.hasShownMessage=!!u.get(n);e.hasShownMessage?e.isSlidOut=!0:(e.messageBubbleStart(e.messageDelay,e.messageDuration),u.set(n,!0));e.onSeen({name:e.name})}}]})}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentFeedbackService",["virtualAgentService","virtualAgentSessionService",function(n,t){function i(t){var r=n.feedbackUrl(),i;return r?(i=[],angular.forEach(t,function(n,t){i.push(t+"="+n)}),r+"?"+i.join("&")):""}var r="";this.getClickUrl=function(n){var u={s:t.id(),r:n.resultId,e:"click",d:n.link};return r=n.resultId,i(u)};this.getContactUsUrl=function(){var n={s:t.id(),e:"contactus"};return i(n)};this.getIAFeedback=function(n,r){var u={s:t.id(),r:r,e:"survey",d:n?"yes":"no"};return i(u)};this.getPageFocusUrl=function(){if(!r)return"";var n={s:t.id(),e:"clickreturn",r:r};return r="",i(n)}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentFlowDefinitionService",["$http","$q","$rootScope","virtualAgentConstants","queryStringService","virtualAgentConfigurationService",function(n,t,i,r,u,f){function h(n,t,i){var r=angular.copy(n);return r.routingClientId=t===e?"mseg_skylight":"skylight_"+i,r}function c(t,i){return n.get("/api/content/GetVirtualAgentFlowDefinition",{params:{id:t}}).then(i||function(n){return n.data}).catch(function(n){if(n.status&&n.status===404)return s;throw n;})}function l(n,t){if(t.content&&t.content.flowExtensionOption){if(t.content.flowExtensionOption.type&&t.content.flowExtensionOption.type.toLowerCase()===r.sdkFlowExtensionTypes.disabled.toLowerCase()){n.assistedSupportStatus=r.assistedSupportStatus.none;return}if(t.content.flowExtensionOption.showImmediately){n.assistedSupportStatus=r.assistedSupportStatus.immediate;return}}n.assistedSupportStatus=r.assistedSupportStatus.normal}function a(n,t){t.content&&t.content.flowExtensionOption&&t.content.flowExtensionOption.product&&(n.routingProduct=t.content.flowExtensionOption.product)}var e="default",s={routingClientId:"mseg_skylight"},o;this.getFlowDefinition=function(){if(o)return o;var n=u.getQueryStringValue(r.configuration.flowId);return n?(n!==e&&i.$broadcast("VirtualAgentFlowChange",n),o=c(n,function(t){return h(t.data,n,f.partnerId)})):o=f.sdkClientConfig.then(function(n){if(!n)return s;n.flowId&&n.flowId.toLowerCase()!==e.toLowerCase()&&i.$broadcast("VirtualAgentFlowChange",n.flowId);var r=t.resolve();return n.flowId&&(r=r.then(function(){return c(n.flowId)})),r.then(function(t){var r,i;return r=t&&t!==s?angular.merge({},t,n):angular.merge({},n),i=h(r,"NOT"+e,f.partnerId),l(i,n),a(i,n),i})})}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentLinkService",["supportLinkService","locationService","clientConfig",function(n,t,i){var r="/virtual-agent/?";this.openPopup=function(u){u=u||{};u.params=angular.extend({},u);u.params.referrer=u.params.referrer||t.getReferrerDomain();u.params.flowId=u.params.flowId||"";var f=Object.keys(u.params).map(function(n){return u.params[n]?n+"="+u.params[n]:""}).filter(function(n){return!!n}).join("&"),e=r+f;n.openContactWindow(e,{width:i.ContactUsConfig.VirtualAgentWidth})}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentMessagePackingService",["messageService","messageTypes","messageScrubberService",function(n,t,i){function u(i){var r={from:i.from,to:i.to,timestamp:i.timestamp,message:i.message,messageExtended:i.messageExtended};return angular.extend(r.messageExtended,{messageType:i.messageType}),i.messageType===t.InstantAnswer?r.messageExtended.instantAnswer=i.instantAnswer||null:i.messageType===t.Results?r.messageExtended.results=i.results||null:n.isMessageType(i,[t.User,t.VirtualAgent])&&i.fragments&&(r.messageExtended.fragments=i.fragments),r.messageExtended=JSON.stringify(r.messageExtended),r}function r(n){var r=[];return n.text?i.scrub(n.text.replace(/<.*?>/g,"")):n.fragments?(n.fragments.forEach(function(n){r.push(n.text)}),r.join(" ")):n.messageType===t.Results?"**Self help links shown to user**":n.messageType===t.InstantAnswer?(r.push("**Instant Answer Displayed**"),n.instantAnswer&&n.instantAnswer.problem&&n.instantAnswer.problem.name&&r.push("Title: "+n.instantAnswer.problem.name.replace(/<.*?>/g,"")),n.instantAnswer&&n.instantAnswer.solutions&&n.instantAnswer.solutions[0]&&n.instantAnswer.solutions[0].relatedHelpUrl&&r.push("URL: "+n.instantAnswer.solutions[0].relatedHelpUrl),r.join(", ")):""}var f=[t.User,t.VirtualAgent,t.InstantAnswer,t.Results];this.legacyPackageMessages=function(n){return n&&n.map(function(n){return{from:n.messageType===t.User?"User":"Bot",to:n.messageType!==t.User?"User":"Bot",timestamp:new Date(n.timeStamp).toJSON(),message:r(n)}}).filter(function(n){return n.message.length>0})||[]};this.packageMessages=function(i){return i&&i.filter(function(t){return n.isMessageType(t,f)}).map(function(n){return u(angular.extend({},n,{from:n.messageType===t.User?"User":"Bot",to:n.messageType!==t.User?"User":"Bot",timestamp:new Date(n.timeStamp).toJSON(),message:r(n),messageExtended:{version:1}}))})||[]};this.packageUserMessages=function(n){return n.map(function(n){return n.messageType===t.User?i.scrub(n.text):""}).join(" . ")}}])}(angular.module(virtualAgentApp)),function(n){n.value("virtualAgentModalityStates",{Selecting:0,Connecting:1,Chatting:2,Callback:3,Error:4});n.directive("virtualAgentModality",["$rootScope","$location","chatClassificationService","supportLinkService","modalityTags","virtualAgentModalityStates","chatService","compassService","chatStateService","authenticationHelperService","authService","flightService","virtualAgentDialogService","waitStatusService","recurringOperationManagerService","$sce","oemService","virtualAgentContentService","wedcsService","virtualAgentFlowDefinitionService","virtualAgentConfigurationService","virtualAgentConstants",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){function ut(n){s.setSubject(n.message.engaged.subjectId);n.selectModality(n.message.engaged.modality,n.message.engaged.link,{isRestart:!0})}function ft(n,t){t&&t.link&&t.link.linkUrl?n.externalLink=t:o.getContactUsProducts().then(function(t){n.products=t&&t.links})}function et(n,t){o.getContactUsProducts().then(function(i){if(n.products=i&&i.links,t.product)for(var r in n.products)t.product.link.linkText==n.products[r].link.linkText&&(n.selections.selectedProduct=n.products[r]);n.linkOptions=t;n.linkOptions.length==1&&(n.selections.selectedOption=n.linkOptions[0],n.selectOption(n.linkOptions[0]))})}function it(t,i){i&&i.length&&(r.hasAnyModalities(i,at)||t.selections.selectedOption?(t&&t.selections&&t.selections.selectedOption&&t.selections.selectedProduct&&n.$broadcast("ProductIssueManualSelection",{issue:t.selections.selectedOption.metaTags,product:t.selections.selectedProduct.metaTags}),s.setSubject(r.extractSubjectFromList(i)),e.initLazy({typingBoxId:"virtual-agent-chat-client-message-input-textbox"}).then(function(){return e.checkHours(i)}).then(function(n){function e(t){t!==null&&(n[u.chat].waitStatusText=v.getUsersWaitingText(t))}function o(t){t!==null&&(n[u.callback].waitStatusText=v.getWaitTimeText(t))}angular.extend(n,r.getSpecifiedModalities(i,vt));t.modalities=n;n[u.callback]&&(n[u.callback].icon="E717");n[u.scheduleCallback]&&(n[u.scheduleCallback].icon="E787");n[u.chat]&&n[u.chat].isOpen&&t.shouldShowChatQueuePosition&&(tt.recurUntilSuccessfulOrCleanedUp(function(){return v.getChatQueueLength().then(e)},rt,function(){return t.state!==f.Selecting}),n[u.chat].waitStatusText="");n[u.callback]&&n[u.callback].isOpen&&(tt.recurUntilSuccessfulOrCleanedUp(function(){return v.getCallbackWaitTime().then(o)},rt,function(){return t.state!==f.Selecting}),n[u.callback].waitStatusText="");t.orderedModalities=st(n,t.shouldShowHoops);w.applyOEMforVA(t.orderedModalities);ht(t.orderedModalities);t.summarizedHoopsModality=ct(t.orderedModalities)})):et(t,i))}function ot(n,t){return nt.modalities.productIssueLinkBase+n+"/"+t+"/"}function st(n,t){var u=[],r,i;if(!t){for(r in n)i=n[r],i.type=r,u.push(i);return u}for(r in n)i=n[r],i.type=r,i.isOpen&&u.push(i);for(r in n)i=n[r],(i.isClosed||i.isUnavailable)&&u.push(i);return u}function ht(n){for(var t,i=0;i<n.length;i++)(t=n[i],t.isUnavailable&&t.unavailableMessage)&&p.trustAsHtml(t.unavailableMessage)}function ct(n){var t=n.filter(function(n){return n.isClosed}),i,f,u,r;if(!t||t.length<2||(i=t[0].schedule,!i||i.length===0))return undefined;for(f=JSON.stringify(i),u=1;u<t.length;u++)if(r=t[u].schedule,!r||r.length===0||r.length!==i.length||JSON.stringify(r)!==f)return undefined;return t[0]}var lt=t.search().referrer,at=[u.chat,u.callback,u.tollFree,u.scheduleCallback],vt=[u.scheduleCallback,u.deviceCustom,u.deviceCustomAnon,u.deviceCustomMsDevice,"email","community","tweet","reset-password"],tt=y.getInstance(),rt=15e3;return{restrict:"A",templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentModality.html",scope:{message:"=",view:"=",modalityAction:"&"},link:function(n){n.shouldShowChatQueuePosition=l.isUserInFlight("cqpm-1");n.shouldShowHoops=l.isUserInFlight("hiva-1");var a=l.isUserInFlight("aad-1");n.selections={};n.showCancel=!1;n.loadingModalities=!0;n.states=f;n.state=f.Selecting;n.contactUsLink="https://"+t.host()+"/{lang-locale}/contactus/";n.agentStatus=e.getAgentStatus();n.reset=function(){n.loadingModalities=!0;n.message.engaged&&ut(n);g.sdkClientConfig.then(function(t){if(t&&t.content&&t.content.flowExtensionOption&&t.content.flowExtensionOption.product&&t.content.flowExtensionOption.issue){var r=ot(t.content.flowExtensionOption.product,t.content.flowExtensionOption.issue);return o.getContactUsMenuLinks(r)}return d.getFlowDefinition().then(function(t){var r=t.routingProduct,u=t.routingClientId;return i.getMenuLinksForRoute(n.message.context,u,lt,r)})}).then(function(t){it(n,t)}).catch(function(t){ft(n,t)})["finally"](function(){n.loadingModalities=!1})};n.selectLink=function(n){n.fromOldFlow=!0;r.followLink(n)};n.selectOption=function(t,i){t&&(n.modalities=null,n.externalLink="",i&&(n.selections.selectedOption=null,n.linkOptions=null),t&&t.externalLink?n.externalLink=t:t&&o.getContactUsMenuLinks(t.link.linkUrl).then(function(t){it(n,t)}))};n.selectModality=function(t,i,f){n.message.engaged={link:i,subjectId:s.getSubject(),modality:t};t==u.chat?n.chat(f):t==u.callback?n.callback(i,f,!1):t==u.scheduleCallback?n.callback(i,f,!0):r.followLink(i);n.modalityAction({config:f,type:t})};n.retryAction=function(){n.selectModality(n.message.engaged.modality,n.message.engaged.link)};n.chat=function(){a?c.resolveAuthState().then(function(t){var i=c.getSupportedIDP();t===i.MSA&&(n.state=f.Connecting,n.showCancel=!0,n.cancelAction=function(){n.state=f.Selecting;e.endChat();n.showCancel=!1})}):h.getSignInState().then(function(){n.state=f.Connecting;n.showCancel=!0;n.cancelAction=function(){n.state=f.Selecting;e.endChat();n.showCancel=!1}})};n.callback=function(t,i,r){a?c.resolveAuthState().then(function(i){var u=c.getSupportedIDP();i===u.MSA&&(o.fetchContent(t.link.linkUrl.substring(1)),n.state=f.Callback,n.isScheduleCallback=r,n.showCancel=!0,n.cancelAction=function(){n.state=f.Selecting;n.showCancel=!1})}):h.getSignInState().then(function(){o.fetchContent(t.link.linkUrl.substring(1));n.state=f.Callback;n.isScheduleCallback=r;n.showCancel=!0;n.cancelAction=function(){n.state=f.Selecting;n.showCancel=!1}})};n.showModalities=function(){n.state=f.Selecting;n.showCancel=!1};n.$on("ChatSessionEstablished",function(){n.state=f.Chatting});n.$on("ChatFrameHeader",function(t,i){i.showEnd&&(n.showCancel=!1)});n.$on("EnqueueCallbackSuccess",function(){n.showCancel=!1});n.$on("EnqueueChatFailure",function(){n.state=f.Error});n.$on("EnqueueCallbackFailure",function(){n.state=f.Error});n.$on("$destroy",function(){tt.cleanup()});n.reset()}}}])}(angular.module(virtualAgentApp)),function(n){var t="smc-entry-nav";n.component("virtualAgentNavEntry",{templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentNavEntry.html",bindings:{view:"<",collapsed:"<"},controller:["virtualAgentLinkService",function(n){this.openVirtualAgent=function(){n.openPopup({flowId:t})}}]})}(angular.module(virtualAgentApp)),function(n){n.controller("VirtualAgentReplayController",["$scope","$log","$rootScope","$timeout","virtualAgentContentService","virtualAgentReplayService","virtualAgentConstants","virtualAgentDialogService","messageTypes","virtualAgentSDKService",function(n,t,i,r,u,f,e,o,s,h){function c(i){t.error(i);n.messages.push(o.addMessage({text:"An error occurred while trying to replay the transcript"},s.SystemError));h.raiseError(i)}n.reset=function(){n.messages=[];n.waitTime=e.messaging.maxWaitTimes.normal;u.getContent().then(function(t){return n.view=t,r(function(){i.$broadcast("ChatFrameHeader",{text:n.view.introduction.header,image:n.view.introduction.headerIcon,showReset:!1,showBackButton:!1,isVirtualAgent:!0,survey:{visible:!1}})}),f.replayTranscript(n.view)}).then(function(t){n.messages=t}).catch(c).finally(function(){n.isReady=!0;h.raiseSdkEvent({type:e.sdkEvents.initialized})})};n.$on("VirtualAgentDialogTimeout",function(){c({type:"replay-timeout",reason:"Timed out waiting for replay transcript to load/be sent."})});n.reset()}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentReplayService",["$q","$log","messageService","messageTypes","virtualAgentConstants","virtualAgentTranscriptService","virtualAgentSDKService","virtualAgentConfigurationService",function(n,t,i,r,u,f,e,o){function h(){var t=o.cantileverConfig,i={userToken:t.accessToken,visitId:t.visitId,engagementId:t.engagementId};return s(i)?n.resolve(i):e.getClientConfig(y).catch(function(){return n.reject({type:"get-replay-info-failed",reason:"Failed to get replayInfo through the SDK"})})}function c(t){return s(t)?f.getTranscript(t.userToken,t.visitId,t.engagementId).catch(function(t){return n.reject({type:"get-transcript-failed",reason:"Call to Cantilever GET Transcript API failed",exception:JSON.stringify(t)})}):n.reject({type:"replay-info-invalid",reason:"Replay Info provided is invalid/missing fields: "+JSON.stringify(t)})}function l(n,t){var i=v(n.Details&&n.Details.PropertyBag);return i?(i.messageType===r.InstantAnswer?angular.extend(i,{hasSurvey:!1,hasFeedback:!1,maxHeight:u.content.instantAnswerMaxHeight,header:t.results&&t.results.answerHeader,view:t.instantAnswer}):i.messageType===r.Results?angular.extend(i,{header:t.results&&t.results.answerHeader,view:{showLess:t.instantAnswer.showLess,showMore:t.instantAnswer.showMore}}):i.fragments||(i.text=n.Details.TextMessage),i):null}function a(n){return!!(n&&Array.isArray(n.Transcripts))}function s(n){return!!(n&&n.visitId&&n.engagementId&&n.userToken)}function v(n){try{return JSON.parse(n)}catch(t){return null}}var y="replayInfo";this.replayTranscript=function(t){return t?h().then(c).then(function(r){return a(r)?(i.clearMessages(u.messaging.room,!0),r.Transcripts.map(function(n){return l(n,t)}).filter(function(n){return!!n}).map(function(n){return i.appendMessage(u.messaging.room,n,n.messageType)})):n.reject({type:"transcript-invalid",reason:"Transcript object retrieved is of an invalid format: "+JSON.stringify(r)})}):n.reject({type:"no-view",reason:"Failed to fetch view or invalid view provided: "+JSON.stringify(t)})}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentResetModalService",["$uibModal",function(n){this.confirmReset=function(){var t=n.open({templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/ResetConfirmationModal.html",backdropClass:"smc-modal-backdrop",ariaDescribedBy:"modal-description",ariaLabelledBy:"modal-header",windowTemplateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/ModalWindowTemplate.html",controller:["$scope","$uibModalInstance","compassService",function(n,t,i){i.getVirtualAgent().then(function(t){n.view=t&&t.resetModal});n.confirm=function(){t.close()};n.cancel=function(){t.dismiss()}}]});return t.result}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentSDKService",["$rootScope","$q","virtualAgentConstants","queryStringService","sdkProxyService",function(n,t,i,r,u){var f,e,o,s;this.isInSDK=function(){return t.resolve(!!r.getQueryStringValue(i.configuration.appId))};this.raiseSdkEvent=function(n){u.proxy().then(function(t){t.dispatchEvent(n.type,n.data)})};this.raiseError=function(n){u.proxy().then(function(t){t.dispatchError(n)})};this.registerResetHook=function(n){u.proxy().then(function(t){t.addEventListener(i.sdkEvents.startOver,e=n)})};this.registerEndChatHook=function(n){u.proxy().then(function(t){t.addEventListener(i.sdkEvents.endChat,o=n)})};this.registerShowFeedbackHook=function(n){u.proxy().then(function(t){t.addEventListener(i.sdkEvents.showFeedback,s=n)})};this.registerInputHook=function(n){u.proxy().then(function(t){t.addEventListener(i.sdkEvents.message,f=function(t){n(t.data)})})};this.unregisterInputHook=function(){u.proxy().then(function(n){n.removeEventListener(i.sdkEvents.message,f)})};this.unregisterResetHook=function(){u.proxy().then(function(n){n.removeEventListener(i.sdkEvents.startOver,e)})};this.unregisterEndChatHook=function(){u.proxy().then(function(n){n.removeEventListener(i.sdkEvents.endChat,o)})};this.getClientConfig=function(n){return this.isInSDK().then(function(n){return n?u.proxy():null}).then(function(t){return t&&t.getClientConfig(n)}).then(function(n){return n&&angular.copy(n)})}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentService",["$http","$q","$rootScope","languageService","virtualAgentSessionService","virtualAgentConfigurationService","mbfDirectLineClient",function(n,t,i,r,u,f,e){function c(i){return i.actionName?n.post("/api/search/virtualagentaction",i).then(function(n){return i.actionName="",i.query=n.data.response,i.custom=angular.extend(i.custom,n.data.context),o.sendActivityToBot(i.query,i),{FromDirectLine:!0}}):i.query?(o.sendActivityToBot(i.query,i),t.resolve({FromDirectLine:!0})):o.getResponse().then(function(n){return s(n,i.withDialog)})}function s(n,r){if(!n.data.content||!n.data.content.webResults&&!n.data.content.answers)return t.reject({error:"Invalid property values"});var f=l(n.data.content);return p.feedbackUrl(n.data.feedbackUrlBase),u.id(n.data.sessionId),results=angular.extend({results:n.data.content.webResults&&n.data.content.webResults.items.map(v)||[],totalCount:n.data.content.webResults&&n.data.content.webResults.totalEstimatedMatches,summarizedQuery:n.data.content.webResults&&n.data.content.webResults.query,engineStatus:n.data.content.engineStatus,engineFlight:n.data.content.flightId},f),results.action=results.engineStatus=="Action"&&{name:results.metaData.action,prereq:results.metaData.prereq&&results.metaData.prereq.split(";")[0]},r||n.data.content.engineStatus==="FinalAnswer"||i.$broadcast("instantAnswerWithQuestion",{results:results,sessionId:n.data.sessionId}),r?i.$broadcast("VirtualAgentDialogResponse",results):i.$broadcast("SearchResponse",{item:results,caller:"virtualagent"}),results}function l(n){var t={instantAnswer:null,dialog:{},metaData:[]},i,r,u,f;return n.answers?(answersText=JSON.stringify(n.answers).replace(new RegExp(String.fromCharCode(57356),"g"),"<strong>").replace(new RegExp(String.fromCharCode(57357),"g"),"<\/strong>"),i=JSON.parse(answersText),!i||!i.length)?t:(r=i.filter(function(n){return n.type==="InstantAnswer"})[0],u=i.filter(function(n){return n.type==="Dialog"&&!n.isChitChat})[0],r=r||u,f=i.filter(function(n){return n.type==="Dialog"&&n.isChitChat})[0],t.dialog={question:u&&u.question&&u.question.text,options:u&&u.question&&u.question.questionOptions},t.instantAnswer=r&&r.content&&r.content[0],t.leadingMessage=i[0].leadingMessage&&i[0].leadingMessage[0],t.instantAnswer&&(t.instantAnswer.sourceId=r.sourceId,t.instantAnswer.resultId=r.resultId),t.metaData=a(i[0].metadata),t.context=i[0].currentUserContext||{},t.chitChat=f&&f.content&&f.content[0],t.sourceId=i[0].sourceId||"",t.source=i[0].source||"",t.slotId=i[0].slotId||"",t.resultId=i[0].resultId||"",t.type=i[0].type||"",t):t}function a(n){var t={};return n&&n.split(",").forEach(function(n){var i=n.split("=");t[i[0]]=i[1]}),t}function v(n){return{simpleTitle:n.title.replace(/\<\/?b\>/g,""),title:n.title,description:n.description,link:n.url,displayLink:n.displayUrl,resultId:n.resultId}}var h,y=["en-us"],p=this,o;this.setMbfDirectLineListenerCallback=function(n,t){angular.isObject(n)&&(o=e.DirectLineClient(n),o.setListenerCallback(t))};this.fetchContent=function(t){var i=angular.merge({},f.defaultRequestOptions,t),r;return(i.sessionId=u.id(),o)?c(i):(i.query=encodeURIComponent(i.query),r={params:{}},i.withDialog&&(r.params.shouldRequestErrorCrashExperience=!1),n.post("/api/search/virtualagent",i,r).then(function(n){return s(n,i.withDialog)}))};this.feedbackUrl=function(n){return n!==undefined&&(h=n),h};this.isEnabled=function(){return y.indexOf(r.langLocale())!==-1}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentSessionService",["$window","$rootScope","sessionStorageService","messageService","virtualAgentConstants","virtualAgentConfigurationService",function(n,t,i,r,u,f){function a(){o="";h=null;s=null;c=null}function e(n){return!!(n||typeof n!="undefined")}function v(n){var t=n.srcElement.activeElement,i=t&&t.href;return i&&p.some(function(n){return i.match(n)})}var y=this,o="",s=null,h=null,c={},l=!1,p=[/^ms-settings/,/^ms-msdt/];this.init=function(){this.load(n.performance.navigation.type===n.performance.navigation.TYPE_RELOAD);n.addEventListener("beforeunload",this.storeSession.bind(this),!1);typeof n.document.hidden!="undefined"&&n.document.addEventListener("visibilitychange",function(){n.document.visibilityState==="unloaded"&&y.storeSession()},!1)};this.storeSession=function(n){n&&v(n)||(i.set(u.session.storageKey,{sessionId:o,state:h,context:s,botConnection:c}),this.shouldRehydrate()||r.archiveMessages(u.messaging.room),r.storeMessages(u.messaging.room))};this.restoreSession=function(){var n=i.get(u.session.storageKey);o=n&&n.sessionId||"";s=n&&n.context||null;h=n&&n.state||null;c=n&&n.botConnection||null;r.restoreMessages(u.messaging.room,this.shouldRehydrate())};this.clearSession=function(n){i.set(u.session.storageKey,{});a();n&&r.clearMessages(u.messaging.room,!0)};this.shouldRehydrate=function(n){return e(n)?l=n:l};this.id=function(n){return o=e(n)?n:o};this.context=function(n){return s=e(n)?n:s};this.state=function(n){return h=e(n)?n:h};this.load=function(n){n?this.clearSession(!0):(this.shouldRehydrate(f.shouldRehydrate),this.restoreSession())};this.botConnection=function(n){return c=e(n)?n:c};this.postedTranscript=function(n){return e(n)&&i.set(u.session.virtualAgentTranscript,n),!!i.get(u.session.virtualAgentTranscript)};this.init()}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentSurveyModalService",["$uibModal",function(n){this.requestSurvey=function(t){var i=n.open({templateUrl:"/PartialViews/VirtualAgent.Library/VirtualAgent/SurveyModal.html",backdropClass:"smc-modal-backdrop",windowTopClass:"virtual-agent-modal",ariaLabelledBy:"card-header",controller:["$scope","$uibModalInstance",function(n,i){n.config=t;n.config.surveyData.forVirtualAgent=!0;n.submit=function(){i.close()};n.cancel=function(){i.dismiss()}}]});return i.result}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentTelemetryService",["$rootScope","wedcsService","metaTagsService","virtualAgentConstants","virtualAgentSessionService","authService","virtualAgentAuthService","messageScrubberService",function(n,t,i,r,u,f,e,o){function c(n){i.addOrUpdateMetaTag("ms.skylightId",u.id(),!0);n&&n.flight&&i.addOrUpdateMetaTag("ms.skyefId",n.flight)}function a(n){var t=n&&n.length||0;return t>r.content.listSlotsCutoff?"slot-dropdown":t>0?"slot-list":""}function h(n,i){i=typeof i=="object"?JSON.stringify(i):i;c();t.logCustomEvent(n,l,{"ms.scvalue":i})}var s={response:"virtual-agent-dialog-user-response",content:"virtual-agent-dialog-content",feedback:"virtual-agent-dialog-feedback",flow:"virtual-agent-flow-definition",iaCollapse:"virtual-agent-ia-collapse",survey:"virtual-agent-dialog-survey",bannerSeen:"virtual-agent-banner-seen",entryPoint:"virtual-agent-entry-point",message:"virtual-agent-message",initialSignIn:"virtual-agent-initial-sign-in",transcriptInfo:"virtual-agent-transcript-info",dwellTime:"virtual-agent-dwell-time",iaFullView:"virtual-agent-instant-answer-full-view"},l="virtualAgentAction";u.id()&&c();n.$on("VirtualAgentDialogResponse",function(n,i){c({flight:i.engineFlight});t.logCustomEvent(s.content,l,{"ms.scvalue":JSON.stringify({sourceId:i.sourceId||"",source:i.source||"",slotId:i.slotId||"",resultId:i.resultId||"",question:i.dialog.question?1:0,questionSlots:(i.dialog.options&&i.dialog.options.length>0)?1:0,questionSlotsLength:i.dialog.options&&i.dialog.options.length||0,questionSlotsType:a(i.dialog.options),answer:i.instantAnswer?1:0,chitchat:i.chitChat?1:0,results:(!i.dialog.question&&!i.instantAnswer&&!i.chitChat&&i.results)?1:0,status:i.engineStatus,metadata:i.metaData,type:i.type||""})})});n.$on("InstantAnswerCollapsable",function(n,t){h(s.iaCollapse,t)});n.$on("InstantAnswerFullView",function(n,t){h(s.iaFullView,t)});n.$on("VirtualAgentBannerSeen",function(n,t){h(s.bannerSeen,t)});n.$on("VirtualAgentWindowInteraction",function(n,t){h(s.dwellTime,t)});n.$on("VirtualAgentFlowChange",function(n,t){i.addOrUpdateMetaTag("ms.flowId",t);h(s.flow)});n.$on("VirtualAgentDialogUserResponse",function(n,t){t.searchText=t.searchText&&o.scrub(t.searchText);h(s.response,t.searchText)});n.$on("VirtualAgentSolutionFeedback",function(n,t){h(s.feedback,{text:t.text,result:t.result.Result})});n.$on("VirtualAgentSurvey",function(n,t){h(s.survey,t)});n.$on("VirtualAgentEntry",function(n,t){h(s.entryPoint,t)});n.$on("VirtualAgentMessage",function(n,t){t.text=t.text&&o.scrub(t.text);h(s.message,t)});n.$on("VirtualAgentAuthStatus",function(n,t){e.resolveAuthState().then(function(n){h(s.initialSignIn,angular.extend(t||{},{AAD:n.AAD?1:0,MSA:n.MSA?1:0}))})});n.$on("VirtualAgentTranscriptInfo",function(n,t){h(s.transcriptInfo,t)})}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentTemplateCacheService",["$http","$templateCache",function(n,t){var i=["/PartialViews/VirtualAgent.Library/Contact/Common/Message.html","/PartialViews/VirtualAgent.Library/Contact/Common/CommonMessage.html","/PartialViews/VirtualAgent.Library/Contact/Common/Card.html","/PartialViews/VirtualAgent.Library/Contact/Common/MessageSlots.html","/PartialViews/VirtualAgent.Library/Contact/Chat/MessageAnimation.html","/PartialViews/VirtualAgent.Library/Search/InstantAnswer.html","/PartialViews/VirtualAgent.Library/Search/SearchResult.html"];this.init=function(){i.forEach(function(i){n.get(i,{cache:t})})}}])}(angular.module(virtualAgentApp)),function(n){n.service("virtualAgentTranscriptService",["$q","$window","$http","$rootScope","clientConfig","virtualAgentSessionService","virtualAgentMessagePackingService","virtualAgentConstants","messageService","chatService","chatStateService","flightService",function(n,t,i,r,u,f,e,o,s,h,c,l){function a(){if(!l.isUserInFlight("vafx-replay-1")||f.postedTranscript()||!f.id())return n.resolve({visitId:c.getCantileverVisitId(),engagementId:c.getCantileverEngagementId()});var t=e.packageMessages(s.getAllMessages(o.messaging.room));return i.post(y,{messages:t||[],sessionId:f.id()||"",visitId:c.getCantileverVisitId()||"",engagementId:c.getCantileverEngagementId()||""}).then(function(n){var t=n.data&&n.data.visitId||"",i=n.data&&n.data.engagementId||"";return r.$broadcast("VirtualAgentTranscriptInfo",{visitId:t,engagementId:i}),c.setCantileverVisitId(t),c.setCantileverEngagementId(i),f.postedTranscript(!0),n.data})}function v(){var n=e.legacyPackageMessages(s.getAllMessages(o.messaging.room));return h.postBotTranscript({isAuth:!0,authType:"MSA"},n)}var y="/api/transcript/post",p=l.isUserInFlight("cantilever-1");this.getTranscript=function(n,t,r){return i.get(u.CantileverConfig.TranscriptEndpoint,{headers:{Authorization:"Bearer "+n},httpAppOptions:{qosOperation:{name:"Cantilever.GetTranscript",description:"Client side call directly to Cantilever gateway to GET transcript"}},params:{partnerId:"smc",VisitId:t,engagementId:r,IsAgentView:!1}}).then(function(n){return n.data})};this.postTranscript=function(){return p||v(),a()};t.addEventListener("beforeunload",function(){a()},!1)}])}(angular.module(virtualAgentApp));angular.module("virtualAgentApp").run(["$templateCache",function(n){n.put("/PartialViews/VirtualAgent.Library/ContactUs/Collection.html",'<div class="contactus-collection" ng-show="!showProductsList" role="presentation" ng-class="{ \'productslist-height\' : \'!config.isNative\' }">\r\n    <div class="contactus-banner" ng-class="{ \'win-color-bg-0\' : isCSANonEnUsFlight && !virtualAgentLocale } ">\r\n        <div class="contactus-banner-text" ng-class="{ \'productslist-width\' : isCSANonEnUsFlight && !virtualAgentLocale }">\r\n            <h1 class="text-header" ng-if="!config.isNative">{{ contactUsView.header }}<\/h1>\r\n            <img ng-show="isCSANonEnUsFlight && !virtualAgentLocale" class="imageStyleCSA img-responsive contactus-banner-img-small" ng-src="{{ contactUsView.newLandingImage.url }}" />\r\n            <img ng-show="virtualAgentLocale || !isCSANonEnUsFlight" class="img-responsive contactus-banner-img-small" ng-src="{{ contactUsView.landingImage.url }}" />\r\n            <div class="text-title spacer-12-bottom" ng-show="config.isNative && isCSANonEnUsFlight" ng-class="{ \'productslist-max-width\' : isCSANonEnUsFlight }">{{ contactUsView.howCanWeHelpYou }}<\/div>\r\n            <div ng-show="!showTextBox" class="intro-text">\r\n                <div ng-class="{ \'text-center\' : config.isNative && isCSANonEnUsFlight }">{{ contactUsView.describeProblemLong }}<\/div>\r\n                <div ng-class="{ \'text-center\' : config.isNative && isCSANonEnUsFlight }">\r\n                    <button ng-click="startExp()" class="btn btn-primary"\r\n                            ng-class="{ \'spacer-ms-top remove-bottom-margin csa-next-button-width\' : isCSANonEnUsFlight }"\r\n                            id="contactus-get-started">\r\n                        {{ contactUsView.getStarted }}\r\n                    <\/button>\r\n                <\/div>\r\n            <\/div>\r\n            <div ng-show="showTextBox" class="collection-text" ng-class="{ \'productslist-max-width\' : isCSANonEnUsFlight }" >\r\n                <div id="describe-problem" ng-bind="contactUsView.describeProblem" class="text-body spacer-12-bottom csaContentLeftAlign " ng-class="{ \'text-center\' : config.isNative && isCSANonEnUsFlight}" />\r\n                <textarea rows="5"\r\n                          ng-model="trainingData"\r\n                          id="contactus-ml-training"\r\n                          class="form-control contactus-textarea"\r\n                          ng-element-ready="focusProblemTextbox()"\r\n                          ng-keydown="$event.keyCode === 13 && !$event.preventDefault() && trainingData && submitData()"\r\n                          maxlength="512"\r\n                          placeholder="{{ contactUsView.problemExample }}" \r\n                          aria-labelledby="describe-problem" />\r\n                          \r\n                <div ng-class="{ \'text-center\' : config.isNative && isCSANonEnUsFlight }" class="csaContentLeftAlign">\r\n                    <button class="btn btn-primary"\r\n                            ng-class="{ \'spacer-12-top remove-bottom-margin csa-next-button-width\' : config.isNative && isCSANonEnUsFlight }"\r\n                            id="contactus-ml-training-submit"\r\n                            ng-click="submitData()" ng-disabled="!trainingData || status.loadingResults">\r\n                        {{ contactUsView.submitText }}\r\n                    <\/button>\r\n                <\/div>\r\n                <div class="spinner-inline" loading-spinner data-timeout="20000" data-delay="500" data-message="ProblemClassificationTimeout" data-size="small" data-type="bar" ng-if="status.loadingResults"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <img ng-show="isCSANonEnUsFlight && !virtualAgentLocale" class="img-responsive contactus-banner-img" ng-src="{{ contactUsView.newLandingImage.url }}" />\r\n        <img ng-show="virtualAgentLocale || !isCSANonEnUsFlight" class="img-responsive contactus-banner-img" ng-src="{{ contactUsView.landingImage.url }}" />\r\n    <\/div>\r\n    <aside role="complementary" class="contactus-link-farm spacer-32-top text-center remove-bottom-padding remove-all-margin" ng-if="config.isNative && isCSANonEnUsFlight && !virtualAgentLocale ">\r\n        <div class="marginBottomFixed csa-margin-right-fixed">\r\n            <div class="link-group showDisabilityInApp csa-contact-link-farm-styles">\r\n                <a href="{{ contactUsView.disabilityLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.disabilityLink.link.linkText }}<\/a>\r\n                <div class="text-body link-description remove-top-margin csa-contact-link-farm-description">{{ contactUsView.disabilityLink.description }}<\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/aside>\r\n    <aside role="complementary" class="contactus-link-farm csa-contact-link-farm-width" ng-if="(virtualAgentLocale || !isCSANonEnUsFlight) || !config.isNative">\r\n        <div class="title-group">\r\n            <h2 class="text-title prev-data spacer-ms-bottom text-left">{{ contactUsView.extraSupportOptions }}<\/h2>\r\n            <hr aria-hidden="true" />\r\n        <\/div>\r\n        <div class="row" ng-class="{ \'text-left\' : (isCSANonEnUsFlight && !virtualAgentLocale) }">\r\n            <div class="col-md-6 col-md-offset-2 link-group">\r\n                <a href="{{ contactUsView.businessLink.link.linkUrl }}" target="_blank" id="contactus-business-it-dev-link" class="text-body">{{ contactUsView.businessLink.link.linkText }}<\/a>\r\n                <div class="text-body link-description" ng-class="{ \'csa-contact-link-description\' : (isCSANonEnUsFlight && !virtualAgentLocale) }">{{ contactUsView.businessLink.description }}<\/div>\r\n            <\/div>\r\n            <div class="col-md-6 col-md-offset-1 link-group">\r\n                <a href="{{ contactUsView.storeLink.link.linkUrl }}" target="_blank" id="contactus-ms-store-link" class="text-body">{{ contactUsView.storeLink.link.linkText }}<\/a>\r\n                <div class="text-body link-description" ng-class="{ \'csa-contact-link-description\' : (isCSANonEnUsFlight && !virtualAgentLocale) }">{{ contactUsView.storeLink.description }}<\/div>\r\n            <\/div>\r\n            <div class="col-md-6 col-md-offset-1 link-group">\r\n                <a href="{{ contactUsView.disabilityLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.disabilityLink.link.linkText }}<\/a>\r\n                <div class="text-body link-description" ng-class="{ \'csa-contact-link-description\' : (isCSANonEnUsFlight && !virtualAgentLocale) }">{{ contactUsView.disabilityLink.description }}<\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/aside>\r\n<\/div>\r\n<div ng-show="showProductsList" class="contactus-result" role="presentation" ng-class="{ \'productslist-height\' : \'!config.isNative\' }">\r\n    <h1 id="contact-us-title" class="text-header contactus-header" ng-if="!config.isNative">{{ contactUsView.header }}<\/h1>\r\n    <div ng-if="trainingData && !isCSANonEnUsFlight" class="contactus-result-section">\r\n        <h2 class="text-title prev-data">{{ contactUsView.myProblem }}<\/h2>\r\n        <hr aria-hidden="true" />\r\n        {{ trainingData }}\r\n        <div>\r\n            <button class="btn btn-link change-problem-button" id="contactus-change-problem-link" ng-click="changeProblem()">{{ contactUsView.changeText }}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div ng-if="isCSANonEnUsFlight">\r\n        <h2 class="contact-us-more-info text-align-left text-title spacer-32-bottom">{{ contactUsView.moreInfoSelfHelp }}<\/h2>\r\n        <div class="ms-products">\r\n            <div class="contactus-result-section">\r\n                <div id="productText" class="text-body prev-data">\r\n                   {{ contactUsView.selectYourProduct }}\r\n                <\/div>\r\n                <div id="result-product-select" class="row drop-down">\r\n                    <select id="result-product-selection" class="form-control contact-us-select" aria-labelledby="productText" ng-model="pageState.selectedProduct" ng-options="link as link.link.linkText for link in contactUsProducts.links"\r\n                            ng-change="selectProduct(pageState.selectedProduct)">\r\n                        <option value="">{{ contactUsView.placeholderText }}<\/option>\r\n                    <\/select>\r\n                <\/div>\r\n            <\/div>\r\n            <button class="btn btn-default all-products-button" ng-show="pageState.showAllProducts" ng-click="showAllProducts(false)">{{ contactUsView.viewFewer }}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div ng-if="!isCSANonEnUsFlight">\r\n        <div class="text-title prev-data">{{ contactUsView.productText }}<\/div>\r\n        <hr aria-hidden="true" />\r\n        <div class="ms-products">\r\n            <div id="step1-products-section" class="ms-product-list">\r\n                <div class="row">\r\n                    <div ng-repeat="link in contactUsProducts.links | limitTo: config.viewMoreLinkNumber track by $index" class="col-lg-6 col-md-6 col-xs-12">\r\n                        <button id="step1-products-{{ $index }}-{{ link.link.linkText }}" class="product-item" ng-click="selectProduct(link)">\r\n                            <div ng-style="{\'background-image\': \'url(\'+ link.image.url + \')\'}" class="image-as-background product-image"><\/div>\r\n                            <div class="product-name">\r\n                                <div class="text-body contactus-normalwhitespace">{{ link.link.linkText }}<\/div>\r\n                            <\/div>\r\n                        <\/button>\r\n                    <\/div>\r\n                <\/div>\r\n                <button class="btn btn-default all-products-button" ng-show="contactUsProducts.links.length > config.viewMoreLinkNumber && !pageState.showAllProducts" ng-click="showAllProducts(true)">{{ contactUsView.viewMore }}<\/button>\r\n                <div class="row" role="presentation" ng-show="pageState.showAllProducts">\r\n                    <div ng-repeat="link in (contactUsProducts.links | limitTo: (config.viewMoreLinkNumber - contactUsProducts.links.length)) | orderBy: \'link.linkText\' track by $index" class="col-lg-6 col-md-6 col-xs-12">\r\n                        <button id="step1-products-{{ $index }}-{{ link.link.linkText }}" class="product-item" ng-click="selectProduct(link)">\r\n                            <div ng-style="{\'background-image\': \'url(\'+ link.image.url + \')\'}" class="image-as-background product-image"><\/div>\r\n                            <div class="product-name">\r\n                                <div class="text-body contactus-normalwhitespace">{{ link.link.linkText }}<\/div>\r\n                            <\/div>\r\n                        <\/button>\r\n                    <\/div>\r\n                <\/div>\r\n                <button class="btn btn-default all-products-button" ng-show="pageState.showAllProducts" ng-click="showAllProducts(false)">{{ contactUsView.viewFewer }}<\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/ContactUs/Geo.html",'<div class="geo" ng-show="$ctrl.isVisible && $ctrl.isReady">\r\n    <div class="geo-option" \r\n         ng-repeat="language in $ctrl.languages track by $index"\r\n         ng-bind="$ctrl.componentView.access | compassFormat : { \'language\': language.language, \'country\': language.country }"\r\n         ng-click="$ctrl.access(language)">\r\n    <\/div>\r\n    <div class="geo-option"\r\n         ng-bind="$ctrl.componentView.continue | compassFormat : { \'language\': $ctrl.currentLanguage.language, \'country\': $ctrl.currentLanguage.country }"\r\n         ng-click="$ctrl.continue(true)">\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/ContactUs/Hoops.html","{{modality.hoursText}}<br/>\r\n<span ng-repeat=\"time in modality.schedule\">\r\n    {{ time.days.join('-') }}: {{ time.shifts.length > 0 ? time.shifts.join(', ') : modality.closedScheduleText }}<br/>\r\n<\/span>\r\n{{modality.scheduleInYourLocaleText}}");n.put("/PartialViews/VirtualAgent.Library/ContactUs/Modality.html",'<section ng-class="{\'col-lg-12 col-md-18 col-xs-24 ms-contactus\': oldFlow}" id="modality-links" ng-show="isModalityEnabled">\r\n    <h5 class="text-subtitle contactus-subtitle" ng-if="view && view.header && !hideTitle">{{ view.header }}<\/h5>\r\n\r\n    <geo role="presentation" ng-if="useGeoLocation" data-path="{{ oldPath }}" data-on-continue="onGeoContinue(isUserInitiated)" data-on-selection="onGeoSelection(language)"><\/geo>\r\n\r\n    <div role="presentation" ng-hide="useGeoLocation">\r\n        <ul class="list-unstyled no-list-spacing" aria-label="{{ view.header }}" role="list" id="contactus-modality-menu-options" ng-show="modalitiesReady" arrow-nav>\r\n            <li id="{{ link.link.htmlId }}" \r\n                class="modality-link remove-vertical-padding spacer-32-bottom" \r\n                role="link listitem" \r\n                tabindex="{{ link.clickableLink ? 0 : -1 }}"\r\n                ng-click="followLink(link)" \r\n                ng-if="link.link.linkText" \r\n                ng-repeat="link in displayLinks track by $index" \r\n                ng-class="{\r\n                    \'clickable\': \'link.clickableLink\', \r\n                    \'contactus-link\': !oldFlow\r\n                }"\r\n                data-link="{{link.link.linkUrl}}"\r\n                aria-label="{{link.link.linkText + (link.isOpen ? (canDisplayWaitStatus(link) && waitStatusText[getModality(link)] ? waitStatusText[getModality(link)] : \'\') : link.description) }}">\r\n                <div class="clearfix">\r\n                    <div class="col-xs-2 col-sm-1 remove-all-padding">\r\n                        <span class="modality-icon win-icon media-icon contactus-media-icon" aria-hidden="true" ng-if="link.icon">\r\n                            {{ link.icon | icon }}\r\n                        <\/span>\r\n                    <\/div>\r\n                    <div class="col-xs-22 col-sm-23 csa-modality-left-padding">\r\n                        <div>\r\n                            <span class="win-color-fg-blue text-base modality-wait-status-description" ng-class="oldFlow ? \'text-base\' : \'text-body\'">{{ link.link.linkText }}<\/span>\r\n                        <\/div>\r\n                        <span class="remove-all-padding modality-wait-status" ng-if="link.isOpen && canDisplayWaitStatus(link) && waitStatusText[getModality(link)]">{{ waitStatusText[getModality(link)] }}<\/span>\r\n                        <div class="text-caption" ng-class="{\'link-description\': !oldFlow}" ng-if="link.description" ng-bind="link.description"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/li>\r\n        <\/ul>\r\n    <\/div>\r\n\r\n    <div loading-spinner ng-if="!modalitiesReady" data-type="bar"><\/div>\r\n<\/section>');n.put("/PartialViews/VirtualAgent.Library/ContactUs/Result.html",'<div class="contactus-result productslist-height">\r\n    <div class="contactus-result-section">\r\n        <h1 id="contact-us-title" class="text-header contactus-header" ng-if="!config.isNative">{{ contactUsView.header }}<\/h1>\r\n        <div ng-if="!issueView || !isCSANonEnUsFlight">\r\n            <div ng-if="trainingData ">\r\n                <h2 class="contact-us-your-problem text-align-left text-title prev-data">{{ contactUsView.myProblem }}<\/h2>\r\n                <hr aria-hidden="true" />\r\n                {{ trainingData }}\r\n                <div>\r\n                    <button class="btn btn-link change-problem-button" id="contactus-change-problem-link" ng-click="changeProblem()">{{ contactUsView.changeText }}<\/button>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <h2 class="contact-us-more-info text-align-left text-title spacer-32-bottom" ng-if="!issueView && isCSANonEnUsFlight">{{ contactUsView.moreInfoSelfHelp}} <\/h2>\r\n        <div class="contactus-result-section spacer-32-top" ng-if="!issueView || !isCSANonEnUsFlight">\r\n            <div id="productText" class="text-body prev-data" ng-show="!isCSANonEnUsFlight">{{ contactUsView.productText }}<\/div>\r\n            <div id="productText" class="text-body prev-data" ng-show="isCSANonEnUsFlight">{{ contactUsView.selectYourProduct}}<\/div>\r\n            <hr aria-hidden="true" ng-show="!isCSANonEnUsFlight" />\r\n            <div id="result-product-select" class="row drop-down">\r\n                <select id="result-product-selection" role="menu" accessible-select class="form-control contact-us-select" aria-labelledby="productText" ng-model="pageState.selectedProduct" ng-options="link as link.link.linkText for link in contactUsProducts.links" ng-change="selectProduct(pageState.selectedProduct)">\r\n                    <option role="menuitem" value="">{{ contactUsView.placeholderText }}<\/option>\r\n                <\/select>\r\n            <\/div>\r\n            <div class="spacer-12-top" ng-if="isCSANonEnUsFlight && issueView ">\r\n                <button ng-disabled="!pageState.selectedIssue" class="btn btn-primary spacer-32-top" ng-click="userProvidedProductInfo(true)">{{ contactUsView.submitText }}<\/button>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="contactus-result-section" ng-show="productView.links" ng-if="!issueView || !isCSANonEnUsFlight">\r\n            <div id="categoryText" class="text-body prev-data" ng-show="!isCSANonEnUsFlight">{{ contactUsView.categoryText }}<\/div>\r\n            <div id="categoryText" class="text-body prev-data" ng-show="isCSANonEnUsFlight">{{ contactUsView.selectYourIssue }}<\/div>\r\n            <hr aria-hidden="true" ng-show="!isCSANonEnUsFlight" />\r\n            <div id="result-issue-select" class="row drop-down">\r\n                <select id="result-issue-selection" role="menu" accessible-select class="form-control contact-us-select" aria-labelledby="categoryText" ng-model="pageState.selectedIssue" ng-options="link as link.link.linkText for link in productView.links" ng-change="selectIssue(pageState.selectedIssue)">\r\n                    <option role="menuitem" value="">{{ contactUsView.placeholderText }}<\/option>\r\n                <\/select>\r\n            <\/div>\r\n            <div class="spacer-12-top" ng-if="isCSANonEnUsFlight">\r\n                <button ng-disabled="!pageState.selectedIssue" class="btn btn-primary spacer-32-top" ng-click="userProvidedProductInfo(true)">{{ contactUsView.submitText }}<\/button>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="contactus-result-section">\r\n            <h2 class="contact-us-self-help-title text-align-left text-subtitle spacer-16-bottom" ng-show="isCSANonEnUsFlight && issueView && status.selfHelpPresent"> {{ contactUsView.tryThisHelpContent }}<\/h2>\r\n            <div class="contactus-result-section">\r\n                <div id="section-3" class="links-section">\r\n                    <div id="contactus-external-link-card" class="external-link-card" ng-if="externalLinkCard">\r\n                        <div class="card-content" ng-class="{ \'spacer-32-bottom\' : isCSANonEnUsFlight }">{{ contactUsView.externalLinkDescription | compassFormat : { \'product-name\': externalLink.externalLinkDescription ?  externalLink.externalLinkDescription : pageState.selectedProduct.link.linkText} }}<\/div>\r\n                        <button class="btn-primary" id="contactus-external-link-button" ng-click="openExternalLink(externalLink)">{{ contactUsView.externalLinkButton }}<\/button>\r\n                    <\/div>\r\n                    <div ng-show="issueView || !isCSANonEnUsFlight">\r\n                        <div ng-if="!externalLinkCard && issueView">\r\n                            <h2 class="text-title prev-data" ng-show="!isCSANonEnUsFlight">{{ contactUsView.contactOptionsText }}<\/h2>\r\n                            <hr aria-hidden="true" ng-show="!isCSANonEnUsFlight" />\r\n                            <div ng-class="{ \'col-xs-24 device-pages-nopadding\' : isCSANonEnUsFlight }">\r\n                                <div ng-class="{\'col-md-12 col-xs-24\': trainingData && issueView , \'col-md-18 col-xs-24\': isCSANonEnUsFlight && trainingData && issueView }"\r\n                                     style="padding-left:0"\r\n                                     ng-if="trainingData && issueView"\r\n                                     ng-show="status.selfHelpPresent"\r\n                                     self-help\r\n                                     data-query="{{ trainingData }}"\r\n                                     data-on-ready="selfHelpIsReady(isPresent)">\r\n                                <\/div>\r\n\r\n                                <div ng-class="{ \'col-xs-24 device-pages-nopadding\' : isCSANonEnUsFlight }">\r\n                                    <h2 class="contact-us-modality-title text-align-left" ng-class="{ \'text-title spacer-32-bottom\' : isCSANonEnUsFlight }" ng-show="isCSANonEnUsFlight">{{ contactUsView.getMoreSupport }}<\/h2>\r\n                                    <div ng-class="{\'col-md-12 col-xs-24\': trainingData && issueView && status.selfHelpPresent, \'col-md-18 col-xs-24\': isCSANonEnUsFlight && trainingData && issueView && status.selfHelpPresent}" \r\n                                         class="remove-all-padding" ng-if="issueView">\r\n                                        <div sup-modality\r\n                                             data-fallback-url="/contactus/"\r\n                                             data-hide-title="true"\r\n                                             data-old-flow="false"\r\n                                             data-modalities="modalities"\r\n                                             ng-if="issueView"><\/div>\r\n                                        <div class="text-caption service-agreement">\r\n                                            {{ contactUsView.serviceAgreement }}\r\n                                            <a id="contactus-service-agreement" ng-href="{{ contactUsView.serviceAgreementLink.link.linkUrl }}" target="_blank">{{ contactUsView.serviceAgreementLink.link.linkText }}<\/a>\r\n                                        <\/div>\r\n                                    <\/div>\r\n                                <\/div>\r\n                            <\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/ContactUs/SelfHelp.html",'<section class="ms-contactus" ng-if="isSelfHelpEnabled && (answer || (selfHelpLinks && selfHelpLinks.length > 0))" ng-show="selfHelpReady">\r\n    <div ng-show="!showMoreresults && !answer && ((selfHelpLinks && selfHelpLinks.length > 0))" id="contactus-shlinks">\r\n        <div search-result="result" ng-repeat="result in selfHelpLinks | limitTo: 3" data-id="$index + \'-page-\' + currentPage" data-size="\'small\'" data-showLink="true" data-target="\'_blank\'"><\/div>\r\n        <div class="self-help-solutions" ng-show="!isCSANonEnUsFlight">\r\n            <a ng-href="{{ searchResultsPageUrl }}" target="_blank">{{ view.seeMoreSolutions }}<\/a>\r\n        <\/div>\r\n    <\/div>\r\n    <div ng-if="showMoreresults && !answer && ((selfHelpLinks && selfHelpLinks.length > 0))" id="contactus-shlinks">\r\n        <div search-result="result" ng-repeat="result in selfHelpLinks | limitTo: 7" data-id="$index + \'-page-\' + currentPage" data-size="\'small\'" data-showLink="true" data-target="\'_blank\'"><\/div>\r\n    <\/div>\r\n    <div ng-if="answer" id="contactus-shanswer" class="instant-answer-container spacer-32-bottom">\r\n        <div class="text-subtitle">{{ answer.problem.name }}<\/div>\r\n        <div instant-answer="answer" data-view="view.instantAnswerView"><\/div>\r\n    <\/div>\r\n    <hr class="modality-divider" ng-show="!isCSANonEnUsFlight"/>\r\n    <div ng-if="isCSANonEnUsFlight&&!answer" class="col-xs-24 device-pages-nopadding col-xs-24 device-pages-nopadding spacer-12-top spacer-20-bottom" >\r\n        <div class="text-center" ng-if="!showMoreresults">\r\n            <span class="win-icon win-icon-ChevronDown win-icon-size-xs win-color-fg-primary" ng-click=showMoreresultsSection(true) aria-label="{{ view.instantAnswerView.showMore }}"><\/span>\r\n        <\/div>\r\n        <div class="text-center" ng-if="showMoreresults">\r\n            <span class="win-icon win-icon-ChevronUp win-icon-size-xs win-color-fg-primary" ng-click=showMoreresultsSection(false) aria-label="{{ view.instantAnswerView.showLess }}"><\/span>\r\n        <\/div>\r\n        <hr class="spacer-ml-bottom" aria-hidden="true" />\r\n    <\/div>\r\n<\/section>');n.put("/PartialViews/VirtualAgent.Library/ContactUs/V2.html",'<div class="spinner-container spacer-20-top" ng-if="status.waitingOnCompass">\r\n    <div loading-spinner data-delay="2000" data-timeout="{{ config.timeout }}" data-message="ContactUsPageTimeout"><\/div>\r\n<\/div>\r\n\r\n<div class="ms-contactus" role="presentation" ng-show="!status.waitingOnCompass">\r\n    <div class="col-md-24 col-md-offset-0">\r\n        <div ng-include="pageState.currentView"><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Callback/Callback.html",'<div class="container">\r\n    <div class="row">\r\n        <div class="col-xs-24">\r\n            <h2 class="text-title header text-align-left">\r\n                {{ isScheduleCallback ? callback.scheduleCallback.scheduleCall : callback.immediateCallback.immediateCall }}\r\n            <\/h2>\r\n            <form name="callback-form" ng-class="{ \'spacer-32-top\':isCsaThemesFlight }">\r\n                <div class="form-group" ng-class="{\'has-error\': callInfo.invalidNumber}">\r\n                    <label id="country-region-label" ng-if="isCsaThemesFlight">{{callback.countryRegion}}<\/label>\r\n                    <span class="win-color-fg-red" ng-if="isCsaThemesFlight">*<\/span>\r\n                    <label id="phone-number-label" ng-bind="callback.phoneNumber" ng-if="!isCsaThemesFlight"><\/label>\r\n                    <select id="country-code" accessible-select focus-content data-name="country-code-select" data-condition="{{ isReady }}" class="form-control"\r\n                            ng-class="{ \'newCallbackWidth\':isCsaThemesFlight }"\r\n                            aria-label="{{ callback.selectCountryCodeText }}" ng-model="callInfo.countryCodeProperty" ng-model-options="{ getterSetter: true }"\r\n                            ng-disabled="callInfo.availableCountries.length < 2"\r\n                            required>\r\n                        <option ng-repeat="code in callInfo.availableCountries" value="{{ $index }}" aria-label="{{ code.display }}">{{ code.display }}<\/option>\r\n                    <\/select>\r\n                    <label id="phone-number-label" class="spacer-12-top" ng-if="isCsaThemesFlight" ng-bind="callback.phoneNumber"><\/label>\r\n                    <span class="win-color-fg-red" ng-if="isCsaThemesFlight">*<\/span>\r\n                    <input type="tel" class="form-control" name="number" placeholder="{{ callInfo.placeholder }}" aria-invalid="{{ callInfo.invalidNumber }}" aria-labelledby="phone-number-label"\r\n                           ng-class="{ \'newCallbackWidth\':isCsaThemesFlight }" ng-model="callInfo.number" ng-change="checkIfValidNumber()" ng-blur="getValidNumber()" maxlength="32" required/>\r\n                    <div class="alert alert-error" role="alert" aria-live="assertive" ng-show="callInfo.invalidNumber" ng-bind="callback.invalidPhoneNumber | compassFormat : { \'mask\': callInfo.placeholder }"><\/div>\r\n                <\/div>\r\n                <div class="form-group" ng-if="isScheduleCallback" ng-class="{ \'spacer-32-top\':isCsaThemesFlight }">\r\n                    <label>\r\n                        {{ callback.scheduleCallback.date }}\r\n                    <\/label>\r\n                    <select class="form-control" accessible-select aria-label="{{ callback.scheduleCallback.selectDateText }}" ng-model="callInfo.dateProperty"\r\n                            ng-class="{ \'newCallbackWidth\':isCsaThemesFlight }" ng-model-options="{ getterSetter: true }">\r\n                        <option ng-repeat="dateOption in callInfo.availableDates" value="{{ $index }}" aria-label="{{ dateOption | date:\'fullDate\' }}">{{ dateOption | date:\'fullDate\' }}<\/option>\r\n                    <\/select>\r\n                <\/div>\r\n                <div id="ScheduleCallTimeSlots" class="form-group" ng-if="isScheduleCallback" ng-class="{ \'spacer-32-top\':isCsaThemesFlight }">\r\n                    <label>\r\n                        {{ callback.scheduleCallback.timesAvailable }}\r\n                    <\/label>\r\n                    <div class="spinner-inline" loading-spinner ng-if="loadingTimes" data-delay="500" data-message="ScheduleCallbackTimesTimeout" data-size="small" data-type="bar"><\/div>\r\n                    <select class="form-control" accessible-select aria-label="{{ callback.scheduleCallback.selectTimeText }}" ng-disabled="callInfo.disableTimeSelect"\r\n                            ng-class="{ \'newCallbackWidth\':isCsaThemesFlight }" ng-model="callInfo.timeProperty" ng-model-options="{ getterSetter: true }">\r\n                        <option ng-repeat="time in callInfo.times" value="{{ $index }}" aria-label="{{ time.dateobject | timeslotDisplay }}">{{ time.dateobject | timeslotDisplay }}<\/option>\r\n                    <\/select>\r\n                <\/div>\r\n            <\/form>\r\n            <div ng-class="{\'text-right\': !isCsaThemesFlight, \'spacer-12-top\':isCsaThemesFlight }">\r\n                <button type="button" id="CAD-asap-call-confirm" class="btn btn-primary" ng-class="{\'disabled\' :disableConfirm() , \'spacer-32-top\':isCsaThemesFlight }" ng-click="requestCall($event)"\r\n                        ng-disabled="disableConfirm()">\r\n                    {{callback.confirmButton}}\r\n                <\/button>\r\n            <\/div>\r\n            <div class="spinner-container">\r\n                <div loading-spinner data-timeout="20000" data-delay="1000" data-message="EnterCallbackQueueTimeout" ng-if="awaitingResponse" class="loading-spinner"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Callback/Container.html",'<div class="spacer-32-top" ng-include="callInfo.templateUrl" ng-show="isReady"><\/div>\r\n\r\n<div class="spinner-container absolute-center" ng-if="!isReady">\r\n    <div loading-spinner data-timeout="{{ config.timeout }}" data-message="CallbackPageTimeout" class="loading-spinner"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Callback/Error.html",'<h2 class="text-title text-align-left header win-color-fg-primary" role="status" aria-live="polite" id="CallbackResult">\r\n    {{ callback.immediateCallback.immediateCall }}\r\n<\/h2>\r\n\r\n<div ng-switch on="callInfo.currentError">\r\n    <div ng-switch-when="doubleCallback">\r\n        {{ callback.errorCallback.doubleCallback }}\r\n    <\/div>\r\n    <div ng-switch-when="hoursOfOperation">\r\n        {{ callback.errorCallback.hoursOfOperation }}    \r\n    <\/div>\r\n    <div ng-switch-when="invalidPhoneNumber">\r\n        {{ callback.errorCallback.invalidPhoneNumber }}\r\n    <\/div>\r\n    <div ng-switch-default>\r\n        {{ callback.errorCallback.genericError }}\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Callback/Success.html",'<h2 class="text-title text-align-left header win-color-fg-primary" role="status" aria-live="polite" id="CallbackResult">\r\n    {{ callback.callbackSuccessTitle }}\r\n<\/h2>\r\n\r\n<div ng-if="!isScheduleCallback">\r\n    <div class="text-body" ng-bind-html="(callback.immediateCallback.success | compassFormat : {\r\n         phonenumber: callInfo.number \r\n    })">\r\n    <\/div>\r\n    <div class="text-body" ng-show="callInfo.waitTime === 1">\r\n        {{ callback.immediateCallback.waitEstimateSingular }}\r\n    <\/div>\r\n    <div class="text-body" ng-show="callInfo.waitTime !== 1">\r\n        {{ callback.immediateCallback.waitEstimate | compassFormat : { "wait-time": callInfo.waitTime } }}\r\n    <\/div>\r\n<\/div>\r\n\r\n<div class="text-body" \r\n     ng-if="isScheduleCallback" \r\n     ng-bind-html="(callback.scheduleCallback.success | compassFormat: { \r\n        phonenumber: callInfo.number,    \r\n        date: callInfo.displayDate, \r\n        time: callInfo.displayTime \r\n     })">\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/AgentHeader.html",'<div class="agent-header clearfix csa-chat-agent-header-margin">\r\n    <div class="person remove-all-padding" ng-show="agent.ImageUrl">\r\n        <img class="chat-agent-person-image" alt="{{ view.agentImageAlt }}" ng-src="{{ agent.ImageUrl }}" image-fallback="{{ view.agentDefaultImage.url }}" />\r\n    <\/div>\r\n    <div class="agent-info">\r\n        <p class="text-body">{{ agent.DisplayName || view.agentDisplayName }}<\/p>\r\n        <p ng-hide="isCsaThemesFlight" class="text-body agent-subheading">{{ view.answerTech }}<\/p>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ChatControl.html",'<!-- Chat control describes the behavior for the connecting and connected chat experience -->\r\n<div chat-connecting-progress class="initializing-chat remove-all-padding" ng-hide="chatWizard.chatInitialized"><\/div>\r\n\r\n<div chat-video><\/div>\r\n\r\n<div role="presentation" ng-include="\'/PartialViews/VirtualAgent.Library/Contact/Chat/Header.html\'" ng-show="chatWizard.chatInitialized"><\/div>\r\n\r\n<div id="chat-container" role="presentation" ng-show="chatWizard.chatInitialized">\r\n        <div message-window\r\n             data-messages="chatWizard.chatMessages"\r\n             data-is-client-reconnecting="chatWizard.showClientReconnectingMessage"\r\n             data-is-agent-reconnecting="chatWizard.showReconnectingMessage"\r\n             data-is-disconnected="chatWizard.showDisconnectMessage"\r\n             class="has-chat-input"\r\n             role="main"\r\n             ng-class="{\r\n            \'has-title-bar\': !isNative,\r\n            \'screenshare\': displayChatScreenShare && !sharingScreen,\r\n            \'screenshared\': displayChatScreenShare && sharingScreen,\r\n            \'overlay\': chatWizard.displayChatEndConfirmation || chatWizard.displayChatSurvey,\r\n         }"\r\n             auto-scroll-content\r\n             ng-attr-tabindex="{{ chatWizard.chatMessages.length > 0 ? \'0\' : \'-1\' }}">\r\n    <\/div>\r\n    <div class="virtual-agent-window">\r\n        <div class="va-input csa-chat-textbox-padding" ng-class="{\'remove-all-padding\': isNative }">\r\n            <div ng-class="{\'va-container-inapp\': isNative }" class="container">\r\n                <div class="typing-indicator text-caption" role="status" aria-live="polite" aria-atomic="true" ng-if="chatWizard.typingStatus.isAgentTyping"\r\n                     ng-bind="chat.chatting.typingIndication | compassFormat : { agent_name: chatWizard.agentInfo.DisplayName }">\r\n                <\/div>\r\n                <div class="va-input-container">\r\n                    <textarea ng-attr-id="{{config.chatTypingBoxId}}" class="text-body vatheme-input-border"\r\n                              ng-class="{\'native va-container-inapp\': isNative}" role="textbox"\r\n                              autofocus ng-attr-placeholder="{{!chatWizard.inputIsDisabled ? chat.chatting.inputField : \'\'}}"\r\n                              ng-model="chatWizard.chatInputBoxText"\r\n                              ng-keydown="($event.keyCode == 13 && !$event.shiftKey) && chatWizard.chatSubmitClick($event)"\r\n                              ng-keypress="sendTypingIndicator()"\r\n                              ng-disabled="chatWizard.inputIsDisabled"\r\n                              aria-label="{{chat.chatting.inputField}}"\r\n                              maxlength="{{config.MaxChatMsgChars}}"\r\n                              dir="auto"\r\n                              data-nolog />\r\n                    <span class="win-icon win-icon-Send text-title" ng-class="{\'vatheme-send-action-button-color\': userInput, \'win-color-fg-secondary\': !userInput}"\r\n                          ng-click="chatWizard.chatSubmitClick()" ng-disabled="chatWizard.submitDisabled" role="button" aria-label="{{chat.chatting.sendButton}}"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n\r\n<div ng-show="chatWizard.displayChatEndConfirmation">\r\n    <div ng-include="\'/PartialViews/VirtualAgent.Library/Contact/Chat/ChatEnded.html\'"><\/div>\r\n<\/div>\r\n\r\n<div ng-show="chatWizard.displayChatSurvey">\r\n    <div chat-survey data-visible="chatWizard.displayChatSurvey" data-chat="chatWizard.surveyData"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ChatEnded.html",'<section class="chat-overlay chat-ended vertically-center" role="dialog" aria-labelledby="user-ended-chat-title" aria-describedby="user-ended-chat-desc" focus-content data-name="endChatDialog" data-condition="{{chatWizard.displayChatEndConfirmation}}" tabindex="-1">\r\n    <div class="text-subtitle" id="user-ended-chat-title" role="presentation">{{ chat.survey.userEndedChat }}<\/div>\r\n    <div class="text-body" id="user-ended-chat-desc">{{ chat.survey.endChatQuestion }}<\/div>\r\n\r\n    <!-- Chat transcript -->\r\n    <div class="checkbox" ng-if="config.chatTranscriptEnabled">\r\n        <label>\r\n            <input type="checkbox" id="CAD-send-transcript" role="checkbox" ng-model="chatWizard.survey.sendTranscript"/>\r\n            <span>{{ chat.survey.sendTranscript }}<\/span>\r\n        <\/label>\r\n    <\/div>\r\n    <input class="form-control" type="email" name="email" role="textbox" alt="chatWizard.survey.transcriptEmailAlt" ng-model="chatWizard.survey.userEmail" ng-if="config.chatTranscriptEnabled" />\r\n\r\n    <div class="clearfix chat-end-controls">\r\n        <button class="btn btn-default" id="CAD-end-chat-continue" type="button" ng-click="backToChat()">{{ chat.survey.no }}<\/button>\r\n        <button class="btn btn-primary" id="CAD-end-chat-end" type="button" ng-click="userEndChat()">{{ chat.survey.yes }}<\/button>\r\n    <\/div>\r\n<\/section>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ChatQueue.html",'<div class="container">\r\n    <div class="row">\r\n        <div class="col-xs-22 col-xs-offset-1 min-padding">\r\n            <div class="text-align-center spacer-16-bottom">\r\n                <div class="text-base">{{ view.connecting }}<\/div>\r\n                <div class="text-caption" ng-show="positionInQueue" ng-bind="view.position | compassFormat : { \'position\': positionInQueue }"><\/div>\r\n            <\/div>\r\n            <div loading-spinner data-type="bar"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ChatSurvey.html",'<div>\r\n    <section class="chat-overlay chat-survey" role="dialog" aria-labelledby="{{ \'chat-survey-title-\' + surveyId }}" aria-describedby="{{ \'chat-survey-desc-\' + surveyId }}">\r\n        <div ng-if="displayChatSurvey">\r\n        <div class="section-header text-subtitle" id="{{ \'chat-survey-title-\' + surveyId }}" tabindex="-1" focus-content data-name="chat-survey-title" data-condition="{{ view && displayChatSurvey }}">\r\n            <h4 ng-bind="view.surveyTitle"><\/h4>\r\n        <\/div>\r\n\r\n        <form>\r\n            <div class="chat-survey-question" id="{{ \'chat-survey-question-1-\' + surveyId }}">\r\n                <fieldset>\r\n                    <legend id="{{ \'chat-survey-desc-\' + surveyId }}" class="text-body">{{ view.surveyText }}<\/legend>\r\n                    <div ng-if="!(view.multipleChoiceItems && view.multipleChoiceItems.length)" class="radio text-body">\r\n                        <label for="{{ \'CAD-chat-survey-yes-\' + surveyId }}">\r\n                            <input type="radio" id="{{ \'CAD-chat-survey-yes-\' + surveyId }}" name="survey-radio" ng-model="survey.userFeedback" value="true" tabindex="0" />\r\n                            <span>{{ view.yes }}<\/span>\r\n                        <\/label>\r\n                    <\/div>\r\n                    <div ng-if="!(view.multipleChoiceItems && view.multipleChoiceItems.length)" class="radio text-body">\r\n                        <label for="{{ \'CAD-chat-survey-no-\' + surveyId }}">\r\n                            <input type="radio" id="{{ \'CAD-chat-survey-no-\' + surveyId }}" name="survey-radio" ng-model="survey.userFeedback" value="false" tabindex="0" />\r\n                            <span>{{ view.no }}<\/span>\r\n                        <\/label>\r\n                    <\/div>\r\n\r\n                    <div ng-if="view.multipleChoiceItems && view.multipleChoiceItems.length" class="survey-radio text-body" ng-repeat="choice in view.multipleChoiceItems track by $index">\r\n                        <input type="radio" id="{{ \'CAD-chat-survey-choice-\' + ($index + 1) + \'-\' + surveyId }}" name="survey-radio" ng-model="survey.userChoice" value="{{ $index + 1 }}" />\r\n                        <label for="{{ \'CAD-chat-survey-choice-\' + ($index + 1) + \'-\' + surveyId }}" ng-bind-html="choice"><\/label>\r\n                    <\/div>           \r\n\r\n                <\/fieldset>\r\n            <\/div>\r\n            <fieldset ng-if="view.surveyRatingQuestion1">\r\n                <legend id="{{ \'CAD-chat-question-1-\' + surveyId }}" class="text-body">{{ view.surveyRatingQuestion1 }}<\/legend>\r\n                <div star-rating data-value="survey.question1" data-scales="view.question1Scales" data-name="{{ \'star-radio-1-\' + surveyId }}" data-view="view"><\/div>\r\n            <\/fieldset>\r\n\r\n            <fieldset ng-if="view.surveyRatingQuestion2">\r\n                <legend id="{{ \'CAD-chat-question-2-\' + surveyId }}" class="text-body">{{ view.surveyRatingQuestion2 }}<\/legend>\r\n                <div star-rating data-value="survey.question2" data-scales="view.question2Scales" data-name="{{ \'star-radio-2-\' + surveyId }}" data-view="view"><\/div>\r\n            <\/fieldset>\r\n        \r\n            <fieldset ng-if="view.surveyRatingQuestion3">\r\n                <legend id="{{ \'CAD-chat-question-3-\' + surveyId }}" class="text-body">{{ view.surveyRatingQuestion3 }}<\/legend>\r\n                <div star-rating data-value="survey.question3" data-scales="view.question3Scales" data-name="{{ \'star-radio-3-\' + surveyId }}" data-view="view"><\/div>\r\n            <\/fieldset>\r\n\r\n            <fieldset ng-if="view.surveyRatingQuestion4">\r\n                <legend id="{{ \'CAD-chat-question-4-\' + surveyId }}" class="text-body">{{ view.surveyRatingQuestion4 }}<\/legend>\r\n                <div star-rating data-value="survey.question4" data-scales="view.question4Scales" data-name="{{ \'star-radio-4-\' + surveyId }}" data-view="view"><\/div>\r\n            <\/fieldset>\r\n        \r\n            <div class="chat-survey-question form-group" ng-if="view.surveyFreeTextQuestion">\r\n                <label class="text-body spacer-12-bottom">\r\n                    {{ view.surveyFreeTextQuestion }}\r\n                    <textarea rows="3" class="form-control" id="{{ \'CAD-chat-text-question-\' + surveyId }}" name="survey-text" placeholder="{{ view.surveyTextPlaceholder }}" ng-model="survey.freeForm"><\/textarea>\r\n                <\/label>\r\n            <\/div>\r\n        <\/form>\r\n\r\n        <div>\r\n            <button class="btn btn-primary spacer-32-top" id="{{ \'CAD-chat-survey-submit-\' + surveyId }}" ng-click="submitSurvey()" ng-disabled="disableSend()">{{ view.submit }}<\/button>\r\n            <button class="btn btn-default spacer-32-top" id="{{ \'CAD-chat-survey-cancel-\' + surveyId }}" ng-click="closeSurvey(true)">{{ view.continueChat }}<\/button> <!-- Compass variable poorly named -->\r\n        <\/div>\r\n        <\/div>\r\n\r\n        <div ng-if="!displayChatSurvey">\r\n            <p class="text-base text-align-center remove-bottom-margin">{{ view.thanksFeedback }}<\/p>\r\n        <\/div>\r\n    <\/section>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ChatVideo.html",'<div class="chat-video" ng-show="isVideoEnabled" ng-class="{\'in-chat\': inChatWithAgent, \'watching-video\': isWatchingVideo, \'native\': isNative}">\r\n    <div class="expandable-video clearfix" ng-class="{ \'has-alert\': numMessagesReceived > 0 }" ng-click="toggleVideo()">\r\n        <div class="video-alerts clearfix">\r\n            <span ng-show="isWatchingVideo" class="win-icon win-icon-ChatBubbles video-icon"><\/span>\r\n            <span ng-hide="isWatchingVideo" class="win-icon win-icon-Play video-icon"><\/span>\r\n            <span ng-show="!isWatchingVideo">{{ view.continueWatching }}<\/span>\r\n            <span ng-show="isWatchingVideo && typingStatus.isAgentTyping">{{ view.typingIndication | compassFormat : { \'agent_name\': agent.DisplayName } }}<\/span>\r\n            <span ng-show="isWatchingVideo && !typingStatus.isAgentTyping && numMessagesReceived === 0">{{ view.continueChatting }}<\/span>\r\n            <span ng-show="isWatchingVideo && !typingStatus.isAgentTyping && numMessagesReceived > 0">{{ view.messageIndication | compassFormat : { \'numMessagesReceived\': numMessagesReceived } }}<\/span>\r\n            <span ng-hide="isWatchingVideo" class="win-icon win-icon-ChevronDown expand"><\/span>\r\n            <span ng-show="isWatchingVideo" class="win-icon win-icon-ChevronUp expand"><\/span>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="video-section">\r\n        <div class="video">\r\n            <div id="player"><\/div>\r\n            <div>{{ videoDescription }}<\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/Connecting.html",'<div ng-if="!isCsaThemesFlight">\r\n    <div id="chat-connecting-container" class="chat-connecting clearfix">\r\n        <h1 class="text-title header">\r\n            {{ chat.loading.pleaseWait }}\r\n        <\/h1>\r\n\r\n        <div loading-spinner data-type="bar"><\/div>\r\n\r\n        <div>\r\n            <p class="spacer-16-bottom" ng-hide="!positionStatus.position" aria-atomic="true" aria-live="polite" role="status" ng-bind="chat.loading.positionInLine | compassFormat : { \'position-progressed\': positionStatus.position }"><\/p>\r\n            <div ng-show="extendedWait">\r\n                <span>{{ chat.error.waitTooLong }}<\/span>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <button type="button" id="CAD-chat-waiting-cancel" class="btn btn-default pull-right" ng-show="chatWizard.showCancelButton" ng-click="chatWizard.cancelChat()" aria-label="{{ chat.cancelButton }}">{{ chat.cancelButton }}<\/button>\r\n        <div chatemulator><\/div>\r\n    <\/div>\r\n<\/div>\r\n\r\n<div ng-if="isCsaThemesFlight">\r\n    <div class="win-color-bg-20">\r\n        <div class="container">\r\n            <div class="row">\r\n                <div class="col-xs-24">\r\n                    <div id="chat-connecting-container" class="chat-connecting clearfix">\r\n                        <span loading-spinner size="small" data-timeout="30000" data-delay="2000" class="send-message-spinner csa-connecting-display"><\/span>\r\n                        <span class="text-body csa-connecting-agent">{{chat.connectingToAgent}}<\/span>\r\n                        <button id="CAD-chat-waiting-cancel" class="btn btn-link csa-connecting-cancel" ng-show="chatWizard.showCancelButton" ng-click="chatWizard.cancelChat()" aria-label="{{ chat.cancelButton }}">{{ chat.cancelButton }}<\/button>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="container">\r\n        <div class="row">\r\n            <div class="col-xs-24">\r\n                <div id="chat-connecting-container" class="chat-connecting clearfix">\r\n                    <div>\r\n                        <div ng-show="extendedWait" class="text-caption spacer-12-top spacer-16-bottom">\r\n                            <span>{{ chat.error.waitTooLong }}<\/span>\r\n                        <\/div>\r\n                        <div class="position-status-text" ng-if="!isVideoEnabled">\r\n                            <p ng-hide="!positionStatus.position" aria-atomic="true" aria-live="polite" role="status"\r\n                               ng-bind="chat.loading.positionInLine | compassFormat : { \'position-progressed\': \'\' }"><\/p>\r\n                            <div class="win-color-fg-blue text-header spacer-12-top">{{positionStatus.position}}<\/div>\r\n                        <\/div>\r\n                        <div ng-if="isVideoEnabled" class="spacer-12-top spacer-16-bottom text-left">\r\n                            <p ng-hide="!positionStatus.position" aria-atomic="true" aria-live="polite" role="status" class="text-caption csa-connecting-display"\r\n                               ng-bind="chat.loading.positionInLine | compassFormat : { \'position-progressed\': \'\' }"><\/p>\r\n                            <p class="text-base csa-connecting-display">{{positionStatus.position}}<\/p>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div chatemulator><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ConnectionFailed.html",'<div id="connection-failed">\r\n    <p>{{ chat.error.genericError }}<\/p>\r\n    <input id="CAD-chat-try-again" type="button" class="btn btn-primary" ng-click="chatWizard.resetChat()" ng-value="chat.error.tryAgainButton" />\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/Container.html",'<div role="presentation" class="chat" ng-show="isReady">\r\n    <div ng-include="chatWizard.templateUrl"><\/div>\r\n<\/div>\r\n\r\n<div class="spinner-container absolute-center" ng-if="!isReady">\r\n    <div loading-spinner data-timeout="{{ config.timeout }}" data-message="ChatPageTimeout" class="loading-spinner"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/Emulator.html",'<button id="chat-emulator-button" ng-controller="ChatEmulatorController" type="button" class="btn btn-default" ng-click="chatEmulate();" ng-hide="emulatorHidden">\r\n    Emulate Chat Response\r\n<\/button>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/Header.html",'<div role="presentation" class="chat-header remove-all-padding" ng-class="{\r\n         \'has-title-bar\' : !isNative,\r\n         \'screenshare\': displayChatScreenShare && !sharingScreen,\r\n         \'screenshared\': displayChatScreenShare && sharingScreen,\r\n         \'overlay\': chatWizard.displayChatEndConfirmation || chatWizard.displayChatSurvey,\r\n         \'win-color-bg-20\': isCsaThemesFlight\r\n     }">\r\n    <div class="clearfix container">\r\n        <div agent-header data-agent="chatWizard.agentInfo" class="pull-left"><\/div>\r\n        <div class="end-button-group pull-right">\r\n            <button class="btn btn-link chat-end-button win-color-bg-20" ng-click="showEndConfirmation()"  aria-label="{{chat.survey.endChat}}" title="{{chat.survey.endChat}}" ng-disabled="chatWizard.chatEnded">{{ chat.survey.endChat }}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n    <!-- Screensharing - Inprod only -->\r\n    <div ng-if="isNative && config.chatScreenShareEnabled">\r\n        <div chatscreenshare><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/MessageAnimation.html",'<div class="message-animation">\r\n    <div class="dot" ng-style="$ctrl.dot1Style"><\/div>\r\n    <div class="dot" ng-style="$ctrl.dot2Style"><\/div>\r\n    <div class="dot" ng-style="$ctrl.dot3Style"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/MessageWindow.html",'<div class="message-window">\r\n    <div class="container">\r\n        <div class="chat-message-container" ng-repeat="message in messages track by $index">\r\n            <div class="win-icon chat-bubble agent-chat-bubble" ng-if="message.chatSender === senderTypes.Agent"><\/div>\r\n            <div role="presentation"\r\n                 ng-class="{\r\n                         \'agent-message\': isMessageType(message, senderTypes.Agent),\r\n                         \'user-message\': isMessageType(message, senderTypes.User),\r\n                         \'system-message\': isMessageType(message, senderTypes.SystemInfo) || isMessageType(message, senderTypes.SystemError)\r\n                     }"\r\n                 class="chat-message text-body"\r\n                 ng-attr-aria-live="{{ isMessageType(message, senderTypes.User) ? \'off\' : \'polite\' }}">\r\n                <span class="sr-only" ng-bind="message.senderName"><\/span>\r\n                <div class="message-body"><bdi ng-bind-html="message.text | linkify"><\/bdi><\/div>\r\n                <div class="text-body message-time" ng-bind="message.timeStamp | date: \'shortTime\' | lowercase"><\/div>\r\n            <\/div>\r\n            <div class="win-icon chat-bubble user-chat-bubble" ng-if="message.chatSender === senderTypes.User"><\/div>\r\n        <\/div>\r\n\r\n        <div class="system-message chat-message" ng-if="isClientReconnecting || isAgentReconnecting">\r\n            <div class="reconnecting-chat-message-body" ng-show="isAgentReconnecting">\r\n                <div class="text-body message-body">\r\n                    {{ reconnectingAgent}}\r\n                <\/div>\r\n            <\/div>\r\n            <div class="system-message chat-message" ng-show="isClientReconnecting">\r\n                <div class="text-body message-body">\r\n                    {{ reconnectingClient }}\r\n                <\/div>\r\n            <\/div>\r\n            <div loading-spinner data-type="bar"><\/div>\r\n        <\/div>\r\n        <div class="system-message chat-message" ng-if="isDisconnected">\r\n            <div class="text-body message-body">\r\n                {{ disconnected }}\r\n            <\/div>\r\n            <a id="CAD-error-tryagain-chat" class="text-body message-body" href="" aria-label="{{ tryAgain }}" ng-click="retry()">{{ tryAgain }}<\/a>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Chat/ScreenShare.html",'<div class="screenshare-container" ng-class="{ \'screenshared\': sharingScreen }" ng-show="displayChatScreenShare">\r\n\r\n    <div loading-spinner data-delay="500" data-type="bar" ng-show="waitingForResponse" class="progress-bar-top"><\/div>\r\n\r\n    <div ng-hide="sharingScreen">\r\n        <span>\r\n            {{ chat.chatting.screenShareRequest | compassFormat : { agent_name: chatWizard.agentInfo.DisplayName } }}\r\n        <\/span>\r\n        <br />\r\n        <span class="text-body">\r\n            {{ chat.chatting.screenPrivacy }}\r\n        <\/span>\r\n    <\/div>\r\n\r\n    <div ng-show="sharingScreen">\r\n        <span ng-show="reconnecting">{{ chat.chatting.reconnectingMessage }}<\/span>\r\n        <span ng-show="!screenSharePaused && !reconnecting">{{ chat.chatting.screenShared }}<\/span>\r\n        <span ng-show="screenSharePaused && !reconnecting"> {{ chat.chatting.screenPaused }}<\/span>\r\n    <\/div>\r\n\r\n    <div class="screenshare-buttons">\r\n        <div ng-hide="sharingScreen" class="agent-request-buttons clearfix">\r\n            <button id="CAD-chat-screensharing-grant-control" class="btn btn-primary pull-left" type="button" ng-disabled="waitingForResponse" ng-click="grantScreenShare()">{{ chat.chatting.giveControl }}<\/button>\r\n            <button id="CAD-chat-screensharing-deny-control" class="btn btn-default pull-left" type="button" ng-click="denyScreenShare()">{{ chat.chatting.noControl }}<\/button>\r\n        <\/div>\r\n\r\n        <div ng-if="config.userPauseResumeEnabled" ng-show="sharingScreen" class="clearfix">\r\n            <button id="CAD-chat-screensharing-pause-control" class="btn btn-default pull-right" type="button" ng-hide="screenSharePaused" ng-disabled="waitingForResponse" ng-click="toggleScreenShare()">{{ chat.chatting.pauseScreen }}<\/button>\r\n            <button id="CAD-chat-screensharing-resume-control" class="btn btn-default pull-right" type="button" ng-show="screenSharePaused" ng-disabled="waitingForResponse" ng-click="toggleScreenShare()">{{ chat.chatting.resumeScreen }}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/AgentInfo.html",'<div class="container">\r\n    <div class="row">\r\n        <div class="col-xs-18 col-xs-offset-3">\r\n            <img class="person person-graphic person-small pull-left" alt="{{ $ctrl.view.agentImageAlt }}" ng-src="{{ $ctrl.agentClone.ImageUrl }}" image-fallback="{{ $ctrl.view.agentDefaultImage }}" />\r\n            <div class="spacer-12-top">\r\n                <p class="text-body remove-bottom-margin">\r\n                    <span class="text-base" ng-if="$ctrl.isJoining">{{ $ctrl.view.agentJoined | compassFormat : { \'agent-name\': $ctrl.agentClone.DisplayName || $ctrl.view.agentDisplayName } }}<\/span>\r\n                    <span class="text-base" ng-if="!$ctrl.isJoining">{{ $ctrl.view.agentLeft | compassFormat : { \'agent-name\': $ctrl.agentClone.DisplayName || $ctrl.view.agentDisplayName } }}<\/span>\r\n                <\/p>\r\n                <p class="text-caption remove-bottom-margin">{{ $ctrl.view.answerTech }}<\/p>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/AgentTransfer.html",'<div class="container">\r\n    <div class="row">\r\n        <div class="col-xs-18 col-xs-offset-3 clearfix">\r\n            <img class="person person-graphic person-small pull-left" alt="{{ $ctrl.view.agentImageAlt }}" ng-src="{{ $ctrl.oldAgentClone.ImageUrl }}" image-fallback="{{ $ctrl.view.agentDefaultImage }}" />\r\n            <img class="person person-small pull-left" alt="{{ $ctrl.view.transferImageAlt }}" src="https://compass-ssl.microsoft.com/assets/2e/55/2e552ecb-ef41-4d63-bdcf-ec380bce28d9.svg?n=agent_transfer_icon.svg" />\r\n            <img class="person person-graphic person-small pull-left" alt="{{ $ctrl.view.agentImageAlt }}" ng-src="{{ $ctrl.newAgentClone.ImageUrl }}" image-fallback="{{ $ctrl.view.agentDefaultImage }}" />\r\n            <div class="pull-left spacer-12-top">\r\n                <p class="text-base remove-bottom-margin">\r\n                    {{ $ctrl.view.agentTransfer | compassFormat : { \'agent-name\': $ctrl.newAgentClone.DisplayName || $ctrl.view.agentDisplayName } }}\r\n                <\/p>\r\n                <p class="text-caption remove-bottom-margin">{{ $ctrl.view.answerTech }}<\/p>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/Card.html",'<div class="card win-color-bg-10 vatheme-card">\r\n    <h2 class="card-header text-base text-base vatheme-card-header" ng-if="header">\r\n        <span id="card-header">{{header}}<\/span>\r\n        <span id="card-cancel-button" ng-if="showCancel" ng-click="cancelAction()" class="card-header-cancel pull-right">{{ cancelText }}<\/span>\r\n    <\/h2>\r\n    <div class="card-content">\r\n        <ng-transclude />\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/CommonMessage.html",'<div ng-class="[{\'text-align-right\': $ctrl.isMessageType($ctrl.messageTypes.User)}, $ctrl.message.customClass]">\r\n    <div class="message-text bubble-content" ng-class="[{\r\n        \'bubble-right\': $ctrl.isMessageType($ctrl.messageTypes.User),\r\n        \'vatheme-agent-message-text agent-message-text\': $ctrl.isMessageType($ctrl.messageTypes.Agent),\r\n        \'vatheme-virtual-agent-message-text virtual-agent-message-text\': $ctrl.isMessageType($ctrl.messageTypes.VirtualAgent),\r\n        \'vatheme-user-message-text user-message-text\': $ctrl.isMessageType($ctrl.messageTypes.User),\r\n        \'vatheme-system-error-text system-error-text\': $ctrl.isMessageType($ctrl.messageTypes.SystemError),\r\n        \'vatheme-system-info-text system-info-text\': $ctrl.isMessageType($ctrl.messageTypes.SystemInfo),\r\n        \'remove-bottom-padding\': $ctrl.message.slots && $ctrl.message.slots.length > 0\r\n    }]">\r\n        <div class="text-align-left" ng-if="$ctrl.message.fragments">\r\n            <span ng-repeat="fragment in $ctrl.message.fragments">\r\n                <span ng-if="!fragment.action" ng-bind-html="fragment.text"><\/span>\r\n                <button id="{{fragment.id}}" class="btn-link btn-link-inline vatheme-message-text-link" ng-click="fragment.action()" ng-if="fragment.action && !fragment.actionIsUrl" ng-bind-html="fragment.text" ng-disabled="$ctrl.message.actionDisabled"><\/button>\r\n                <a id="{{fragment.id}}" ng-if="fragment.action && fragment.actionIsUrl" ng-bind-html="fragment.text" ng-href="{{fragment.action}}" target="smccontent"><\/a>\r\n            <\/span>\r\n        <\/div>\r\n        <div class="text-align-left" ng-style="$ctrl.messageTextStyle" ng-if="$ctrl.message.text" ng-bind-html="$ctrl.message.text | linkify"><\/div>\r\n        <message-slots ng-if="$ctrl.message.slots && $ctrl.message.slots.length > 0"\r\n                       data-slots="$ctrl.message.slots"\r\n                       data-view="$ctrl.message.slotView"\r\n                       data-hide-slots="$ctrl.slotsHidden"\r\n                       data-on-slot-click="$ctrl.onSlotClick(slot)"\r\n                       data-list-slots-cutoff="$ctrl.message.listSlotsCutoff"\r\n                       data-slot-id-suffix="$ctrl.message.slotIdSuffix">\r\n        <\/message-slots>\r\n        <div class="message-error" ng-if="!$ctrl.message.reachedDestination">{{ $ctrl.message.errorView }}<\/div>\r\n        <div class="message-button-container" ng-if="$ctrl.message.actionText && $ctrl.message.action">\r\n            <button id="message-action" class="message-button btn btn-primary remove-top-margin remove-bottom-margin vatheme-message-button" ng-if="!$ctrl.message.actionIsUrl" ng-click="$ctrl.message.action()" ng-disabled="$ctrl.message.actionDisabled">\r\n                {{ $ctrl.message.actionText }}\r\n            <\/button>\r\n            <a id="message-action" class="message-button btn btn-primary remove-top-margin remove-bottom-margin vatheme-message-button" ng-if="$ctrl.message.actionIsUrl" ng-href="{{$ctrl.message.action}}" target="smccontent">\r\n                {{ $ctrl.message.actionText }}\r\n            <\/a>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/Message.html",'<div aria-atomic="true" ng-attr-aria-live="{{ ($ctrl.message.messageType === $ctrl.messageTypes.User) ? \'off\' : \'polite\' }}" class="message spacer-32-top"\r\n     ng-show="$ctrl.message.isVisible"\r\n     ng-style="$ctrl.messageStyle">\r\n\r\n    <!-- Message Loading Types -->\r\n    <div ng-if="$ctrl.message.loadingType" ng-class="[$ctrl.message.customClass]">\r\n        <div ng-if="$ctrl.message.loadingType === \'spinner\'" loading-spinner aria-label="{{$ctrl.loadingText}}" class="content-spinner" data-size="small"><\/div>\r\n        <message-animation aria-label="{{$ctrl.loadingText}}" ng-class="[{\r\n            \'text-align-right\': $ctrl.isMessageType($ctrl.messageTypes.User),\r\n            \'message-text bubble-content\': $ctrl.isMessageType([$ctrl.messageTypes.Agent, $ctrl.messageTypes.VirtualAgent, $ctrl.messageTypes.User, $ctrl.messageTypes.SystemInfo, $ctrl.messageTypes.SystemError]),\r\n            \'vatheme-agent-message-text agent-message-text\': $ctrl.isMessageType($ctrl.messageTypes.Agent),\r\n            \'vatheme-virtual-agent-message-text virtual-agent-message-text\': $ctrl.isMessageType($ctrl.messageTypes.VirtualAgent),\r\n            \'vatheme-user-message-text user-message-text\': $ctrl.isMessageType($ctrl.messageTypes.User),\r\n            \'vatheme-system-error-text system-error-text\': $ctrl.isMessageType($ctrl.messageTypes.SystemError),\r\n            \'vatheme-system-info-text system-info-text\': $ctrl.isMessageType($ctrl.messageTypes.SystemInfo)\r\n        }]" ng-if="$ctrl.message.loadingType === \'message\'"><\/message-animation>\r\n    <\/div>\r\n\r\n    <div class="message-content" ng-switch on="$ctrl.message.messageType" ng-if="!$ctrl.message.loadingType">\r\n        <!-- InstantAnswer -->\r\n        <div ng-switch-when="5">\r\n            <div card data-header="$ctrl.message.instantAnswer.problem.name || $ctrl.message.header">\r\n                <div instant-answer="$ctrl.message.instantAnswer" data-view="$ctrl.message.view" data-target="\'smccontent\'" data-max-height="$ctrl.message.maxHeight" data-has-survey="$ctrl.message.hasSurvey" data-has-feedback="$ctrl.message.hasFeedback" data-feedback-action="$ctrl.message.feedbackAction && $ctrl.message.feedbackAction(feedback, id)"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <!--- Results -->\r\n        <div ng-switch-when="6">\r\n            <div card data-header="$ctrl.message.header" class="spacer-20-bottom">\r\n                <div search-result="result" data-id="\'virtual-agent-\' + $parent.$index + \'-\' + $index" data-size="\'small\'" data-focus-index="$ctrl.focusIndex" data-showLink="false" data-target="\'smccontent\'" ng-repeat="result in $ctrl.message.results | limitTo: $ctrl.message.showMore ? 8 : 3"><\/div>\r\n                <div class="spacer-20-bottom" ng-show="$ctrl.message.results.length > 3">\r\n                    <a id="virtual-agent-less-results" href="#" ng-show="$ctrl.message.showMore" ng-click="$ctrl.showMoreOrLess(0)">{{$ctrl.message.view.showLess}} <span class="win-icon win-icon-ChevronUp"><\/span><\/a>\r\n                    <a id="virtual-agent-more-results" href="#" ng-show="!$ctrl.message.showMore" ng-click="$ctrl.showMoreOrLess(3)">{{$ctrl.message.view.showMore}} <span class="win-icon win-icon-ChevronDown"><\/span><\/a>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <!-- Modalities -->\r\n        <div ng-switch-when="7">\r\n            <div virtual-agent-modality data-message="$ctrl.message" data-view="$ctrl.message.view" data-modality-action="$ctrl.message.modalityAction(config, type)"><\/div>\r\n        <\/div>\r\n        <!-- Agent End -->\r\n        <div ng-switch-when="8">\r\n            <div card data-header="$ctrl.message.header">\r\n                <agent-info data-agent="$ctrl.message.agent" data-view="$ctrl.message.view" data-is-joining="$ctrl.message.isJoining"><\/agent-info>\r\n            <\/div>\r\n        <\/div>\r\n        <!-- Survey -->\r\n        <div ng-switch-when="9">\r\n            <div card data-header="$ctrl.message.header">\r\n                <div class="support-survey" chat-survey data-chat="$ctrl.message.surveyData" data-submit-action="$ctrl.message.surveyAction()" data-cancel-action="$ctrl.message.surveyAction()"\r\n                     data-view="$ctrl.message.view" data-visible="true"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <!-- Transfer -->\r\n        <div ng-switch-when="10">\r\n            <div card data-header="$ctrl.message.header">\r\n                <agent-transfer data-view="$ctrl.message.view" data-old-agent="$ctrl.message.oldAgent" data-new-agent="$ctrl.message.newAgent"><\/agent-transfer>\r\n            <\/div>\r\n        <\/div>\r\n        <!-- Message -->\r\n        <div ng-switch-default>\r\n            <common-message data-message="$ctrl.message"><\/common-message>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/Common/MessageSlots.html",'<div class="message-slots text-body" ng-class="{ \'message-slot-slideup\': $ctrl.slotSlideUp }" ng-if="$ctrl.numSlots > 0">\r\n    <!--List Options-->\r\n    <div ng-if="$ctrl.numSlots <= $ctrl.listSlotsCutoff" class="slot-list-container">\r\n        <a class="slot-list-option btn-link text-align-left" ng-if="slot.externalLink" ng-href="{{slot.externalLink}}" target="_blank" ng-click="$ctrl.slotSelected(slot)" ng-attr-id="{{\'slot-list-option-\' + ($ctrl.slotIdSuffix ? $ctrl.slotIdSuffix + \'-\' + $index : $index)}}" ng-repeat="slot in $ctrl.slots track by $index">\r\n            {{ slot.displayText }}\r\n        <\/a>\r\n        <button class="slot-list-option btn-link btn-link-inline text-align-left" ng-if="!slot.externalLink" ng-click="$ctrl.slotSelected(slot)" ng-attr-id="{{\'slot-list-option-\' + ($ctrl.slotIdSuffix ? $ctrl.slotIdSuffix + \'-\' + $index : $index)}}" ng-repeat="slot in $ctrl.slots track by $index">\r\n            {{ slot.displayText }}\r\n        <\/button>\r\n    <\/div>\r\n\r\n    <!--Dropdown-->\r\n    <div ng-if="$ctrl.numSlots > $ctrl.listSlotsCutoff" class="slot-dropdown-container">\r\n        <select accessible-select class="slot-dropdown-option" select-onchange="$ctrl.slotSelected($ctrl.selected.slot)" ng-options="slot.displayText for slot in $ctrl.slots" ng-model="$ctrl.selected.slot"  >\r\n            <option value="" disabled selected>{{ $ctrl.view.dropDownPlaceholder }}<\/option>\r\n        <\/select>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/Header.html",'<div ng-class="{ \'virtual-agent-nativeapp-frame-header\':isVirtualAgent && isNative }" class="frame-header vatheme-header" ng-controller="ContactFrameController">\r\n    <div style="float: left; width: 100%;">\r\n        <div class="container">\r\n            <div class="row">\r\n                <div class="col-xs-24">\r\n                    <div class="pull-left">\r\n                        <div class="win-icon vertically-center" ng-show="showIcon" aria-hidden="true">\r\n                            {{ icon | icon }}\r\n                        <\/div>\r\n                        <button id="cad-back" class="win-icon vertically-center back-button" ng-class="{ \'win-icon-Back\': !isRTL, \'win-icon-Forward\': isRTL }" ng-show="showBackButton"\r\n                                ng-click="backClick()" aria-label="{{ backText }}"><\/button>\r\n\r\n                        <!--Used for the header in the Virtual Agent Experience-->\r\n                        <div ng-if="headerImage" class="header-image" ng-class="{ \'header-image-spaced-for-icon\': showBackButton }">\r\n                            <img class="person person-graphic" ng-src="{{headerImage.url}}" />\r\n                        <\/div>\r\n                        <h1 class="text-body title text-maxlines-1 vatheme-header-title">\r\n                            {{ headerText || contactHeader }}\r\n                        <\/h1>\r\n                    <\/div>\r\n                    <div class="header-buttons text-body pull-right">\r\n                        <button id="cad-end-chat" ng-class="{\'end-chat win-color-fg-primary color-alt btn-link clickable\' : !isNative, \'clickable virtual-agent-nativeapp-frame-header\': isVirtualAgent && isNative}" ng-if="showEndChat" ng-click="endChat()">{{ endText }}<\/button>\r\n                        <button id="cad-start-over" class="btn-link clickable" ng-class="{\'win-color-fg-primary color-alt\' : !isNative, \'virtual-agent-nativeapp-frame-header\' : isVirtualAgent && isNative }" ng-if="showReset && !showEndChat" ng-click="startOver()">{{resetLabel}}<\/button>\r\n                        <button id="cad-header-survey" class="survey-btn btn-link clickable" ng-if="survey.visible" ng-click="requestSurvey()" title="{{survey.label}}" aria-label="{{survey.label}}">\r\n                            <img ng-src="{{survey.icon.url}}" alt="{{survey.label}}" tabindex="0" />\r\n                        <\/button>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/HoursOfOperation/HoursOfOperation.html",'<div class="container spacer-32-top" id="hoops-container" ng-show="isReady">\r\n    <div class="text-title header">\r\n        {{hoursOfOperation.title}}\r\n    <\/div>\r\n\r\n    <div class="text-body">{{ hoursOfOperation.unavailable }} {{ hoopsSchedule.length > 0 ? hoursOfOperation.intro : "" }}<\/div>\r\n    \r\n    <ul>\r\n        <li class="text-body" ng-repeat="time in hoopsSchedule">\r\n            {{ time.days.join(\'-\') }}: {{ time.shifts.length > 0 ? time.shifts.join(\', \') : hoursOfOperation.closed }}\r\n        <\/li>\r\n    <\/ul>\r\n    <div menu-options class="spacer-32-top" ng-if="options && options.length > 0"\r\n         data-options="options"\r\n         data-has-modality="true"><\/div>\r\n\r\n    <div class="text-caption-alt">{{ hoursOfOperation.subCaption }}<\/div>\r\n<\/div>\r\n\r\n<div class="spinner-container absolute-center" ng-if="!isReady">\r\n    <div loading-spinner data-timeout="{{ config.timeout }}" data-message="HoopsMenuPageTimeout" class="loading-spinner"><\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Contact/RatPhone/Passcode.html",'<div class="passcode" ng-if="!hasValidPasscode">\r\n    <div class="header-wrapper" ng-class="{\'landing-page-header\' : false }">\r\n        <div class="text-title header" id="menu-page-header" tabindex="-1" focus-content data-name="menu-page-header">{{ view.header }}<\/div>\r\n    <\/div>\r\n\r\n    <div class="text-body">\r\n        {{ view.prompt }}\r\n    <\/div>\r\n\r\n    <div class="form-group clearfix ng-class="{ has-error: hasError }">\r\n        <input type="text" class="col-md-24" ng-model="code" ng-change="resetError()" maxlength="{{ config.passcodeLength }}" ng-keydown="$event.keyCode === 13 && isValid(code) && sendCode(code)" placeholder="{{ view.placeholder }}" />\r\n        <span ng-show="hasError" class="alert alert-error">{{ view.invalidPasscode }}<\/span>\r\n    <\/div>\r\n\r\n    <div class="passcode-submit clearfix">\r\n        <button class="btn btn-default pull-right" id="CAD-passcode-submit" ng-click="sendCode(code)" ng-disabled="!isValid(code)">{{ view.submit }}<\/button>\r\n        <div loading-spinner class="pull-right" ng-if="waitingForResponse"><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/RatPhone/PhoneScreenShare.html",'<div class="rat-phone">\r\n    <div ng-show="isReady">\r\n        <div passcode data-view="content" data-passcode-success="PasscodeSuccess" data-passcode-failure="PasscodeFailure"><\/div>\r\n        <div ng-show="hasValidPasscode && !waitingOnAgent && !failedConnect">\r\n            <div agent-header data-agent="agentInfo"><\/div>\r\n            <div ng-if="isNative && config.chatScreenShareEnabled">\r\n                <div chatscreenshare><\/div>\r\n            <\/div>\r\n            <div message-window\r\n                 data-messages="messages"\r\n                 data-is-client-reconnecting="showClientReconnectingMessage"\r\n                 data-is-agent-reconnecting="showReconnectingMessage"\r\n                 data-is-disconnected="showDisconnectMessage"\r\n                 ng-class="{\r\n                    \'has-title-bar\': !isNative,\r\n                    \'screenshare\': displayChatScreenShare && !sharingScreen,\r\n                    \'screenshared\': displayChatScreenShare && sharingScreen\r\n                 }"\r\n                 auto-scroll-content>\r\n            <\/div>\r\n        <\/div>\r\n        <div ng-show="hasValidPasscode && waitingOnAgent && !failedConnect">\r\n            <div class="text-title header">{{ content.connecting }}<\/div>\r\n            <div loading-spinner data-type="bar"><\/div>\r\n        <\/div>\r\n        <div ng-show="failedConnect">\r\n            <div class="text-title header">{{ content.failConnectHeader }}<\/div>\r\n            <div class="text-body">{{ content.failConnect }}<\/div>\r\n            <div class="btn-group">\r\n                <button class="btn btn-primary" ng-click="connectToAgent(agent)">{{ content.retry }}<\/button>\r\n                <button class="btn" ng-click="cancel()">{{ content.cancel }}<\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="spinner-container absolute-center" ng-if="!isReady">\r\n        <div loading-spinner data-timeout="{{ config.timeout }}" data-message="RATPhonePageTimeout" class="loading-spinner"><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/SupportMenu/Container.html",'<div ng-include="\'/PartialViews/VirtualAgent.Library/Contact/SupportMenu/Menu.html\'" ng-show="isReady && !isEnterprise" class="contact-menu-container"><\/div>\r\n<div ng-include="\'/PartialViews/VirtualAgent.Library/Contact/SupportMenu/Enterprise.html\'" ng-show="isReady && isEnterprise" class="contact-menu-container"><\/div>\r\n<div class="spinner-container absolute-center" ng-if="!isReady">\r\n    <div loading-spinner data-timeout="{{ config.timeout }}" data-message="SupportMenuPageTimeout" class="loading-spinner"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/SupportMenu/Enterprise.html",'<div ng-if="isCSAEnterpriseFlight">\r\n    <div class="ms-contactus container">\r\n        <div class="contactus-collection">\r\n            <div class="contactus-banner win-color-bg-0">\r\n                <div class="contactus-banner-text spacer-32-bottom productslist-width">\r\n                    <div class="text-header"><\/div>\r\n                    <img class="imageStyleCSA img-responsive contactus-banner-img-small" ng-src="{{ contactUsView.newLandingImage.url }}" />\r\n                    <div class="text-subheader spacer-12-bottom productslist-max-width">{{ contactUsView.enterpriseAppTitle}}<\/div>\r\n                <\/div>\r\n                <img class="img-responsive contactus-banner-img" ng-src="{{ contactUsView.newLandingImage.url }}" />\r\n            <\/div>\r\n\r\n            <div class="container">\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.premierSupportLink.link.linkUrl }}" target="_blank" id="contactus-business-it-dev-link" class="text-body">{{ contactUsView.premierSupportLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.premierSupportLink.description }}<\/div>\r\n                <\/div>\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.developersLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.developersLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.developersLink.description }}<\/div>\r\n                <\/div>\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.partnersSupportLink.link.linkUrl }}" target="_blank" id="contactus-ms-store-link" class="text-body">{{ contactUsView.partnersSupportLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.partnersSupportLink.description }}<\/div>\r\n                <\/div>\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.technicalSupportLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.technicalSupportLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.technicalSupportLink.description }}<\/div>\r\n                <\/div>\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.smallBusinessLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.smallBusinessLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.smallBusinessLink.description }}<\/div>\r\n                <\/div>\r\n                <div class="enterprise-sku-width link-group">\r\n                    <a href="{{ contactUsView.volumeLicensingLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.volumeLicensingLink.link.linkText }}<\/a>\r\n                    <div class="text-caption csa-contact-link-description">{{ contactUsView.volumeLicensingLink.description }}<\/div>\r\n                <\/div>\r\n            <\/div>\r\n           \r\n        <\/div>\r\n    <\/div>\r\n    <div class="contactus-link-farm spacer-32-top text-center remove-bottom-padding remove-all-margin">\r\n        <div class="marginBottomFixed">\r\n            <div class="link-group showEnterpriseInApp csa-contact-link-farm-styles">\r\n                <a href="{{ contactUsView.accessibilityHelpLink.link.linkUrl }}" target="_blank" id="contactus-disability-desk-link" class="text-body">{{ contactUsView.accessibilityHelpLink.link.linkText }}<\/a>\r\n                <div class="text-body link-description remove-top-margin csa-contact-link-farm-description">{{ contactUsView.accessibilityHelpLink.description }}<\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n\r\n<div ng-if="!isCSAEnterpriseFlight">\r\n    <div id="{{menuWizard.page.link}}" ng-class="{ \'menu-modality\' : menuWizard.page.hasModality }">\r\n        <div class="header-wrapper" ng-class="{\'landing-page-header\' : isLandingPage}">\r\n            <h1 class="text-title header" id="menu-page-header" tabindex="-1" focus-content data-name="menu-page-header" data-condition="{{ isReady }}" ng-bind="menuWizard.page.header"><\/h1>\r\n        <\/div>\r\n\r\n        <ul class="menu-options" aria-label="{{ menuWizard.page.header }}" role="list" id="menu-options" ng-if="!menuWizard.page.hasModality" arrow-nav>\r\n            <li id="{{ getLinkId(link) }}" class="menu-item" role="listitem" tabindex="{{ link.clickableLink ? 0 : -1 }}" ng-if="link.link.linkText"\r\n                ng-click="followLink(link)" ng-repeat="link in menuWizard.page.links track by $index" ng-class="link.clickableLink ? \'clickable\' : \'\'">\r\n                <div role="link">\r\n                    <span class="win-icon" aria-hidden="true" ng-if="link.icon">{{link.icon | icon}}<\/span>\r\n                    <div class="content">\r\n                        <div>{{ link.link.linkText }}<\/div>\r\n                        <div class="menu-description text-body" ng-class="{\'with-icon\' : link.icon}" ng-if="link.description" ng-bind="link.description"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/li>\r\n        <\/ul>\r\n\r\n        <div ng-if="menuWizard.page.hasModality" sup-modality data-links="menuWizard.page.links" data-old-flow="true" data-fallback-url="/contact/menu/"><\/div>\r\n    <\/div>\r\n\r\n    <div class="terms-of-service text-body" ng-show="menuWizard.page.hasModality">\r\n        {{ menuWizard.serviceAgreement }}\r\n        <a id="CAD-service-agreement" ng-click="openServiceAgreement()" href="">{{ menuWizard.serviceAgreementLink.linkText }}<\/a>\r\n    <\/div>\r\n\r\n    <div ng-if="config.inRatPhoneFlight && isLandingPage && isNative && !isMobile" menu-extras data-extras="menuWizard.menuExtras.extras" data-icon="menuWizard.menuExtras.icon"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/SupportMenu/Menu.html",'<div id="{{menuWizard.page.link}}" ng-class="{ \'menu-modality\' : menuWizard.page.hasModality }">\r\n    <div class="header-wrapper" ng-class="{\'landing-page-header\' : isLandingPage}">\r\n        <h1 class="text-title header" id="menu-page-header" tabindex="-1" focus-content data-name="menu-page-header" data-condition="{{ isReady }}" ng-bind="menuWizard.page.header"><\/h1>\r\n    <\/div>\r\n\r\n    <ul class="menu-options" aria-label="{{ menuWizard.page.header }}" role="list" id="menu-options" ng-if="!menuWizard.page.hasModality" arrow-nav>\r\n        <li id="{{ getLinkId(link) }}" class="menu-item" role="listitem" tabindex="{{ link.clickableLink ? 0 : -1 }}" ng-if="link.link.linkText"\r\n            ng-click="followLink(link)" ng-repeat="link in menuWizard.page.links track by $index" ng-class="link.clickableLink ? \'clickable\' : \'\'">\r\n            <div role="link">\r\n                <span class="win-icon" aria-hidden="true" ng-if="link.icon">{{link.icon | icon}}<\/span>\r\n                <div class="content">\r\n                    <div>{{ link.link.linkText }}<\/div>\r\n                    <div class="menu-description text-body" ng-class="{\'with-icon\' : link.icon}" ng-if="link.description" ng-bind="link.description"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/li>\r\n    <\/ul>\r\n\r\n    <div ng-if="menuWizard.page.hasModality" sup-modality data-links="menuWizard.page.links" data-old-flow="true" data-fallback-url="/contact/menu/"><\/div>\r\n<\/div>\r\n\r\n<div class="terms-of-service text-body" ng-show="menuWizard.page.hasModality">\r\n    {{ menuWizard.serviceAgreement }}\r\n    <a id="CAD-service-agreement" ng-click="openServiceAgreement()" href="">{{ menuWizard.serviceAgreementLink.linkText }}<\/a>\r\n<\/div>\r\n\r\n<div ng-if="config.inRatPhoneFlight && isLandingPage && isNative && !isMobile" menu-extras data-extras="menuWizard.menuExtras.extras" data-icon="menuWizard.menuExtras.icon"><\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/SupportMenu/MenuExtras.html",'<div class="menu-extras" ng-if="extras.length > 0" ng-class="{ \'menu-open\': isMenuShown }" focus-content data-name="menu-extras" data-condition="{{ isMenuShown }}" tabindex="-1">\r\n    <div class="menu-extra text-body" ng-show="isMenuShown" ng-repeat="extra in extras track by $index" ng-click="menuExtraClick(extra)">\r\n        {{ extra.link.linkText }}\r\n    <\/div>\r\n    <div class="pull-right win-icon" aria-hidden="true" ng-click="toggleMenu()">{{ icon | icon }}<\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/UnauthForm/Container.html",'<div ng-include="\'/PartialViews/VirtualAgent.Library/Contact/UnauthForm/Form.html\'" ng-show="isReady"><\/div>\r\n\r\n<div class="spinner-container absolute-center" ng-if="!isReady">\r\n    <div loading-spinner data-timeout="{{ config.timeout }}" data-message="UnauthFormTimeout" class="loading-spinner"><\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Contact/UnauthForm/Form.html",'<div class="unauth-form">\r\n    <h1 class="text-title header">{{form.title.text}}<\/h1>\r\n    <form name="unauthForm">\r\n        <div ng-repeat="question in form.questions track by $index">\r\n            <div class="form-group" ng-class="{ \'has-error\': question.hasError }" >\r\n                <label for="form-question-{{$index}}" ng-class="{required: question.isRequired}">{{question.questionText.text}}<\/label>\r\n                <div ng-switch="question.questionType">\r\n                    <div ng-switch-when=1>\r\n                        <input data-nolog type="text" name="form-text-question" id="form-question-{{$index}}" ng-model="responses[$index]" class="form-control" placeholder="{{question.placeholder.text}}" ng-focus="removeError($index)" ng-required="question.isRequired" />\r\n                    <\/div>\r\n                    <div ng-switch-when=2>\r\n                        <select class="form-control" name="form-options-question" id="form-question-{{$index}}" ng-model="responses[$index]" ng-options="option.text as option.text for option in question.options" ng-focus="removeError($index)" ng-required="question.isRequired">\r\n                            <option ng-if="question.placeholder.text" value="">{{question.placeholder.text}}<\/option>\r\n                        <\/select>\r\n                    <\/div>\r\n                    <div ng-switch-when=3>\r\n                        <textarea data-nolog name="form-text-area-question" id="form-question-{{$index}}" ng-model="responses[$index]" class="form-control" placeholder="{{question.placeholder.text}}" ng-focus="removeError($index)" ng-required="question.isRequired"><\/textarea>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/form>\r\n    <form name="captcha">\r\n        <div class="form-group" ng-class="{ \'has-error\': wrongCaptcha }">\r\n            <div id="ispHIPHIP"><\/div>\r\n            <div id="ispHIPScript" style="display:inline">\r\n                <div hip-script object-name="WLSPHIP0"><\/div>\r\n            <\/div>\r\n            <input type="hidden" id="Solution" name="Solution" />\r\n            <input type="hidden" id="Token" name="Token" />\r\n            <input type="hidden" id="Type" name="Type" />\r\n        <\/div>\r\n    <\/form>\r\n    <button data-nolog class="btn btn-default pull-right" form="unauthForm" type="submit" id="submit" value="Submit" ng-click="submit()">{{form.submitText.text}}<\/button>\r\n    <div class="spinner-container">\r\n        <div loading-spinner data-timeout="20000" data-delay="500" data-message="VerifyHipTimeout" ng-if="awaitingResponse" class="loading-spinner"><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/Search/InstantAnswer.html",'<div class="instant-answer search-result-panel item-section section remove-top-margin remove-bottom-margin" role="tabpanel" ng-style="instantAnswerStyle">\r\n    <div class="hidden"> <img ng-src="{{pingbackUrl}}" /><\/div>\r\n    <header class="section-header">\r\n        <select ng-if="answer.solutions.length > 1" ng-model="solution.active" ng-options="solution.name for solution in answer.solutions" ng-change="setShowMoreLessState()"><\/select>\r\n    <\/header>\r\n    <div class="section-body" role="tabpanel">\r\n        <div class="container">\r\n            <div class="row">\r\n                <div>\r\n                    <div class="image-col col-xs-24" ng-if="solution.active.media[0]">\r\n                        <div class="image-container">\r\n                            <div ng-click="solution.active.media[0].motionThumbnailUrl && (showMedia = true)">\r\n                                <img ajax-load ng-if="!showMedia" class="img-responsive" data-src="{{solution.active.media[0].thumbnailUrl || solution.active.media[0].image.thumbnailUrl}}" alt="{{solution.active.media[0].name}}" title="{{solution.active.media[0].name}}" />\r\n                                <iframe ng-if="showMedia" class="embed-responsive-item" scrolling="no" allowfullscreen frameborder="0" ng-src="{{trustSrc(solution.active.media[0].motionThumbnailUrl)}}" width="{{solution.active.media[0].image.width}}" height="{{solution.active.media[0].image.height}}"><\/iframe>\r\n                                <button ng-show="!showMedia && solution.active.media[0].motionThumbnailUrl" class="win-icon win-icon-Play normalize-button">\r\n                                    <span class="sr-only">{{ view.playButtonLabel }}<\/span>\r\n                                <\/button>\r\n                            <\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div class="col-xs-24 spacer-12-bottom" ng-show="solution.active.description">\r\n                        <span class="text-body">\r\n                            <span ng-bind-html="solution.active.description"><\/span>\r\n                        <\/span>\r\n                    <\/div>\r\n                    <div class="col-xs-24">\r\n                        <!--keep span on the same line, otherwise there will be weird spacing issues-->\r\n                        <ol ng-class="{\'ia-numbered\': solution.active.listStyle === \'Numbered\', \'ia-bullet\': solution.active.listStyle !== \'Numbered\', \'ia-single-bullet\': (solution.active.steps.length === 1 || solution.active.listStyle === \'Paragraphed\')}">\r\n                            <li ng-repeat="step in solution.active.steps">\r\n                                <span ng-if="step.stepTitle" ng-bind-html="step.stepTitle"><\/span><span class="text-body" ng-repeat="fragment in step.formattedFragments"><a id="instant-answer-link-{{$parent.$index}}-{{$index}}" ng-if="fragment.url" ng-href="{{fragment.url}}" target="{{ target }}" ng-bind-html="fragment.text"><\/a><span ng-if="!fragment.url && !fragment.icon" ng-bind-html="fragment.text"><\/span><span class="win-icon" ng-if="fragment.icon" title="{{fragment.text}}"> {{fragment.icon | icon}} <\/span><\/span><span ng-show="step.media[0]"><img ajax-load class="img-responsive spacer-12-top spacer-12-bottom" data-src="{{step.media[0].url}}" width="{{step.media[0].width}}" height="{{step.media[0].height}}" /><\/span>\r\n                                <ol class="ia-bullet spacer-12-top" ng-show="step.helpSubSteps">\r\n                                    <li ng-repeat="subStep in step.helpSubSteps">\r\n                                        <span ng-if="subStep.stepTitle" ng-bind-html="subStep.stepTitle"><\/span><span class="text-body" ng-repeat="fragment in subStep.formattedFragments"><a id="instant-answer-link-{{$parent.$parent.$index}}-{{$parent.$index}}-{{$index}}" ng-if="fragment.url" ng-href="{{fragment.url}}" target="{{ target }}" ng-bind-html="fragment.text"><\/a><span ng-if="!fragment.url && !fragment.icon" ng-bind-html="fragment.text"><\/span><span class="win-icon" ng-if="fragment.icon" title="{{fragment.text}}"> {{fragment.icon | icon}} <\/span><\/span>\r\n                                    <\/li>\r\n                                <\/ol>\r\n                            <\/li>\r\n                        <\/ol>\r\n                    <\/div>\r\n                <\/div>\r\n\r\n                <div class="col-xs-24 instant-answer-extras-container" ng-class="{ \'spacer-32-bottom\': hasShowMoreButton && !feedbackProvided }">\r\n                    <div class="container-fluid">\r\n                        <div class="row" ng-hide="inShowMoreState">\r\n                            <div class="col-xs-12">\r\n                                <span ng-show="!solution.active.relatedHelpUrl" ng-bind-html="solution.active.relatedHelpDisplayText"><\/span>\r\n                                <a id="instant-answer-related-help" ng-show="solution.active.relatedHelpUrl" ng-href="{{solution.active.relatedHelpUrl}}" target="{{ target }}" ng-bind-html="solution.active.relatedHelpDisplayText || view.relatedHelp"><\/a>\r\n                            <\/div>\r\n                            <div class="col-xs-12 text-right instant-answer-survey" ng-if="displayFeedback">\r\n                                <div class="win-color-fg-secondary" ng-show="(!feedbackProvided || displaySurvey) && view.feedbackQuestion">\r\n                                    <span class="instant-answer-survey-question" ng-show="!feedbackProvided || !displaySurvey"> {{ view.feedbackQuestion }} <\/span>\r\n                                    <div class="instant-answer-survey-buttons">\r\n                                        <button id="instant-answer-survey-success" class="btn btn-link btn-link-inline" \r\n                                                title="{{ view.feedbackThumbsUpTooltip }}"\r\n                                                ng-click="!surveyInput && provideFeedback(true)"\r\n                                                ng-focus="setFeedbackSuccessActiveState(true)"\r\n                                                ng-blur="setFeedbackSuccessActiveState(false)"\r\n                                                aria-label="{{ view.feedbackThumbsUpTooltip }}"\r\n                                                value="{{answer.sourceId}}">\r\n                                            <span ng-show="!displaySurvey">{{ view.feedbackSuccess }} <\/span>\r\n                                            <img ng-show="displaySurvey" ng-src="{{ feedbackSuccessActive || (feedbackResult === true) ? view.feedbackThumbsUpHighlighted.url : view.feedbackThumbsUp.url }}"\r\n                                                 ng-mouseover="setFeedbackSuccessActiveState(true)"\r\n                                                 ng-mouseleave="setFeedbackSuccessActiveState(false)" />\r\n                                        <\/button>\r\n                                        <button id="instant-answer-survey-failure" class="btn btn-link btn-link-inline" \r\n                                                title="{{ view.feedbackThumbsDownTooltip }}"\r\n                                                ng-click="!surveyInput && provideFeedback(false)"\r\n                                                ng-focus="setFeedbackFailureActiveState(true)"\r\n                                                ng-blur="setFeedbackFailureActiveState(false)"\r\n                                                aria-label="{{ view.feedbackThumbsDownTooltip }}"\r\n                                                value="{{answer.sourceId}}">\r\n                                            <span ng-show="!displaySurvey">{{ view.feedbackFailure }} <\/span>\r\n                                            <img ng-show="displaySurvey" ng-src="{{ feedbackFailureActive || (feedbackResult === false) ? view.feedbackThumbsDownHighlighted.url : view.feedbackThumbsDown.url }}"\r\n                                                 ng-mouseover="setFeedbackFailureActiveState(true)"\r\n                                                 ng-mouseleave="setFeedbackFailureActiveState(false)" />\r\n                                        <\/button>\r\n                                    <\/div>\r\n                                <\/div>\r\n                                <div class="win-color-fg-secondary" ng-show="feedbackProvided && !displaySurvey"> {{ view.feedbackAppreciation }} <\/div>\r\n                            <\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div ng-show="solution.active.potentialAction.length">\r\n                        <div class="spacer-12-top" ng-repeat="action in solution.active.potentialAction">\r\n                            <a id="instant-answer-action-{{$index}}" class="btn btn-primary" ng-href="{{action.url}}" ng-if="action.url" target="{{ target }}"> {{ action.name }} <\/a>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="col-xs-24" ng-show="feedbackProvided && displaySurvey && !inShowMoreState" ng-class="{ \'spacer-32-bottom\': hasShowMoreButton }">\r\n                    <div ng-show="!surveyComplete">\r\n                        <h4 class="spacer-12-top spacer-12-bottom"> {{ view.surveyQuestion }} <\/h4>\r\n                        <textarea smooth-scroll focus-content data-name="{{ instantAnswerFeedbackName }}" data-condition="{{feedbackProvided && displaySurvey && !surveyComplete }}" id="instant-answer-survey-detailed-text" class="spacer-12-bottom form-control" ng-model="surveyInput" ng-keypress="$event.which === 13 && surveyInput && (surveyComplete = true)" placeholder="{{ view.feedbackPlaceholder }}"><\/textarea>\r\n                        <div class="btn-group remove-top-margin remove-bottom-margin">\r\n                            <button id="instant-answer-survey-detailed-success" class="btn btn-default" ng-disabled="!surveyInput" ng-click="surveyInput && (surveyComplete = true)"> {{ view.surveySubmit }} <\/button>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div ng-show="surveyComplete">\r\n                        <h4 class="spacer-32-top spacer-32-bottom text-align-center"> {{ view.feedbackAppreciation }} <\/h4>\r\n                    <\/div>\r\n                <\/div>\r\n                <!--Show more/less buttons - created separate button elements to ensure events fire properly discerning more/less clicks-->\r\n                <div ng-if="hasShowMoreButton">\r\n                    <!--Show more button-->\r\n                    <button class="text-align-left col-xs-24 win-color-bg-20 instant-answer-show-more-less instant-answer-show-more" \r\n                            ng-click="toggleShowMoreLess(!inShowMoreState)"\r\n                            ng-show="inShowMoreState">\r\n                        <span class="instant-answer-show-more-less-text" ng-bind="view.showMore"><\/span>\r\n                        <span class="win-icon win-icon-ChevronDown"><\/span>\r\n                    <\/button>\r\n                    <!--Show less button-->\r\n                    <button class="text-align-left col-xs-24 win-color-bg-20 instant-answer-show-more-less instant-answer-show-less" \r\n                            ng-click="toggleShowMoreLess(!inShowMoreState)"\r\n                            ng-hide="inShowMoreState">\r\n                        <span class="instant-answer-show-more-less-text" ng-bind="view.showLess"><\/span>\r\n                        <span class="win-icon win-icon-ChevronUp"><\/span>\r\n                    <\/button>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<div debug="answer"><\/div>');n.put("/PartialViews/VirtualAgent.Library/Search/Paginator.html",'<ul class="pagination" ng-hide="lastPage && ngModel.$viewValue === 1">\r\n    <li class="previous-pagination" ng-show="ngModel.$viewValue !== 1">\r\n        <a href="" id="pagination-previous" ng-click="selectPage(ngModel.$viewValue - 1)" aria-label="{{view.previousPage}}">\r\n            <span aria-hidden="true"><\/span>\r\n        <\/a>\r\n    <\/li>\r\n    <li ng-repeat="page in pages" ng-class="{active: page === ngModel.$viewValue, \'hidden-xs\': page < ngModel.$viewValue - 2 || (page > ngModel.$viewValue + 2)}">\r\n        <a href="#" id="pagination-{{$index}}" ng-click="selectPage(page)">\r\n            <span class="sr-only">{{view.paginatorView.pageText}}<\/span>\r\n            {{page | number}}\r\n            <span class="sr-only" ng-if="page === ngModel.$viewValue">{{view.paginatorView.currentSelection}}<\/span>\r\n        <\/a>\r\n    <\/li>\r\n    <li class="next-pagination" ng-show="!lastPage">\r\n        <a href="" id="pagination-next" ng-click="selectPage(ngModel.$viewValue + 1)" aria-label="{{view.nextPage}}">\r\n            <span aria-hidden="true"><\/span>\r\n        <\/a>\r\n    <\/li>\r\n<\/ul>\r\n');n.put("/PartialViews/VirtualAgent.Library/Search/SearchResult.html",'<div class="item-section section search-result-panel remove-top-margin">\r\n    <div class="section-header remove-bottom-margin">\r\n        <div>            \r\n            <div class="text-body" ng-class="{\'text-subtitle\': size != \'small\', \'text-body text-maxlines-1\': size == \'small\'}">                \r\n                <a title="{{result.simpleTitle}}" focus-content data-name="search-result-item" data-condition="{{$parent.$index === focusIndex}}" id="result-{{ id }}" target="{{ target }}" ng-href="{{result.link}}" ng-mousedown="selectResult()" ng-keydown="$event.which === 13 && selectResult()" ng-bind-html="result.title"><\/a>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="text-body text-maxlines-1 search-result-display-link" ng-hide="showLink">\r\n            <div ng-bind-html="result.displayLink"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="section-body"> \r\n        <div class="text-body" ng-bind-html="result.description" ng-class="{\'text-maxlines-3\': size == \'small\'}" ><\/div>\r\n    <\/div> \r\n    <div class="hidden"> <img ng-src="{{pingbackUrl}}" /><\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/Theming/Theme.html",'<style ng-if="$ctrl.shouldDoVirtualAgentTheming" ng-repeat="(className, classStyle) in $ctrl.themeClasses">\r\n    {{className}} { {{classStyle}} }\r\n<\/style>');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/ModalitySelectionCard.html",'<div class="container-fluid">\r\n    <div class="row">\r\n        <div class="col-xs-24 min-padding" ng-if="loadingModalities">\r\n            <div class="spinner-container">\r\n                <div loading-spinner data-type="bar" data-delay="2000"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="col-xs-24 min-padding spacer-16-bottom" ng-if="products.length">\r\n            <div id="virtual-agent-product-selection-label" class="text-body spacer-12-bottom"> {{view.modalities.productSelectionHeader}} <\/div>\r\n            <div>\r\n                <select id="virtual-agent-product-modality-selector" class="form-control" aria-labelledby="virtual-agent-product-selection-label" ng-model="selections.selectedProduct" ng-options="product as product.link.linkText for product in products" ng-change="selectOption(selections.selectedProduct, true)">\r\n                    <option value=""> {{view.modalities.optionPlaceholder}} <\/option>\r\n                <\/select>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="col-xs-24 min-padding spacer-16-bottom" ng-if="products.length || linkOptions.length">\r\n            <div id="virtual-agent-issue-selection-label" class="text-body spacer-12-bottom"> {{view.modalities.issueSelectionHeader}} <\/div>\r\n            <div>\r\n                <select id="virtual-agent-issue-modality-selector" class="form-control" aria-labelledby="virtual-agent-issue-selection-label" ng-model="selections.selectedOption" ng-disabled="!linkOptions.length" ng-options="link as link.link.linkText for link in linkOptions" ng-change="selectOption(selections.selectedOption)">\r\n                    <option value=""> {{view.modalities.optionPlaceholder}} <\/option>\r\n                <\/select>\r\n            <\/div>\r\n        <\/div>\r\n        <div ng-repeat="modality in orderedModalities track by modality.type">\r\n            <div ng-if="modality.link.linkText || modality.closedMessage" class="col-xs-24 min-padding spacer-12-bottom">\r\n                <span ng-class="{ \'win-icon\': true, \'win-color-fg-blue\': (modality.isOpen), \'text-subtitle\': true, \'modality-icon\': true}" ng-if="modality.icon">\r\n                    {{ modality.icon | icon }}\r\n                <\/span>\r\n                <img class="modality-icon-image" ng-if="modality.image" ng-src="{{modality.image.url}}" />\r\n                <div class="modality-content">\r\n                    <div id="virtual-agent-{{modality.type}}-modality">\r\n                        <a class="text-base" href="#" ng-if="modality.isOpen" ng-click="selectModality(modality.type, modality)"> {{ modality.link.linkText }} <\/a>\r\n                        <p class="text-base remove-bottom-margin" ng-if="!modality.isOpen && !shouldShowHoops">{{ modality.link.linkText }}<\/p>\r\n                        <p class="text-base remove-bottom-margin" ng-if="modality.isClosed && modality.closedMessage">{{ modality.closedMessage }}<\/p>\r\n                        <p class="text-base remove-bottom-margin" ng-if="modality.isUnavailable && modality.link && modality.link.linkText">{{ modality.link.linkText }}<\/p>\r\n                    <\/div>\r\n                    <div class="text-caption" ng-if="modality.isOpen && modality.description"> {{ modality.description }} <\/div>\r\n                    <div id="virtual-agent-{{modality.type}}-modality-unavailable" class="text-caption" ng-if="modality.isUnavailable && modality.unavailableMessage" ng-bind-html="modality.unavailableMessage"><\/div>\r\n                    <div id="virtual-agent-{{modality.type}}-modality-wait-status" class="text-caption" ng-if="modality.isOpen && modality.waitStatusText"> {{ modality.waitStatusText }} <\/div>\r\n                    <div id="virtual-agent-{{modality.type}}-modality-hoops" class="text-caption" ng-if="modality.isClosed && modality.schedule && !summarizedHoopsModality" sup-hoops data-modality="modality"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="col-xs-24 min-padding spacer-12-bottom" ng-if="summarizedHoopsModality">\r\n            <div id="virtual-agent-summarized-hoops" class="text-caption" sup-hoops data-modality="summarizedHoopsModality"><\/div>\r\n        <\/div>\r\n        <div class="col-xs-24 min-padding spacer-12-top" ng-if="modalities">\r\n            <p class="win-color-fg-secondary text-caption remove-bottom-margin">\r\n                {{ view.modalities.serviceAgreement }}\r\n                <a id="CAD-service-agreement" target="smccontent" ng-href="{{ view.modalities.serviceAgreementLink.linkUrl }}">{{ view.modalities.serviceAgreementLink.linkText }}<\/a>\r\n            <\/p>\r\n        <\/div>\r\n        <div class="col-xs-24 min-padding" ng-if="externalLink">\r\n            <div class="text-align-center spacer-12-bottom"> {{ view.modalities.externalLinkHeader | compassFormat : {\'product\': externalLink.externalLinkDescription ?  externalLink.externalLinkDescription : externalLink.link.linkText} }} <\/div>\r\n            <div class="text-align-center"><a id="virtual-agent-external-support" class="btn btn-primary" ng-href="{{externalLink.link.linkUrl}}" target="smccontent">{{view.modalities.externalLinkButton}}<\/a><\/div>\r\n        <\/div>\r\n        <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/ModalWindowTemplate.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}} vatheme-modal-dialog\">\r\n    <div class=\"modal-content\" uib-modal-transclude><\/div>\r\n<\/div>");n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/ResetConfirmationModal.html",'<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h1 id="modal-header" class="modal-title text-subtitle" role="status" aria-live="polite">{{view.title}}<\/h1>\r\n    <\/div>\r\n    <div class="modal-body">\r\n        <p id="modal-description">{{view.description}}<\/p>\r\n    <\/div>\r\n    <div class="modal-footer">\r\n        <div class="btn-group">\r\n            <button id="vac-reset-confirmation" class="btn btn-primary vatheme-modal-primary-button" ng-click="confirm()">{{view.confirmButton}}<\/button>\r\n            <button id="vac-reset-cancel" class="btn vatheme-modal-secondary-button" ng-click="cancel()">{{view.cancelButton}}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/SurveyModal.html",'<div class="modal-body">\r\n    <div card data-header="config.header">\r\n        <div class="support-survey" chat-survey data-chat="config.surveyData" data-submit-action="submit()" data-cancel-action="cancel()"\r\n             data-view="config.view" data-visible="true" data-event-name="\'VirtualAgentSurvey\'"><\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgent.html",'<div class="virtual-agent-window">\r\n    <div loading-spinner data-type="ring" data-size="large" data-delay="1500" ng-hide="isReady" class="progress-bar-cover neutral"><\/div>\r\n    <va-theme><\/va-theme>\r\n    <div class="hidden"> <img ng-src="{{pingbackUrl}}" /><\/div>\r\n    <div class="va-container win-color-bg-0 vatheme-primary-bgcolor"\r\n         ng-class="{\'in-app-sdk\': isInAppSdk }"\r\n         ng-show="isReady"\r\n         auto-scroll-content data-speed="500"\r\n         data-child-selector="{{ scrollSelectors }}">\r\n        <div class="container text-body">\r\n            <div class="row">\r\n                <div class="col-xs-24">\r\n                    <div class="section spacer-20-top remove-bottom-margin">\r\n                        <div class="section-header va-section-header vatheme-section-header">\r\n                            <div class="center-block media-container va-media-container vatheme-intro-image">\r\n                                <img class="img-responsive va-intro-image" alt="{{ view.introduction.imageDescription}}" ng-src="{{ view.introduction.image.url }}">\r\n                            <\/div>\r\n                            <h3 class="section-title text-center vatheme-section-title" ng-if="userName">{{ view.introduction.title | compassFormat : { \'name\': userName } }}<\/h3>\r\n                            <h3 class="section-title text-center vatheme-section-title" ng-if="!userName">{{ view.introduction.unauthTitle }}<\/h3>\r\n                        <\/div>\r\n                        <div class="section-body">\r\n                            <message data-content="message" data-loading-text="view.introduction.loadingMessage" ng-repeat="message in messages track by message.id"><\/message>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="va-input" ng-class="{\'native\': isNative }" ng-hide="isInAppSdk || !isReady">\r\n        <div class="container" ng-class="{\'va-container-inapp\': isNative }">\r\n            <div class="row">\r\n                <div class="col-xs-24">\r\n                    <div loading-spinner data-size="small" data-deferred="virtualAgentRequest" data-loading-text="view.introduction.loadingMessage" data-timeout="{{waitTime}}" data-delay="2000" data-message="VirtualAgentDialogTimeout"><\/div>\r\n                    <div ng-show="!!agentStatus.agent" role="status" aria-live="polite" aria-atomic="true">\r\n                        <p class="remove-bottom-margin text-caption va-chat-info" ng-show="typingStatus.isAgentTyping" ng-bind="view.chat.agent.agentTyping | compassFormat : { \'agent-name\': agentStatus.agent.DisplayName }"><\/p>\r\n                        <p class="remove-bottom-margin text-caption va-chat-info error" ng-hide="agentStatus.isConnected" ng-bind="view.chat.error.agentReconnect"><\/p>\r\n                        <p class="remove-bottom-margin text-caption va-chat-info error" ng-hide="channelStatus.isConnected" ng-bind="view.chat.error.clientReconnect"><\/p>\r\n                    <\/div>\r\n                    <div class="va-input-container">\r\n                        <textarea id="virtual-agent-chat-client-message-input-textbox" class="text-body vatheme-input-border" ng-class="{\'native va-container-inapp\': isNative}"\r\n                                  role="textbox"\r\n                                  autofocus\r\n                                  ng-attr-placeholder="{{ placeholder }}"\r\n                                  ng-attr-aria-label="{{ userInputboxLabel }}"\r\n                                  ng-click="triggerDigestOnInputClick()"\r\n                                  ng-model="userInput"\r\n                                  ng-keydown="$event.keyCode === 13 && submit($event, userInput)"\r\n                                  ng-disabled="isInputDisabled"\r\n                                  maxlength="{{config.maxLength}}"><\/textarea>\r\n                        <span class="win-icon win-icon-Send text-title" tabindex="0" ng-class="{\'vatheme-send-action-button-color\': userInput, \'win-color-fg-secondary\': !userInput}" ng-click="submit($event, userInput)" ng-disabled="!userInput" role="button" title="{{ view.introduction.sendButtonDescription }}" aria-label="{{ view.introduction.sendButtonDescription }}"><\/span>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentBanner.html",'<div class="virtual-agent-banner win-color-bg-10" ng-hide="$ctrl.bannerDismissed">\r\n    <div class="virtual-agent-banner-icon">\r\n        <img ng-src="{{ $ctrl.view.icon.url }}" alt="{{ $ctrl.view.iconLabel }}" />\r\n    <\/div>\r\n    <div class="virtual-agent-banner-details">\r\n        <span class="virtual-agent-banner-message">{{ $ctrl.view.message }}<\/span>\r\n        <button class="virtual-agent-banner-action virtual-agent-banner-action-{{ $ctrl.name }} btn-link" ng-click="$ctrl.doAction()">{{ $ctrl.view.action }}<\/button>\r\n    <\/div>\r\n    <button class="virtual-agent-banner-dismiss virtual-agent-banner-dismiss-{{ $ctrl.name }}" ng-click="$ctrl.doDismiss()">\r\n        <span class="win-icon win-icon-Clear absolute-center"><\/span>\r\n    <\/button>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentEntry.html",'<div class="skylight-entry">\r\n    <div ng-if="$ctrl.view.messageText" ng-show="$ctrl.isMessageVisible" ng-class="{ \'full-width\': $ctrl.isSlidOut }" class="message-bubble bubble-content bubble-below">\r\n        <message-animation ng-show="$ctrl.isThinking"><\/message-animation>\r\n        <div class="message-bubble-content" ng-hide="$ctrl.isThinking" ng-class="{ \'visible\': $ctrl.isMessageTextVisible }">\r\n            <div class="message-bubble-header" ng-if="$ctrl.view.entryHeader">{{ $ctrl.view.entryHeader }}<\/div>\r\n            <div class="message-bubble-text">{{ $ctrl.view.messageText }}<\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <button ng-click="$ctrl.openVirtualAgent()" ng-mouseenter="$ctrl.toggleBubble(true)" ng-mouseleave="$ctrl.toggleBubble(false)" id="skylight-entry-chrome">\r\n        <img ng-src="{{ $ctrl.view.entryImage.url }}" />\r\n        <span>{{ $ctrl.view.entryText }}<\/span>\r\n    <\/button>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentModality.html",'<div card class="virtual-agent-modalities" data-header="view.modalities.header" data-show-cancel="showCancel" data-cancel-action="cancelAction()" data-cancel-text="view.modalities.cancelText">\r\n    <div ng-switch on="state">\r\n        <!-- Selection State -->\r\n        <div ng-switch-when="0">\r\n            <div ng-include="\'/PartialViews/VirtualAgent.Library/VirtualAgent/ModalitySelectionCard.html\'"><\/div>\r\n        <\/div>\r\n        <!-- Connecting State -->\r\n        <div ng-switch-when="1" chat-queue data-view="view.chat.queue"><\/div>\r\n        <!-- Chatting State -->\r\n        <agent-info ng-switch-when="2" data-agent="agentStatus.agent" data-view="view.chat.agent" data-is-joining="true"><\/agent-info>\r\n        <!-- Callback State -->\r\n        <div ng-switch-when="3">\r\n            <div class="modality-schedule-callback" callback data-is-schedule-callback="isScheduleCallback" data-phone-number="{{ message.phoneNumber }}"><\/div>\r\n        <\/div>\r\n        <!-- Error State -->\r\n        <div ng-switch-when="4">\r\n            <p class="remove-bottom-margin">{{ view.modalities.errorText }}<\/p>\r\n            <button class="center-block" ng-if="retryAction" ng-click="retryAction()">{{ view.modalities.tryAgainText }}<\/button>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentNavEntry.html",'<div class="skylight-nav-entry hidden-xs" ng-class="{\'skylight-nav-collapsed\': $ctrl.collapsed}">\r\n    <div class="skylight-image-container" ng-show="!$ctrl.collapsed">\r\n        <img ng-src="{{ $ctrl.view.image.url }}" />\r\n    <\/div>\r\n    <div class="skylight-nav-details" ng-class="{\'text-align-center\': $ctrl.collapsed}">\r\n        <div class="skylight-nav-header" ng-if="!$ctrl.collapsed">\r\n            <h1 class="jumbotron-header header-large win-color-fg-primary color-alt"> {{$ctrl.view.header}} <\/h1>\r\n            <h2 class="text-align-left text-title" ng-bind-html="$ctrl.view.subHeader"><\/h2>\r\n        <\/div>\r\n        <button id="skylight-entry-nav" class="btn btn-primary skylight-nav-btn" ng-click="$ctrl.openVirtualAgent()"> \r\n            <img class="skylight-head-icon" ng-src="{{ $ctrl.view.image.url }}" />  {{ $ctrl.view.actionText }} <span class="win-icon win-icon-ChevronRight"><\/span> \r\n        <\/button>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgentReplay.html",'<div class="va-replay">\r\n    <ng-include src="\'/PartialViews/VirtualAgent.Library/VirtualAgent/VirtualAgent.html\'"><\/ng-include>\r\n    <div loading-spinner data-type="ring" data-size="large" data-delay="1500" ng-hide="isReady" class="progress-bar-cover neutral"><\/div>\r\n<\/div>')}]);contentApp="ms-content";ca=angular.module(contentApp,["portalCommon","ngSanitize","ngRoute","ngCookies","ngAria","ngMessages"]);ca.value("clientConfig",{});ca.value("authConfiguration",{}),function(n){n.component("instantAnswer",{templateUrl:"/app/content/PartialViews/InstantAnswer/Container.html",bindings:{article:"<",iframe:"<"},controller:[function(){var n=this;n.$onInit=function(){}}],controllerAs:"ia"})}(angular.module(contentApp)),function(n){n.component("internalContent",{templateUrl:"/app/content/PartialViews/Content/InternalContent.html",bindings:{article:"<"},controller:["$rootScope","compassService","languageService",function(n,t,i){function u(){r.internalProperties=t.getInternalContentProperties()}var r=this;r.textDir=i.currentDirection();n.$on("CompassContentReady",u);u()}],controllerAs:"ic"})}(angular.module(contentApp)),function(n){n.component("internalSignin",{templateUrl:"/app/content/PartialViews/InternalSignin/InternalSigninTemplate.html",bindings:{path:"<"},controller:["$window","contentApiService",function(n,t){this.pageUpdating=!0;var i=this;t.getCompassContentForPage("internal-signin").then(function(n){i.content=n.data.internalSigninPageContent}).finally(function(){i.pageUpdating=!1});this.signIn=function(){this.path.relativeUrl?(relativeUrl=this.path.relativeUrl,relativeUrl+=relativeUrl.indexOf("?")===-1?"?nochrome":"&nochrome",n.open(relativeUrl,"_blank")):n.open("/signin","_blank")}}],controllerAs:"aad"})}(angular.module(contentApp)),function(n){n.component("kbBanners",{templateUrl:"/app/content/PartialViews/Content/KbBanners.html",bindings:{products:"<"},controller:["$rootScope","compassService",function(n,t){function r(){i.kbBanners===null&&(i.kbBanners=t.getKbBanners(),i.kbBanners&&u())}function u(){for(var r,t,u,n=0;n<i.kbBanners.length;n++){r=i.kbBanners[n];t:for(t=0;t<i.products.length;t++)if(u=i.products[t],r.appliesTo.some(function(n){return f(n,u)})){i.articleBanners.push(r.banner);break t}}}function f(n,t){return t.gdsId==n.ecoId||t.parentId==n.ecoId||n.directChildren.length>0&&(n.directChildren.split(",").indexOf(t.gdsId)>=0||n.directChildren.split(",").indexOf(t.parentId)>=0)}var i=this;i.kbBanners=null;i.articleBanners=[];n.$on("CompassContentReady",r);r()}],controllerAs:"kbb"})}(angular.module(contentApp)),function(n){n.component("kbRetired",{templateUrl:"/app/content/PartialViews/Content/KbRetired.html",bindings:{},controller:["compassService",function(n){function t(){self.kbRetired===null&&(self.kbRetired=n.getKbRetiredCaption())}this.kbRetired=null;self=this;t()}],controllerAs:"kbr"})}(angular.module(contentApp)),function(n){n.component("locationBlock",{templateUrl:"/app/content/PartialViews/LocationServices/LocationBlockTemplate.html",bindings:{},controller:["locationBlockService","contentApiService",function(n,t){this.pageUpdating=!0;var i=this;t.getCompassContentForPage("location-block").then(function(n){i.content=n.data.locationBlockPageContent}).finally(function(){i.pageUpdating=!1});this.submitMacId=function(t){this.resultUpdating=!0;this.status=null;var r=n.removeMacIdUsingHip(t).then(function(){i.status=!0}).catch(function(){i.status=!1}).finally(function(){i.resultUpdating=!1})}}],controllerAs:"lb"})}(angular.module(contentApp)),function(n){n.component("mixedTab",{templateUrl:"/app/content/PartialViews/InstantAnswer/MixedTab.html",bindings:{section:"<"},controller:["$scope","$sce","compassService",function(n,t,i){var r=this,u=function(){r.playVideoCaption=i.getPlayVideoCaption()};r.$onInit=function(){u()};r.trustSrc=function(n){return t.trustAsResourceUrl(n)};n.$on("CompassContentReady",function(){u()})}]})}(angular.module(contentApp)),function(n){n.component("sideNavRender",{templateUrl:"/app/content/PartialViews/Asset/SideNav.html",bindings:{links:"<"},controller:["$rootScope","$location","languageService","compassService",function(n,t,i,r){function s(){c.compassSelected=r.getSelected()}function a(n,t){var i=null;switch(t){case"gwt":i="/help/"+n;break;case"article":i="/help/"+n}return i?o+i:null}var c=this,e={},l=t.absUrl(),o=i.langLocale(),h,u,f;this.selectedLink={};this.navLinks=[];for(u in this.links)h=angular.copy(this.links[u]),this.navLinks.push(h);angular.forEach(this.navLinks,function(n){n.articleId&&n.articleType&&(n.link=a(n.articleId,n.articleType));n.level===1?e=n.id:n.parentId=e});for(u in this.navLinks)f=null,this.navLinks[u].link.indexOf("{lang-locale}")>=0?f=this.navLinks[u].link.replace(/{lang-locale}/g,o):this.navLinks[u].link.indexOf(this.navLinks[u].articleId)>=0&&(f=this.navLinks[u].link),l.indexOf(f)>=0&&["https://","http://","",null].indexOf(f)===-1&&(this.selectedLink=this.navLinks[u],this.selectedLink.parentId||(this.selectedLink.expandChildId=this.selectedLink.id));n.$on("CompassContentReady",s);s()}],controllerAs:"nav"})}(angular.module(contentApp)),function(n){n.component("stepList",{templateUrl:"/app/content/PartialViews/InstantAnswer/StepList.html",bindings:{stepList:"<",stepStyle:"<"},controller:["$routeParams","$cookies","$rootScope",function(n,t,i){function f(){r.listStyle=u[r.stepList.stepStyle];angular.forEach(r.stepList.steps,function(n){n.subStepList&&(n.subListStyle=u[n.subStepList.stepStyle])})}var r=this,e=n.preview||t.get("smc_preview")||i.preview,u={Bullet:"ia-bullet",Numbered:"ia-numbered",None:"ia-single-bullet"};r.$onInit=function(){f()};e&&(r.$onChanges=function(){f()})}]})}(angular.module(contentApp)),function(n){n.controller("HelpArticleController",["$rootScope","$scope","$routeParams","$location","compassService","contentApiService","locationService","productsService","flightService","authService","clientConfig","$cookies","pageLoadTimeService",function(n,t,i,r,u,f,e,o,s,h,c,l,a){var y=s.isUserInFlight("aad-1"),p=i.preview||l.get("smc_preview")||n.preview,v;a.featureLoadStarted("HelpArticle");t.reset=function(){function u(n,t){return{name:n,content:t}}t.isGwt=!1;t.isGenericArticle=!1;t.isInstantAnswer=!1;var s="eADQi",h="XVcnh";i.articleId!=null&&f.getHelpArticle(i.articleId,i.langLocale).then(function(f){var c,l,v,y;t.article=f;switch(t.article.details.type){case"gwt":t.isGwt=!0;break;case"article":t.isGenericArticle=!0;break;case"ia":t.isInstantAnswer=!0}t.article&&t.article.details&&((t.article.details.noIndex||i.preview)&&n.$broadcast("NoIndex"),c=[],t.article.details.locale&&c.push(u("ms.contentLocale",t.article.details.locale)),t.article.details.keywords&&(c.push(u("keywords",t.article.details.keywords.join(","))),c.push(u("search.keywords",t.article.details.keywords.join(",")))),t.article.details.description&&(c.push(u("description",t.article.details.description)),c.push(u("search.description",t.article.details.description))),t.article.details.products&&t.article.details.products.length>0&&(l=t.article.details.products.filter(Number),v=l.join().trim(),c.push(u("search.products",v)),c.push(u("ms.product",v)),l&&o.getProductList(l).then(function(i){if(i){t.article.gdsProducts=i;var r=i.map(function(n){return u("search.product",s+n.name+h)}),f=i.map(function(n){return n&&n.name}).join(",");r.push(u("ms.productNames",f));n.$broadcast("AddMetaTags",r)}})),t.article.details.os&&t.article.details.os.length>0&&(c.push(u("search.ossku",t.article.details.os.join(" "))),c.push(u("search.supportedos",t.article.details.os.join(" ")))),c.push(u("msh.id",t.article.details.id)),t.article.details.isInternalContent&&c.push(u("msh.internal")),n.$broadcast("AddMetaTags",c),y=r.hash(),y&&e.scrollTo(y),n.$broadcast("PageResourcesDownloaded"),a.featureLoadCompleted("HelpArticle"))})};y&&(c.InternalContentConfig.AllowInternalContent||p)?(v=h.getSupportedIDP(),h.setPagePreference([v.AAD]),h.resolveAuthState().then(function(n){n===v.AAD?t.reset():h.isIframe()?c.InternalContentConfig.AllowInternalContent||t.reset():h.login()})):t.reset()}])}(angular.module(contentApp)),function(n){n.controller("MsnSurveyController",["$scope","$rootScope","$window",function(n,t,i){n.positiveSurvey=function(){i.location.href=n.yesTarget;t.$broadcast("KbMsnSurvey",{response:"yes"})};n.negativeSurvey=function(){n.noTarget&&(i.location.href=n.noTarget);t.$broadcast("KbMsnSurvey",{response:"no"})}}])}(angular.module(contentApp)),function(n){n.directive("asset",["$compile","$location","$document","$filter","assetService",function(n,t,i,r,u){return{restrict:"A",transclude:!0,scope:{asset:"=",preview:"=?",assetObjectToPreview:"="},link:function(t,i,f){function e(){var e,o,l,a;if(t.data&&t.data.details){t.assetId=t.data.details.id?t.data.details.id:0;switch(t.data.details.assetType){case"image":var s="",h="",c=0,u=null;if(f.props){t.props=JSON.parse(f.props);switch(t.props.size){case"half":h="width:50%;";break;case"quarter":h="width:25%;"}switch(t.props.float){case"right":s="pull-right";break;case"left":s="pull-left"}switch(t.props.padding){case"small":c=10;break;case"medium":c=20}t.props.link&&(e=t.props.link,e.article&&e.article.details&&e.article.details.type&&e.article.details.id?u='<a managed-link href="" data-content-type="'+e.article.details.type+'" data-content-id="'+e.article.details.id:e.target&&(u='<a managed-link href="'+e.target),u&&e.newWindow&&(u=u+'" target="_blank'),u=u?u+'">':null)}o="";l="";s&&s!="none"&&(o+='<div style="overflow: hidden">',l+="<\/div>");t.data.fileUrl&&(a=t.data.altText||t.data.details.title||"",o+='<div style="'+h+';" class="imageAsset '+s+'">',o+='<img style="padding:'+c+'px; width:100%;" src="'+t.data.fileUrl+'" alt="'+a+'" />',t.data.details.published||(o+='<div class="caption" ng-include=\'"/app/content/PartialViews/Asset/ImagePreview.html"\'><\/div>'),o+="<\/div>");o+=l;t.content=o;u&&(t.content=u+t.content+"<\/a>");break;case"video":t.data&&t.data.url&&(t.content='<div class="responsive-iframe-16-9"><iframe src="'+t.data.url+'" frameborder="0" allowfullscreen="true"><\/iframe><\/div>');break;case"sideNav":t.content="<side-nav-render links='data.links'><\/side-nav-render>";break;case"communicationTemplate":case"htmlSnippet":t.content='<div content-section-list="data.renderHtml"><\/div>';break;case"inlineContent":i.html("<span class='inline-content'>"+t.data.renderHtml+"<\/span>");break;case"imageTextBlock":t.content="<div ng-include=\"'/app/content/PartialViews/Asset/ImageTextBlock.html'\"><\/div>";break;case"faq":t.content="<div ng-include=\"'/app/content/PartialViews/Asset/Faq.html'\"><\/div>";t.faq={showAllIsActive:!0,links:angular.copy(t.data.links)};t.updateExpandAll=function(n){n.isCollapsed=!n.isCollapsed;t.faq.showAllIsActive=r("filter")(t.faq.links,{isCollapsed:!0}).length>0};t.showOrHideAll=function(){angular.forEach(t.faq.links,function(n){n.isCollapsed=!t.faq.showAllIsActive});t.faq.showAllIsActive=!t.faq.showAllIsActive};break;case"contentIndex":t.content="<side-nav-render links='data.links'><\/side-nav-render>"}i.html(t.content);n(i.contents())(t)}}t.data={details:null};t.$watch("asset",function(){t.asset&&!t.assetObjectToPreview&&u.getAsset(t.asset).then(function(n){t.data=n.data;e()},function(){i.html("Asset not found")})});t.$watch("assetObjectToPreview",function(){t.data=t.assetObjectToPreview;e()},!0)}}}])}(angular.module(contentApp)),function(n){n.directive("avPartnerRender",["contentApiService",function(n){return{templateUrl:"/app/content/PartialViews/Antivirus/AvPartnerTemplate.html",restrict:"A",scope:{os:"@avPartnerRender"},link:function(t){function i(n){return n.replace(/\s/g,"").toLowerCase()}function r(n){for(var t=n.length,i,r;t>0;)i=Math.floor(Math.random()*t),t--,r=n[t],n[t]=n[i],n[i]=r;return n}t.updating=!0;n.getCompassContentForPage("antivirus").then(function(n){t.vendors=n.data.antiVirusInformation.vendors}).catch(function(){t.updating=!1});t.$watchCollection("vendors",function(){if(t.vendors&&t.vendors.length>0){var n=t.vendors.filter(function(n){return n.operatingSystem.filter(function(n){return angular.equals(i(n),i(t.os))?!0:!1}).length>0});t.filteredVendors=r(n);t.updating=!1}})}}}])}(angular.module(contentApp)),function(n){n.directive("contentNotice",["compassService","$routeParams","$location",function(n){return{scope:{},templateUrl:"/app/content/PartialViews/Content/ContentNotice.html",link:function(t){var i=function(){var i=n.getContentIframe();i&&(t.logo=i.iframeNoticeIcon.url,t.notice=i.iframeNoticeText)};t.$on("CompassContentReady",function(){i()});i()}}}])}(angular.module(contentApp)),function(n){n.directive("contentProperties",["$filter","compassService","productsService","flightService",function(n,t,i){return{restrict:"A",templateUrl:"/app/content/PartialViews/Content/ContentProperties.html",scope:{},link:function(r,u,f){var o=function(){var n=t.getContentProperties();n&&(r.contentProperties=n)},e;r.$on("CompassContentReady",function(){o()});o();r.articleId=f.articleId;r.lastModified=n("date")(f.lastModified);r.revision=f.revision;r.products=f.products?JSON.parse(f.products):[];r.keywords=f.keywords?JSON.parse(f.keywords):null;r.appliesTo=f.appliesTo?JSON.parse(f.appliesTo):[];r.products.length>0&&(e=r.products.filter(Number),e&&i.getProductList(e).then(function(n){for(var t,i=0;i<r.products.length;i++)for(t=0;t<n.length;t++)r.products[i]==n[t].gdsId&&r.appliesTo.push(n[t].name)}))}}}])}(angular.module(contentApp)),function(n){n.directive("contentSection",["compassService","productsService","flightService",function(n,t){return{restrict:"A",scope:{contentSection:"="},templateUrl:"/app/content/PartialViews/Content/Section.html",link:function(i){function r(){i.internalProperties=n.getInternalContentProperties()}if(i.contentSection&&i.contentSection.meta&&i.contentSection.meta.products&&i.contentSection.meta.products.length>0){var u=i.contentSection.meta.products.filter(Number);u&&t.getProductList(u).then(function(n){i.products=n})}i.applicableProducts=function(){var t=[],n;if(i.products)for(n=0;n<i.products.length;n++)i.products[n].name&&t.push(i.products[n].gdsId);return t};i.getStyleClass=function(){var n=[];if(i.contentSection&&i.contentSection.meta)switch(i.contentSection.meta.type){case"single-column":n=["col-xs-24"];break;case"two-column":n=["col-sm-24 col-md-12"];break;case"three-column":n=["col-sm-24 col-md-8"];break;case"four-column":n=["col-sm-24 col-md-6"]}return n};i.isInternalSection=function(){return i.contentSection&&i.contentSection.meta&&(i.contentSection.meta.isInternalContent===!0||i.contentSection.meta.isInternalContent==="true")};i.$on("CompassContentReady",function(){r()});r()}}}])}(angular.module(contentApp)),function(n){n.directive("contentSectionList",[function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Content/SectionList.html",scope:{contentSectionList:"="},link:function(n){typeof n.contentSectionList=="string"&&(n.isString=!0);n.hasContent=function(){return n.contentSectionList&&n.contentSectionList.some(function(n){return n.title||n.subtitle?!0:n.content&&n.content.some(function(n){return n})})}}}}])}(angular.module(contentApp)),function(n){n.directive("contentSurvey",["$rootScope","$timeout","compassService","flightService",function(n,t,i){return{restrict:"A",templateUrl:"/app/content/PartialViews/Content/Survey.html",scope:{},link:function(r){var u=function(){var n=i.getContentSurvey();n&&(r.contentSurvey=n)};r.$on("CompassContentReady",function(){u()});u();r.showSurvey=!0;r.choiceCaptionClass="choice-caption";r.OnSubmit=function(){r.type!=null?(n.$broadcast("KbSurvey",{type:r.type,suggestion:r.suggestion}),r.showSurvey=!1):r.choiceCaptionClass+=" alert alert-error"};r.showButtons=!0;r.showTextBox=!1;r.onYesNoSomewhatClick=function(n){r.type=n;r.showButtons=!1;r.showTextBox=!0;t(function(){$("#survey-verbatim").focus()},0)}}}}])}(angular.module(contentApp)),function(n){n.directive("detectOperatingSystem",["osService",function(n){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/detectOS.html",scope:{},link:function(t,i,r){t.os32bitCaption=r.os32bitCaption;t.os64bitCaption=r.os64bitCaption;t.osOtherCaption=r.osOtherCaption;t.currentOS=n.isWindows()?n.is64bitWindows()?t.os64bitCaption:t.os32bitCaption:t.osOtherCaption}}}])}(angular.module(contentApp)),function(n){n.directive("faqPanelContent",["$timeout",function(n){return{scope:{panel:"=faqPanelContent"},templateUrl:"/app/content/PartialViews/Content/FaqPanel.html",require:"^?faqSection",link:function(t,i,r,u){t.$watch("panel.isOpen",function(){n(function(){t.panel.isOpen?(t.panel.class="win-icon-ChevronUpSmall",t.panel.displayType="faq-panel-show"):(t.panel.class="win-icon-ChevronDownSmall",t.panel.displayType="faq-panel-hide")})});t.toggle=function(){t.panel.isOpen=!t.panel.isOpen;u.update()}}}}])}(angular.module(contentApp)),function(n){n.directive("faqSection",["$filter","compassService","$location",function(n,t,i){return{restrict:"A",template:'<div class="faq-section"><div class="spacer-12-bottom"><a ng-if="items.length > 1" ng-click="showOrHideAll()" role="button" href=""> {{ allExpanded ? props.hideAllLabel : props.showAllLabel }} <\/a><\/div><div class="faq-panel" ng-repeat="item in items" faq-panel-content="item"><\/div><\/div>',transclude:!0,scope:{},replace:!0,controller:["$scope",function(n){this.update=function(){n.update()}}],link:function(r,u,f,e,o){function s(){r.props=t.getCollapsibleContentProperties()}o(function(n){r.items=[];angular.forEach(n,function(n){var f=angular.element(n).find("[faq-panel-heading]"),e=f.text(),u,t;angular.element(n).find("[faq-panel-body] > p").attr("role","document");u=angular.element(n).find("[faq-panel-body]").html();t=f.attr("faq-panel-id");(e||u)&&r.items.push({title:e,body:u,panelId:t,isOpen:t&&t===i.hash()})})});r.update=function(){r.allExpanded=n("filter")(r.items,{isOpen:!1}).length==0};r.showOrHideAll=function(){angular.forEach(r.items,function(n){n.isOpen=!r.allExpanded});r.update()};r.$on("CompassContentReady",function(){s()});s()}}}])}(angular.module(contentApp)),function(n){n.directive("fixIt",["$window",function(n){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/fixIt.html",scope:{},link:function(t,i,r){t.link=r.link;t.caption=r.caption;t.text=r.text;t.nav=function(t){n.location.href=t}}}}])}(angular.module(contentApp)),function(n){n.directive("genericArticle",["compassService","currentLanguageService",function(n,t){return{restrict:"A",templateUrl:"/app/content/PartialViews/GenericArticle/Container.html",scope:{article:"=",iframe:"=?"},link:function(i){function u(){i.hotfixCaption===null&&(i.hotfixCaption=n.getKbHotfixCaption())}var r="/app/content/PartialViews/GenericArticle/BasicArticle.html",f=t.getLang();i.hotfixLink=null;i.hotfixCaption=null;i.caseInsensitiveIndexOf=function(n,t){return n instanceof Array?n.map(function(n){return n instanceof String?n.toLowerCase():n}).indexOf(t.toLowerCase()):-1};i.getTemplateUrl=function(){if(i.article&&i.article.details&&i.article.details.subType)switch(i.article.details.subType){case"side-nav":return"/app/content/PartialViews/GenericArticle/SideNavArticle.html";default:return r}else return r};i.article&&i.article.details&&i.article.details.keywords&&i.article.details.keywords.indexOf("kbautohotfix")!==-1&&(i.hotfixLink="/hotfix/kbhotfix.aspx?kbnum="+i.article.details.id+"&kbln="+f);i.$on("CompassContentReady",u);u()}}}])}(angular.module(contentApp)),function(n){n.directive("guidedWalkThrough",["languageService",function(n){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/guidedWalkThrough.html",scope:{},link:function(t,i,r){var u=n.lang();t.gwt={link:"//support2.microsoft.com/common/survey.aspx?scid=sw;"+u+";"+r.gwtid+"&showpage=1",linkcaption:r.linkcaption,description:r.description}}}}])}(angular.module(contentApp)),function(n){n.directive("gwt",[function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Gwt/Container.html",scope:{article:"=",container:"@?",iframe:"=?"},link:function(n){n.article&&n.article.panes&&(n.paneList=[n.article.panes[0]],n.paneContext=[])},controller:["$scope","$timeout","linkTaggingService","$document",function(n,t,i){var r=this;this.appendPane=function(u,f,e){var o=this.getPane(f);o&&(u>0&&u<n.paneList.length&&(n.paneList=n.paneList.slice(0,u),n.paneContext=n.paneContext.slice(0,u-1)),n.paneList.push(o),n.paneContext.push(e),t(function(){var t="step-"+(n.paneContext.length+1)+"-pane-"+f+r.getEndpoint(f);i.tagContainerLinks("[id='"+t+"']","pane-"+f);n.container&&($(n.container).animate({scrollTop:angular.element("[id='"+t+"']").offset().top},"medium"),$("#pane-"+f+"-link-1").focus())}))};this.getPane=function(t){for(var i=0;i<n.article.panes.length;i++)if(t==n.article.panes[i].id)return n.article.panes[i];return null};this.getEndpoint=function(n){var t=n?r.getPane(n):null;return t?t.isEndpoint&&t.endpoint?"-endpoint:"+t.endpoint:"":""};n.$watch(function(){return n.article&&n.article.panes&&n.article.panes[0]},function(t,i){t!==i&&(n.paneList=[n.article.panes[0]],n.paneContext=[])});n.article.panes&&n.article.panes[0]&&t(function(){var r,t;for(i.tagContainerLinks("#step-1-pane-"+n.article.panes[0].id,"pane-"+n.article.panes[0].id),r=".gwt-all-panes-list #pane-",t=0;t<n.article.panes.length;t++)i.tagContainerLinks(r+(t+1),"pane-"+(t+1))},100)}]}}])}(angular.module(contentApp)),function(n){n.directive("gwtPane",[function(){return{require:"^gwt",restrict:"A",templateUrl:"/app/content/PartialViews/Gwt/Pane.html",transclude:!0,scope:{pane:"=",paneList:"=",paneContext:"=",stepIndex:"=",article:"=",preview:"=?"},link:function(n,t,i,r){n.state={};n.state.selectedAction="";n.actions=[];n.$watchCollection("paneList",function(){var i,t;if(n.stepIndex>=n.paneList.length-1&&(n.state.selectedAction=""),n.pane&&n.pane.actions)for(n.actions=[],i=0;i<n.pane.actions.length;i++)for(t=0;t<n.article.actions.length;t++)n.pane.actions[i]==n.article.actions[t].id&&n.actions.push(n.article.actions[t])});var u=n.preview?"":n.paneContext.slice(0,n.stepIndex).join(".");n.prevContext=u?"-context:"+u:"";n.getEndpoint=r.getEndpoint;n.appendPane=function(t,i,u){currentContext="s"+u+"p"+n.pane.id+"a"+i;r.appendPane(u,t,currentContext)}}}}])}(angular.module(contentApp)),function(n){n.directive("hdabs",[function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/hdabs.html",scope:{},transclude:!0,link:function(n,t,i){n.hdabs={graphicSrc:i.graphicSrc,graphicAlt:i.graphicAlt}}}}])}(angular.module(contentApp)),function(n){n.directive("kbBanner",[function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/banner.html",scope:{},link:function(n,t,i){n.title=i.title;n.description=i.description;n.imageUrl=i.imageUrl;n.linkText=i.linkText;n.linkUrl=i.linkUrl}}}])}(angular.module(contentApp)),function(n){n.directive("kbMetaTag",["$rootScope",function(n){return{restrict:"A",link:function(t,i,r){n.$broadcast("UpdateMetaTag",{name:r.name,value:r.value});t.$on("$destroy",function(){n.$broadcast("RemoveMetaTag",{name:r.name})})}}}])}(angular.module(contentApp)),function(n){n.directive("kbMsnSurvey",["$rootScope","$timeout","$window",function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/msnSurvey.html",scope:{},link:function(n,t,i){n.caption=i.caption;n.yesCaption=i.yesCap;n.noCaption=i.noCap;n.yesTarget=i.yesTarget;n.noTarget=i.noTarget}}}])}(angular.module(contentApp)),function(n){n.directive("kbProductPicker",[function(){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/productPicker.html",scope:{},link:function(n,t,i){n.products=n.$eval(i.products);n.products.unshift({BookMark:"all",ProductName:i.allProductsLabel});n.selectedProduct=n.products[0];n.$watch("selectedProduct",function(){n.scrollTo(n.selectedProduct.BookMark)});n.scrollTo=function(n){if(angular.isString(n))if(n=="all")$(".what-to-try").show();else{$(".what-to-try").hide();var t="."+n;$(t).show()}}}}}])}(angular.module(contentApp)),function(n){n.directive("logMeIn",["$location","$rootScope","contentApiService",function(n,t,i){return{templateUrl:"/app/content/PartialViews/LogMeIn/LogMeIn.html",restrict:"A",scope:{},link:function(r){function o(n,i){if(i.LogMeInRescueResponse){var o=i.LogMeInRescueResponse.toLowerCase(),e=!1;switch(o){case"pincode_missing":r.content.pinCodeText=n.pinCodeMissingText;e=!0;break;case"pincode_expired":r.content.pinCodeText=n.pinCodeExpiredText;e=!0;break;case"pincode_invalid":r.content.pinCodeText=n.pinCodeInvalidText;e=!0;break;case"pincode_alreadyused":r.content.pinCodeText=n.pinCodeAlreadyUsedText;e=!0;break;case"pincode_error":r.content.pinCodeText=n.pinCodeErrorText;e=!0;break;default:r.content.pinCodeText=n.pinCodeErrorText}e&&(u(!0),f());t.$broadcast("LMIPincodeError",o)}}function u(n){r.showLogMeInForm=n}function e(n){r.showEulaAcceptReject=n}function f(){r.disableEulaAccept=!0;r.disableEulaReject=!0}function s(){r.disableSubmit=!0}r.pincode={value:""};e(!1);u(!1);i.getCompassContentForPage("logmein").then(function(t){r.content=t.data;e(!0);o(r.content,n.search())},function(n){t.$broadcast("500Error",{reason:"Failed to load compass content for logmein page",response:n})});r.acceptEula=function(){f();t.$broadcast("LMIEulaAccept");u(!0)};r.rejectEula=function(){f();t.$broadcast("LMIEulaReject");n.path("/")};r.onSubmit=function(){var n,i,u,f;t.$broadcast("LMIEulaFormSubmit");n=document.createElement("form");n.method="post";n.action="https://secure.logmeinrescue-enterprise.com/Customer/Code.aspx";n.hidden=!0;i=document.createElement("input");i.type="text";i.name="Code";i.value=r.pincode.value.trim();n.appendChild(i);u=document.createElement("input");u.type="hidden";u.name="hostederrorhandling";u.value=1;n.appendChild(u);f=document.getElementById("logmein");f.appendChild(n);n.submit();s()}}}}])}(angular.module(contentApp)),function(n){n.directive("machineTranslation",["compassService","$routeParams","$location",function(n,t,i){return{scope:{},templateUrl:"/app/content/PartialViews/Content/MachineTranslation.html",link:function(r){var u=function(){var u=n.getMachineTranslation();u&&(r.machineTranslated=u,r.articleId=t.articleId,r.originalUrl=i.path().replace(t.langLocale,"en-us"),r.originalLink='<a href="view-original" href="'+r.originalUrl+'" target="_self">'+t.articleId+"<\/a>")};r.$on("CompassContentReady",function(){u()});u()}}}])}(angular.module(contentApp)),function(n){n.directive("managedLink",["compassService","languageService","locationService",function(n,t,i){return{restrict:"A",link:function(r,u,f){function e(n,t,i){var u=t,f,r;for(f in i)if(r=i[f],n&&n.indexOf(r.domain)>=0){u=r.outgoingLocales[t]||t;break}return u}function o(){var s,r,o;if(u.addClass("managed-link"),u&&(u.hasClass("btn")||u.hasClass("btn-primary"))?u.addClass("content-action-link"):u.addClass("content-anchor-link"),u.attr("aria-live","rude"),f.contentType&&f.contentId){s=null;switch(f.contentType){case"gwt":case"article":case"ia":s="/help/"+f.contentId}f.bookmarkId&&f.bookmarkId!="undefined"&&(s+="#"+f.bookmarkId);s&&u.attr("href","/"+t.langLocale()+s)}else if(f.bookmarkId&&f.bookmarkId!="undefined")u.on("click",function(n){i.scrollTo(f.bookmarkId);n.preventDefault();var t=angular.element(document).find("body").find("div.faq-panel");t.length>0&&t.find("#"+f.bookmarkId+".faq-panel-hide").click()});else f.href?(r=u.attr("href"),r&&r.indexOf("{lang-locale}")>=0&&(o=t.langLocale(),u.addClass("disabled"),n.getLocaleMapping().then(function(n){o=e(r,o,n);u.attr("href",r.replace(/{lang-locale}/g,o));u.removeClass("disabled")})),u.attr("target")||u.attr("target","_self")):f.link&&(r=f.link,r&&(r.indexOf("{lang-locale}")>=0?(o=t.langLocale(),u.addClass("disabled"),n.getLocaleMapping().then(function(n){o=e(r,o,n);u.attr("href",r.replace(/{lang-locale}/g,o));u.removeClass("disabled")})):(u.addClass("disabled"),u.attr("href",r),u.removeClass("disabled"))),f.chat&&f.chat=="true"&&u.click(function(){var n=f.link;window.open(n,"contactSupport","width=420,height=630,scrollbars=yes,resize=yes",!0)}))}u.attr("tabindex",0);o()}}}])}(angular.module(contentApp)),function(n){n.directive("mats",["$compile","$parse","$sce",function(n,t,i){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/mats.html",scope:{},link:function(n,t,r){n.mats={htmlCurr:i.trustAsHtml(r.matsHtml),learnMore:r.learnMore,learnMoreCaption:r.learnMoreCaption,runNow:r.runNow,runNowCaption:r.runNowCaption}}}}])}(angular.module(contentApp)),function(n){n.directive("mediaWidget",["$rootScope","$location","compassService","$filter",function(n,t,i,r){return{restrict:"A",templateUrl:"/app/content/PartialViews/Content/MediaWidget.html",scope:{title:"@"},link:function(u,f,e){function s(){u.emailHref=r("compassFormat")(o,{url:u.url,title:u.title})}function h(){var t=i.getContentMediaWidget(),n;t&&(n=t,o="mailto:?subject="+n.emailTitle+"&body="+n.emailBody,u.emailHref=r("compassFormat")(o,{url:u.url,title:u.title}),u.emailCaption=n.emailCaption,u.printCaption=n.printCaption)}n.$broadcast("UpdateTitle",u.title);u.printCaption=e.printCaption;u.emailCaption=e.emailCaption;u.url=t.absUrl();var o="mailto:?subject="+e.emailTitle+"&body="+e.emailBody;s();e.title&&e.$observe("title",function(){u.title=e.title;n.$broadcast("UpdateTitle",u.title);s()});e.emailTitle&&e.emailBody&&e.emailCaption&&e.printCaption||(h(),u.$on("CompassContentReady",function(){h()}))}}}])}(angular.module(contentApp)),function(n){n.directive("productPicker",["compassService","osService","$location","productsService","flightService",function(n,t,i,r){return{restrict:"A",templateUrl:"/app/content/PartialViews/Content/ProductPicker.html",scope:{productPicker:"=",articleSections:"=?"},link:function(u){function o(){var t=n.getContentProductPicker();t&&(u.productPickerStrings=t)}var f,e;u.os=t.getOS();switch(u.os){case"Windows XP":u.thisPc="1173";case"Windows 7":u.thisPc="14019";break;case"Windows 8":case"Windows 8.1":u.thisPc="17655";break;case"Windows 10":u.thisPc="18474"}u.productPickerStrings=n.getContentProductPicker();u.hasPicker=function(){var n=$(".content-article [applies-to-products]");return n.filter(":not([applies-to-products='[]'])").length>0&&u.productPicker.length>0};u.$on("CompassContentReady",function(){o()});u.products=[];u.selectedProduct=null;f=u.productPicker.filter(Number);f&&r.getProductList(f).then(function(n){angular.forEach(n,function(n){u.products.push({id:n.gdsId,name:n.name})})});e=i.hash();e&&angular.forEach(u.articleSections,function(n){n.meta.id&&n.meta.id===e&&n.meta.products&&n.meta.products.length>0&&(u.selectedProduct=$.inArray(n.meta.products[0],u.products)?n.meta.products[0]:null)});u.selectedProduct===null&&$.inArray(u.thisPC,u.products)&&(u.selectedProduct=u.thisPc);u.$watchCollection(function(){return $(".content-article [applies-to-products]").filter(":not([applies-to-products*='"+u.selectedProduct+"'])").filter(":not([applies-to-products='[]'])")||u.selectedProduct},function(n,t){if($("[applies-to-products]").show(),n!=t&&u.selectedProduct){var i=$(".content-article [applies-to-products]"),r=i.filter(":not([applies-to-products*='"+u.selectedProduct+"'])").filter(":not([applies-to-products='[]'])");i.length!=r.length&&r.hide()}})}}}])}(angular.module(contentApp)),function(n){n.directive("sarValueRender",["sarValueService",function(n){return{templateUrl:"/app/content/PartialViews/SarValue/SarValueTemplate.html",restrict:"A",scope:{},link:function(t){t.updating=!0;n.getCountryLanguage().then(function(n){t.countries=n.Countries;t.languages=n.Languages;t.updating=!1}).catch(function(){t.updating=!1});t.onCountrySelected=function(){t.updating=!0;n.getDevices(t.countrySelected.Id).then(function(n){t.devices=n;t.updating=!1}).catch(function(){t.updating=!1})};t.onDeviceSelected=function(){var i={countryId:t.countrySelected.Id,languageCode:t.languageSelected.Code,deviceModel:t.deviceSelected.Model};t.updating=!0;n.getSarValueDetail(i).then(function(n){t.sarValueDetail=n;t.updating=!1}).catch(function(){t.updating=!1})}}}}])}(angular.module(contentApp)),function(n){n.directive("thirdParty",["$compile","$parse","languageService",function(n,t,i){return{restrict:"A",templateUrl:"/app/content/PartialViews/Kb/thirdParty.html",scope:{},link:function(n,t,r){n.thirdParty={tooltip:r.tooltip,tplink:r.tplink,tpcaption:r.tpcaption,thirdPartyImage:"http://support.microsoft.com/library/images/support/"+i.langLocale()+"/thirdparty.png"}}}}])}(angular.module(contentApp)),function(n){n.service("assetService",["$rootScope","$injector","$cookies","$q","contentApiService","flightService","clientConfig",function(n,t,i,r,u,f,e){var o={},h=this,s=n.preview?null:t.has("authService")?t.get("authService"):null,c=f.isUserInFlight("aad-1");this.getAsset=function(n){if(o&&o[n])return o[n];if((e.InternalContentConfig&&e.InternalContentConfig.AllowInternalContent||i.get("smc_preview"))&&s&&c){var t=r.defer();return s.resolveAuthState().then(function(){t.resolve(h.getAssetPormise(n))}),t.promise}return this.getAssetPormise(n)};this.getAssetPormise=function(n){var t=u.getAsset(n);return o[n]=t,t}}])}(angular.module(contentApp));WLSPHIP1={error:0,cssSet:{cssCdHIPInput:"form-control"},holder:"ispHIPHIP",scriptHolder:"ispHIPScript",type:"visual",postLoad:function(){},getSolution:function(){},reloadHIP:function(){},switchHIP:function(){},setFocus:function(){},clientValidation:function(){},verify:function(){}},function(n){n.value("hipObject",WLSPHIP1);n.service("locationBlockService",["$rootScope","$http","hipObject","$q",function(n,t,i,r){var u={baseUrl:"/api/LocationServices/"};this.removeMacIdUsingHip=function(n){var f=r.defer();return i.verify(function(n,r,e){if(!n.trim())return f.reject("UnAuthorized"),i.reloadHIP(),f.promise;var o={macId:e,hip:{solution:n,token:r,datacenter:i.dataCenter,flowId:i.urlFid}};t.post(u.baseUrl+"locationblockusinghip/",JSON.stringify(o)).then(function(n){f.resolve(n)},function(n){f.reject(n);i.reloadHIP()})},n),f.promise}}])}(angular.module(contentApp)),function(n){n.service("sarValueService",["$http","$document","$rootScope",function(n){function t(){return n.get("/api/sar/getcountrylanguageasync").then(function(n){return n.data})}function i(t){var i={params:{countryId:t}};return n.get("/api/sar/getdevicesasync",i).then(function(n){return n.data})}function r(t){var i={params:{countryId:t.countryId,languageCode:t.languageCode,deviceModel:t.deviceModel}};return n.get("/api/sar/getsarvaluedetailasync",i).then(function(n){return n.data})}this.getCountryLanguage=t;this.getDevices=i;this.getSarValueDetail=r}])}(angular.module(contentApp));angular.module("ms-content").run(["$templateCache",function(n){n.put("/app/content/PartialViews/Antivirus/AvPartnerTemplate.html",'<div class="antivirus-vendors-page">\r\n    <div class="row spinner-container" ng-if="updating">\r\n        <div loading-spinner class="loading-spinner" data-timeout="20000" data-delay="500"><\/div>\r\n    <\/div>\r\n\r\n    <div ng-repeat="vendor in filteredVendors track by $index" ng-if="filteredVendors && filteredVendors.length > 1">\r\n        <div class="col-lg-6 col-md-8 col-sm-12 col-xs-24 vendor-block">\r\n            <div class="image-section">\r\n                <a ng-href={{vendor.url}}>\r\n                    <img class="img-responsive" ng-src={{vendor.image.url}} />\r\n                <\/a>\r\n            <\/div>\r\n            <div class="info-section">\r\n                <div>{{vendor.name}}<\/div>\r\n                <div><a ng-href={{vendor.url}}>{{vendor.referenceInfo}}<\/a><\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/Asset/Faq.html",'<div id="faq-asset-{{data.details.id}}" class="faq-section">\r\n    <a class="link-expand-all" ng-click="showOrHideAll()">{{faq.showAllIsActive ? \'Show all\' : \'Hide all\'}}<\/a>\r\n\r\n    <div ng-repeat="faqLink in faq.links track by $index">\r\n        <span class="bold"><a class="link-expand" ng-init="faqLink.isCollapsed = true" ng-click="updateExpandAll(faqLink)"> {{faqLink.question}} <\/a><\/span>\r\n        <div id="faq-answer-{{faqLink.id}}" compile="faqLink.answer" ng-show="!faqLink.isCollapsed"><\/div>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Asset/ImagePreview.html",'<img alt="Preview Image" src="/Content/Images/Preview.png" />\r\n');n.put("/app/content/PartialViews/Asset/ImageTextBlock.html",'<ul class="image-text-blocks menu-options">\r\n    <li class="menu-item clickable col-sm-24 col-md-12" ng-repeat="link in data.links track by $index">\r\n        <a id="image-text-block-{{assetId}}-{{link.id}}" href="{{link.link}}" target="_blank">\r\n            <img ng-if="link.icon" class="win-icon" ng-src="{{link.icon}}" aria-hidden="true" />\r\n            <span class="content">\r\n                <span class="menu-title bold">{{link.text}}<\/span>\r\n                <span class="menu-description text-body">{{link.body}}<\/span>\r\n            <\/span>\r\n        <\/a>\r\n    <\/li>\r\n<\/ul>\r\n');n.put("/app/content/PartialViews/Asset/SideNav.html",'<ul class="side-nav">\r\n    <li role="presentation" ng-repeat="link in nav.navLinks track by $index">\r\n        <div class="link-level-1" ng-class="nav.selectedLink.id === link.id ? \'selected-nav\' : \'nav-link\'" ng-if="!link.parentId">\r\n            <a id="side-nav-link-{{link.id}}" managed-link data-content-id="{{link.articleId}}" data-link="{{link.link}}" data-content-type="{{link.articleType}}">{{link.text}}<\/a>\r\n        <\/div>\r\n        <div class="link-level-2" ng-class="nav.selectedLink.id === link.id ? \'selected-nav\' : \'nav-link\'" ng-if="((nav.selectedLink.parentId) && (nav.selectedLink.parentId === link.parentId)) || ((nav.selectedLink.expandChildId) && (nav.selectedLink.expandChildId === link.parentId))">\r\n            <a id="side-nav-link-{{link.id}}" ng-attr-aria-describedby="{{nav.selectedLink.id === link.id ? \'link-selected\': null}}" managed-link data-content-id="{{link.articleId}}" data-link="{{link.link}}" data-content-type="{{link.articleType}}">{{link.text}}<\/a>\r\n        <\/div>\r\n    <\/li>\r\n<\/ul>\r\n<div id="link-selected" class="hidden" tabindex="-1">{{nav.compassSelected}}<\/div>');n.put("/app/content/PartialViews/Content/ArticleFooter.html",'<div class="spacer-32-top col-lg-16 col-lg-offset-4 col-md-20 col-md-offset-2" ng-if="article">\r\n    <div content-properties article-id={{article.details.id}} last-modified={{article.details.publishedOn}} revision={{article.details.version}} products="{{article.details.products}}">\r\n    <\/div>\r\n<\/div>\r\n\r\n<div class="spacer-32-top col-lg-16 col-lg-offset-4 col-md-20 col-md-offset-2" ng-show="article && !iFrame">\r\n    <div content-survey>\r\n    <\/div>\r\n<\/div>\r\n\r\n<div class="spinner-container spacer-20-top" ng-if="!article">\r\n    <div loading-spinner data-timeout="30000" data-delay="1000"><\/div>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/Content/ContentNotice.html",'<div class="container notice">\r\n    <img class="icon pull-left" ng-src="{{logo}}" alt="{{notice}}" />\r\n    <div class="notice-text">\r\n        {{notice}}\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/ContentProperties.html",'<div class="section" ng-show="contentProperties">\r\n    <header class="section-header">\r\n        <h5 class="section-title">{{contentProperties.sectionHeader}}<\/h5>\r\n    <\/header>\r\n    <p>{{contentProperties.detailsCaption | compassFormat : {\'articleId\' : articleId, \'lastModified\' : lastModified, \'revision\' : revision } }}<\/p>\r\n\r\n    <div ng-if="appliesTo.length > 0">\r\n        <label for="applies-to">{{contentProperties.appliesToCaption}}<\/label>\r\n        <div id="applies-to">\r\n            {{appliesTo.join(\', \')}}\r\n        <\/div>\r\n        <br />\r\n    <\/div>\r\n    <div ng-if="keywords">\r\n        <label for="keywords">{{contentProperties.keywordsCaption}}<\/label>\r\n        <ul id="keyword-list">\r\n            <li ng-repeat="keyword in keywords track by $index">\r\n                {{keyword.Value}}\r\n            <\/li>\r\n        <\/ul>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/FaqPanel.html","<a ng-click='toggle()' class='link-expand bold' ng-attr-aria-expanded=\"{{panel.isOpen || false}}\" ng-attr-title='{{panel.title}}' role=\"button\" href=\"\">\r\n    <span class=\"link-expand-image\"><i class='faq-chevron win-icon' ng-class='panel.class'><\/i><\/span>\r\n    <span class=\"link-expand-text\" ng-class=\"panel.displayType\" id=\"{{ panel.panelId }}\"> {{ panel.title }}<\/span>\r\n<\/a>\r\n<div ng-show='panel.isOpen' compile='panel.body' class='faq-panel-body'> <\/div>");n.put("/app/content/PartialViews/Content/InternalContent.html",'<div class="alert-band internal-content-band">\r\n    <div class="alert alert-danger" role="alert">\r\n        <div id="internal-content-band-title" class="alert-title bold">{{ic.internalProperties.disclaimerHeader}} <\/div>\r\n        <p id="internal-content-band-disc">{{ic.internalProperties.disclaimerCaption}}<\/p>\r\n        <div class="row article-info">\r\n            <div id="internal-content-band-id" class="col-md-8 col-sm-12 col-lg-6"><span dir="{{ic.textDir}}">{{ic.internalProperties.articleIdTitle}}: <\/span><span class="bold">{{ic.article.details.id}}<\/span><\/div>\r\n            <div id="internal-content-band-cowner" class="col-md-16 col-sm-12 col-lg-18"><span dir="{{ic.textDir}}">{{ic.internalProperties.contentOwnerTitle}}: <\/span><span class="bold">{{ic.article.details.contentOwner}}<\/span><\/div>\r\n            <div id="internal-content-band-rev" class="col-md-8 col-sm-12 col-lg-6"><span dir="{{ic.textDir}}">{{ic.internalProperties.versionTitle}}: <\/span><span class="bold">{{ic.article.details.version}}<\/span><\/div>\r\n            <div id="internal-content-band-lmfd" class="col-md-16 col-sm-12 col-lg-18"><span dir="{{ic.textDir}}">{{ic.internalProperties.createdOnTitle}}: <\/span><span class="bold">{{ic.article.details.createdOn | date:\'longDate\'}}<\/span><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/KbBanners.html","<div class=\"section kb-article\" ng-if=\"kbb.articleBanners && kbb.articleBanners.length\">\r\n    <div ng-repeat=\"banner in kbb.articleBanners\" kb-banner title='{{banner.title}}' description='{{banner.description}}' image-url='{{banner.image.url}}' link-text='{{banner.link.linkText}}' link-url='{{banner.link.linkUrl}}'><\/div>\r\n<\/div>");n.put("/app/content/PartialViews/Content/KbRetired.html",'<div class="section kb-article" ng-if="kbr.kbRetired !== null">\r\n    <div kb-banner title="{{kbr.kbRetired.noticeHeader}}" description="{{kbr.kbRetired.disclaimer}}"><\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/MachineTranslation.html",'<div class="alert-band" ng-if="machineTranslated && machineTranslated.disclaimer">\r\n    <div class="alert alert-info" role="alert">\r\n        <p>{{machineTranslated.disclaimer}}<\/p>\r\n        <p ng-bind-html="machineTranslated.viewOriginal | compassFormat: {article: originalLink}"><\/p>\r\n    <\/div>\r\n    <div debug="machineTranslated"><\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/MediaWidget.html",'<div class="content-media row">\r\n    <ul class="list-unstyled col-md-6 col-xl-4 media-widget">\r\n        <li>\r\n            <a id="media-email" translate="no" ng-href="{{ emailHref }}">\r\n                <span class="win-icon" aria-hidden="true"> &#xE715; <\/span>{{ emailCaption }}\r\n            <\/a>\r\n        <\/li>\r\n        <li>\r\n            <a id="media-print" translate="no" href="javascript:window.print();">\r\n                <span class="win-icon" aria-hidden="true"> &#xE749; <\/span>{{ printCaption }}\r\n            <\/a>\r\n        <\/li>\r\n    <\/ul>\r\n<\/div>');n.put("/app/content/PartialViews/Content/ProductPicker.html",'<div class="dropdown" ng-show="hasPicker()">\r\n    <div>\r\n        <label for="combobox">{{productPickerStrings.dropDownLabel}}<\/label>\r\n    <\/div>\r\n    <br />\r\n    <div>\r\n        <select id="combobox" ng-model="selectedProduct" ng-options="product.id as product.name for product in products" class="spacer-32-bottom">\r\n            <option value="">{{productPickerStrings.allProductsLabel}}<\/option>\r\n        <\/select>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/Section.html",'<section class="section" ng-if="typeof(contentSection) !== \'string\'" applies-to-products="{{applicableProducts()}}" ng-attr-id="{{contentSection.meta.id}}" ng-class="{\'internal-content\': isInternalSection() }">\r\n    <div ng-if="isInternalSection()" class="bold spacer-12-bottom">{{internalProperties.sectionDisclaimerHeader}}<\/div>\r\n    <header class="section-header" ng-if="contentSection.title">\r\n        <h3 class="section-title" ng-bind-html="contentSection.title"><\/h3>\r\n        <span class="section-subtitle" ng-if="contentSection.subtitle">{{contentSection.subtitle}}<\/span>\r\n    <\/header>\r\n    <div class="container section-body" ng-if="contentSection.content && contentSection.content.length > 0">\r\n        <div class="row">\r\n            <div ng-class="getStyleClass()" ng-repeat="content in contentSection.content track by $index">\r\n                <div compile="content"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/section>');n.put("/app/content/PartialViews/Content/SectionList.html",'<div ng-repeat="section in contentSectionList track by $index" ng-if="!isString && hasContent()">\r\n    <div content-section="section"><\/div>\r\n<\/div>\r\n<div ng-if="!isString">\r\n    <div compile="contentSectionList"><\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Content/Survey.html",'<section class="section content-survey" ng-show="contentSurvey">\r\n    <header class="section-header">\r\n        <h5 class="section-title">{{contentSurvey.surveyTitle}}<\/h5>\r\n    <\/header>\r\n    <form ng-submit="OnSubmit()">\r\n        <div ng-show="showSurvey">\r\n            <div class="choices" ng-show="showButtons">\r\n                <label ng-class="choiceCaptionClass">{{contentSurvey.choiceGroupCaption}}<\/label>\r\n                <div class="form-group">\r\n                    <span class="button">\r\n                        <label class="button-inline">\r\n                            <button id="content-survey-yes" class="btn btn-primary" type="button" ng-click="onYesNoSomewhatClick(\'yes\')" value="yes"> {{contentSurvey.yesCaption}} <\/button>\r\n                        <\/label>\r\n                    <\/span>\r\n                    <span class="button">\r\n                        <label class="button-inline">\r\n                            <button id="content-survey-somewhat" class="btn btn-primary" type="button" ng-click="onYesNoSomewhatClick(\'somewhat\')" value="somewhat"> {{contentSurvey.somewhatCaption}} <\/button>\r\n                        <\/label>\r\n                    <\/span>\r\n                    <span class="button">\r\n                        <label class="button-inline">\r\n                            <button id="content-survey-no" class="btn btn-primary" type="button" ng-click="onYesNoSomewhatClick(\'no\')" value="no"> {{contentSurvey.noCaption}} <\/button>\r\n                        <\/label>\r\n                    <\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div ng-show="showTextBox">\r\n                <div class="form-group">\r\n                    <label class="suggestion">\r\n                        {{contentSurvey.suggestionCaption}}\r\n                    <\/label>\r\n                    <textarea id="survey-verbatim" class="form-control" aria-label="{{contentSurvey.suggestionCaption}}" name="suggestion" ng-model="suggestion" ng-minlength="1" ng-maxlength="400"><\/textarea>\r\n                <\/div>\r\n                <div class="form-group">\r\n                    <button class="btn btn-primary pull-right" type="submit">{{contentSurvey.submitButtonCaption}}<\/button>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div ng-show="!showSurvey">\r\n            {{contentSurvey.thankYouTextCaption}}\r\n        <\/div>\r\n    <\/form>\r\n<\/section>');n.put("/app/content/PartialViews/GenericArticle/BasicArticle.html",'<div content-section-list="article.details.body"><\/div>\r\n');n.put("/app/content/PartialViews/GenericArticle/Container.html",'<div class="content-article">\r\n    <div class="container">\r\n        <div class="row">\r\n            <header class="page-title-header">\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="article.details.heading" ng-bind-html="article.details.heading"><\/h1>\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="!article.details.heading" ng-bind-html="article.details.title"><\/h1>\r\n                <div ng-hide="iframe" media-widget data-title="{{ article.details.urlTitleSuffix ? article.details.title + \' - \' + article.details.urlTitleSuffix : article.details.title }}"><\/div>\r\n            <\/header>\r\n        <\/div>\r\n    <\/div>\r\n    <div content-notice ng-if="iframe"><\/div>\r\n\r\n    <div ng-if="hotfixLink" class=\'section hotfix-section\'><a class=\'kb-hotfix-link\' ng-href=\'{{hotfixLink}}\' href="" target="_self">{{ hotfixCaption }}<\/a><\/div>\r\n\r\n    <div machine-translation ng-if="article.details.isMachineTranslated === true || article.details.isMachineTranslated === \'true\'"> <\/div>\r\n    <internal-content ng-if="article.details.isInternalContent === true || article.details.isInternalContent === \'true\'" article="article"><\/internal-content>\r\n\r\n    <kb-banners ng-if="article.gdsProducts.length > 0" products="article.gdsProducts"><\/kb-banners>\r\n    <kb-retired ng-if="caseInsensitiveIndexOf(article.details.keywords, \'kbretire\') > -1"><\/kb-retired>\r\n\r\n    <div product-picker="article.details.products" article-sections="article.details.body"><\/div>\r\n    <div ng-if="article.details.kbProductPicker" compile="article.details.kbProductPicker"><\/div>\r\n\r\n    <div ng-include="getTemplateUrl()"><\/div>\r\n\r\n<\/div>');n.put("/app/content/PartialViews/GenericArticle/Index.html",'<div class="content-article spacer-32-top col-lg-16 col-lg-offset-4 col-md-20 col-md-offset-2" ng-if="article">\r\n    <div generic-article article="article" iframe="iFrame"><\/div>\r\n<\/div>\r\n<div ng-include="\'/app/content/PartialViews/Content/ArticleFooter.html\'"><\/div>');n.put("/app/content/PartialViews/GenericArticle/SideNavArticle.html",'<div class="container">\r\n    <div class="row">\r\n        <div class="col-md-18 col-md-push-6 col-sm-16 col-sm-push-8">\r\n            <div content-section-list="article.details.body"><\/div>\r\n        <\/div>\r\n        <div class="col-md-6 col-md-pull-18 col-sm-8 col-sm-pull-16">\r\n            <div asset="article.sideNav"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Gwt/Container.html",'<div class="gwt content-article">\r\n    <div class="container">\r\n        <div class="row">\r\n            <header class="page-title-header">\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="article.details.heading">{{ article.details.heading }}<\/h1>\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="!article.details.heading">{{ article.details.title }}<\/h1>\r\n                <div ng-hide="iframe" media-widget data-title="{{ article.details.urlTitleSuffix ? article.details.title + \' - \' + article.details.urlTitleSuffix : article.details.title }}"><\/div>\r\n            <\/header>\r\n        <\/div>\r\n    <\/div>\r\n    \r\n    <div content-notice ng-if="iframe"><\/div>\r\n\r\n    <div machine-translation="article.details.isMachineTranslated" ng-if="article.details.isMachineTranslated === true || article.details.isMachineTranslated === \'true\'"><\/div>\r\n    <internal-content ng-if="article.details.isInternalContent === true || article.details.isInternalContent === \'true\'" article="article"><\/internal-content>\r\n\r\n    <div product-picker="article.details.products" article-sections="article.details.body"><\/div>\r\n\r\n    <div class="container">\r\n        <div class="row">\r\n            <div class="col-xs-24">\r\n                <div class="gwt-body spacer-16-top">\r\n                    <div content-section-list="article.details.body"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="row spacer-84-top">\r\n            <div class="col-xs-24">\r\n                <div ng-repeat="pane in paneList track by $index">\r\n                    <div gwt-pane data-pane="pane" data-pane-list="paneList" data-pane-context="paneContext" data-article="article" data-step-index="$index"><\/div>\r\n                <\/div>\r\n\r\n                <!-- SEO needs all panes rendered to the page -->\r\n                <div class="gwt-all-panes-list">\r\n                    <div ng-repeat="pane in article.panes track by $index">\r\n                        <div gwt-pane data-pane="pane" data-pane-list="paneList" data-pane-context="paneContext" data-article="article" data-preview="true" data-step-index="$index"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<div debug="article"><\/div>');n.put("/app/content/PartialViews/Gwt/Index.html",'<div gwt container="html,body" article="article" iframe="iFrame" class="spacer-32-top col-lg-16 col-lg-offset-4 col-md-20 col-md-offset-2" ng-if="article">\r\n<\/div>\r\n\r\n<div ng-include="\'/app/content/PartialViews/Content/ArticleFooter.html\'"><\/div>');n.put("/app/content/PartialViews/Gwt/Pane.html",'<section id="{{ preview ? \'\' : \'step-\' + (stepIndex + 1) + \'-\'}}pane-{{ pane.id }}{{getEndpoint(pane.id)}}" class="section pane" ng-class="{\'has-traintracks\' : stepIndex < paneList.length-1 && !preview }">\r\n    <header class="section-header" ng-if="pane.title">\r\n        <div class="gwt-step-number-container" ng-class="{\'active\' : stepIndex == paneList.length-1 && !preview}">\r\n            <div class="gwt-step-number hidden-sm hidden-xs section-title">{{ preview ? 0 : stepIndex + 1 }}<\/div>\r\n        <\/div>\r\n        <h5 class="section-title">{{ pane.title }}<\/h5>\r\n    <\/header>\r\n\r\n    <div class="section-body spacer-16-top">\r\n        <div class="gwt-pane-body">\r\n            <div content-section-list="pane.body"><\/div>\r\n        <\/div>\r\n        <div ng-if="actions.length < 11">\r\n            <div ng-repeat="action in actions">\r\n                <div class="gwt-action">\r\n                    <div class="radio" ng-init="step = preview ? 0 : stepIndex+1">\r\n                        <label>\r\n                            <input type="radio" ng-attr-id="step:{{step}}-option:{{$index+1}}-pane:{{pane.id}}-action:{{action.id}}{{getEndpoint(action.pane)}}{{prevContext}}"\r\n                                   ng-model="state.selectedAction" ng-value="action.id + \'|\' + action.title"\r\n                                   class="gwt-action" name="step-{{step}}-pane-{{pane.id}}-actn"\r\n                                   ng-click="appendPane(action.pane, action.id, step)" />\r\n                            <span class="text-base">\r\n                                {{action.title}}\r\n                            <\/span>\r\n                        <\/label>\r\n                    <\/div>\r\n                    <div content-section-list="action.body"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div ng-if="actions.length >= 11">\r\n            <div class="dropdown">\r\n                <select ng-model="state.selectedAction"\r\n                        ng-init="step = preview ? 0 : stepIndex+1"\r\n                        ng-options="action.title for action in actions"\r\n                        ng-attr-id="step:{{step}}-option:{{$index+1}}-pane:{{pane.id}}-action:{{action.id}}{{prevContext}}"\r\n                        class="form-control gwt-action form-control pane-dropdown" name="step-{{step}}-pane-{{pane.id}}-actn"\r\n                        ng-change="appendPane(state.selectedAction.pane, state.selectedAction.id, step)">\r\n                    <option value="">-- Choose One --<\/option>\r\n                <\/select>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/section>');n.put("/app/content/PartialViews/HelpArticle/Index.html",'<div ng-if="isGwt">\r\n    <div ng-include="\'/app/content/PartialViews/Gwt/Index.html\'"><\/div>\r\n<\/div>\r\n<div ng-if="isGenericArticle">\r\n    <div ng-include="\'/app/content/PartialViews/GenericArticle/Index.html\'"><\/div>\r\n<\/div>\r\n<div ng-if="isInstantAnswer">\r\n    <div ng-include="\'/app/content/PartialViews/InstantAnswer/InstantAnswer.html\'"><\/div>\r\n<\/div>\r\n\r\n<div class="spinner-container spacer-20-top" ng-if="!article">\r\n    <div loading-spinner data-timeout="30000" data-delay="1000"><\/div>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/InstantAnswer/Container.html",'<div class="content-article instant-answer">\r\n    <div class="container">\r\n        <div class="row">\r\n            <header class="page-title-header">\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="ia.article.details.heading">{{ ia.article.details.heading }}<\/h1>\r\n                <h1 class="page-title col-xl-20 col-md-18" ng-if="!ia.article.details.heading">{{ ia.article.details.title }}<\/h1>\r\n                <div ng-hide="iframe" media-widget data-title="{{ ia.article.details.urlTitleSuffix ? ia.article.details.title + \' - \' + ia.article.details.urlTitleSuffix : ia.article.details.title }}"><\/div>\r\n            <\/header>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div content-notice ng-if="iframe"><\/div>\r\n    \r\n    <div machine-translation="ia.article.details.isMachineTranslated" ng-if="ia.article.details.isMachineTranslated === true || ia.article.details.isMachineTranslated === \'true\'"><\/div>\r\n    <internal-content ng-if="ia.article.details.isInternalContent === true || ia.article.details.isInternalContent === \'true\'" article="ia.article"><\/internal-content>\r\n\r\n    <div ng-if="ia.article.details.subType === \'mixed-tabs\' || ia.article.details.subType === \'how-to\'">\r\n        <select ng-if="ia.article.answerList && ia.article.answerList.length > 1" ng-options="item as item.title || \'[Empty title]\' for item in ia.article.answerList" \r\n                ng-model="ia.selectedTab" ng-init="ia.selectedTab = ia.article.answerList[0]"><\/select>\r\n        <mixed-tab ng-repeat="section in ia.article.answerList track by $index" section="section" ng-show="ia.selectedTab != null ? (ia.selectedTab === section) : ($index === 0)"><\/mixed-tab>\r\n    <\/div>\r\n\r\n    <div ng-if="ia.article.details.subType === \'slideshow\' && ia.article.answerList.length">\r\n        <section class="section">\r\n            <header class="section-header" ng-if="ia.article.answerList[0].title">\r\n                <h3 class="section-title">{{ia.article.answerList[0].title}}<\/h3>\r\n            <\/header>\r\n            <div class="container section-body">\r\n                <step-list step-list="ia.article.answerList[0].stepList"><\/step-list>\r\n            <\/div>\r\n        <\/section>\r\n    <\/div>\r\n\r\n<\/div>');n.put("/app/content/PartialViews/InstantAnswer/InstantAnswer.html",'<div class="content-article spacer-32-top col-lg-16 col-lg-offset-4 col-md-20 col-md-offset-2" ng-if="article">\r\n    <instant-answer article="article" iframe="iFrame"><\/instant-answer>\r\n<\/div>\r\n<div ng-include="\'/app/content/PartialViews/Content/ArticleFooter.html\'"><\/div>');n.put("/app/content/PartialViews/InstantAnswer/MixedTab.html",'<section class="section">\r\n    <div class="container section-body">\r\n        \r\n        <div ng-if="$ctrl.section.tabType === \'gif\' && $ctrl.section.gif && $ctrl.section.gif.fileUrl" class="step-media">\r\n            <img ng-src="{{$ctrl.section.gif.fileUrl}}" alt="{{$ctrl.section.gif.previewImage.altText}}" />\r\n        <\/div>\r\n\r\n        <div ng-if="$ctrl.section.tabType === \'video\' && $ctrl.section.video && $ctrl.section.video.url" class="step-media">\r\n            <div class="image-container">\r\n                <div ng-click="$ctrl.section.video.previewImage.fileUrl && ($ctrl.showMedia = true)">\r\n                    <img ng-if="!$ctrl.showMedia" class="img-responsive" ng-src="{{$ctrl.section.video.previewImage.fileUrl}}" alt="{{$ctrl.section.video.previewImage.altText}}" />\r\n                    <iframe ng-if="$ctrl.showMedia" src="{{$ctrl.trustSrc($ctrl.section.video.url)}}" class="embed-responsive-item" scrolling="no" allowfullscreen="true" frameborder="0" width="{{$ctrl.section.video.previewImage.width}}" height="{{$ctrl.section.video.previewImage.height}}"><\/iframe>                    \r\n                    <button ng-show="!$ctrl.showMedia && $ctrl.section.video.previewImage.fileUrl" class="win-icon win-icon-Play normalize-button">\r\n                        <span class="sr-only">{{$ctrl.playVideoCaption}}<\/span>\r\n                    <\/button>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div ng-if="$ctrl.section.snippet" class="snippet" ng-bind-html="$ctrl.section.snippet"> <\/div>\r\n\r\n        <step-list ng-if="$ctrl.section.stepList" step-list="$ctrl.section.stepList" step-style="$ctrl.section.stepList.stepStyle"><\/step-list>\r\n\r\n        <div ng-if="$ctrl.section.seeMoreUrl" class="see-more-url">\r\n            <a id="instant-answer-related-help" href="{{$ctrl.section.seeMoreUrl.url}}" ng-bind="$ctrl.section.seeMoreUrl.text"><\/a>\r\n        <\/div>\r\n\r\n        <div ng-if="$ctrl.section.actionList && $ctrl.section.actionList.length" class="action-list">\r\n            <div class="spacer-12-top" ng-repeat="action in $ctrl.section.actionList track by $index">\r\n                <a ng-if="action.url" ng-attr-id="instant-answer-action-{{$index}}" class="btn btn-primary" href="{{action.url}}" ng-bind="action.text"><\/a> \r\n            <\/div> \r\n        <\/div>\r\n\r\n    <\/div>\r\n<\/section>');n.put("/app/content/PartialViews/InstantAnswer/StepList.html",'<div class="step-list" ng-if="$ctrl.stepList.steps.length">\r\n    <ul ng-class="$ctrl.listStyle">\r\n        <li ng-repeat="step in $ctrl.stepList.steps">\r\n\r\n            <span ng-if="step.stepTitle" ng-bind-html="step.stepTitle"><\/span>\r\n            <span ng-bind-html="step.stepHtml"><\/span>\r\n\r\n            <div ng-if="step.imageOfStep && step.imageOfStep.fileUrl">\r\n                <img ng-src="{{step.imageOfStep.fileUrl}}" alt="{{step.imageOfStep.altText}}" />\r\n            <\/div>\r\n\r\n            <div ng-if="step.subStepList && step.subStepList.steps.length">\r\n                <ul ng-class="step.subListStyle">\r\n                    <li ng-repeat="subStep in step.subStepList.steps" ng-bind-html="subStep"><\/li>\r\n                <\/ul>\r\n            <\/div>\r\n        <\/li>\r\n    <\/ul>\r\n<\/div>');n.put("/app/content/PartialViews/InternalSignin/InternalSigninTemplate.html",'<div class="col-lg-10 col-lg-push-7 col-md-18 col-md-push-3 text-center internal-signin" ng-if="!aad.pageUpdating">\r\n    <p>\r\n        {{aad.content.internalSignInText}}\r\n    <\/p>\r\n    <button id="internal-signin-btn" class="btn btn-primary" ng-click="aad.signIn()">\r\n        {{aad.content.signinButtonText}}\r\n    <\/button>\r\n<\/div>\r\n<div class="spinner-container" ng-if="aad.pageUpdating === true">\r\n    <div loading-spinner data-timeout="20000" data-delay="500"><\/div>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/Kb/banner.html",'<div class="kb-banner">\r\n    <div>\r\n        <p class="section-title">{{title}}<\/p>\r\n        <p>\r\n            {{description}}\r\n            <a href="{{linkUrl}}">\r\n                {{linkText}}\r\n            <\/a>\r\n        <\/p>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/Kb/detectOS.html",'<div class="section kb-detect-os text-base">\r\n    {{currentOS}}\r\n<\/div>');n.put("/app/content/PartialViews/Kb/fixIt.html",'<div class="fix-it">\r\n    <button class="btn btn-primary" ng-click="nav(link)">\r\n        {{text}}\r\n    <\/button>\r\n<\/div>');n.put("/app/content/PartialViews/Kb/guidedWalkThrough.html","<div class='gwt-container'>\r\n    <p>{{gwt.description}}<\/p>\r\n    <a ng-href='{{gwt.link}}'>{{gwt.linkcaption}}<\/a>\r\n<\/div>\r\n");n.put("/app/content/PartialViews/Kb/hdabs.html","<div class='row hdabs-container'>\r\n    <div class=\"col-lg-6\" id='hdabs-image-container'><img ng-src='{{hdabs.graphicSrc}}' alt='{{hdabs.graphicAlt}}' /><\/div>\r\n    <div class=\"col-lg-18\" id='hdabs-content-container' ng-transclude><\/div>\r\n<\/div>\r\n");n.put("/app/content/PartialViews/Kb/mats.html","<div class='mats-container'>\r\n    <img alt='Microsoft fix it banner' src='http://support.microsoft.com/library/images/support/en-US/fixit_launchbanner.png'>\r\n    <table id='content'>\r\n        <tr>\r\n            <td id='left-pane'>\r\n                <div id=\"mats-content\" ng-bind-html=\"mats.htmlCurr\"><\/div>\r\n                <a ng-href='{{mats.learnMore}}'>{{mats.learnMoreCaption}}<\/a>\r\n            <td id='right-pane'>\r\n                <a ng-href='{{mats.runNow}}'>{{mats.runNowCaption}}<\/a>\r\n            <\/td>\r\n        <\/tr>\r\n    <\/table>\r\n<\/div>");n.put("/app/content/PartialViews/Kb/msnSurvey.html",'<div id="kb-msn-survey-form" ng-controller="MsnSurveyController">\r\n    <h3>{{caption}}<\/h3>\r\n    <button id="kbmsninline-yes" class="btn btn-default" ng-click="positiveSurvey()">{{yesCaption}}<\/button>\r\n    <button id="kbmsninline-no" class="btn btn-default" ng-click="negativeSurvey()">{{noCaption}}<\/button>\r\n<\/div>');n.put("/app/content/PartialViews/Kb/productPicker.html",'<div class="dropdown">\r\n    <select id="product-picker" ng-model="selectedProduct" ng-options="product.ProductName for product in products"><\/select>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/Kb/thirdParty.html","<div class=kb-thirdparty>\r\n    <a title='{{thirdParty.tooltip}}' href='{{thirdParty.tplink}}'><img src='{{thirdParty.thirdPartyImage}}' alt=\"{{thirdParty.tooltip}}\" /><\/a>\r\n    <a title='{{thirdParty.tooltip}}' href='{{thirdParty.tplink}}'>{{thirdParty.tpcaption}}<\/a>\r\n<\/div>");n.put("/app/content/PartialViews/LocationServices/LocationBlockTemplate.html",'<div class="location-block" ng-if="!lb.pageUpdating">\r\n    <form name="location-block">\r\n        <div class="form-group">\r\n            <label for="macId">{{lb.content.macIdLabelText}}<\/label>\r\n            <input id="macId" type="text" ng-model="lb.macId" />\r\n            <span>{{lb.content.macIdExampleText}}<\/span>\r\n        <\/div>\r\n    <\/form>\r\n    <form name="captcha">\r\n        <div class="form-group" ng-class="{ \'has-error\': wrongCaptcha }">\r\n            <div id="ispHIPHIP"><\/div>\r\n            <div id="ispHIPScript" style="display:inline">\r\n                <div hip-script object-name="WLSPHIP1"><\/div>\r\n            <\/div>\r\n            <input type="hidden" id="Solution" name="Solution" />\r\n            <input type="hidden" id="Token" name="Token" />\r\n            <input type="hidden" id="Type" name="Type" />\r\n        <\/div>\r\n    <\/form>\r\n    <button class="btn btn-default" form="location-block"\r\n            type="submit" id="submit" value="Submit"\r\n            ng-disabled="!lb.macId" ng-click="lb.submitMacId(lb.macId)">\r\n        {{lb.content.submitButtonText}}\r\n    <\/button>\r\n    <div class="alert">\r\n        <div class="alert-error" ng-if="lb.status === false">\r\n            &#42;&#42;{{lb.content.errorMessage}}\r\n        <\/div>\r\n        <div ng-if="lb.status === true">\r\n            {{lb.content.successMessage}}\r\n        <\/div>\r\n    <\/div>\r\n    <div class="spinner-small spinner-widget" ng-if="lb.resultUpdating === true">\r\n        <div loading-spinner data-timeout="20000" data-delay="500"><\/div>\r\n    <\/div>\r\n<\/div>\r\n<div class="spinner-container" ng-if="lb.pageUpdating === true">\r\n    <div loading-spinner data-timeout="20000" data-delay="500"><\/div>\r\n<\/div>\r\n');n.put("/app/content/PartialViews/LogMeIn/LogMeIn.html",'<div class="logmein-eula-page">\r\n    <div id="eulaAcceptReject" class="logmein-content" ng-if="showEulaAcceptReject">\r\n        <button id="acceptEula" class="eulaButton" ng-click="acceptEula()" ng-disabled="disableEulaAccept" name="acceptEula">{{content.acceptButtonText}}<\/button>\r\n        <button id="rejectEula" class="eulaButton" ng-click="rejectEula()" ng-disabled="disableEulaReject" name="rejectEula">{{content.rejectButtonText}}<\/button>\r\n    <\/div>\r\n    <div class="logmein-pincode-dialog" ng-if="content.pinCodeText">\r\n        <strong>{{content.pinCodeText}}<\/strong>\r\n    <\/div>\r\n    <div id="logmein" ng-if="showLogMeInForm" class="logmein-content">\r\n        <form name="logmeinsupport" ng-submit="onSubmit()" id="logmeinsupport">\r\n            <div>\r\n                <span>{{content.formInstructionText}}<\/span><input type="text" ng-model="pincode.value" /><br />\r\n                <input type="submit" value="{{content.submitButtonText}}" ng-disabled="disableSubmit" />\r\n            <\/div>\r\n        <\/form>\r\n    <\/div>\r\n<\/div>');n.put("/app/content/PartialViews/SarValue/SarValueTemplate.html",'<div class="sarValueDetail">\r\n    <div class="row">\r\n        <div class="col-lg-6 col-lg-offset-2 spacer-12-bottom">\r\n            <select class="form-control" name="languageSelect" id="languageSelect"\r\n                    ng-options="language.Name for language in languages track by language.Code"\r\n                    ng-change="onLanguageSelected()"\r\n                    ng-model="languageSelected">\r\n                <option value="">- Select Language -<\/option>\r\n            <\/select>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="row">\r\n        <div class="col-lg-6 col-lg-offset-2 spacer-12-bottom">\r\n            <select class="form-control" name="countrySelect" id="countrySelect"\r\n                    ng-options="country.Name for country in countries track by country.Id"\r\n                    ng-change="onCountrySelected()"\r\n                    ng-model="countrySelected">\r\n                <option value="">- Select Country -<\/option>\r\n            <\/select>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="row">\r\n        <div class="col-lg-6 col-lg-offset-2 spacer-12-bottom">\r\n            <select class="form-control" name="deviceSelect" id="deviceSelect"\r\n                    ng-options="device.Name for device in devices"\r\n                    ng-change="onDeviceSelected()"\r\n                    ng-model="deviceSelected">\r\n                <option value="">- Select Device -<\/option>\r\n            <\/select>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="row spinner-container" ng-if="updating">\r\n        <div loading-spinner class="loading-spinner" data-timeout="20000" data-delay="500"><\/div>\r\n    <\/div>\r\n    <div class="row" ng-hide="updating" ng-if="sarValueDetail" ng-bind-html="sarValueDetail"><\/div>\r\n<\/div>');n.put("/app/content/PartialViews/SureRoute.html",'<!-- *********************************************************************************************************\r\n    \r\n    WARNING: Do not remove this file! This is used by Akamai to determine which data center is optimally located to serve a request\r\n    The content of this file is irrelevant, it\'s simply round tripping 1-5kb to validate network latency\r\n   \r\n\r\n********************************************************************************************************* -->\r\n\r\n\r\n\r\n\r\n<div class="spinner-container" ng-if="waitingOnCompass">\r\n    <div loading-spinner data-timeout="30000" data-delay="1000" data-message="AccessibilityPageLoadTimeout"><\/div>\r\n<\/div>\r\n<div ng-if="!waitingOnCompass" id="" class="accessibility">\r\n    <div class="spacer-48-bottom" ng-include="\'/PartialViews/Accessibility/HeroSection.html\'"><\/div>\r\n    <div class="clearfix"><\/div>\r\n    <div class="connect-section">\r\n        <div class="container">\r\n            <div class="connect-with-expert-dad">\r\n                <div>\r\n                    <div title="{{view.contactSection.header}}" class="row ">\r\n                        <h2 class="text-subheader header display-inline-block col-xs-24 col-sm-20 col-md-18">{{view.contactSection.header}}<\/h2>\r\n                    <\/div>\r\n                    <div class="row">\r\n                        <div title="{{connect.toolTip}}" ng-repeat="connect in view.contactSection.connectOptions" class="connect-item col-sm-20 col-md-8 col-lg-6">\r\n                            <div aria-hidden="true">\r\n                                <img class="icon" ng-src="{{connect.icon.url}}" alt="" />\r\n                            <\/div>\r\n                            <h3 class="text-title title">{{connect.title}}<\/h3>\r\n                            <div class="text-body description" ng-bind-html="connect.description"><\/div>\r\n                            <div class="description">\r\n                                <a class="text-body" target="_blank" ng-if="!connect.launchChat" ng-href="{{connect.connectActionLink.linkUrl}}" id="{{connect.connectActionLink.htmlId}}"><span>{{connect.connectActionLink.linkText}}<\/span><\/a>\r\n                                <a ng-if="connect.launchChat" id="{{connect.connectActionLink.htmlId}}" href="" class="text-body" ng-click="LaunchChat(connect.connectActionLink.linkUrl)">{{connect.connectActionLink.linkText}}<\/a>\r\n                            <\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="deflection">\r\n                <div class="row">\r\n                    <h2 class="text-subheader header col-xs-24">{{view.defelctionSection.header}}<\/h2>\r\n                <\/div>\r\n                <div class="row">\r\n                    <div ng-repeat="deflection in view.defelctionSection.deflectionLinkList" class="deflection-item">\r\n                        <div class="deflection-container">\r\n                            <a class="text-body content" ng-if="deflection.linkTextOverride" target="_blank" ng-href="{{deflection.linkUrl}}" id="{{deflection.htmlId}}">{{deflection.linkText}}<\/a>\r\n                            <a ng-if="!deflection.linkTextOverride" href="" id="{{deflection.htmlId}}" class="text-body content" ng-click="LaunchChat(deflection.linkUrl)">{{deflection.linkText}}<\/a>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <p class="text-body" ng-bind-html="visitAnswerdeskLink" id="contactanswerdesk"><\/p>\r\n        <\/div>\r\n    <\/div>\r\n    <div ng-include="\'/PartialViews/Accessibility/Resources.html\'"><\/div>\r\n    <div ng-include="\'/PartialViews/Accessibility/Feedback.html\'"><\/div>\r\n    <div class="clearfix"><\/div>\r\n<\/div>\r\n\r\n')}]);try{document.domain="microsoft.com"}catch(e){}microsoft=microsoft||{};microsoft.support=microsoft.support||{};microsoft.support.moduleName="content";microsoft.support.config=microsoft.support.config||{};microsoft.support.serverInfo=microsoft.support.serverInfo||{};typeof console=="undefined"&&(console={});typeof console.log=="undefined"&&(console.log=function(){});typeof console.error=="undefined"&&(console.error=function(){});typeof console.info=="undefined"&&(console.info=function(){});typeof console.debug=="undefined"&&(console.debug=function(){});typeof console.warn=="undefined"&&(console.warn=function(){});app=angular.module(microsoft.support.moduleName,["ms-content","portalCommon","virtualAgentApp","ngSanitize","ngRoute","ngCookies","ngAria","ui.bootstrap","ngMessages","ngFileUpload","AdalAngular"]);app.value("clientConfig",microsoft.support.config);app.value("serverInfo",microsoft.support.serverInfo);window.MsSupportSdk?window.MsSupportSdk.init({partnerId:"SMC",appId:"support-portal"}).then(function(){app.value("supportSDK",window.MsSupportSdk)}):app.value("supportSDK",{});app.run(["$rootScope","$timeout","$anchorScroll","$location","$route","$window","$log",function(n,t,i,r,u,f,e){t(function(){n.$broadcast("AngularJsReady")},10);n.$on("$routeChangeSuccess",function(t,i,o){u.current&&u.current.otherwise&&(o==null?(n.$broadcast("404Error",{location:r.url()}),e.log("hit otherwise statement for route: ",u)):f.location.reload())});r&&r.hash&&r.hash()&&t(function(){i()},2e3)}]);app.run(["qosTelemetryService","wedcsService","navigationOverrideService","authenticationHelperService","seoService",function(){}]);app.config(["$httpProvider","adalAuthenticationServiceProvider","authConfigurationProvider",function(n,t,i){var r=i.$get(),u=window.location.hostname;t.init({instance:r.prodInstance,tenant:r.tenant,clientId:r.clienId,redirectUri:"https://"+u+"/",protectedEndpoints:r.protectedEndpoints,endpoints:r.endpoints},n);n.interceptors.push("qosTelemetryInterceptor");n.interceptors.push("httpAppOptionsInterceptor");n.interceptors.push("errorInterceptor")}]),function(n){n.config(["$routeProvider","$locationProvider","$compileProvider",function(n,t,i){var f,r,u,e;if(html5mode=!!(window.history&&window.history.pushState),i.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob|ms-([a-zA-Z-]+)|bing([a-zA-Z]+)|calculator|microsoft\.windows\.camera|microsoft-edge|mswindowsmusic|fb|feedback-hub|outlookcal|outlookmail|onenote-cmd|C:\\Program Files\\Internet Explorer\\iexplore\.exe|skype|lync15|%windir%\\system32\\snippingtool\.exe|dlna-playsingle|xbox|avatars):/),f={MSA:"MSA",AAD:"AAD"},!html5mode&&window.location.hash.charAt(1)!=="!"){r=document.getElementsByTagName("base")[0].href;u=location.href.replace(r,"").replace(location.hash,"");window.location.replace(window.location.pathname+"/#!"+u+window.location.search+window.location.hash);return}e=["authenticationHelperService","$q",function(n,t){var i=t.defer();return n.signIn(i.resolve),i.promise}];n.when("/:langLocale?/:type?/:articleId?/internalsignin",{template:'<internal-signin path="$resolve.redirectPath"><\/internal-signin>',resolve:{redirectPath:["$location","$route",function(n){return{relativeUrl:n.path().replace("/internalsignin","")}}]}}).when("/:langLocale/help/:articleId",{controller:"HelpArticleController",templateUrl:"app/content/PartialViews/HelpArticle/Index.html",data:{hasSkylightEntry:!0}}).when("/:langLocale?/:type?/:articleId?/:title?/internalsignin",{template:'<internal-signin path="$resolve.redirectPath"><\/internal-signin>',resolve:{redirectPath:["$location","$route",function(n){return{relativeUrl:n.path().replace("/internalsignin","")}}]}}).when("/:langLocale/help/:articleId/:title",{controller:"HelpArticleController",templateUrl:"app/content/PartialViews/HelpArticle/Index.html",data:{hasSkylightEntry:!0}}).when("/errors",{resolve:{error:["$rootScope",function(n){n.$broadcast("500Error",{reason:"Hit errors route"})}]},data:{noIndex:!0}}).otherwise({resolve:{refresh:["$window","$route","$rootScope","$location","$log","languageService","locationService",function(n,t,i,r,u,f){var e=r.path().split("/")[1],o=f.redirectWithLocale(e);o||(t.current.otherwise=!0)}]}});t.html5Mode(html5mode).hashPrefix("!")}])}(angular.module(microsoft.support.moduleName)),function(n){n.value("authConfiguration",{tenant:"common",clienId:"fdf9885b-dd37-42bf-82e5-c3129ef5a302",prodHost:"support.microsoft.com",uatHost:"support-uat.microsoft.com",stagingHost:"staging.support.services.microsoft.com",internalProdHost:"internal.support.services.microsoft.com",internalUatHost:"internal-uat.support.services.microsoft.com",internalDevHost:"internal-dev.support.services.microsoft.com",inProdHost:"inprod.support.services.microsoft.com",partnersHost:"partner.support.services.microsoft.com",prodInstance:"https://login.microsoftonline.com/",accountSettingsUrl:"https://portal.office.com/account/",siteUrl:"https://login.microsoftonline.com/",protectedEndpoints:["api/content/help","api/content/asset","api/token/getAADToken","api/token/getAADUserStateCookie","api/entitlements","api/incidents","api/commercialcontacts","api/Incidents/Assets/FileWorkspaces","api/jwtaftoken","api/workspaces/AccessTokens"],endpoints:{"https://graph.microsoft.com":"https://graph.microsoft.com"},signInUri:"/signin",signOutUri:"/signout",signOutPersonalUri:"/signout/personal",signOutWorkUri:"/signout/work",userSignedInMSAEvent:"UserSignedInMSA",userSignedInAADEvent:"UserSignedInAAD",userNotSignedInEvent:"UserNotSignedIn",msaFedIDP:"live.com",msaFedParam:"msafed=0",adalPrefix:"adal",whitelistedAADErrorCodes:["AADSTS50058","AADSTS70002","AADSTS50133","AADSTS16000","AADSTS50076","AADSTS_RENEW_TIMEOUT"]})}(angular.module(microsoft.support.moduleName))