var smf_formSubmitted=!1,lastKeepAliveCheck=(new Date).getTime(),smf_editorArray=[],ua=navigator.userAgent.toLowerCase(),is_opera=-1!=ua.indexOf("opera"),is_opera5=-1!=ua.indexOf("opera/5")||-1!=ua.indexOf("opera 5"),is_opera6=-1!=ua.indexOf("opera/6")||-1!=ua.indexOf("opera 6"),is_opera7=-1!=ua.indexOf("opera/7")||-1!=ua.indexOf("opera 7"),is_opera8=-1!=ua.indexOf("opera/8")||-1!=ua.indexOf("opera 8"),is_opera9=-1!=ua.indexOf("opera/9")||-1!=ua.indexOf("opera 9"),is_opera95=-1!=ua.indexOf("opera/9.5")|| -1!=ua.indexOf("opera 9.5"),is_opera96=-1!=ua.indexOf("opera/9.6")||-1!=ua.indexOf("opera 9.6"),is_opera10=-1!=ua.indexOf("opera/9.8")||-1!=ua.indexOf("opera 9.8")||-1!=ua.indexOf("opera/10.")||-1!=ua.indexOf("opera 10.")||-1!=ua.indexOf("version/10."),is_opera95up=is_opera95||is_opera96||is_opera10,is_ff=(-1!=ua.indexOf("firefox")||-1!=ua.indexOf("iceweasel")||-1!=ua.indexOf("icecat")||-1!=ua.indexOf("shiretoko")||-1!=ua.indexOf("minefield"))&&!is_opera,is_gecko=-1!=ua.indexOf("gecko")&&!is_opera, is_chrome=-1!=ua.indexOf("chrome"),is_safari=-1!=ua.indexOf("applewebkit")&&!is_chrome,is_webkit=-1!=ua.indexOf("applewebkit"),is_ie=-1!=ua.indexOf("msie")&&!is_opera,is_ie4=is_ie&&-1!=ua.indexOf("msie 4"),is_ie5=is_ie&&-1!=ua.indexOf("msie 5"),is_ie50=is_ie&&-1!=ua.indexOf("msie 5.0"),is_ie55=is_ie&&-1!=ua.indexOf("msie 5.5"),is_ie5up=is_ie&&!is_ie4,is_ie6=is_ie&&-1!=ua.indexOf("msie 6"),is_ie6up=is_ie5up&&!is_ie55&&!is_ie5,is_ie6down=is_ie6||is_ie5||is_ie4,is_ie7=is_ie&&-1!=ua.indexOf("msie 7"), is_ie7up=is_ie6up&&!is_ie6,is_ie7down=is_ie7||is_ie6||is_ie5||is_ie4,is_ie8=is_ie&&-1!=ua.indexOf("msie 8"),is_ie8up=is_ie8&&!is_ie7down,is_iphone=-1!=ua.indexOf("iphone")||-1!=ua.indexOf("ipod"),is_android=-1!=ua.indexOf("android"),ajax_indicator_ele=null; !("getElementById"in document)&&"all"in document?document.getElementById=function(a){return document.all[a]}:!("XMLHttpRequest"in window)&&"ActiveXObject"in window&&(window.XMLHttpRequest=function(){return new ActiveXObject(is_ie5?"Microsoft.XMLHTTP":"MSXML2.XMLHTTP")});!1 in document&&"all"in document&&(document.getElementsByTagName=function(a){return document.all.tags[a]});"forms"in document||(document.forms=document.getElementsByTagName("form")); function getXMLDocument(a,c){if(!window.XMLHttpRequest)return null;var b=new XMLHttpRequest,d="undefined"!=typeof c,e=this;d&&(b.onreadystatechange=function(){4==b.readyState&&null!=b.responseXML&&200==b.status&&(c.call?c.call(e,b.responseXML):(e.tmpMethod=c,e.tmpMethod(b.responseXML),delete e.tmpMethod))});b.open("GET",a,d);b.send(null);return b} function sendXMLDocument(a,c,b){if(!window.XMLHttpRequest)return!1;var d=new window.XMLHttpRequest,e=this;"undefined"!=typeof b&&(d.onreadystatechange=function(){4==d.readyState&&(null!=d.responseXML&&200==d.status?b.call(e,d.responseXML):b.call(e,!1))});d.open("POST",a,!0);"setRequestHeader"in d&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(c);return!0}String.prototype.oCharsetConversion={from:"",to:""}; String.prototype.php_to8bit=function(){if("UTF-8"==smf_charset){for(var a,c="",b=0,d=this.length;b<d;b++)a=this.charCodeAt(b),c=128>a?c+String.fromCharCode(a):2048>a?c+(String.fromCharCode(192|a>>6)+String.fromCharCode(128|a&63)):65536>a?c+(String.fromCharCode(224|a>>12)+String.fromCharCode(128|a>>6&63)+String.fromCharCode(128|a&63)):c+(String.fromCharCode(240|a>>18)+String.fromCharCode(128|a>>12&63)+String.fromCharCode(128|a>>6&63)+String.fromCharCode(128|a&63));return c}if(0==this.oCharsetConversion.from.length){switch(smf_charset){case "ISO-8859-1":this.oCharsetConversion= {from:"\u00a0-\u00ff",to:"\u00a0-\u00ff"};break;case "ISO-8859-2":this.oCharsetConversion={from:"\u00a0\u0104\u02d8\u0141\u00a4\u013d\u015a\u00a7\u00a8\u0160\u015e\u0164\u0179\u00ad\u017d\u017b\u00b0\u0105\u02db\u0142\u00b4\u013e\u015b\u02c7\u00b8\u0161\u015f\u0165\u017a\u02dd\u017e\u017c\u0154\u00c1\u00c2\u0102\u00c4\u0139\u0106\u00c7\u010c\u00c9\u0118\u00cb\u011a\u00cd\u00ce\u010e\u0110\u0143\u0147\u00d3\u00d4\u0150\u00d6\u00d7\u0158\u016e\u00da\u0170\u00dc\u00dd\u0162\u00df\u0155\u00e1\u00e2\u0103\u00e4\u013a\u0107\u00e7\u010d\u00e9\u0119\u00eb\u011b\u00ed\u00ee\u010f\u0111\u0144\u0148\u00f3\u00f4\u0151\u00f6\u00f7\u0159\u016f\u00fa\u0171\u00fc\u00fd\u0163\u02d9", to:"\u00a0-\u00ff"};break;case "ISO-8859-5":this.oCharsetConversion={from:"\u00a0\u0401-\u040c\u00ad\u040e-\u044f\u2116\u0451-\u045c\u00a7\u045e\u045f",to:"\u00a0-\u00ff"};break;case "ISO-8859-9":this.oCharsetConversion={from:"\u00a0-\u00cf\u011e\u00d1-\u00dc\u0130\u015e\u00df-\u00ef\u011f\u00f1-\u00fc\u0131\u015f\u00ff",to:"\u00a0-\u00ff"};break;case "ISO-8859-15":this.oCharsetConversion={from:"\u00a0-\u00a3\u20ac\u00a5\u0160\u00a7\u0161\u00a9-\u00b3\u017d\u00b5-\u00b7\u017e\u00b9-\u00bb\u0152\u0153\u0178\u00bf-\u00ff", to:"\u00a0-\u00ff"};break;case "tis-620":this.oCharsetConversion={from:"\u20ac\u2026\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u00a0\u0e01-\u0e3a\u0e3f-\u0e5b",to:"\u0080\u0085\u0091-\u0097\u00a0-\u00da\u00df-\u00fb"};break;case "windows-1251":this.oCharsetConversion={from:"\u0402\u0403\u201a\u0453\u201e\u2026\u2020\u2021\u20ac\u2030\u0409\u2039\u040a\u040c\u040b\u040f\u0452\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u2122\u0459\u203a\u045a\u045c\u045b\u045f\u00a0\u040e\u045e\u0408\u00a4\u0490\u00a6\u00a7\u0401\u00a9\u0404\u00ab-\u00ae\u0407\u00b0\u00b1\u0406\u0456\u0491\u00b5-\u00b7\u0451\u2116\u0454\u00bb\u0458\u0405\u0455\u0457\u0410-\u044f", to:"\u0080-\u0097\u0099-\u00ff"};break;case "windows-1253":this.oCharsetConversion={from:"\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u2122\u203a\u00a0\u0385\u0386\u00a3-\u00a9\u00ab-\u00ae\u2015\u00b0-\u00b3\u0384\u00b5-\u00b7\u0388-\u038a\u00bb\u038c\u00bd\u038e-\u03a1\u03a3-\u03ce",to:"\u0080\u0082-\u0087\u0089\u008b\u0091-\u0097\u0099\u009b\u00a0-\u00a9\u00ab-\u00d1\u00d3-\u00fe"};break;case "windows-1255":this.oCharsetConversion={from:"\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u2039\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u203a\u00a0-\u00a3\u20aa\u00a5-\u00a9\u00d7\u00ab-\u00b9\u00f7\u00bb-\u00bf\u05b0-\u05b9\u05bb-\u05c3\u05f0-\u05f4\u05d0-\u05ea\u200e\u200f", to:"\u0080\u0082-\u0089\u008b\u0091-\u0099\u009b\u00a0-\u00c9\u00cb-\u00d8\u00e0-\u00fa\u00fd\u00fe"};break;case "windows-1256":this.oCharsetConversion={from:"\u20ac\u067e\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0679\u2039\u0152\u0686\u0698\u0688\u06af\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u06a9\u2122\u0691\u203a\u0153\u200c\u200d\u06ba\u00a0\u060c\u00a2-\u00a9\u06be\u00ab-\u00b9\u061b\u00bb-\u00be\u061f\u06c1\u0621-\u0636\u00d7\u0637-\u063a\u0640-\u0643\u00e0\u0644\u00e2\u0645-\u0648\u00e7-\u00eb\u0649\u064a\u00ee\u00ef\u064b-\u064e\u00f4\u064f\u0650\u00f7\u0651\u00f9\u0652\u00fb\u00fc\u200e\u200f\u06d2", to:"\u0080-\u00ff"};break;default:this.oCharsetConversion={from:"",to:""}}a=function(a){var b="",c=a.charCodeAt(0);for(a=a.charCodeAt(2);c<=a;c++)b+=String.fromCharCode(c);return b};this.oCharsetConversion.from=this.oCharsetConversion.from.replace(/.\-./g,a);this.oCharsetConversion.to=this.oCharsetConversion.to.replace(/.\-./g,a)}c="";b=d=0;for(a=this.length;b<a;b++)d=this.oCharsetConversion.from.indexOf(this.charAt(b)),c+=-1<d?this.oCharsetConversion.to.charAt(d):127<this.charCodeAt(b)?"&#"+this.charCodeAt(b)+ ";":this.charAt(b);return c};String.prototype.php_strtr=function(a,c){return this.replace(RegExp("["+a+"]","g"),function(b){return c.charAt(a.indexOf(b))})}; String.prototype.php_strtolower=function(){return"boolean"==typeof smf_iso_case_folding&&!0==smf_iso_case_folding?this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ\u008a\u008c\u008e\u009f\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de","abcdefghijklmnopqrstuvwxyz\u009a\u009c\u009e\u00ff\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe"): this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")};String.prototype.php_urlencode=function(){return escape(this).replace(/\+/g,"%2b").replace("*","%2a").replace("/","%2f").replace("@","%40")};String.prototype.php_htmlspecialchars=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}; String.prototype.php_unhtmlspecialchars=function(){return this.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};String.prototype.php_addslashes=function(){return this.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};String.prototype._replaceEntities=function(a,c,b){return String.fromCharCode(parseInt(b))};String.prototype.removeEntities=function(){return this.replace(/&(amp;)?#(\d+);/g,this._replaceEntities)}; String.prototype.easyReplace=function(a){var c=this,b;for(b in a)c=c.replace(RegExp("%"+b+"%","g"),a[b]);return c};function reqWin(a,c,b,d){c&&0.8*self.screen.availWidth<c||b&&0.8*self.screen.availHeight<b?(d=!1,c=Math.min(c,0.8*self.screen.availWidth),b=Math.min(b,0.8*self.screen.availHeight)):d="boolean"==typeof d&&!0==d;window.open(a,"requested_popup","toolbar=no,location=no,status=no,menubar=no,scrollbars="+(d?"no":"yes")+",width="+(c?c:480)+",height="+(b?b:220)+",resizable=no");return!1} function storeCaret(a){"createTextRange"in a&&(a.caretPos=document.selection.createRange().duplicate())} function replaceText(a,c){if("caretPos"in c&&"createTextRange"in c){var b=c.caretPos;b.text=" "==b.text.charAt(b.text.length-1)?a+" ":a;b.select()}else if("selectionStart"in c){var b=c.value.substr(0,c.selectionStart),d=c.value.substr(c.selectionEnd),e=c.scrollTop;c.value=b+a+d;c.setSelectionRange&&(c.focus(),d=is_opera?a.match(/\n/g).length:0,c.setSelectionRange(b.length+a.length+d,b.length+a.length+d));c.scrollTop=e}else c.value+=a,c.focus(c.value.length-1)} function surroundText(a,c,b){if("caretPos"in b&&"createTextRange"in b){var d=b.caretPos,e=d.text.length;d.text=" "==d.text.charAt(d.text.length-1)?a+d.text+c+" ":a+d.text+c;0==e?(d.moveStart("character",-c.length),d.moveEnd("character",-c.length),d.select()):b.focus(d)}else if("selectionStart"in b){var f=b.value.substr(0,b.selectionStart),d=b.value.substr(b.selectionStart,b.selectionEnd-b.selectionStart),g=b.value.substr(b.selectionEnd),e=b.selectionStart,h=b.scrollTop;b.value=f+a+d+c+g;b.setSelectionRange&& (f=is_opera?a.match(/\n/g).length:0,g=is_opera?(a+c).match(/\n/g).length:0,0==d.length?b.setSelectionRange(e+a.length+f,e+a.length+f):b.setSelectionRange(e,e+a.length+d.length+c.length+g),b.focus());b.scrollTop=h}else b.value+=a+c,b.focus(b.value.length-1)}function isEmptyText(a){for(a=a.value;0<a.length&&(" "==a.charAt(0)||"\t"==a.charAt(0));)a=a.substring(1,a.length);for(;0<a.length&&(" "==a.charAt(a.length-1)||"\t"==a.charAt(a.length-1));)a=a.substring(0,a.length-1);return""==a?!0:!1} function submitonce(a){smf_formSubmitted=!0;for(a=0;a<smf_editorArray.length;a++)smf_editorArray[a].doSubmit()}function submitThisOnce(a){if(is_safari)return!smf_formSubmitted;a=("form"in a?a.form:a).getElementsByTagName("textarea");for(var c=0,b=a.length;c<b;c++)a[c].readOnly=!0;return!smf_formSubmitted}function setInnerHTML(a,c){a.innerHTML=c}function getInnerHTML(a){return a.innerHTML} function setOuterHTML(a,c){if("outerHTML"in a)a.outerHTML=c;else{var b=document.createRange();b.setStartBefore(a);a.parentNode.replaceChild(b.createContextualFragment(c),a)}}function in_array(a,c){for(var b in c)if(c[b]==a)return!0;return!1}function array_search(a,c){for(var b in c)if(c[b]==a)return b;return null}function selectRadioByName(a,c){if(!("length"in a))return a.checked=!0;for(var b=0,d=a.length;b<d;b++)if(a[b].value==c)return a[b].checked=!0;return!1} function invertAll(a,c,b,d){for(var e=0;e<c.length;e++)"name"in c[e]&&("string"!=typeof b||c[e].name.substr(0,b.length)==b||c[e].id.substr(0,b.length)==b)&&(!c[e].disabled||"boolean"==typeof d&&d)&&(c[e].checked=a.checked)}lastKeepAliveCheck=(new Date).getTime(); function smf_sessionKeepAlive(){var a=(new Date).getTime();smf_scripturl&&9E5<a-lastKeepAliveCheck&&((new Image).src=smf_prepareScriptUrl(smf_scripturl)+"action=keepalive;time="+a,lastKeepAliveCheck=a);window.setTimeout("smf_sessionKeepAlive();",12E5)}window.setTimeout("smf_sessionKeepAlive();",12E5); function smf_setThemeOption(a,c,b,d,e,f){null==d&&(d=smf_session_id);"undefined"==typeof e&&(e="sesc");null==f&&(f="");(new Image).src=smf_prepareScriptUrl(smf_scripturl)+"action=jsoption;var="+a+";val="+c+";"+e+"="+d+f+(null==b?"":"&th="+b)+";time="+(new Date).getTime()} function smf_avatarResize(){for(var a=document.getElementsByTagName("img"),c=0;c<a.length;c++){var b=[];j=0;"avatar"==a[c].className&&(b[j]=new Image,b[j].avatar=a[c],b[j].onload=function(){this.avatar.width=this.width;this.avatar.height=this.height;0!=smf_avatarMaxWidth&&this.width>smf_avatarMaxWidth&&(this.avatar.height=smf_avatarMaxWidth*this.height/this.width,this.avatar.width=smf_avatarMaxWidth);0!=smf_avatarMaxHeight&&this.avatar.height>smf_avatarMaxHeight&&(this.avatar.width=smf_avatarMaxHeight* this.avatar.width/this.avatar.height,this.avatar.height=smf_avatarMaxHeight)},b[j].src=a[c].src,j++)}"undefined"!=typeof window_oldAvatarOnload&&window_oldAvatarOnload&&(window_oldAvatarOnload(),window_oldAvatarOnload=null)} function hashLoginPassword(a,c){null==c&&(c=smf_session_id);"undefined"!=typeof hex_sha1&&-1==a.user.value.indexOf("@")&&("opera"in window||(a.passwrd.autocomplete="off"),a.hash_passwrd.value=hex_sha1(hex_sha1(a.user.value.php_to8bit().php_strtolower()+a.passwrd.value.php_to8bit())+c),a.passwrd.value=-1!=is_ff?"":a.passwrd.value.replace(/./g,"*"))} function hashAdminPassword(a,c,b){null==b&&(b=smf_session_id);"undefined"!=typeof hex_sha1&&(a.admin_hash_pass.value=hex_sha1(hex_sha1(c.php_to8bit().php_strtolower()+a.admin_pass.value.php_to8bit())+b),a.admin_pass.value=a.admin_pass.value.replace(/./g,"*"))} function expandPages(a,c,b,d,e){var f="",g=0;a.style.fontWeight="normal";a.onclick="";50<(d-b)/e&&(g=d,d=b+50*e);for(;b<d;b+=e)f+='<a class="navPages" href="'+c.replace(/%1\$d/,b).replace(/%%/g,"%")+'">'+(1+b/e)+"</a> ";0<g&&(f+='<span style="font-weight: bold; cursor: '+(is_ie&&!is_ie6up?"hand":"pointer")+';" onclick="expandPages(this, \''+c+"', "+d+", "+g+", "+e+');"> ... </span> ');setInnerHTML(a,f)} function smc_preCacheImage(a){"smc_aCachedImages"in window||(window.smc_aCachedImages=[]);in_array(a,window.smc_aCachedImages)||((new Image).src=a)}function smc_Cookie(a){this.opt=a;this.oCookies={};this.init()}smc_Cookie.prototype.init=function(){if("cookie"in document&&""!=document.cookie)for(var a=document.cookie.split(";"),c=0,b=a.length;c<b;c++){var d=a[c].split("=");this.oCookies[d[0].replace(/^\s+|\s+$/g,"")]=decodeURIComponent(d[1])}}; smc_Cookie.prototype.get=function(a){return a in this.oCookies?this.oCookies[a]:null};smc_Cookie.prototype.set=function(a,c){document.cookie=a+"="+encodeURIComponent(c)};function smc_Toggle(a){this.opt=a;this.bCollapsed=!1;this.oCookie=null;this.init()} smc_Toggle.prototype.init=function(){if(!("bToggleEnabled"in this.opt)||this.opt.bToggleEnabled){if("oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie){this.oCookie=new smc_Cookie({});var a=this.oCookie.get(this.opt.oCookieOptions.sCookieName);null!=a&&(this.opt.bCurrentlyCollapsed="1"==a)}this.opt.bCurrentlyCollapsed&&this.changeState(!0,!0);if("aSwapImages"in this.opt)for(var a=0,c=this.opt.aSwapImages.length;a<c;a++){var b=document.getElementById(this.opt.aSwapImages[a].sId);"object"== typeof b&&null!=b&&("none"==b.style.display&&(b.style.display=""),b.instanceRef=this,b.onclick=function(){this.instanceRef.toggle();this.blur()},b.style.cursor="pointer",smc_preCacheImage(this.opt.aSwapImages[a].srcCollapsed))}if("aSwapLinks"in this.opt)for(a=0,c=this.opt.aSwapLinks.length;a<c;a++)b=document.getElementById(this.opt.aSwapLinks[a].sId),"object"==typeof b&&null!=b&&("none"==b.style.display&&(b.style.display=""),b.instanceRef=this,b.onclick=function(){this.instanceRef.toggle();this.blur(); return!1})}}; smc_Toggle.prototype.changeState=function(a,c){c="undefined"==typeof c?!1:!0;!c&&a&&"funcOnBeforeCollapse"in this.opt?(this.tmpMethod=this.opt.funcOnBeforeCollapse,this.tmpMethod(),delete this.tmpMethod):!c&&!a&&"funcOnBeforeExpand"in this.opt&&(this.tmpMethod=this.opt.funcOnBeforeExpand,this.tmpMethod(),delete this.tmpMethod);if("aSwapImages"in this.opt)for(var b=0,d=this.opt.aSwapImages.length;b<d;b++){var e=document.getElementById(this.opt.aSwapImages[b].sId);if("object"==typeof e&&null!=e){var f= a?this.opt.aSwapImages[b].srcCollapsed:this.opt.aSwapImages[b].srcExpanded;e.src!=f&&(e.src=f);e.alt=e.title=a?this.opt.aSwapImages[b].altCollapsed:this.opt.aSwapImages[b].altExpanded}}if("aSwapLinks"in this.opt)for(b=0,d=this.opt.aSwapLinks.length;b<d;b++)e=document.getElementById(this.opt.aSwapLinks[b].sId),"object"==typeof e&&null!=e&&setInnerHTML(e,a?this.opt.aSwapLinks[b].msgCollapsed:this.opt.aSwapLinks[b].msgExpanded);b=0;for(d=this.opt.aSwappableContainers.length;b<d;b++)null!=this.opt.aSwappableContainers[b]&& (e=document.getElementById(this.opt.aSwappableContainers[b]),"object"==typeof e&&null!=e&&(e.style.display=a?"none":""));this.bCollapsed=a;"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&this.oCookie.set(this.opt.oCookieOptions.sCookieName,this.bCollapsed?"1":"0");"oThemeOptions"in this.opt&&this.opt.oThemeOptions.bUseThemeSettings&&smf_setThemeOption(this.opt.oThemeOptions.sOptionName,this.bCollapsed?"1":"0","sThemeId"in this.opt.oThemeOptions?this.opt.oThemeOptions.sThemeId:null, this.opt.oThemeOptions.sSessionId,this.opt.oThemeOptions.sSessionVar,"sAdditionalVars"in this.opt.oThemeOptions?this.opt.oThemeOptions.sAdditionalVars:null)};smc_Toggle.prototype.toggle=function(){this.changeState(!this.bCollapsed)}; function ajax_indicator(a){null==ajax_indicator_ele&&(ajax_indicator_ele=document.getElementById("ajax_in_progress"),null==ajax_indicator_ele&&null!=typeof ajax_notification_text&&create_ajax_indicator_ele());null!=ajax_indicator_ele&&("Microsoft Internet Explorer"!=navigator.appName||is_ie7up||(ajax_indicator_ele.style.position="absolute",ajax_indicator_ele.style.top=document.documentElement.scrollTop),ajax_indicator_ele.style.display=a?"block":"none")} function create_ajax_indicator_ele(){ajax_indicator_ele=document.createElement("div");ajax_indicator_ele.id="ajax_in_progress";var a=document.createElement("a");a.href="javascript:ajax_indicator(false)";var c=document.createElement("img");c.src=smf_images_url+"/icons/quick_remove.gif";"undefined"!=typeof ajax_notification_cancel_text&&(c.alt=ajax_notification_cancel_text,c.title=ajax_notification_cancel_text);a.appendChild(c);ajax_indicator_ele.appendChild(a);ajax_indicator_ele.innerHTML+=ajax_notification_text; document.body.appendChild(ajax_indicator_ele)}function createEventListener(a){"addEventListener"in a||(a.attachEvent?(a.addEventListener=function(c,b,d){a.attachEvent("on"+c,b)},a.removeEventListener=function(c,b,d){a.detachEvent("on"+c,b)}):(a.addEventListener=function(c,b,d){a["on"+c]=b},a.removeEventListener=function(c,b,d){a["on"+c]=null}))} function grabJumpToContent(){var a=getXMLDocument(smf_prepareScriptUrl(smf_scripturl)+"action=xmlhttp;sa=jumpto;xml"),c=[];ajax_indicator(!0);if(a.responseXML)for(var a=a.responseXML.getElementsByTagName("smf")[0].getElementsByTagName("item"),b=0,d=a.length;b<d;b++)c[c.length]={id:parseInt(a[b].getAttribute("id")),isCategory:"category"==a[b].getAttribute("type"),name:a[b].firstChild.nodeValue.removeEntities(),is_current:!1,childLevel:parseInt(a[b].getAttribute("childlevel"))};ajax_indicator(!1);b= 0;for(d=aJumpTo.length;b<d;b++)aJumpTo[b].fillSelect(c)}var aJumpTo=[];function JumpTo(a){this.opt=a;this.dropdownList=null;this.showSelect()} JumpTo.prototype.showSelect=function(){for(var a="",c=this.opt.iCurBoardChildLevel;0<c;c--)a+=this.opt.sBoardChildLevelIndicator;setInnerHTML(document.getElementById(this.opt.sContainerId),this.opt.sJumpToTemplate.replace(/%select_id%/,this.opt.sContainerId+"_select").replace(/%dropdown_list%/,'<select name="'+this.opt.sContainerId+'_select" id="'+this.opt.sContainerId+'_select" '+("implementation"in document?"":'onmouseover="grabJumpToContent();" ')+("onbeforeactivate"in document?"onbeforeactivate": "onfocus")+'="grabJumpToContent();"><option value="?board='+this.opt.iCurBoardId+'.0">'+a+this.opt.sBoardPrefix+this.opt.sCurBoardName.removeEntities()+'</option></select>&nbsp;<input type="button" value="'+this.opt.sGoButtonLabel+'" onclick="window.location.href = \''+smf_prepareScriptUrl(smf_scripturl)+"board="+this.opt.iCurBoardId+".0';\" />"));this.dropdownList=document.getElementById(this.opt.sContainerId+"_select")}; JumpTo.prototype.fillSelect=function(a){var c=!("implementation"in document),b=0,d=document.createElement("option");d.appendChild(document.createTextNode(this.opt.sCatSeparator));d.disabled="disabled";d.value="";c&&(this.dropdownList.onmouseover=null,this.dropdownList.remove(0));"onbeforeactivate"in document?this.dropdownList.onbeforeactivate=null:this.dropdownList.onfocus=null;for(var e=c?this.dropdownList:document.createDocumentFragment(),f=0,g=a.length;f<g;f++){var h,k;if(!a[f].isCategory&&a[f].id== this.opt.iCurBoardId)if(c)b=this.dropdownList.options.length;else{this.dropdownList.insertBefore(e,this.dropdownList.options[0]);e=document.createDocumentFragment();continue}if(a[f].isCategory)e.appendChild(d.cloneNode(!0));else for(h=a[f].childLevel,k="";0<h;h--)k+=this.opt.sBoardChildLevelIndicator;h=document.createElement("option");h.appendChild(document.createTextNode((a[f].isCategory?this.opt.sCatPrefix:k+this.opt.sBoardPrefix)+a[f].name));h.value=a[f].isCategory?"#c"+a[f].id:"?board="+a[f].id+ ".0";e.appendChild(h);a[f].isCategory&&e.appendChild(d.cloneNode(!0))}this.dropdownList.appendChild(e);c&&(this.dropdownList.options[b].selected=!0);this.dropdownList.style.width="auto";this.dropdownList.focus();this.dropdownList.onchange=function(){0<this.selectedIndex&&this.options[this.selectedIndex].value&&(window.location.href=smf_scripturl+this.options[this.selectedIndex].value.substr(-1==smf_scripturl.indexOf("?")||"?"!=this.options[this.selectedIndex].value.substr(0,1)?0:1))}}; var aIconLists=[];function IconList(a){window.XMLHttpRequest&&(this.opt=a,this.bListLoaded=!1,this.funcMousedownHandler=this.oContainerDiv=null,this.funcParent=this,this.iCurTimeout=this.iCurMessageId=0,"sSessionVar"in this.opt||(this.opt.sSessionVar="sesc"),this.initIcons())} IconList.prototype.initIcons=function(){for(var a=document.images.length-1,c=this.opt.sIconIdPrefix.length;0<=a;a--)document.images[a].id.substr(0,c)==this.opt.sIconIdPrefix&&setOuterHTML(document.images[a],'<div title="'+this.opt.sLabelIconList+'" onclick="'+this.opt.sBackReference+".openPopup(this, "+document.images[a].id.substr(c)+')" onmouseover="'+this.opt.sBackReference+'.onBoxHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onBoxHover(this, false)" style="background: '+this.opt.sBoxBackground+ "; cursor: "+(is_ie&&!is_ie6up?"hand":"pointer")+'; padding: 3px; text-align: center;"><img src="'+document.images[a].src+'" alt="'+document.images[a].alt+'" id="'+document.images[a].id+'" style="margin: 0px; padding: '+(is_ie?"3px":"3px 0px 3px 0px")+';" /></div>')}; IconList.prototype.onBoxHover=function(a,c){a.style.border=c?this.opt.iBoxBorderWidthHover+"px solid "+this.opt.sBoxBorderColorHover:"";a.style.background=c?this.opt.sBoxBackgroundHover:this.opt.sBoxBackground;a.style.padding=c?3-this.opt.iBoxBorderWidthHover+"px":"3px"}; IconList.prototype.openPopup=function(a,c){this.iCurMessageId=c;this.bListLoaded||null!=this.oContainerDiv||(this.oContainerDiv=document.createElement("div"),this.oContainerDiv.id="iconList",this.oContainerDiv.style.display="none",this.oContainerDiv.style.cursor=is_ie&&!is_ie6up?"hand":"pointer",this.oContainerDiv.style.position="absolute",this.oContainerDiv.style.width=a.offsetWidth+"px",this.oContainerDiv.style.background=this.opt.sContainerBackground,this.oContainerDiv.style.border=this.opt.sContainerBorder, this.oContainerDiv.style.padding="1px",this.oContainerDiv.style.textAlign="center",document.body.appendChild(this.oContainerDiv),ajax_indicator(!0),this.tmpMethod=getXMLDocument,this.tmpMethod(smf_prepareScriptUrl(this.opt.sScriptUrl)+"action=xmlhttp;sa=messageicons;board="+this.opt.iBoardId+";xml",this.onIconsReceived),delete this.tmpMethod,createEventListener(document.body));var b=smf_itemPos(a);is_ie50&&(b[1]+=4);this.oContainerDiv.style.top=b[1]+a.offsetHeight+"px";this.oContainerDiv.style.left= b[0]-1+"px";this.oClickedIcon=a;this.bListLoaded&&(this.oContainerDiv.style.display="block");document.body.addEventListener("mousedown",this.onWindowMouseDown,!1)}; IconList.prototype.onIconsReceived=function(a){a=a.getElementsByTagName("smf")[0].getElementsByTagName("icon");for(var c="",b=0,d=a.length;b<d;b++)c+='<div onmouseover="'+this.opt.sBackReference+'.onItemHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onItemHover(this, false);" onmousedown="'+this.opt.sBackReference+".onItemMouseDown(this, '"+a[b].getAttribute("value")+'\');" style="padding: 3px 0px 3px 0px; margin-left: auto; margin-right: auto; border: '+this.opt.sItemBorder+"; background: "+ this.opt.sItemBackground+'"><img src="'+a[b].getAttribute("url")+'" alt="'+a[b].getAttribute("name")+'" title="'+a[b].firstChild.nodeValue+'" /></div>';setInnerHTML(this.oContainerDiv,c);this.oContainerDiv.style.display="block";this.bListLoaded=!0;is_ie&&(this.oContainerDiv.style.width=this.oContainerDiv.clientWidth+"px");ajax_indicator(!1)}; IconList.prototype.onItemHover=function(a,c){a.style.background=c?this.opt.sItemBackgroundHover:this.opt.sItemBackground;a.style.border=c?this.opt.sItemBorderHover:this.opt.sItemBorder;0!=this.iCurTimeout&&window.clearTimeout(this.iCurTimeout);if(c)this.onBoxHover(this.oClickedIcon,!0);else this.iCurTimeout=window.setTimeout(this.opt.sBackReference+".collapseList();",500)}; IconList.prototype.onItemMouseDown=function(a,c){if(0!=this.iCurMessageId){ajax_indicator(!0);this.tmpMethod=getXMLDocument;var b=this.tmpMethod(smf_prepareScriptUrl(this.opt.sScriptUrl)+"action=jsmodify;topic="+this.opt.iTopicId+";msg="+this.iCurMessageId+";"+this.opt.sSessionVar+"="+this.opt.sSessionId+";icon="+c+";xml");delete this.tmpMethod;ajax_indicator(!1);b=b.responseXML.getElementsByTagName("smf")[0].getElementsByTagName("message")[0];0==b.getElementsByTagName("error").length&&(this.opt.bShowModify&& 0!=b.getElementsByTagName("modified").length&&setInnerHTML(document.getElementById("modified_"+this.iCurMessageId),b.getElementsByTagName("modified")[0].childNodes[0].nodeValue),this.oClickedIcon.getElementsByTagName("img")[0].src=a.getElementsByTagName("img")[0].src)}};IconList.prototype.onWindowMouseDown=function(){for(var a=aIconLists.length-1;0<=a;a--)aIconLists[a].funcParent.tmpMethod=aIconLists[a].collapseList,aIconLists[a].funcParent.tmpMethod(),delete aIconLists[a].funcParent.tmpMethod}; IconList.prototype.collapseList=function(){this.onBoxHover(this.oClickedIcon,!1);this.oContainerDiv.style.display="none";this.iCurMessageId=0;document.body.removeEventListener("mousedown",this.onWindowMouseDown,!1)}; function smf_mousePose(a){var c=0,b=0;a.pageX?(b=a.pageY,c=a.pageX):a.clientX&&(c=a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),b=a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop));return[c,b]} function smf_itemPos(a){var c=0,b=0;if("offsetParent"in a)for(c=a.offsetLeft,b=a.offsetTop;a.offsetParent&&"object"==typeof a.offsetParent;)a=a.offsetParent,c+=a.offsetLeft,b+=a.offsetTop;else"x"in a&&(c=a.x,b=a.y);return[c,b]}function smf_prepareScriptUrl(a){return-1==a.indexOf("?")?a+"?":a+("?"==a.charAt(a.length-1)||"&"==a.charAt(a.length-1)||";"==a.charAt(a.length-1)?"":";")}var aOnloadEvents=[]; function addLoadEvent(a){"function"!=typeof a||"onload"in window&&"function"==typeof window.onload?0==aOnloadEvents.length?(aOnloadEvents[0]=window.onload,aOnloadEvents[1]=a,window.onload=function(){for(var a=0,b=aOnloadEvents.length;a<b;a++)if("function"==typeof aOnloadEvents[a])aOnloadEvents[a]();else"string"==typeof aOnloadEvents[a]&&eval(aOnloadEvents[a])}):aOnloadEvents[aOnloadEvents.length]=a:window.onload=a}function smfFooterHighlight(a,c){a.src=smf_images_url+"/"+(c?"h_":"")+a.id+".gif"} function smfSelectText(a,c){var b="boolean"==typeof c&&c?document.getElementById(a):a.parentNode.nextSibling;if("object"!=typeof b||null==b)return!1;if("createTextRange"in document.body){var d=document.body.createTextRange();d.moveToElementText(b);d.select()}else if(window.getSelection)if(d=window.getSelection(),d.setBaseAndExtent){var e=b.lastChild;d.setBaseAndExtent(b,0,e,"innerText"in e?e.innerText.length:e.textContent.length)}else e=document.createRange(),e.selectNodeContents(b),d.removeAllRanges(), d.addRange(e);return!1}function smc_saveEntities(a,c,b){if("string"==typeof b)for(var d=0,e=document.forms[a].elements.length;d<e;d++)document.forms[a].elements[d].id.substr(0,b.length)==b&&(c[c.length]=document.forms[a].elements[d].name);d=0;for(e=c.length;d<e;d++)c[d]in document.forms[a]&&(document.forms[a][c[d]].value=document.forms[a][c[d]].value.replace(/&#/g,"&#38;#"))} function cleanFileInput(a){is_opera||is_ie||is_safari||is_chrome?document.getElementById(a).outerHTML=document.getElementById(a).outerHTML:(document.getElementById(a).type="input",document.getElementById(a).type="file")};