// Copyright (c) 2012 Foliotek Inc.
!function(e){var t={};e.ajaxq=function(a,s){function n(e){t[a]?t[a].push(e):(t[a]=[],e())}function r(){if(t[a]){var e=t[a].shift();e?e():delete t[a]}}if("undefined"==typeof s)throw"AjaxQ: queue name is not provided";var i=e.Deferred(),u=i.promise();u.success=u.done,u.error=u.fail,u.complete=u.always;var o=e.extend(!0,{},s);return n(function(){var t=e.ajax.apply(window,[o]).always(r);t.done(function(){i.resolve.apply(this,arguments)}),t.fail(function(){i.reject.apply(this,arguments)})}),u},e.each(["getq","postq"],function(t,a){e[a]=function(t,s,n,r,i){return e.isFunction(n)&&(i=i||r,r=n,n=void 0),e.ajaxq(t,{type:"postq"===a?"post":"get",url:s,data:n,success:r,dataType:i})}});var a=function(e){return t.hasOwnProperty(e)},s=function(){for(var e in t)if(a(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?a(e):s()},e.ajaxq.clear=function(e){if(e)t[e]&&delete t[e];else for(var a in t)t.hasOwnProperty(a)&&delete t[a]}}(jQuery);