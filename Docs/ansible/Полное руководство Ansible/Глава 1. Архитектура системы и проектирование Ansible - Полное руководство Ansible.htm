<!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class=" gecko win js" xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/font-awesome.css" rel="stylesheet">
<title>Глава 1. Архитектура системы и проектирование Ansible - Полное руководство Ansible</title>
<meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1">
<meta name="mavenGroupId" content="www.mdl.ru">
<meta name="MasteringAnsible2nd">
<meta name="mavenVersionId" content="1.0.0">
<link rel="home" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html" title="Полное руководство Ansible">
<link rel="up" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html" title="Полное руководство Ansible">
<link rel="prev" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html" title="Предисловие">
<link rel="next" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html" title="Глава 2. Защита вашей секретной информации в Ansible">
<meta name="git-sha" content="">
<meta name="buildTime" content="">
<script src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/ga_002.js" async="" type="text/javascript"></script><script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "mastering-ansible-2nd";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
</script>
<style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(/common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
</style>
<link rel="shortcut icon" href="http://onreader.mdl.ru/MdlLogo.gif" type="image/gif">
<link rel="stylesheet" type="text/css" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/positioning.css">
<link rel="stylesheet" type="text/css" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/custom.css">
<link rel="canonical" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html">
<!--[if IE]>
	<link rel="stylesheet" type="text/css" href="/common/css/ie.css"/>
<![endif]-->
<link rel="stylesheet" type="text/css" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery-ui-1.css">
<link rel="stylesheet" type="text/css" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery_002.css">
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery-1.js"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery-ui-1.js"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery.js"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery_002.js"><!----></script>
<link rel="stylesheet" type="text/css" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery.css">
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/jquery_003.js">
<!--jQuery plugin for glossary popups. --></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/htmlFileList.htm"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/htmlFileInfoList.htm"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/nwSearchFnt.js"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/en_stemmer.js">
<!--//make this scalable to other languages as well.--></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/index-1.htm"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/index-2.htm"><!----></script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/index-3.htm"><!----></script>
<script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
</script>
<script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/ga.js"><!----></script>
<script language="javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/common.js"></script>
<link rel="stylesheet" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/googlecode.css">
<script src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/highlight.js"></script>
</head>
<body>
<!----><script type="text/javascript"><!--
hljs.initHighlightingOnLoad();
HeaderName = 'Глава 1. Архитектура системы и проектирование Ansible';
PrevRef = 'index.html';
UpRef = 'index.html';
NextRef = 'Ch02.html';//--></script>
<!----><script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/HeaderAndToolbar.js">
</script><script type="text/javascript"><!--
document.write(HeaderAndToolbar); //-->
</script><div id="header"><div class="string"><div style="overflow: hidden; width: 100%;" id="marquee"><div style="width: 200%; margin-left: 0%;"><span style="width: 50%; display: inline-block; text-align: center;"><a href="http://www.mdl.ru/Solutions/Put.htm?Nme=MdlAccelerator#RX461i">от100k USD решение с 8ю Tesla Volta V100</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.mdl.ru/Solutions/Put.htm?Nme=EveryPlacePC">23" терминал с 4core ЦПУ/4ГБ/1ТБ от 15тыс.руб.</a></span><span style="width: 50%; display: inline-block; text-align: center;"><a href="http://www.mdl.ru/Solutions/Put.htm?Nme=MdlAccelerator#RX461i">от100k USD решение с 8ю Tesla Volta V100</a> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.mdl.ru/Solutions/Put.htm?Nme=EveryPlacePC">23" терминал с 4core ЦПУ/4ГБ/1ТБ от 15тыс.руб.</a></span></div></div></div>	<a onclick="_gaq.push(['_trackEvent', 'Header', 'logo', 'click', 1]);" align="middle" target="_blank" href="http://www.mdl.ru/">	<img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/mdl-reg.jpg" style="position: relative; border-style: none; top: 18%;" alt="Перевод Mdl®" align="middle" height="14" width="40"></a>	<a onclick="_gaq.push(['_trackEvent', 'Header', 'logo', 'click', 1]);" target="_blank" href="https://www.packtpub.com/virtualization-and-cloud/">	<img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/PacktPub-logo.jpg" alt="Документация Virtualization and Cloud" height="44" width="109"></a>	<h1>Глава 1. Архитектура системы и проектирование Ansible</h1>	<div id="navheader" align="right"><!----><table class="navLinks"><tbody><tr>		<td><a id="showHideButton" onclick="showHideToc(); _gaq.push(['_trackEvent', 'Header', 'show/hide', 'click', 1]);" class="pointLeft" title="Скрыть дерево оглавления">Боковое поле</a>		</td><td><a accesskey="p" class="navLinkPrevious" onclick="_gaq.push(['_trackEvent', 'Header', 'prevLink', 'click', 1]);" tabindex="5" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html">Предыдущий</a>&nbsp;		  |       <a accesskey="u" class="navLinkUp" onclick="_gaq.push(['_trackEvent', 'Header', 'upLink', 'click', 1]);" tabindex="5" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html">Вверх</a>		  |        <a accesskey="n" class="navLinkNext" onclick="_gaq.push(['_trackEvent', 'Header', 'nextLink', 'click', 1]);" tabindex="5" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html">Следующий</a>		</td></tr></tbody></table>	</div></div><div id="toolbar" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">	<div id="toolbar-left">		<p class="breadcrumbs"><a href="http://cloudcomputing.mdl.ru/">CloudComputing:mdl.ru</a>		<a href="http://onreader.mdl.ru/KVMVirtualizationCookbook/content/Ch08.html">Книга рецептов виртуализации KVM</a>		<a href="http://onreader.mdl.ru/MasteringPythonNetworking/content/Ch04.html">Полное руководство работы с сетями на Python</a>		(<a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" alt="Купите оригинал" class="pdficon" href="https://www.packtpub.com/networking-and-servers/mastering-ansible-second-edition">		<img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/pdf.png"></a>) &nbsp; 		</p>		<div id="gplusone">			<a id="AskMdl1" href="javascript:tocall()" onmouseover="this.href=mail" target="_blank" title="Вопросы? Обсудите их на mdl.ru">			<i class="icon-question"><!----></i></a>&nbsp;&nbsp;			<a id="logABugLink1" href="https://bugs.launchpad.net/openstack-manuals/+filebug?field.title=MasteringAnsible2nd&amp;field.comment=%0A%0A-----------------------------------%0ABuilt:%202017-06-29T17:43:47+00:00%0Agit%20SHA:%2013fb30b7c263d715eee84f0ca1a16df79697eb88%0AURL:%20http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html%0Asource%20File:%20file:a35-prades%0Axml:id:%20mastering-ansible-2nd" onmouseover="this.href=mail" title="Нашли ошибку? Сообщите о ней на данной странице">			<i class="icon-bug"><!----></i></a>		</div>	</div></div>
<div style="visibility: visible;" id="content">
 <div class="part">
  <div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title">
   Глава 1. Архитектура системы и проектирование Ansible
  </h1></div></div></div>

  <div class="toc"><p><strong>Содержание</strong></p>
   <dl>
     <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html">Глава 1. Архитектура системы и проектирование Ansible</a></span></dt>
     <dd><dl>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#01">Версии и конфигурации Ansible</a></span></dt>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#02">Разбор учёта ресурсов и исходных данных</a></span></dt>
       <dd><dl>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0201">Статичный учёт ресурсов</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0202">Переменные данные учёта ресурсов</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0203">Динамическая инвентаризация</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0204">Добавления учёта ресурсов времени исполнения</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0205">Ограничения учёта ресурсов</a></span></dt>
       </dl></dd>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#03">Синтаксический разбор плейбуков</a></span></dt>
       <dd><dl>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0301">Порядок операций</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0302">Допущения относительных путей</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0303">Директивы поведения воспроизведения</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0304">Стратегии исполнения</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0305">Выбор хоста для воспроизведений и задач</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0306">Имена воспроизведений и задач</a></span></dt>
       </dl></dd>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#04">Транспортировка и исполнение модуля</a></span></dt>
       <dd><dl>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0401">Ссылка на модуль</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0402">Аргументы модуля</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0403">Транспортировка и исполнение модуля</a></span></dt>
         <dd><dl>
           <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#040301">Производительность задачи</a></span></dt>
         </dl></dd>
       </dl></dd>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#05">Типы и положение переменных</a></span></dt>
       <dd><dl>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0501">Типы переменных</a></span></dt>
       </dl></dd>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#06">Доступ к внешним данным</a></span></dt>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#07">Старшинство переменных</a></span></dt>
       <dd><dl>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0701">Порядок старшинства</a></span></dt>
         <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0702">Слияние хэшей</a></span></dt>
       </dl></dd>
       <dt><span class="chapter"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#08">Выводы</a></span></dt>
     </dl></dd>
   </dl>
  </div>
  <p>Данная глава предоставляет подробное исследование архитектуры и проектирования того, как Ansible 
  занимается исполнением задач от вашего имени. Мы рассмотрим основные понятия синтаксического разбора 
  учёта ресурсов и способов обнаружения данных, а затем погрузимся в синтаксический анализ плейбуков (планов).
  Мы предпримем ознакомление с подготовкой, транспортировкой и исполнением модулей. Наконец, мы подробно 
  рассмотрим типы переменных и узнаем гл могут располагаться переменные, области в которых они  могут применяться,
  а также как определяется приоритет в случае, когда переменные определены более чем в одном месте.
  Все эти вопросы будут рассмотрены с целью создания основы для овладения Ansible!</p>
  <p>В данной главе мы рассмотрим следующие вопросы:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Версии и настройка Ansible</p>
	 </li><li class="listitem">
	 <p>Синтаксический анализ учёта ресурсов и источники данных</p>
	 </li><li class="listitem">
	 <p>Синтаксический анализ плейбуков (планов)</p>
	 </li><li class="listitem">
	 <p>Стратегии исполнения</p>
	 </li><li class="listitem">
	 <p>Транспортировка и исполнение модулей</p>
	 </li><li class="listitem">
	 <p>Типы и расположение переменных</p>
	 </li><li class="listitem">
	 <p>Приоритетность переменных</p>
	 </li>
    </ul>
    </div>
   <p>{<span class="emphasis"><em>Прим. пер.: для тех, кто впервые сталкивается с Ansible или тех, кому необходимо 
   вначале представить в своём сознании некую картинку того, во что мы собираемся погрузиться, советуем начать с 
   <a class="link" href="http://onreader.mdl.ru/MasteringPythonNetworking/content/Ch04.html#01" target="_top">Быстрого примера Ansible</a> в нашем переводе вышедшей в июне 2017 книги Эрика Чоу 
   "Полное руководство работы с сетями на Python".</em></span>}</p>


  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="01"> </a>Версии и конфигурации Ansible</h3>
   </div></div></div>
   <p>Предполагается что у вас имеется установленный Ansible в вашей системе. Имеется множество документации,
   которая охватывает установку Ansible тем способом, который соответствует именно вашей операционной системе 
   и избранной вами версии. Данная книга предполагает что вы применяете версию Ansible 2.2.x.x. Чтобы узнать 
   версию, применяемую в системе с уже установленным Ansible, примените аргумент версии либо в 
   <span class="term"><code>ansible</code></span>, либо в <span class="term"><code>ansible-playbook</code></span>:</p>
	<div class="figure"><a id="Fig0101">&nbsp;</a>
	 <p class="title"><strong>Рисунок 1</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0101.jpg" height="166" width="730"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table summary="Замечание" border="0"><tbody><tr><td rowspan="2" align="center" valign="top" width="25">
	   <img alt="[Замечание]" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/note.png"></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Отметим, что <span class="term"><code>ansible</code></span> это исполняемый файл для выполнения одноразовых 
	   однозадачных операций, а <span class="term"><code>ansible-playbook</code></span> исполняемый файл, 
	   предназначенный для обработки плейбуков (планов) по координации большого числа задач.</p></td></tr></tbody></table>
     </div>
   <p>Настройки Ansible могут присутствовать в нескольких различных расположениях, причём именно первый найденный 
   файл будет применяться. Порядок поиска слегка изменён в версии 1.5, с таким новым порядком:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p><span class="term"><code>ANSIBLE_CFG</code></span>: это переменная окружения</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>~/ansible.cfg</code></span>: находится в текущем каталоге</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>ansible.cfg</code></span>: расположено в домашнем каталоге пользователя</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>./etc/ansible/ansible.cfg</code></span></p>
	 </li>
    </ul>
    </div>
   <p>Некоторые методы установки могут содержать помещение файла <span class="term"><code>config</code></span> 
   в одном из этих размещений. Посмотрите везде, чтобы проверить имеется ли такой файл и какие параметры имеются 
   в этом файле, чтобы получить представление о том, какое воздействие может оказать эта операция Ansible.
   Данная книга предполагает отсутствие каких либо настроек в файле <span class="term"><code>ansible.cfg</code></span>, 
   который воздействует на работу Ansible заданными по умолчанию значениями.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="02"> </a>Разбор учёта ресурсов и исходных данных</h3>
   </div></div></div>
   <p>В Ansible ничего не происходит без инвентаризации. Даже одноразовые действия выполняемые в локальном хосте 
   требуют учёта ресурсов, даже если такая инвентаризация состоит в учёте только на отдельном локальном хосте. 
   Такой учёт ресурсов является самым основным строительным блоком архитектуры Ansible. При выполнении 
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span> 
   необходима ссылка на некую опись. Описи являются либо файлами, либо каталогами, которые присутствуют в той 
   же самой системе, которая исполняет <span class="term"><code>ansible</code></span> или 
   <span class="term"><code>ansible-playbook</code></span>. Расположение такой описи может быть объектом ссылки 
   в аргументе <span class="term"><code>--inventory-file</code></span>
   (<span class="term"><code>-i</code></span>), либо посредством определения его пути в некотором файле Ansible
   <span class="term"><code>config</code></span>.</p>
   <p>Описи (inventory) могут быть статическими или динамическими, или даже комбинацией и того, и другого, причём 
   Ansible не ограничивается единственной описью. Стандартным подходом является разделение описей по логическим 
   ограничениям, таким как этапы сред для их ратификации, что делает возможной инженерам исполнять некий набор 
   представлений именно в их средах для проверки правильности, а затем следовать именно такому воспроизведению, 
   исполняемому уже для имеющегося набора описей в производстве.</p>
   <p>Данные переменных, такие как определённые подробности того как подключаться к конкретному хосту из вашей 
   описи, могут включаться повсеместно с помощью учёта ресурсов самыми разнообразными способами, и мы также 
   изучим все доступные вам варианты.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0201"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Статичный учёт ресурсов</span></h4>
   </div></div></div>
   <p>Статический учйт ресурсов является наиболее основным из всех вариантов инвентаризации. Обычно некая статическая 
   опись будет состоять из отдельного файла в формате <span class="term"><code>ini</code></span>. Вот некий пример 
   какого- то статического файла описи, описывающего отдельный хост,
   <span class="term"><code>mastery.example.name</code></span>:</p>
	   <pre class="screen"><code class="hljs applescript">
mastery.example.<span class="hljs-property">name</span>
 	   </code></pre>
   <p>Вот и всё. Просто список имён определённых систем в вашей описи. Конечно, это не в полной мере получает все 
   преимущества, которые предоставляет учёт ресурсов. Если бы все имена перечислялись так, все представления (play) 
   должны были бы ссылаться на определённое имя хоста, или на определённую группу <span class="term"><code>all</code></span>.
   Это делало бы достаточно утомительной разработку плейбуков (планов), которые работают с различными наборами 
   вашей инфраструктуры. По крайней мере, хосты должны быть организованы в группы. Некий хорошо отлаженный шаблон 
   проекта должен выстраивать ваши системы в группы на основе ожидаемой функциональности. По началу это может 
   показаться трудным, если у вас имеется некая среда. в которой отдельные системы могут выполнять различные роли, 
   но это исключительно хорошо. Системы в некоторой описи могут присутствовать в более чем в одной группе, а группа 
   может даже состоять из других групп! Их следует вначале перечислять, прежде чем будут определены прочие группы. 
   Давайте построим наш предыдущий пример и расширим свою опись несколькими хостами и определёнными группировками:</p>
	   <pre class="screen"><code class="hljs css">
<span class="hljs-attr_selector">[web]</span>
<span class="hljs-tag">mastery</span><span class="hljs-class">.example</span><span class="hljs-class">.name</span>

<span class="hljs-attr_selector">[dns]</span>
<span class="hljs-tag">backend</span><span class="hljs-class">.example</span><span class="hljs-class">.name</span>

<span class="hljs-attr_selector">[database]</span>
<span class="hljs-tag">backend</span><span class="hljs-class">.example</span><span class="hljs-class">.name</span>

<span class="hljs-attr_selector">[frontend:children]</span>
<span class="hljs-tag">web</span>

<span class="hljs-attr_selector">[backend:children]</span>
<span class="hljs-tag">dns</span>
<span class="hljs-tag">database</span>
 	   </code></pre>
   <p>То, что мы здесь выполнили, это некий набор из трёх групп и по одной системе в каждой, а затем ещё две 
   дополнительные группы, которые логически собирают всё дерево воедино. Да, всё верно; вы можете иметь группу 
   групп. Здесь применяется синтаксис <span class="term"><code>[groupname:children]</code></span>, который 
   указывает синтаксическому анализатору Ansible, что данная группа с названием 
   <span class="term"><code>groupname</code></span> является ничем иным как некоторой группировкой прочих 
   групп. Потомками (children) в этом случае являются приводимые имена прочих групп. Такая опись теперь 
   позволяет записывать представления (play) для определённых хостов, групп с определёнными ролями нижнего уровня, 
   либо логического группирования высокого уровня, или какой- то комбинации.</p>
   <p>При применении общих имён групп, таких как <span class="term"><code>dns</code></span> или 
   <span class="term"><code>database</code></span>, представления Ansible могут ссылаться на эти общие группы вместо 
   того, чтобы в явном виде указывать находящиеся в них хосты. Некий инженер может создать один файл описи, который 
   заполнит ъти группы хостами из некоторой среды на этапе подготовки к промышленному использованию и другой файл 
   описи с версиями такой группировки для своего промышленного решения. Сам плейбук (план) не потребует изменений при 
   его исполнении будь то стадия отработки, или промышленная среда, так как он ссылается на конкретные общие имена 
   групп, которые присутствуют в обеих описях. Просто сошлитесь на правильную опись для исполнения его в желаемом
   окружении.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0202"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Переменные данные учёта ресурсов</span></h4>
   </div></div></div>
   <p>Описи предоставляют больше чем просто имена систем и группировок. Также могут передаваться данные об этих 
   системах. Они могут содержать:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Специфические для хоста данные для их применения в шаблонах</p>
	 </li><li class="listitem">
	 <p>Особые для групп данные для их использования в аргументах задач или в условиях</p>
	 </li><li class="listitem">
	 <p>Параметры поведения для регулирования тем,как Ansible взаимодействует с некоторой системой</p>
	 </li>
    </ul>
    </div>
   <p>Переменные являются мощной конструкцией внутри Ansible и они могут применяться различными способами, причём 
   не только описываемыми здесь. Почти все отдельные вещи, осуществляемые в Ansible иогут включать некие 
   переменные ссылки. Хотя Ansible и способен обнаруживать данные, описывающие некоторую систему в процессе фазы 
   установки, не все данные могут обнаруживаться. Определение данных при помощи описи является способом как расширять 
   имеющийся набор данных. Отметим, что переменные данные могут поступать из многих различных источников, причём один 
   источник может перекрывать другой источник. Приоритет порядка следования описывается далее в этой главе.</p>
   <p>Давайте улучшим имеющийся у нас пример описи и добавим в него некоторые переменные данные. Мы добавим немного 
   данных, специфичных для хоста, а также данных, характерных для групп.</p>
	   <pre class="screen"><code class="hljs makefile">
[web]
mastery.example.name ansible_host=192.168.10.25

[dns]
backend.example.name

[database]
backend.example.name

[frontend:children]
web

[backend:children]
dns
database

[web:vars]
<span class="hljs-constant">http_port</span>=88
<span class="hljs-constant">proxy_timeout</span>=5

[backend:vars]
<span class="hljs-constant">ansible_port</span>=314

[all:vars]
<span class="hljs-constant">ansible_ssh_user</span>=otto
 	   </code></pre>
   <p>В данном примере мы определили <span class="term"><code>ansible_host</code></span> для 
   <span class="term"><code>mastery.example.name</code></span> с IP адресом 
   <span class="term"><code>192.168.10.25</code></span>. Эта переменная 
   <span class="term"><code>ansible_host</code></span> является  некоторой 
   <span class="term"><strong class="userinput">переменной поведения учёта ресурсов</strong></span>, которая 
   предназначена для изменения того способа, которым Ansible ведёт себя при работе именно с этим хостом. 
   В этом случае данная переменная указывает Ansible необходимость подключиться к системе с применением 
   предоставленного IP, вместо того, чтобы выполнять некий просмотр DNS для обнаружения имени 
   <span class="term"><code>mastery.example.name</code></span>. Существует целый ряд других переменных поведения 
   описи, которые перечисляются в конце данного раздела совместно с их предназначением применения.</p>
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table summary="Замечание" border="0"><tbody><tr><td rowspan="2" align="center" valign="top" width="25">
	   <img alt="[Замечание]" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/note.png"></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Что касается версии 2.0, более длинная форма некоторых параметров поведения описи устарела. Часть 
	   <span class="term"><code>ssh</code></span> для <span class="term"><code>ansible_ssh_host</code></span>, 
	   <span class="term"><code>ansible_ssh_user</code></span> и <span class="term"><code>ansible_ssh_port</code></span>
	   больше не требуется. Последующие версии могут игнорировать более длинные формы этих переменных.</p></td></tr></tbody></table>
     </div>
   <p>Наши новые данные описи также предоставляют переменные уровня групп для групп web и backend. Группа web определяет 
   <span class="term"><code>http_port</code></span>, который может быть использован в некотором файле настройки 
   <span class="term"><strong class="userinput">nginx</strong></span>, а также 
   <span class="term"><code>proxy_timeout</code></span>, который может применяться для определения поведения 
   <span class="term"><strong class="userinput">HAProxy</strong></span>. Ещё одна группа 
   <span class="term"><code>backend</code></span> применяет другие параметры поведения описи чтобы указать Ansible 
   необходимость соединения с имеющимися в этой группе хостами с применением порта <span class="term"><code>314</code></span>
   для SSH, вместо определяемого по умолчанию <span class="term"><code>22</code></span>.</p>
   <p>Наконец, вводится некоторая конструкция, которая предоставляет переменные данные для всех хостов в данном учёте 
   ресурсов при помощи некоторой встроенной группы <span class="term"><code>all</code></span>. Определённые в этой 
   группе переменные будут применены ко всем хостам в данном учёте ресурсов. В данном конкретном примере мы указываем 
   Ansible необходимость зарегистрироваться под именем пользователя <span class="term"><code>otto</code></span> при 
   подключении к данным системам. Это также некоторое поведенческое изменение, поскольку имеющееся по умолчанию 
   поведение Ansible заключается в регистрации под тем же самым пользователем, который исполняет 
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span> 
   в данном хосте управления.</p>
   <p>Приведём таблицу переменных поведения учёта ресурсов и то действие, которое они предназначены изменять:</p>
        <table rules="all" style="text-align:left" id="table0101" width="700">
        <caption></caption><colgroup><col width="30%"><col width="70%"></colgroup><thead><tr valign="top">
          <th>Параметры описи</th>
          <th>Действие</th>
        </tr></thead><tbody><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_host</code></strong></span></p></td>
          <td><p>Это имя DNS или IP адрес, применяемые для соединения с данным хостом, если они отличаются от 
		  самого учётного имени, либо это название того контейнера Docker, к которому необходимо подключиться.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_port</code></strong></span></p></td>
          <td><p>Это номер порта SSH, если он не <span class="term"><code>22</code></span></p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_user</code></strong></span></p></td>
          <td><p>Это имя пользователя SSH по умолчанию или пользователя внутри контейнера Docker для его 
		  использования.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_pass</code></strong></span></p></td>
          <td><p>Это пароль SSH для применения (в открытом, опасном виде; мы настоятельно рекомендуем применять 
		  <span class="term"><code>--ask-pass</code></span> или ключи SSH).</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_private_key_file</code></strong></span></p></td>
          <td><p>Это файл частного ключа, используемый SSH. Он полезен если вы используете множество ключей и вы не 
		  хотите применять агент SSH.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_common_args</code></strong></span></p></td>
          <td><p>Определяет аргументы SSH для добавления в конец к применяемым по умолчанию аргументам 
		  <span class="term"><code>ssh</code></span>, <span class="term"><code>sftp</code></span> и
		  <span class="term"><code>scp</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_sftp_extra_args</code></strong></span></p></td>
          <td><p>Эти установки всегда добавляются в конец к применяемым по умолчанию аргументам командной строки
		  <span class="term"><code>sftp</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_common_args</code></strong></span></p></td>
          <td><p>Эти установки всегда добавляются в конец к применяемым по умолчанию аргументам командной строки
		  <span class="term"><code>scp</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_common_args</code></strong></span></p></td>
          <td><p>Эти установки всегда добавляются в конец к применяемым по умолчанию аргументам командной строки
		  <span class="term"><code>ssh</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_pipelining</code></strong></span></p></td>
          <td><p>Эта установка применяют Булево значение для определения следует или нет применять конвейеризацию 
		  SSH для данного хоста.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_ssh_executable</code></strong></span></p></td>
          <td><p>Эта установка переписывает имеющийся путь к исполняемому SSH для данного хоста.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_become</code></strong></span></p></td>
          <td><p>Определяет должна ли для данного хоста применяться эскалация привилегий 
		  (<span class="term"><code>sudo</code></span> или что- то иное).</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_become_method</code></strong></span></p></td>
          <td><p>Применяемый для эскалация привилегий метод. Один из 
		  <span class="term"><code>sudo</code></span>, <span class="term"><code>su</code></span>,
		  <span class="term"><code>pbrun</code></span>, <span class="term"><code>pfexec</code></span>,
		  <span class="term"><code>doas</code></span>, <span class="term"><code>dzdo</code></span> или
		  <span class="term"><code>ksu</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_become_user</code></strong></span></p></td>
          <td><p>Тот пользователь, от имени которого применяется эскалация привилегий.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_become_pass</code></strong></span></p></td>
          <td><p>Применяемый при эскалация привилегий пароль.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_sudo_pass</code></strong></span></p></td>
          <td><p>Пароль для применения в <span class="term"><code>sudo</code></span> (в открытом, опасном виде, 
		  мы настоятельно рекомендуем использовать <span class="term"><code>--ask-sudo-pass</code></span>).</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_connection</code></strong></span></p></td>
          <td><p>Тип соединения с данным хостом. Претендентами являются 
		  <span class="term"><code>local</code></span>, <span class="term"><code>smart</code></span>,
		  <span class="term"><code>ssh</code></span>, <span class="term"><code>paramiko</code></span> или
		  <span class="term"><code>docker</code></span>. Значение по умолчанию <span class="term"><code>paramiko</code></span>
		  вплоть до Ansible 1.2 и <span class="term"><code>smart</code></span> далее, причём последнее определяет будет ли 
		  осуществимо применение <span class="term"><code>ssh</code></span> на основании того, поддерживается ли свойство
		  SSH <span class="term"><code>ControlPersist</code></span>).</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_docker_extra_args</code></strong></span></p></td>
          <td><p>Это строка любых дополнительных аргументов, которые можно передать Docker. В основном применяется 
		  для определения некоторого удалённого использования демона Docker.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_shell_type</code></strong></span></p></td>
          <td><p>Это тип оболочки для целевой системы. По умолчанию команды форматируются при помощи синтаксиса
		  <span class="term"><code>sh-style</code></span>. Установка <span class="term"><code>csh</code></span> или 
		  <span class="term"><code>fish</code></span> вызовет исполнение команд в целевой системе в соответствии с 
		  синтаксисом <span class="term"><code>csh</code></span> или <span class="term"><code>fish</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_shell_executable</code></strong></span></p></td>
          <td><p>Устанавливает те инструменты оболочки, которые будут применяться в целевой системе. Этим следует 
		  пользоваться только в случае, если невозможно применять <span class="term"><code>/bin/sh</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_python_interpreter</code></strong></span></p></td>
          <td><p>Пароль для применения в <span class="term"><code>sudo</code></span> (в открытом, опасном виде, 
		  мы настоятельно рекомендуем использовать <span class="term"><code>--ask-sudo-pass</code></span>).</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_sudo_pass</code></strong></span></p></td>
          <td><p>Путь к Python на целевом хосте. Это полезно для систем, в которых имеется более одного Python, 
		  системах, которые не размещают его в <span class="term"><code>/usr/bin/python</code></span> (таких, как *BSD)
		  или для систем, где <span class="term"><code>/usr/bin/python</code></span> не принадлежит к последовательности
		  Python 2.X. Мы не используем механизм <span class="term"><code>/usr/bin/env</code></span>, так как он требует 
		  того, чтобы путь удалённого пользователя был установлен правильно, а также предполагает, что исполняемый файл 
		  Python именуется именно <span class="term"><code>Python</code></span>, в то время, как этот исполняемый 
		  файл может иметь имя, подобное <span class="term"><code>python26</code></span>.</p></td>
        </tr><tr valign="top">
          <td><p><span class="term"><strong class="userinput"><code>ansible_*_interpreter</code></strong></span></p></td>
          <td><p>Работает для любых интерпретаторов, таких как Ruby или Perl, причём в точности так же как 
		  <span class="term"><code>ansible_python_interpreter</code></span>.
		  Подменяет строку определения скрипта (shebang, "#!") модулей, которые исполняются на этом 
		  хосте.</p></td>
        </tr></tbody></table>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0203"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Динамическая инвентаризация</span></h4>
   </div></div></div>
   <p>Исходный код динамического учёта ресурсов (или встраиваемый модуль) является неким исполняемым сценарием, 
   который Ansible может вызывать во время исполнения для обнаружения учитываемых данных в реальном времени. 
   Этот сценарий может осуществлять связь с источниками внешних данных и возвращать информацию, или же он может 
   просто делать синтаксический разбор локальных данных, которые уже имеются, но могут не находиться в формате 
   учётных данных Ansible <span class="term"><code>ini</code></span>. Хотя достаточно просто разработать ваш 
   собственный исходный код динамического учёта, и мы займёмся этим в одной последующих глав, Ansible 
   предоставляет примеры встраиваемых модулей учёта ресурсов, включающих в себя, но не ограничивающихся  
   следующие:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>OpenStack Nova</p>
	 </li><li class="listitem">
	 <p>Rackspace Public Cloud</p>
	 </li><li class="listitem">
	 <p>DigitalOcean</p>
	 </li><li class="listitem">
	 <p>Linode</p>
	 </li><li class="listitem">
	 <p>Amazon EC2</p>
	 </li><li class="listitem">
	 <p>Google Compute Engine</p>
	 </li><li class="listitem">
	 <p>Microsoft Azure</p>
	 </li><li class="listitem">
	 <p>Docker</p>
	 </li><li class="listitem">
	 <p>Vagrant</p>
	 </li>
    </ul>
    </div>
   <p>Многие из этих встраиваемых модулей требуют некоторого уровня настроек, таких как полномочия пользователей 
   для EC2 или терминалы аутентификации для OpenStack Nova. Так как для Ansible невозможно настраивать передачу 
   дополнительных аргументов в такой сценарий учёта ресурсов, все настройки для этого сценария должны либо управляться 
   либо через некий файл <span class="term"><code>ini config</code></span>, считываемый из некоторого известного 
   расположения или из переменных среды, считываемых из окружения той оболочки, которая используется для выполнения
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>.</p>
   <p>Когда <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>
   находятся непосредственно в некотором исполняемом файле для какого бы то ни было исходного кода, Ansible 
   будет исполнять этот сценарий с единственным аргументом <span class="term"><code>--list</code></span>. Это 
   означает, что Ansible может получить список всех своих учитываемых ресурсов чтобы построить свои внутренние 
   объекты для представления имеющихся данных. Как только эти данные будут созданы, Ansible затем исполнит данный 
   сценарий с отличными для каждого хоста аргументами чтобы обнаружить изменяемые данные. Применяемым при таком 
   выполнении аргументом является <span class="term"><code>--host &lt;hostname&gt;</code></span>, который будет
   возвращать все переменный данные, являющиеся особенными для данного хоста.</p>
   <p>В <a class="link" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html" target="_top">Главе 8, Расширение Ansible</a> мы разработаем наш 
   собственный пользовательский встраиваемый модуль учёта ресурсов, специфичный для такого хоста.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0204"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Добавления учёта ресурсов времени исполнения</span></h4>
   </div></div></div>
   <p>Так же как и в случае со статическими файлами учёта ресурсов, важно помнить. что Ansible будет выполнять 
   синтаксический анализ этих данных один единственный раз при исполнении 
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>.
   Именно это часто становится камнем преткновения для пользователей облачных динамических исходных кодов, 
   когда часто некий плейбук (план) создаст некий новый облачный ресурс, а затем попытается использовать его так, 
   как если бы он был частью описи. Такая попытка потерпит неудачу, так как данный ресурс не был частью 
   имевшихся учитываемых ресурсов в момент запуска данного плейбука. Однако не всё ещё потеряно! Предоставляется 
   некий специализированный модуль, который позволяет какому- то плейбуку временно добавлять учитываемые ресурсы 
   в расположенный в оперативной памяти объект инвентаризации, а именно модуль
   <span class="term"><code>add_host</code></span>.</p>
   <p>Модуль <span class="term"><code>add_host</code></span> получает два параметра, 
   <span class="term"><code>name</code></span> и <span class="term"><code>groups</code></span>. Имя, что должно 
   быть очевидным, определяет конкретное название хоста, который Ansible будет применять при соединении с 
   этой определённой системой. Опция <span class="term"><code>groups</code></span> является разделяемым 
   запятой списком групп для добавления к этой новой системе. Все прочие опции, передаваемые в данный модуль 
   станут переменными данными хоста для данного хоста. Например, если мы желаем добавить некую новую систему, 
   присвоить её название <span class="term"><code>newmastery.example.name</code></span>, добавить её в группу 
   <span class="term"><code>web</code></span> и указать Ansible соединиться с ней с применением IP адреса 
   <span class="term"><code>192.168.10.30</code></span>, это создаст задачу аналогичную такой:</p>
	   <pre class="screen"><code class="hljs applescript">
- <span class="hljs-property">name</span>: add new node <span class="hljs-keyword">into</span> runtime inventory
  add_host:
    <span class="hljs-property">name</span>: newmastery.example.<span class="hljs-property">name</span>
    groups: web
    ansible_host: <span class="hljs-number">192.168</span><span class="hljs-number">.10</span><span class="hljs-number">.30</span>
 	   </code></pre>
   <p>Такой новый хост будет доступен для применения через предоставляемое имя, либо через имеющуюся у нас группу 
   web для оставшейся части исполнения <span class="term"><code>ansible-playbook</code></span>. Однако, как 
   только исполнение завершится, этот хост уже не будет доступен, пока он не будет добавлен в определённый источник 
   учёта ресурсов сам по себе. Конечно, если это был некий новый созданный облачный ресурс, последующее исполнение 
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>, 
   которое получит исходный код описи из этого облака подхватят такого нового участника.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0205"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Ограничения учёта ресурсов</span></h4>
   </div></div></div>
   <p>Как уже упоминалось ранее, всякое исполнение <span class="term"><code>ansible</code></span> или 
   <span class="term"><code>ansible-playbook</code></span> будет выполнять синтаксический разбор всей инвентаризации, 
   к которой он был направлен. Это будет даже справедливо при применении некоторого предела. Некий предел применяется 
   во время исполнения посредством использования аргумента времени исполнения <span class="term"><code>--limit</code></span>
   к <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>.
   Этот аргумент применяет некий шаблон, который обычно представляет некую маску для применения к имеющемуся списку 
   ресурсов. Производится синтаксический разбор всего перечня ресурсов, а при каждом воспроизведении (play) 
   предоставляемая маска ограничений будет в дальнейшем ограничивать шаблон хостов, перечисляемых для данного 
   воспроизведения.</p>
   <p>Давайте возьмём наш предыдущий пример учёта ресурсов и продемонстрируем само поведение Ansible при наличии 
   некоторого предела и без него. Если вы помните, у нас имеется специальная группа <span class="term"><code>all</code></span>, 
   которую мы можем применять для ссылки на все свои хосты внутри некоторой описи ресурсов. Давайте предположим, 
   что наш учёт ресурсов записан в имеющемся у нас текущем каталоге в файле с названием <span class="term"><code>mastery-hosts</code></span>, 
   и мы будем строить некий плейбук (план) для демонстрации того хоста, на котором работает Ansible. Давайте 
   запишем этот плейбук как <span class="term"><code>mastery.yaml</code></span>:</p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: limit example play
  hosts: all
  gather_facts: <span class="hljs-constant">false</span>

  tasks:
    -<span class="hljs-property">name</span>: <span class="hljs-keyword">tell</span> us which host we are <span class="hljs-function_start"><span class="hljs-keyword">on</span></span>
      debug:
        var: inventory_hostname
 	   </code></pre>
   <p>Данный модуль отладки применяется для вывода текста, или значений переменных. Мы будем применять этот модуль 
   много раз в данной книге для эмуляции реальной работы, происходящей на некотором хосте.</p>
   <p>Теперь давайте выполним этот простой плейбук без предоставления какого- либо предела. Ради простоты мы укажем 
   Ansible использовать некий метод локального соединения, который исполнится локально вместо того, чтобы попытаться 
   установить SSH к этому несуществующему хосту. Давайте взглянем на следующий снимок экрана:</p>
	<div class="figure"><a id="Fig0102">&nbsp;</a>
	 <p class="title"><strong>Рисунок 2</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0102.jpg" height="410" width="731"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
   <p>Как мы можем видеть, были обработаны оба хоста, <span class="term"><code>backend.example.name</code></span> и
   <span class="term"><code>mastery.example.name</code></span>. Давайте посмотрим что произойдёт если мы 
   предоставим некое ограничение, определяющее ограничение нашего исполнения только на системы интерфейса:</p>
	<div class="figure"><a id="Fig0103">&nbsp;</a>
	 <p class="title"><strong>Рисунок 3</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0103.jpg" height="353" width="731"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
   <p>Мы можем видеть, что только <span class="term"><code>mastery.example.name</code></span> был обработан 
   на этот раз. Хотя нет никаких видимых ключей к тому что был произведён синтаксический разбор всей описи ресурсов, 
   если мы погрузимся глубже в имеющийся код Ansible и опросим имеющийся объект учёта ресурсов, мы действительно 
   обнаружим внутри все имеющиеся хосты, а также увидим как применяется предел всякий раз, когда этот объект 
   опрашивается для получения элементов.</p>
   <p>Важно помнить, что в зависимости от применяемого в воспроизведении (play) шаблона хостов, или предоставляемого 
   на время исполнения предела, Ansible всё же осуществляет синтаксический разбор всего множества учёта ресурсов при 
   каждом исполнению На самом деле, мы можем подтвердить это попытавшись осуществить доступ к переменным данным 
   определённого хоста, который был бы в противном случае маскирован нашим пределом. Давайте слегка расширим наш 
   плейбук и попытаемся выполнить доступ к существующей переменной <span class="term"><code>ansible_port</code></span>
   в <span class="term"><code>backend.example.name</code></span>:</p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: limit example play
  hosts: all
  gather_facts: <span class="hljs-constant">false</span>

  tasks:
    - <span class="hljs-property">name</span>: <span class="hljs-keyword">tell</span> us which host we are <span class="hljs-function_start"><span class="hljs-keyword">on</span></span>
      debug:
        var: inventory_hostname

   - <span class="hljs-property">name</span>: grab variable data <span class="hljs-keyword">from</span> backend
      debug:
        var: hostvars['backend.example.<span class="hljs-property">name</span>']['ansible_port']
 	   </code></pre>
   <p>Мы всё ещё применяем свой предел, который ограничивает наши операции всего лишь до 
   <span class="term"><code>mastery.example.name</code></span>:</p>
	<div class="figure"><a id="Fig0104">&nbsp;</a>
	 <p class="title"><strong>Рисунок 4</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0104.jpg" height="450" width="731"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
   <p>Но мы успешно осуществили доступ к переменным данным того хоста (через переменные группы) для некоторой 
   системы, которая в противном случае была бы ограничена. Это некоторый ключевой навык для понимания, так как 
   он делает возможными более расширенные сценарии, такие как направление некоторой задачи на какой- то хост, 
   который в противном случае был бы ограничен. Делегирование может применяться для управления балансировщиком 
   нагрузки для перевода системы в режим обслуживания при её обновлении, без необходимости включения такой системы 
   балансировки нагрузки в вашу маску ограничения.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="03"> </a>Синтаксический разбор плейбуков</h3>
   </div></div></div>
   <p>Вся цель некоторого источника учёта ресурсов состоит в наличии систем для их обработки. Такая обработка 
   поступает из плейбуков (или, в случае одноразового исполнения <span class="term"><code>ansible</code></span>, 
   простого воспроизведения единственной задачи). Вы уже должны иметь базовое представление строения плеубуков - планов- 
   поэтому мы не будем тратить много времени на их рассмотрение; однако, мы погрузимся в некоторые особенности того, 
   как осуществляется синтаксический разбор некоторого плейбука. В частности, мы рассмотрим следующее:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Порядок операций</p>
	 </li><li class="listitem">
	 <p>Предположения об относительных путях</p>
	 </li><li class="listitem">
	 <p>Ключевые поведения воспроизведения</p>
	 </li><li class="listitem">
	 <p>Выбор хоста для воспроизведения и задач</p>
	 </li><li class="listitem">
	 <p>Имена воспроизведений и задач</p>
	 </li>
    </ul>
    </div>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0301"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Порядок операций</span></h4>
   </div></div></div>
   <p>Ansible разработан с целью быть настолько простым для восприятия людьми, насколько это возможно. Разработчики 
   стремились достичь наилучшего баланса между пониманием людьми и машинной эффективностью. Исходя из этого, 
   почти всё в Ansible может рассматриваться как исполняемое в порядке сверху вниз, то есть, все операции, 
   перечисленный в верхней части некоторого файла предполагаются исполняемыми до тех операций, которые располагаются 
   в нижней части файла. Сказав это, необходимо отметить несколько предостережений и даже ряд способов повлиять на 
   такой порядок операций.</p>
   <p>Всякий плейбук имеет только две основные операции, которые он может исполнять. Он может либо выполнять 
   воспроизведение (play), либо он может включать другой плейбук откуда-то ещё из имеющейся файловой системы. 
   Тот порядок, который в котором это осуществляется это просто порядок, в котором они возникают в данном файле 
   плейбука, от начала и до конца. Важно отметить, что хотя все операции выполняются о порядку, весь этот плейбук 
   и  все включаемые файлы плейбуков подвергаются полному синтаксическому разбору до какого бы то ни было 
   исполнения. Это означает, что все включаемые в плейбук файлы должны существовать на тот момент времени, когда 
   выполняется такой синтаксический разбор плейбука. Они не могут создаваться в какой- либо более ранней операции. 
   Это является особенностью для включений плейбука и не является обязательным для включений задач, которые могут 
   возникнуть внутри некоторого воспроизведения, что будет рассмотрено в следующей главе.</p>
   <p>Внутри некоторого воспроизведения (play) имеется несколько больше операций. В то время, как некий 
   плейбук (план) строго упорядочен сверху донизу, некое воспроизведение имеет более тонкий порядок операций. 
   Вот некий список всех возможных операций и тот порядок, в котором они могут происходить:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Загрузка переменных</p>
	 </li><li class="listitem">
	 <p>Получение фактов</p>
	 </li><li class="listitem">
	 <p>Исполнение <span class="term"><code>pre_tasks</code></span></p>
	 </li><li class="listitem">
	 <p>Обработка уведомлений от исполненных <span class="term"><code>pre_tasks</code></span></p>
	 </li><li class="listitem">
	 <p>Исполнение ролей</p>
	 </li><li class="listitem">
	 <p>Исполнение задач</p>
	 </li><li class="listitem">
	 <p>Обработка уведомлений от исполненных ролей и задач</p>
	 </li><li class="listitem">
	 <p>Исполнение <span class="term"><code>post_tasks</code></span></p>
	 </li><li class="listitem">
	 <p>Обработка уведомлений от исполненных <span class="term"><code>post_tasks</code></span></p>
	 </li>
    </ul>
    </div>
   <p>Вот некий пример воспроизведения с отображением большинства из этих операций:</p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- hosts: localhost
  gather_facts: <span class="hljs-constant">false</span>

  vars:
    - a_var: derp

  pre_tasks:
    - <span class="hljs-property">name</span>: pretask
    debug:
      msg: <span class="hljs-string">"a pre task"</span>
    changed_when: <span class="hljs-constant">true</span>
    notify: <span class="hljs-command">say</span> hi

  roles:
    - role: simple
      derp: newval

  tasks:
    - <span class="hljs-property">name</span>: task
      debug:
        msg: <span class="hljs-string">"a task"</span>
      changed_when: <span class="hljs-constant">true</span>
      notify: <span class="hljs-command">say</span> hi

  post_tasks:
    - <span class="hljs-property">name</span>: posttask
      debug:
        msg: <span class="hljs-string">"a post task"</span>
      changed_when: <span class="hljs-constant">true</span>
      notify: <span class="hljs-command">say</span> hi
 	   </code></pre>
   <p>В зависимости от того порядка, в котором эти блоки перечисляются в некотором воспроизведении, тот порядок, 
   который был уточнён ранее является тем порядком, в котором они могут быть исполнены. Частным случаем являются 
   обработчики (те задачи, которые могут быть вызваны прочими задачами, приводящими к некоторому изменению). 
   Имеется некий модуль утилиты, <span class="term"><code>meta</code></span>, который может быть применён для 
   запуска исполнения обработчика в некоторый определённый момент:</p>
	   <pre class="screen"><code class="hljs markdown">
<span class="hljs-bullet">- </span>meta: flush_handlers
 	   </code></pre>
   <p>Это укажет Ansible на необходимость исполнения всякого находящегося в рассмотрении обработчика прежде чем 
   продолжить следующую определённую задачу или следующий блок действий внутри некоторого воспроизведения. 
   Понимание данного порядка и способность воздействовать на порядок посредством <span class="term"><code>flush_handlers </code></span>
   является другим необходимым ключевым навыком в случае, когда имеется необходимость для координации сложных 
   действий, при которых  такие вещи как перезапуски службы очень чувствительны к порядку. Рассмотрим конкретную 
   начальную раскрутку некоторой службы. Её воспроизведение будет иметь задачи которые изменяют файлы 
   <span class="term"><code>config</code></span> и указывают, что данная служба должна быть перезапущена когда эти 
   файлы изменены. Данное воспроизведение также будет указывать, что данная служба должна исполняться. При 
   первом возникновении данного воспроизведения данный файл <span class="term"><code>config</code></span> будет 
   изменён и обозначенная  служба изменится с не исполняющейся на исполняемую.  Затем будут запущены обработчики, 
   что вызовет немедленный перезапуск данной службы. Это может быть разрушительным для всякого потребителя данной службы. 
   Было бы лучше сбросить все обработчики перед некоторой завершающей операцией, чтобы обеспечить запуск этой 
   службы. Таким образом, перезапуск произойдёт до самого первого начального старта и тем самым данная служба 
   запустится один раз и останется поднятой.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0302"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Допущения относительных путей</span></h4>
   </div></div></div>
   <p>Когда Ansible осуществляет синтаксический разбор некоторого плейбука (плана), имеется ряд предположений, 
   которые могут быть сделаны обо всех относительных путях элементов, на которые ссылаются операторы в некотором 
   плейбуке. В большинстве случаев, пути для таких вещей как подлежащие включению файлы переменных, файлы задач 
   для включения, файлы плейбуков для включения, подлежащие копированию файлы, шаблоны для построения, сценарии 
   для исполнения и тому подобное, всё является относительным к тому каталогу, в котором расположен тот файл, 
   из которого исходит ссылка. Давайте исследуем это на некотором примере плейбука и перечисления каталога, в котором 
   всё это происходит:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
     <p>Структура каталога:</p>
	   <pre class="screen"><code class="hljs">
.
├── a_vars_file.yaml
├── mastery-hosts
├── relative.yaml
└── tasks
    ├── a.yaml
    └── b.yaml
 	   </code></pre>
	 </li><li class="listitem">
     <p>Содержимое <span class="term"><code>a_vars_file.yaml</code></span>:</p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
something: <span class="hljs-string">"better than nothing"</span>
 	   </code></pre>
	 </li><li class="listitem">
     <p>Содержимое <span class="term"><code>relative.yaml</code></span></p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: relative path play
  hosts: localhost
  gather_facts: <span class="hljs-constant">false</span>
  vars_files:
    - a_vars_file.yaml
  tasks:
    - <span class="hljs-property">name</span>: who am I
      debug:
        msg: <span class="hljs-string">"I am mastery task"</span>
    - <span class="hljs-property">name</span>: var <span class="hljs-keyword">from</span> <span class="hljs-type">file</span>
      debug:
        var: something

    - include: tasks/a.yaml
 	   </code></pre>
	 </li><li class="listitem">
     <p>Содержимое <span class="term"><code>tasks/a.yaml</code></span></p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: <span class="hljs-keyword">where</span> am I
  debug:
    msg: <span class="hljs-string">"I am task a"</span>

- include: b.yaml
 	   </code></pre>
	 </li><li class="listitem">
     <p>Содержимое <span class="term"><code>tasks/b.yaml</code></span></p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: who am I
  debug:
    msg: <span class="hljs-string">"I am task b"</span>
 	   </code></pre>
	 </li>
    </ul>
    </div>
   <p>Исполнение данного плейбука таково:</p>
	<div class="figure"><a id="Fig0105">&nbsp;</a>
	 <p class="title"><strong>Рисунок 5</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0105.jpg" height="634" width="731"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
   <p>Мы можем отчётливо видеть все относительные ссылки на пути и как они соотносятся с теми файлами, которые 
   ссылаются на них. При использовании ролей, имеются некоторые дополнительные предположения об относительных 
   путях, однако мы подробно обсудим это в следующей главе.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0303"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Директивы поведения воспроизведения</span></h4>
   </div></div></div>
   <p>Когда Ansible осуществляет синтаксический разбор воспроизведения (play), имеется ряд директив, поиск которых
   он выполняет, чтобы определить различное поведение для некоторого воспроизведения. Эти директивы записываются 
   на том же самом уровне, что и директива <span class="term"><code>hosts:</code></span>. Вот подмножество из 
   ключевых, которые могут применяться описанным образом:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p><span class="term"><code>any_errors_fatal</code></span>: Данная Булева директива применяется для указания 
	 Ansible рассматривать любой отказ как неустранимую ошибку для предотвращения любых попыток выполнения 
	 дальнейших задач. Она изменяет все значения по умолчанию, при которых Ansible продолжится пока все задачи 
	 не будут завершены или не откажут все хосты.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>connection</code></span>: Эта строковая директива определяет какую систему соединения 
	 применять для данного воспроизведения. Обычным выбором здесь является local, что указывает Ansible на необходимость 
	 выполнять все операции локально, однако в контексте той системы, которая взята из учёта ресурсов.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>gather_facts</code></span>: Эта Булева директива управляет тем, будет или нет Ansible 
	 выполнять свою фазу операций получения фактов, при которой некая особая задача исполняется на каком- то хосте для 
	 обнаружения различных фактов об этой системе. Пропуск получения фактов, когда вы уверены что вам не нужно никакого 
	 обнаружения данных, может стать значительным сохранением времени в некотором большом окружении.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>max_fail_percentage</code></span>: Эта численная директива аналогична 
	 <span class="term"><code>any_errors_fatal</code></span>, однако более гранулирована. Она позволяет вам 
	 определить какой процент ваших хостов может отказать прежде чем выполнит останов вся операция.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>no_log</code></span>: Эта Булева директива управляет тем, будет или нет 
	 Ansible выполнять регистрацию (на определённый экран и/или в некий настроенный файл 
	 <span class="term"><code>log</code></span>) данной команды или всех полученных от некоторой задачи 
	 результатов. Это важно если ваша задача или вывод имеют отношение к секретной информации. Этот ключ также 
	 может быть применён к некоторой задаче напрямую.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>port</code></span>: это ряд директив для определения того, какой порт SSH (или 
	 другого встраиваемого модуля соединения) необходимо применять для соединения пока другого не будет настроено в 
	 данных учёта ресурсов.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>remote_user</code></span>: Данная строковая директива определяет какой пользователь 
	 регистрируется в этой удалённой системе. По умолчанию соединение производится от имени того пользователя, который 
	 запускал <span class="term"><code>ansible-playbook </code></span>.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>serial</code></span>: Эта директива принимает некоторое значение и контролирует 
	 сколько систем Ansible выполнит задачу прежде чем перейти к следующей задаче в воспроизведении. Это решительное 
	 изменение по сравнению с обычным порядком работы, при котором некоторая задача исполняется по всем системам при 
	 воспроизведении прежде чем перейти к следующей. Это очень полезно при сценариях накатывания обновлений, которые 
	 будут более подробно описаны в последующих главах.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>become</code></span>: Эта Булева директива определяется для настройки того, следует 
	 ли применять эскалацию привилегий (sudo, или иного метода) на данном удалённом хосте для выполнения задач. 
	 Этот ключ также может определяться на уровне некоторой задачи. Связанные директивы включают в себя
	 <span class="term"><code>become_user</code></span>, <span class="term"><code>become_method</code></span> и
	 <span class="term"><code>become_flags</code></span>. Может применяться для того, чтобы настраивать как должна 
	 происходить эскалация.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>strategy</code></span>: Данная директива устанавливает какая тратегия будет применяться 
	 для воспроизведения.</p>
	 </li>
    </ul>
    </div>
   <p>Многие из этих ключей будут применяться в примерах плейбуков на протяжении всей книги.</p>
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table summary="Замечание" border="0"><tbody><tr><td rowspan="2" align="center" valign="top" width="25">
	   <img alt="[Замечание]" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/note.png"></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>За полным списком доступных директив воспроизведения отсылаем вас к документации в интернет- ресурсах по 
	   адресу <a class="link" href="https://docs.ansible.com/ansible/playbooks_variables.html#play" target="_top">https://docs.ansible.com/ansible/playbooks_variables.html#play</a>.</p></td></tr></tbody></table>
     </div>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0304"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Стратегии исполнения</span></h4>
   </div></div></div>
   <p>Выпуск Ansible 2.0 ввёл новый способ управления поведением исполнения воспроизведения, стратегию. Некая 
   стратегия определяет каким образом Ansible координирует все задачи по множеству хостов. Всякая стратегия 
   является неким встраиваемым модулем, причём Ansible вводит два: линейный (linear) и свободный (free). 
   Линейная стратегия, являющая стратегией по умолчанию, это то,как Ansible всегда себя ведёт. При исполнении 
   некоторого воспроизведения все подлежащие этому воспроизведению хосты исполняют самую первую задачу. 
   Когда все завершаются, Ansible переходит к следующей задаче. Директива serial может создавать пакеты хостов 
   для работы последовательным образом, однако сама базовая стратегия остаётся той же самой. Все имеющиеся цели 
   для для некоторого заданного пакета должны выполнить какую- то задачу прежде чем начать исполнение следующей. 
   Новая свободная стратегия прерывает такое обычное поведение. При применении свободной стратегии, как только 
   некий хост выполняет какую- то задачу, Ansible будет исполнять следующую задачу для этого хоста, не ожидая 
   когда её не завершит ещё  какой- нибудь хост. Это происходит со всеми хостами в данном наборе, для всех задач 
   во всех воспроизведениях. Эти хосты завершать задачи настолько быстро, насколько смогут, минимизируя время 
   исполнения для каждого конкретного хоста. Хотя большинство плейбуков будут применять определённую по умолчанию 
   линейную стратегию, имеются случаи, в которых свободная стратегия будет более предпочтительной. Например, 
   обновление некоторой службы по какому- то обширному набору хостов. Если такое воспроизведение имеет значительное 
   число задач для исполнения такого обновления, которые начинаются с останова данной службы, тогда более 
   важно для каждого хоста испытать настолько малое время простоя, насколько это возможно. Позволяя всем хостам 
   независимо перемещаться по исполняемому ими воспроизведению настолько быстро, насколько это возможно, мы 
   обеспечиваем останов каждого хоста только на тот промежуток, который ему необходим. Не применяя свободную стратегию, 
   целый парк был бы остановлен на тот период, пока самый медленный хост во всём парке завершит все задачи.</p>
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table summary="Замечание" border="0"><tbody><tr><td rowspan="2" align="center" valign="top" width="25">
	   <img alt="[Замечание]" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/note.png"></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Так как свободная стратегия не осуществляет координацию выполнения задач в хостах, не возможно зависеть 
	   от тех данных, которые создаются на протяжении некоторой задачи для использования в последующих задачах 
	   на каком- то другом хосте. Нет никакой гарантии, что данный самым первым завершит ту задачу, которая 
	   вырабатывает необходимые данные.</p></td></tr></tbody></table>
     </div>
   <p>Стратегии исполнения реализуются в виде некоторого встраиваемого модуля и, таким образом, могут быть 
   разработаны персональные стратегии для расширения поведения Ansible. Разработка таких встраиваемых модулей 
   не входит в задачи данной книги.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0305"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Выбор хоста для воспроизведений и задач</span></h4>
   </div></div></div>
   <p>Самый первый предмет, который определяют большинство воспроизведений (после именования, конечно), это шаблон 
   хостов для воспроизведения. Это именно тот шаблон, который применяется для выбора хостов из объекта описи, на 
   котором исполняются данные задачи. Обычно он прямолинеен; некий шаблон хостов содержит один или более блоков, 
   указывающих некий хост, группу, символы подстановки или регулярное выражение применяемое для такого выбора. 
   Блоки разделяются двоеточием, из символов подстановки применяется только звёздочка, а регулярное выражение 
   начинается с символа тильды:</p>
	   <pre class="screen"><code class="hljs">
hostname:groupname:*.example:~(web|db)\.example\.com
 	   </code></pre>
   <p>Расширенное применение может включать выбор индекса группы или даже диапазон внутри какой- то группы:</p>
	   <pre class="screen"><code class="hljs css">
<span class="hljs-tag">Webservers</span><span class="hljs-attr_selector">[0]</span><span class="hljs-pseudo">:webservers</span><span class="hljs-attr_selector">[2:4]</span>
 	   </code></pre>
   <p>Все блоки рассматриваются как некий включаемый блок, то есть все обнаруженные в самом первом шаблоне хосты 
   добавляются ко всем хостам, обнаруживаемым в последующем шаблоне, и так далее. Однако, можно оперировать 
   при помощи управляющих символов для изменения их поведения. Применение амперсанада ("&amp;") делает 
   возможным некий включающий выбор (всех присутствующих в обоих шаблонах хостов). Использование восклицательного 
   знака позволяет выбор с исключением (все хосты, имеющиеся в данном предыдущем шаблоне и НЕ находящиеся в указанном 
   исключающем шаблоне):</p>
	   <pre class="screen"><code class="hljs ruby">
<span class="hljs-constant">Webservers</span><span class="hljs-symbol">:&amp;dbservers</span>
<span class="hljs-constant">Webservers</span><span class="hljs-symbol">:</span>!dbservers
 	   </code></pre>
   <p>Когда Ansible осуществляет синтаксический разбор данных шаблонов, он будет затем применять ограничения, если они 
   имеются. Ограничения поступают в виде пределов или отказавших хостов. Такой результат сохраняется на протяжении 
   данного воспроизведения и доступен через переменную с именем <span class="term"><code>play_hosts</code></span>. 
   По мере выполнения каждой задачи, эти данные опрашиваются и в процессе обработки последовательных операций могут 
   помещаться некие дополнительные ограничения. По мере возникновения отказов, будь то отказы в соединении или отказы 
   в исполнении задач, все отказавшие хосты помещаются в некий список ограничений с тем, чтобы такой хост был передан 
   в идущую следующей задачу. Если, в определённый момент, некая процедура выбора хостов получает падение ограничений
   до нуля хостов, исполнение данного воспроизведения прекращается с некоторой ошибкой. Некая оговорка здесь состоит в 
   том, что если воспроизведение настроено на наличие некоторого параметра <span class="term"><code>max_fail_precentage</code></span>
   ил <span class="term"><code>any_errors_fatal</code></span>, тогда исполнение данного воспроизведения прекращается 
   непосредственно после того как данная задача встречает такое условие.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0306"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Имена воспроизведений и задач</span></h4>
   </div></div></div>
   <p>Когда нет прямого ограничения, хорошей практикой является пометка ваших воспроизведений (play) и задач 
   именами. Такие имена будут отображаться в выводах командных строк <span class="term"><code>ansible-playbook </code></span> 
   и будут отображаться в файлах журнала если <span class="term"><code>ansible-playbook </code></span> 
   напрямую выполняет регистрацию в некотором файле. Имена задач также становятся удобными для прямого запуска
   <span class="term"><code>ansible-playbook </code></span> в конкретной задаче и для ссылок в обработчиках.</p>
   <p>Имеются два основных подлежащих рассмотрению момента при именовании воспроизведений и задач:</p>
  	<div class="itemizedlist">
	<ul class="itemizedlist" type="disc">
	 <li class="listitem">
	 <p>Имена воспроизведений и задач должны быть уникальными.</p>
	 </li><li class="listitem">
	 <p>Избегайте какого- либо применения переменных в именах воспроизведений и задач</p>
	 </li>
    </ul>
    </div>
   <p>Наилучшей практикой будет использование уникальных имён воспроизведений и задач, что в целом поможет быстро 
   идентифицировать где может размещаться проблемная задача в вашей иерархии плейбуков (планов), ролей, файлов 
   задач, обработчиков и тому подобного. Уникальность является ещё более важной при уведомлении некоторого 
   обработчика или при запуске некоторой определённой задачи. В случае, когда имена задач имеют дублирования, 
   само поведение Ansible может стать непредсказуемым или по крайней мере не очевидным.</p>
   <p>Имея в качестве некоторой цели уникальность, многие авторы плейбуков смотрят на переменные для удовлетворения 
   данному сдерживающему фактору. Такая стратегия может хорошо работать, однако авторы вынуждены заботиться об 
   источнике тех переменных данных, на которые они ссылаются. Переменные данные могут поступать из разнообразных 
   расположений (которые мы обсудим позже в данной главе), а назначаемые этим переменным значения могут определяться 
   в самое разное время. Ради имён воспроизведений и задач важно помнить, что правильно будут разбираться и обсчитываться 
   только те параметры, для которых значения будут определены во время синтаксического разбора плейбука. Если 
   эти данные, на которые ссылается переменная, обнаруживаются через некую задачу или прочие операции, такая строка 
   переменной будет отображаться как не прошедшая синтаксический анализ в получаемом выводе. Давайте рассмотрим 
   некий пример плейбука, который применяет переменные для имён воспроизведений и задач:</p>
	   <pre class="screen"><code class="hljs applescript">
<span class="hljs-comment">---</span>
- <span class="hljs-property">name</span>: play <span class="hljs-keyword">with</span> a {{ var_name }}
  hosts: localhost
  gather_facts: <span class="hljs-constant">false</span>

  vars:
  - var_name: <span class="hljs-keyword">not</span>-mastery

  tasks:
  - <span class="hljs-property">name</span>: <span class="hljs-keyword">set</span> a variable
    set_fact:
    task_var_name: <span class="hljs-string">"defined variable"</span>

  - <span class="hljs-property">name</span>: task <span class="hljs-keyword">with</span> a {{ task_var_name }}
    debug:
    msg: <span class="hljs-string">"I am mastery task"</span>

  - <span class="hljs-property">name</span>: <span class="hljs-keyword">second</span> play <span class="hljs-keyword">with</span> a {{ task_var_name }}
    hosts: localhost
    gather_facts: <span class="hljs-constant">false</span>

  tasks:
  - <span class="hljs-property">name</span>: task <span class="hljs-keyword">with</span> a {{ runtime_var_name }}
    debug:
    msg: <span class="hljs-string">"I am another mastery task"</span>
 	   </code></pre>
   <p>На первый взгляд можно ожидать, что по крайней мере <span class="term"><code>var_name </code></span> и
   <span class="term"><code>task_var_name </code></span> вычисляются правильно. Мы можем отчётливо видеть, что 
   <span class="term"><code>task_var_name </code></span> определяется до её применения. Однако, вооружившись 
   знанием, что плейбуки целиком подвергаются синтаксическому анализу  до исполнения, мы лучше понимаем:</p>
	<div class="figure"><a id="Fig0106">&nbsp;</a>
	 <p class="title"><strong>Рисунок 6</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0106.jpg" height="676" width="731"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
   <p>Как мы можем видеть, надлежащим образом обработан только одно имя переменной, 
   <span class="term"><code>var_name </code></span>, так как она была определена как некая статическая 
   переменная воспроизведения.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="04"> </a>Транспортировка и исполнение модуля</h3>
   </div></div></div>
   <p>Когда некий плейбук (план) прошёл синтаксический разбор и определены все хосты, Ansible готов выполнить некую 
   задачу. Задачи состоят из имени (необязательно, но, пожалуйста, не пропустите его), ссылки на модуль, 
   аргументов модуля и директив управления задачей. Следующая глава подробно обсудит директивы управления задачей, 
   поэтому мы рассмотрим только её ссылку на модуль и аргументы.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0401"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Ссылка на модуль</span></h4>
   </div></div></div>
   <p>Все задачи имеют некую ссылку на модуль. Она сообщает Ansible какой вид работы выполнять. Ansible разработан с 
   тем, чтобы сделать возможным присутствие в некотором плейбуке пользовательских модулей. Такие пользовательские 
   модули могут быть целиком с новой функциональностью или они могут заменять поставляемые с самим Ansible модули. 
   Когда Ansible выполняет синтаксический разбор накоторой задачи и обнаруживает то имя модуля, которое необходимо 
   применять для какой- то задачи, он просматривает последовательности расположений чтобы определить все запрошенные 
   модули. Где он осуществляет просмотр, также зависит и от того, где находится данная задача, является она ролью 
   или нет.</p>
   <p>Если некая задача является какой- то ролью, Ansible вначале просматривает наличие данного модуля в некотором 
   дереве каталога с названием <span class="term"><code>library</code></span>, где располагаются все роли и задачи. 
   Если там модуль не обнаружен, Ansible ищет каталог с названием <span class="term"><code>library</code></span>
   на том же самом уровне где находится самый главный плейбук (тот, который обозначен при исполнении
   <span class="term"><code>ansible-playbook</code></span>). Если модуль не обнаружен и там, Ansible наконец 
   выполняет просматр во том настроенном пути библиотек, который по умолчанию определён в 
   <span class="term"><code>/usr/share/ansible/</code></span>. Такой путь библиотеки может быть настроен в файле 
   <span class="term"><code>config</code></span> Ansible или через переменную окружения 
   <span class="term"><code>ANSIBLE_LIBRARY</code></span>.</p>
   <p>Такое построение позволяет модулям быть упакованными в роли и плейбуки, что делает возможным добавление функций
   или очень просто и быстро устранять проблемы.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0402"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Аргументы модуля</span></h4>
   </div></div></div>
   <p>Не всякому модулю порой требуются аргументы; вывод подсказки модуля укажет каким модулям они нужны, а каким 
   нет. Доступ к документации модуля может быть выполнен при помощи команды 
   <span class="term"><code>ansible-doc</code></span>:</p>
	<div class="figure"><a id="Fig0107">&nbsp;</a>
	 <p class="title"><strong>Рисунок 7</strong></p>
	 <div class="figure-contents"><div class="mediaobject">
	 <img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/Fig0107.jpg" height="891" width="712"><br>
	 <span></span>
	 </div></div>
	</div><br class="figure-break">
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
	   <table summary="Замечание" border="0"><tbody><tr><td rowspan="2" align="center" valign="top" width="25">
	   <img alt="[Замечание]" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/note.png"></td><th align="left">Замечание</th></tr><tr><td align="left" valign="top">
	   <p>Во избежание разбиения на страницы оболочкой данный вывод был перенаправлен в 
	   <span class="term"><code>cat</code></span>.</p></td></tr></tbody></table>
     </div>
   <p>Аргументы могут быть используемыми в <span class="term"><strong class="userinput">Jinja2</strong></span> 
   шаблонами, которые будут подвергнуты синтаксическому разбору во время исполнения модуля, что позволяет обнаруженным 
   некоторой предыдущей задаче данным применяться в последующих задачах; это очень мощный элемент разработки.</p>
   <p>Аргументы могут предоставляться в виде <span class="term"><code>key=value</code></span>, или некотором более 
   сложном формате, который более привычен для YAML. Вот два примера передаваемых некому модулю аргументов, показывающих 
   два варианта формата:</p>
	   <pre class="screen"><code class="hljs applescript">
- <span class="hljs-property">name</span>: add a keypair <span class="hljs-keyword">to</span> nova
  os_keypair: cloud={{ cloud_name }} <span class="hljs-property">name</span>=admin-key wait=yes

- <span class="hljs-property">name</span>: add a keypair <span class="hljs-keyword">to</span> nova
  os_keypair:
  cloud: <span class="hljs-string">"{{ cloud_name }}"</span>
  <span class="hljs-property">name</span>: admin-key
  wait: yes
 	   </code></pre>
   <p>Оба формата приводят к одному и тому же результату в данном примере; однако, именно сложный формат необходим, 
   если вы желаете передавать сложные аргументы в некий модуль. Некоторые модули ожидают какого- то списка 
   объектов или хэша данных  для передачи в них; и только сложный формат позволяет это делать. Хотя для многих 
   задач приемлемы оба формата, именно сложный формат является тем форматом, который применяется для большинства
   примеров данной книги.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0403"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Транспортировка и исполнение модуля</span></h4>
   </div></div></div>
   <p>Когда некий модуль обнаружен, Ansible должен исполнить его каким- то образом. Как этот модуль передаётся 
   и выполняется зависит от ряда моментов; однако, обычный процесс состоит помещении данного файла модуля в 
   определённую локальную файловую систему и его считывание в оперативную память, а затем добавления всех переданных 
   такому модулю аргументов. После этого в данный объект файла в оперативной памяти добавляется из ядра Ansible 
   стандартная вставка (boilerplate) кода модуля. Этот набор является сжатым zip и закодированным в base64, а затем 
   завёрнутым в некий сценарий. Что происходит далее в действительности зависит от метода соединения и параметров 
   времени исполнения (таких как оставление данного кода модуля в данной удалённой системе для просмотра).</p>
   <p>Определённым по умолчанию методом соединения является <span class="term"><code>smart</code></span>, 
   который как правило разрешается в метод соединения <span class="term"><code>ssh</code></span>. При настройке 
   по умолчанию Ansible откроет некое соединение SSH с заданным удалённым хостом, создаст временный каталог и 
   закроет это соединение. Затем Ansible откроет другое соединение чтобы записать определённый ZIP файл в обёртке 
   из оперативной памяти (являющийся результатом локального файла модуля, аргументов модуля задачи и кода стандартной 
   вставки Ansible -boilerplate) в некий файл внутри того временного каталога, который мы только что создали и закрыли 
   данное соединение.</p>
   <p>Наконец, Ansible откроет некое третье соединение чтобы исполнить данный сценарий и удалить весь временный каталог и 
   всё его содержимое. Все результаты модуля перехватываются из stdout в формате JSON, который Ansible разберёт 
   синтаксически и обработает надлежащим образом. Если некая задача имеет управление 
   <span class="term"><code>async</code></span>, Ansible закроет это третье соединение предле чем завершится данный 
   модуль и выполнит обратное соединение SSH со своим хостом чтобы проверить текущее состояние данной задачи после 
   предписанного периода пока данный модуль не завершится, либо достижения некоторого предписанного тайм-аута.</p>

   <a id="040301"> </a>
   <p class="title"><strong>Производительность задачи</strong></p>
   <p>Приведённое выше описание того, как Ansible соединяется с хостами имея в результате три соединения с 
   определённым хостом для каждой задачи. В маленьких парках с малым числом задач это может не иметь значения, 
   однако, по мере роста набора задач а также роста в размере самого парка, общее время, необходимое для создания 
   и разбора на части соединений SSH растёт. К счастью, существует пара способов для уменьшения этого.</p>
   <p>Первым является свойство SHH, <span class="term"><code>ControlPersist</code></span>, который 
   предоставляет некий механизм создание постоянных сокетов при первом соединении с каким- то удалённым хостом, 
   который может повторно использоваться в последующих соединениях через передачу какого- то подтверждения 
   установленной связи при создании соединения. Это может впечатляюще снизить объём времени, которое Ansible 
   тратин на установление новых соединений. Ansible автоматически использует такую функциональность если та 
   платформа, где исполняется Ansible, поддерживает её. Чтобы проверить поддерживает ли ваша платформа данное 
   свойство, проверьте её страницы руководства SSH на предмет 
   <span class="term"><code>ControlPersist</code></span>.</p>
   <p>Вторым расширением производительности, которое может применяться, является некое свойство Ansible, имеющее 
   название конвейеризации (pipelining). Конвейеризация доступна методам на основании соединений SSH и настраивается 
   в файле конфигураций Ansible внутри раздела <span class="term"><code>ssh_connection</code></span>:</p>
	   <pre class="screen"><code class="hljs ini">
<span class="hljs-title">[ssh_connection]</span>
<span class="hljs-setting">pipelining=<span class="hljs-value"><span class="hljs-keyword">true</span></span></span>
 	   </code></pre>
   <p>Эта установка изменяет то, как выполняется передача модулей. Вместо открытия некоторого соединения SSH 
   для создания какого- то каталога, другого для записи нашего собранного модуля и третьего для исполнения и очистки, 
   Ansible вместо этого открывает некоторое SSH соединение с заданным удалённым хостом. Затем, поверх этого 
   рабочего соединения, Ansible будет конвейерно передавать упакованный составной модуль кода и сценарий для 
   исполнения. Это снижает число соединений с трёх до одного, что может быть в действительности пойти в сумму. 
   По умолчанию  конвейеризация отключена.</p>
   <p>Применение комбинации двух этих трюков с производительностью может оставить ваши плейбуки прекрасными и 
   быстрыми, даже по мере масштабирования вашего парка. Однако имейте в виду, что Ansible будет за раз 
   адресоваться к тому числу хостов, какое число ветвлений Ansible настроено для исполнения. Ветвления являются 
   общим числом процессов Ansible, на которое будет поделены исполнители для взаимодействия с удалёнными хостами. 
   Значением по умолчанию является пять ветвлений, что будет разрешать до пяти хостов за раз. Увеличьте данное 
   значение на адресацию к большему числу хостов по мере роста своего парка выравнивая имеющийся параметр 
   <span class="term"><code>forks=</code></span> в файле настроек Ansible или применяя аргумент 
   <span class="term"><code>--forks</code></span> (<span class="term"><code>-f</code></span>) для 
   <span class="term"><code>ansible</code></span> или <span class="term"><code>ansible-playbook</code></span>.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="05"> </a>Типы и положение переменных</h3>
   </div></div></div>
   <p>Переменные являются ключевыми компонентами для конкретного плана Ansible. Переменные предусмотрены для 
   динамического содержимого воспроизведения и повторно используемых воспроизведений по различным наборам 
   учётов ресурсов. Всё за пределами самого базового использования Ansible будет применять переменные. Понимание 
   различных типов переменных и того где они могут располагаться, а также изучение того как осуществлять доступ к 
   внешним данным или приглашать пользователей заполнять переменные данные, всё это является ключом к освоению 
   Ansible.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0501"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Типы переменных</span></h4>
   </div></div></div>
   <p>Прежде чем погрузиться в вопрос старшинства переменных мы вначале должны понять различные типы и 
   подтипы доступных для Ansible переменных, их расположение и где они разрешены к применению.</p>
   <p>Самым первым главным типом являются <span class="term"><strong class="userinput">переменные учёта 
   ресурсов</strong></span> (inventory variables). Это те переменные, которые Ansible получает посредством 
   определённой инвентаризации. Они могут быть определены как переменные, которые являются особыми для 
   <span class="term"><code>host_vars</code></span> по отношению к индивидуальным хостам или применяться к целой 
   группе как <span class="term"><code>group_vars</code></span>.Эти переменные могут записываться напрямую в 
   имеющийся файл описи, доставляться определёнными динамическими встраиваемыми модулями инвентаризации или 
   загружаться из  каталогов <span class="term"><code>host_vars/&lt;host&gt;</code></span> или 
   <span class="term"><code>group_vars/&lt;group&gt;</code></span>.</p>
   <p>Эти типы переменных должны применяться для определения поведения Ansible при работе с данными хостами или 
   особыми для сайта данными, относящимися к тем приложениям, которые исполняют эти хосты. Когда некая переменная 
   поступает из <span class="term"><code>host_vars</code></span> или 
   <span class="term"><code>group_vars</code></span>, она назначается некоторой 
   <span class="term"><code>hostvars</code></span> и может применяться из плейбуков и временных файлов. Доступ 
   к некоторым собственным переменным хоста может быть выполнен просто путём ссылки на её название, например, 
   <span class="term"><code>{{ foobar }}</code></span>, а доступ к переменным другого хоста может быть выполнен 
   путём доступа к <span class="term"><code>hostvars</code></span>. Например, для доступа к переменной 
   <span class="term"><code>foobar</code></span> для <span class="term"><code>examplehost</code></span>:
   <span class="term"><code>examplehost: {{ hostvars['examplehost']['foobar'] }}</code></span>. Эти переменные 
   имеют глобальную область действия.</p>
   <p>Вторым основным типом переменных являются <span class="term"><strong class="userinput">переменные 
   роли</strong></span> (role variables). Это переменные, особые для некоторой роли и они используются задачами данной 
   роли и имеют область действия только внутри той роли, для которой они определены, то есть их можно применять 
   только внутри данной роли. Эти переменные часто предоставляются в качестве 
   <span class="term"><strong class="userinput">значений роли по умолчанию</strong></span> (role default), что 
   означает поставку некоторого значения по умолчанию для определённой переменной, однако легко может быть 
   переписано при применении данной роли. Когда выполняется ссылка на роль, имеется возможность предоставить 
   данные переменной в то же самое время, причём либо переписывая определённую по умолчанию роль, либо создавая 
   целиком новые данные. В следующей главе мы изучим глубже роли. Эти переменные применяются ко всем хостам 
   внутри данной роли и к ним можно осуществлять доступ напрямую во многом аналогично случаю с собственными 
   <span class="term"><code>hostvars</code></span> хоста.</p>
   <p>Третьим главным типом переменных являются <span class="term"><strong class="userinput">переменные 
   воспроизведения</strong></span> (play variables). Эти переменные определяются в управляющих ключах воспроизведения,
   причём либо непосредственно через ключ <span class="term"><code>vars</code></span>, либо берутся из внешних 
   файлов  чрез ключ <span class="term"><code>vars_files </code></span>. Кроме того, само воспроизведение может 
   интерактивно запрашивать у своего пользователя данные переменной при помощи <span class="term"><code>vars_prompt</code></span>.
   Эти переменные предназначены для использования внутри самой области действия данного воспроизведения и в любых 
   задачах или включённых задачах  данного воспроизведения. Эти переменные применяются ко всем хостам в рамках данного 
   воспроизведения и на них можно ссылаться как если бы они были <span class="term"><code>hostvars</code></span>.</p>
   <p>Четвёртым типом переменных являются <span class="term"><strong class="userinput">переменные 
   задачи</strong></span> (task variables). Переменные задачи создаются из данных, которые обнаруживаются при 
   исполнении задач или на фазе сбора фактов некоторого воспроизведения. Эти переменные являются специфичными для 
   хоста и добавляются в <span class="term"><code>hostvars</code></span>, а также могут применяться в качестве 
   таковых, что также означает, что они имеют глобальную область действия <span class="emphasis"><em>после</em></span>
   того момента, как они обнаружены или определены. Переменные данного типа могут обнаруживаться через 
   <span class="term"><code>gather_facts</code></span> и <span class="term"><strong class="userinput">модули 
   фактов</strong></span> (fact modules, модули, которые не изменяют состояние, но вместо этого возвращают 
   данные), заполняемые возвращаемыми данными посредством определённого ключа задачи
   <span class="term"><code>register</code></span>, либо определяются напрямую некоторой задачей, применяющей 
   модули <span class="term"><code>set_fact</code></span> или <span class="term"><code>add_host</code></span>. 
   Данные также могут получаться интерактивно из тех операторов, которые применяют аргумент 
   <span class="term"><code>prompt</code></span> для своего модуля <span class="term"><code>pause</code></span>
   и регистрируют получаемый результат:</p>
	   <pre class="screen"><code class="hljs applescript">
- <span class="hljs-property">name</span>: <span class="hljs-keyword">get</span> <span class="hljs-keyword">the</span> operators <span class="hljs-property">name</span>
pause:
prompt: <span class="hljs-string">"Please enter your name"</span>
register: opname
 	   </code></pre>
   <p>Также имеется последний тип переменных, <span class="term"><strong class="userinput">внешние 
   переменные</strong></span> (extra variables), или тип <span class="term"><code>extra-vars</code></span>. 
   Это переменные, поставляемые в командной строке при исполнении 
   <span class="term"><code>ansible-playbook</code></span> через <span class="term"><code>--extra-vars</code></span>. 
   Переменные данные могут поставляться как список пар <span class="term"><code>key=value</code></span>, 
   заключённые в кавычки данные JSON, или как некая ссылка на файл в формате YAML с определёнными в нём 
   переменными данными:</p>
	   <pre class="screen"><code class="hljs python">
--extra-vars <span class="hljs-string">"foo=bar owner=fred"</span>
--extra-vars <span class="hljs-string">'{"services":["nova-api","nova-conductor"]}'</span>
--extra-vars <span class="hljs-decorator">@/path/to/data.yaml</span>
 	   </code></pre>
   <p>Внешние переменные рассматриваются как глобальные переменные. Они применяются ко всем хостам и имеют 
   область действия по всему плейбуку.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="06"> </a>Доступ к внешним данным</h3>
   </div></div></div>
   <p>Данные для переменных роли, переменных воспроизведения, а также переменных задачи также могут поступать из 
   внешних источников. Ansible предоставляет некий механизм доступа и вычисления данных из своей 
   <span class="term"><strong class="userinput">управляющей машины</strong></span> (control machine, машины, 
   исполняющей <span class="term"><code>ansible-playbook</code></span>). Данный механизм вызывается неким 
   <span class="term"><strong class="userinput">встраиваемым модулем просмотра</strong></span> 
   (lookup plugin) и числа из него поступают в Ansible. Данный встраиваемый модуль может применяться для просмотра 
   данных или доступа к ним посредством чтения файлов, создаваемых и хранимых локально паролей в данном хосте 
   Ansible для последующего повторного применения, вычисления переменных окружения, получаемых от исполняемых 
   заданий через конвейер данных, доступа к данным через системы <span class="term"><code>Redis</code></span>
   или <span class="term"><code>etcd</code></span>, построения данных из временных файлов, запроса записей 
   <span class="term"><code>dnstxt</code></span> и тому подобного. Их синтаксис таков:</p>
	   <pre class="screen"><code class="hljs ruby">
lookup(<span class="hljs-string">'</span><plugin_name><span class="hljs-string">'</span>, <span class="hljs-string">'plugin_argument'</span>)
 	   </plugin_name></code></pre>
   <p>Напрмиер, чтобы воспользоваться имеющимся значением <span class="term"><code>mastery</code></span> из 
   <span class="term"><code>etcd</code></span> в некоторой задаче отладки:</p>
	   <pre class="screen"><code class="hljs sql">
- name: <span class="hljs-operator"><span class="hljs-keyword">show</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">from</span> etcd
  debug:
    msg: <span class="hljs-string">"{{ lookup('etcd', 'mastery') }}"</span>
 	   </span></code></pre>
   <p>Просмотры вычисляются когда исполняется ссылающаяся на них данная задача, что делает возможным динамическое 
   обнаружение данных. Чтобы повторно использовать определённый просмотр во множестве задач и повторно вычислять 
   их всякий раз, может быть определена некая переменная плейбука с каким- то значением просмотра. Всякий раз когда 
   выполняется ссылка на данную переменную плейбука, будет выполняться определённый просмотр, что потенциально 
   предоставляет различные значения в разное время.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="07"> </a>Старшинство переменных</h3>
   </div></div></div>
   <p>Как мы уже изучали в предыдущих разделах, имеется несколько различных типов переменных, которые могут 
   определяться в мириадах расположений. Это подводит к очень важному вопросу: что происходит, когда одно и то же имя 
   переменной применяется во множестве местоположений? Ansible имеет старшинство для загрузки переменных 
   данных и тем самым он имеет некий порядок и какое- то определение для решения какая переменная будет 
   <span class="emphasis"><em>победителем</em></span>. Перезаписывание значения переменной является неким 
   расширенным применением Ansible, поэтому важно полностью понимать его семантику, прежде чем предпринимать 
   попытку такого сценария.</p>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0701"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Порядок старшинства</span></h4>
   </div></div></div>
   <p>Ansible определяет своё старшинство следующим образом:</p>
   <div class="orderedlist">
   <ol class="orderedlist" type="1"><li class="listitem">
     <p>Внешние <span class="term"><code>vars</code></span> (из командной строки) всегда побеждают.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars</code></span> задач (только для определённых задач).</p>
	 </li><li class="listitem">
	 <p>Блочные <span class="term"><code>vars</code></span> (только для тех задач, которые находятся внутри 
	 определённого блока).</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars</code></span> ролей и вложений.</p>
	 </li><li class="listitem">
	 <p>Создаваемые <span class="term"><code>set_fact</code></span> <span class="term"><code>vars</code></span>.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars</code></span>, создаваемые при помощи директив 
	 <span class="term"><code>register</code></span> .</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars_files</code></span> воспроизведения.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars_prompt</code></span> воспроизведения.</p>
	 </li><li class="listitem"> 
	 <p><span class="term"><code>vars</code></span> воспроизведения.</p>
	 </li><li class="listitem">
	 <p>Факты хоста.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>host_vars</code></span> плейбука.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>group_vars</code></span> плейбука.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>host_vars</code></span> учёта ресурсов.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>group_vars</code></span> учёта ресурсов.</p>
	 </li><li class="listitem">
	 <p><span class="term"><code>vars</code></span> учёта ресурсов.</p>
	 </li><li class="listitem">
	 <p>Значения по умолчанию роли.</p>
	 </li>
   </ol>
   </div>

   <div xmlns="" class="titlepage"><div><div>
    <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="0702"> </a>
	<span style="color:#FEFEFE; background-color:#888888; padding:0.5em;">Слияние хэшей</span></h4>
   </div></div></div>
   <p>В предыдущем разделе мы были сосредоточены на том старшинстве, в котором переменные будут переписывать 
   друг друга. Определённое по умолчанию поведение Ansible заключается в том, что любое переписывание определения 
   для некоторого имени переменной полностью маскирует все предыдущие определения данной переменной. Однако, 
   такое поведение может быть изменено для одного типа переменных, для хэшей. Некая переменная хэша 
   (в терминах Python <span class="emphasis"><em>словарь</em></span>, dictionary) является набором данных из ключа 
   и значения. Значения могут иметь различные типы для каждого ключа и даже могут хэшировать сми себя в 
   сложных структурах данных.</p>
   <p>В некоторых расширенных сценариях желательно заменять всего лишь часть некого хэша или добавлять к 
   имеющемуся хэшу, вместо того, чтобы целиком замещать данный хэш. Чтобы разблокировать данную возможность, в файле 
   <span class="term"><code>config</code></span> Ansible необходимы некие изменения настроек. Именно 
   <span class="term"><code>hash_behavior</code></span> является тем элементом настройки, который принимает одно 
   из значений <span class="term"><strong class="userinput"><code>replace</code></strong></span> (замена) или 
   <span class="term"><strong class="userinput"><code>merge</code></strong></span> (слияние). Установка слияния 
   укажет Ansible на необходимость слияния или замеса двух хэшей при представлении в некотором сценарии перезаписи 
   вместо определённой по умолчанию замены, которая полностью замещает все старые данные имеющимися новыми.</p>
   <p>Давайте пройдём по двум примерам двух поведений. Мы начнём с некоторого хэша, загруженного данными и 
   симулирующего некий сценарий, при котором некоторое отличное значение для данного хэша предоставляется как какая- 
   то переменная с более высоким приоритетом.</p>
   <p>Начальные данные:</p>
	   <pre class="screen"><code class="hljs bash">
<span class="hljs-built_in">hash</span>_var:
  fred:
    home: Seattle
    transport: Bicycle
 	   </code></pre>
   <p>Новые данные загружаются через <span class="term"><code>include_vars</code></span>:</p>
	   <pre class="screen"><code class="hljs bash">
<span class="hljs-built_in">hash</span>_var:
  fred:
    transport: Bus
 	   </code></pre>
   <p>Для данного определённого по умолчанию поведения получаемое значение для 
   <span class="term"><code>hash_var</code></span> будет таким:</p>
	   <pre class="screen"><code class="hljs bash">
<span class="hljs-built_in">hash</span>_var:
  fred:
    transport: Bus
 	   </code></pre>
   <p>Однако, если мы включим поведение <span class="term"><strong class="userinput"><code>merge</code></strong></span>, 
   мы получим следующий результат:</p>
	   <pre class="screen"><code class="hljs bash">
<span class="hljs-built_in">hash</span>_var:
  fred:
    home: Seattle
    transport: Bus
 	   </code></pre>
   <p>Имеется даже больше нюансов и не определённых поведений при использовании слияний, а раз так, настоятельно 
   рекомендуется применять эту установку только если она абсолютно необходима.</p>
  </div>

  <div class="section">
   <div xmlns="" class="titlepage"><div><div>
    <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="08"> </a>Выводы</h3>
   </div></div></div>
   <p>Хотя само проектирование Ansible и сосредоточено на простоте и лёгкости применения, его архитектура сама 
   по себе очень мощна. В данной главе мы обсудили ключевые понятия проектирования и архитектуры Ansible, такие 
   как версии и настройка, синтаксический разбор плейбуков (планов), передача модуля и его исполнение, типы 
   переменных и их расположение, а также старшинство переменных.</p>
   <p>Вы изучили, что плейбуки содержат переменные и задачи. Задачи присоединяют небольшой код с названием модули, 
   имеющий аргументы, которые могут заполняться переменными данными. Такие комбинации передаются на выбранные хосты 
   из предоставляемых источников учёта ресурсов. Полное фундаментальное понимание таких строительных блоков является 
   основной платформой на которой вы можете выстраивать некое овладение всеми предметами Ansible!</p>
   <p>В нашей следующей главе вы изучите как обезопасить секретные данные при работе с Ansible.</p>
  </div>

 </div>

<!----><script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/FooterAndSidebar.js">
</script><script type="text/javascript"><!--</div id="content"> is inside next code
document.write(FooterAndSidebar);//-->
</script><script src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/f.js" id="eXF-mstansb2-0" async="" defer="defer"></script><a title="eXTReMe Tracker - Free Website Statistics" id="eXTReMe-Free-mstansb2" target="_blank" href="http://extremetracking.com/free?login=mstansb2"><img src="data:image/gif;base64,R0lGODlhKQAmAPcAAAAAAP////C3ueChpqplbMiQmFgXIkwWH9J5jbFnd/PP16+SmmMmUZphjdWyzggACAcEB5pjmmFNZiUIOaWEvZx7xlMrjyoTVq+usqWc8wIAISQYslJNoi0mzSklcFJN1iooVQEANXBvzZ+e7QgITg0NbhwdkBAQSmlptnd3mM/P/ZWVr4+PlI2NkoyMkQwSqRATa4aI2GRr4zlCjDFCpXOM597n//f//11cWlxbWVhXVVpYVmZkYl9dW2poZmlnZWhmZGdlY5SEeyYICIwxMXssLHUrK85aWlElJUojI0MgIAwJCf3n50I+Pk5KSk1JSUtHR0pGRlBMTBUUFEVCQkI/P0A9PUtISEpHRxoZGf/39zo4OEA+PiQjIyIhISopKSkoKCcmJiYlJSsqKnR0dHNzc3Jycm5ubmxsbGRkZGJiYldXV0xMTEtLS0JCQj8/Pz4+Pj09PTw8PDk5OTQ0NDMzMzIyMjExMSsrKyoqKiUlJSMjIyAgIB0dHRwcHBsbGxoaGhkZGRgYGBcXFxUVFRQUFBISEhERERAQEA0NDQwMDAsLCwoKCgkJCQgICAcHBwYGBgUFBQQEBAMDAwICAgEBAf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAJYALAAAAAApACYAAAj/AM+kGUiwoMGDCBMSPKNmjcOHECNKnEjxYcM2GDNq3Mixo8eMa9i8GUmypMmRcOLIWQnnpEuSbNzQmUmzJs06d6hgecIDSBAsXOrYHFrTzRw8SJMqRToGSxkWGKJKbYEmx5alWJHOsbOnq9evXayUiboihVmzK1ZEdbFDzNe3Xe3k+UO3bt0+OqCukOABBAwPHkyYmIGiQlQzW/zYXZxHD6HHkB9nwbFgLwkSfwdz2MwZRdQyVQgZKkS6EGQ9fBCpXo0oUI/KIEicgCG4s4jbIlCgoICBjJMkB4wkUMJINR8/ipIrF3SFxYrYJ0AENkGDBgoRMWKMGBEjN4UFRwQE/xjPpEhyP4EaqVe/KAoZDCBCyC5RQjCND7cz6Nc/4vYABQMQYAASTCiwRCOBDALJggsC4gMGKYRwwmz1mbDBfSKMkIEKDiDgQAb9xYCBD18AAIACAkAAySCESOKiJJE08V58E8JAm4UdfCDDhjYg8F8F3Hm2ghQAIKEFAZRIQkghkzQ5ySNQrMCCBhPOJtgLG+RYw4Y3DMBEAAPEUAN2Iw4hABMGVDJJIYZU4mYliPyAgQRUnlDCjVjmuKMKXSrwJQW4jUiAFkSYWIkhbb45xYx12ljfCy/oyaOXCvjJwW0YDACmiQAcmqibgTA6IQn0mQCpnhqqgIAWCiBQIA0cNP8QgABDcHroIZwC0IeoJ5D6aKSoZhCBFiqIUIAWCzTABBNIOJLrIbga6gWj8mFWYZ56yjCsAzFwoGkATBDwRSHPRmtiGA+CoIF8FF6JpQUEfPCBBUw4cBsDBTSwABnjlpsrGA/SWa21j5YwgBYNzFvvdRxYwEFvXzjLKbS5FiIFC1OuexkMpb5QggIBKGABvQ5wxoFaJEpsIsWcOoIEAQWoOzDH9V1QKcI2O+AwBxJgwIIU5PrL6RB+LpCCBhpvzPEF9SqghQEKOODBDB6kAHHQE5sLwLEEBPxACOzORgIDWkRggBYIRO1BCTP4LEWJuQLAMgAMBICAxVCB8IAGl13RdsGxDZxwcNQTeLDCAinHLXe0QzBBKwBfXDynBnszQAATrIIAAgNfLjAByuOqnLWJRhJgoiORk7GABBIUALICDEgYHwGzNjBi6IovTjoTDAyNr9NasErnuiFozoAAAwhBYiGiC23AlwMI4DTmTAxQAAERYJwCxmphQAABb2Od+9wG/AdggEh8EbkPZGCMweEskOHD2/3mPjqnDwwxxAO5OlKI+lIIoADpxzz7Cc2Ap/NfaRYoPgTqzoEQjODKtCbBCipubhbM4MQSocEOmigRAQEAOw==" style="border:0;border-radius:4px;height:38px;width:41px;" alt="eXTReMe Tracker - Free Website Statistics"></a><script type="text/javascript" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/main.js"><!----></script><div class="logabug" style="text-align: center"><a id="AskMdl002" href="javascript:tocall()" onmouseover="this.href=mail" target="_blank"><i class="icon-question"><!----></i>Вопросы? Обсудите их на mdl.ru</a><br><a id="logABugLink2" href="https://bugs.launchpad.net/openstack-manuals/+filebug?field.title=MasteringAnsible2nd&amp;field.comment=%0A%0A-----------------------------------%0ABuilt:%202017-06-29T17:43:47+00:00%0Agit%20SHA:%2013fb30b7c263d715eee84f0ca1a16df79697eb88%0AURL:%20http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html%0Asource%20File:%20file:a35-prades%0Axml:id:%20mastering-ansible-2nd" onmouseover="this.href=mail" target="_blank"><i class="icon-bug"><!----></i>Нашли ошибку? Сообщите о ней на данной странице</a></div><script language="JavaScript">	  var sourceFile = "source File: file:a35-prades";	  var xmlId = "xml:id: mastering-ansible-2nd";	  var lineFeed = "%0A";	  var docUrl = "URL: " + window.location;	  var bugTitle = "MasteringAnsible2nd";	  var buildTime = "Built: 2017-06-29T17:43:47+00:00";	  var gitSha = "git SHA: 13fb30b7c263d715eee84f0ca1a16df79697eb88";	  var fieldComment = encodeURI(buildTime) +  lineFeed + encodeURI(gitSha) + lineFeed + encodeURI(docUrl) + lineFeed + encodeURI(sourceFile) + lineFeed + encodeURI(xmlId);	  logABug(bugTitle,fieldComment);	</script>   <hr><div class="itemizedlist">	<ul class="itemizedlist" type="disc"><p>Дополнительные ссылки:</p>	 <li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/KVMVirtualizationCookbook/content/Ch08.html" target="_top">Книга рецептов виртуализации KVM</a> Константин Иванов, Packt Publishing, июнь 2017</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/MasteringCeph/content/index.html" target="_top">Полное руководство Ceph</a> Ник Фиск, Packt Publishing, май 2017</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/ContainerizationWithLXC/content/index.html" target="_top"> Контейнеризация при помощи LXC</a> Константин Иванов, Packt Publishing, март 2017</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/CephCookbook/content/index.html" target="_top">Книга рецептов Ceph</a> Каран Сингх, Packt Publishing, февраль 2016</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/LearningCeph2ed/content/index.html" target="_top">Изучаем Ceph</a>, 2е изд., Энтони Д`Атри, Вайбхав Бхембре, Каран Сингх, Packt Publishing, октябрь 2017</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/LearningCeph/content/index.html" target="_top">Изучаем Ceph</a> Каран Сингх, Packt Publishing, январь 2015</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/MasteringProxmox.2ed/content/index.html" target="_top">Proxmox. Полное руководство</a>. 2е изд., Васим Ахмед, Packt Publishing, май 2016</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/ProxmoxCookbook/content/index.html" target="_top">Книга рецептов Proxmox. Главы 1-6, Дополнения: Преобразование OpenVZ в LXC, Организация ограждения</a> Васим Ахмед, Packt Publishing, август 2015</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/VirtualizationComplete/content/index.html" target="_top">Полная виртуализация. Базовая коммерческая редакция</a>: Proxmox-freeNAS-Zentyal-pfSense. Ли Р. Сюрбер, февраль 2016</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html" target="_top">Полное руководство Ansible</a>. 2е изд., Джесс Китинг, май 2017</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/MasteringZabbix.2ed/content/Ch04.html" target="_top">Zabbix. Полное руководство</a>. 2е изд., Андреа Далле Ваккье, сентябрь 2015</p>	 </li><li class="listitem">	 <p><a class="link" href="http://onreader.mdl.ru/MasteringPythonNetworking/content/index.html" target="_top">Полное руководство работы с сетями на Python</a>. Эрик Чоу, Июнь 2017</p>	 </li>    </ul>   </div>      <hr><div class="legal"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html">Уведомление о правах</a><hr><br><table style="border-style: none;" align="left" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td style="border-style: none; text-align:left;" valign="top" width="80%">Перевод: Copyright ©&nbsp;2017 &nbsp;<img alt="mdl.ru" src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/mdl-reg.jpg" widht="35" style="border-style: none;" height="12">.<br>All rights reserved.<br>Ссылки обязательны (Refs and links are obligatory).</td><td border="0" style="border-style: none; text-align:right;" valign="top" width="20%"><em><a href="http://www.mdl.ru/">http://www.mdl.ru</a><br> <br><a href="http://onreader.mdl.ru/sddc-mdl-portfolio.pdf">портфолио SD DC</a></em></td></tr><tr><td colspan="2" border="0"> <a href="http://www.mdl.ru/Solutions/Put.htm?Nme=CanonOffer"><img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/MFUoffer170420-610x315.jpg" "width="610&quot;" heigh="315"></a></td></tr></tbody></table></div><div><div id="leftnavigation" style="padding-top:3px; background-color:white;">	<div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs"><ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"><li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#treeDiv" tabindex="1"><span class="contentsTab">Содержание</span></a></li>	<li class="ui-state-default ui-corner-top"><a href="#searchDiv" tabindex="1"><span class="searchTab">Поиск</span></a></li></ul>	<div class="ui-tabs-panel ui-widget-content ui-corner-bottom" id="treeDiv"><img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%201.%20%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B%20%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20Ansible%20-%20%D0%9F%D0%BE%D0%BB%D0%BD%D0%BE%D0%B5%20%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20Ansible_files/loading.gif" alt="загрузка таблицы содержания..." id="tocLoading" style="display:none;">	<div id="ulTreeDiv" style="" class="thisisthat">	<ul id="tree" class="filetree treeview"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Preface">Предисловие<sup>~</sup></a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Covers">Что охватывает эта книга</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#You_need">Что вам нужно для этой книги</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#For_Who">Для кого эта книга</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Conventions">Соглашения</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Feedback">Обратная связь с читателями</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Support">Поддержка пользователей</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#DownloadingExamples">Загрузка кодов примеров</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Errata">Опечатки</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Piracy">Незаконное тиражирование</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/index.html#Questions">Вопросы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html">Глава 1. Архитектура системы и проектирование Ansible</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#01">Версии и конфигурации Ansible</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#02">Разбор учёта ресурсов и исходных данных</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0201">Статичный учёт ресурсов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0202">Переменные данные учёта ресурсов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0203">Динамическая инвентаризация</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0204">Добавления учёта ресурсов времени исполнения</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0205">Ограничения учёта ресурсов</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#03">Синтаксический разбор плейбуков</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0301">Порядок операций</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0302">Допущения относительных путей</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0303">Директивы поведения воспроизведения</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0304">Стратегии исполнения</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0305">Выбор хоста для воспроизведений и задач</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0306">Имена воспроизведений и задач</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#04">Транспортировка и исполнение модуля</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0401">Ссылка на модуль</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0402">Аргументы модуля</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0403">Транспортировка и исполнение модуля</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#040301">Производительность задачи</a></span></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#05">Типы и положение переменных</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0501">Типы переменных</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#06">Доступ к внешним данным</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#07">Старшинство переменных</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0701">Порядок старшинства</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#0702">Слияние хэшей</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch01.html#08">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html">Глава 2. Защита вашей секретной информации в Ansible</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#01">Шифрование неподвижных данных</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0101">Вещи, которые может шифровать Vault</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0102">Создание новых зашифрованных файлов</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#010201">Приглашение ко вводу пароля</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#010202">Файл пароля</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#010203">Сценарий пароля</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0103">Шифрование существующих файлов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0104">Изменение зашифрованных файлов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0105">Чередование паролей зашифрованных файлов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0106">Расшифровка зашифрованных файлов</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0107">Исполнение плейбуков Ansible c зашифрованными файлами</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#02">Защита секретной информации при работе</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0201">Секретная информация, передаваемая на удалённые хосты</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#0202">Секретная информация, протоколируемая в удалённые или локальные файлы</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch02.html#03">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html">Глава 3. Высвобождение всей мощи шаблонов Jinja2</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01">Управляющие структуры</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0101">Условные зависимости</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#010101">Встроенные условные зависимости</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0102">Циклы</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#010201">Фильтрация элементов цикла</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#010202">Индексация цикла</a></span></li></ul></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0103">Макросы</a></span><ul style="display: none;"><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#010301">Макро переменные</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030101">name</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030102">arguments</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030103">defaults</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030104">catch_kwargs</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030105">catch_varargs</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#01030106">caller</a></span></li></ul></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#02">Манипуляция данными</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0201">Синтаксис</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0202">Полезные встроенные фильтры</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020201">default</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020202">count</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020203">random</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020204">round</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0203">Полезные создаваемые Ansible фильтры</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020301">Связанные с состоянием задачи фильтры</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020302">shuffle</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020303">Фильтры для обработки имён пути</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#02030301">basename</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#02030302">dirname</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#02030303">expanduser</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020304">Кодирование Base64</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020305">Поиск содержимого</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0204">Пропуск неопределённых аргументов</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0205">Объектные методы Python</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020501">Строковые методы</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020502">Методы списков</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#020503">Методы int и float</a></span></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#03">Сравнение значений</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0301">Сравнения</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0302">Логика</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#0303">Тесты</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch03.html#03">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html">Глава 4. Условия управления задачами</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#01">Определение отказа</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0101">Игнорирование ошибок</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0102">Определение условия ошибки</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#02">Определение изменения</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0201">Особая обработка семейства команд</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0202">Неотложное изменение</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#03">Восстановление после ошибки</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0301">rescue</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#0302">always</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch04.html#04">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html">Глава 5. Компоновка повторно используемого содержания и ролей Ansible</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#01">Концепции включения задач, обработчика, переменной и плейбука</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0101">Включения задач</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010101">Передача значений переменных во включённые задачи</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010102">Передача сложных данных во включённые задачи</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010103">Условные включения задач</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010104">Помеченные включения задач</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0102">Включения задач с циклами</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0103">Включения обработчиков</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0104">Включения переменных</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010401">vars_files</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010402">Динамические включения vars_files</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010403">include_vars</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#010404">extra-vars</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0105">Включения плейбуков</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#02">Роли</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0201">Структура ролей</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020101">Задачи</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020102">Обработчики</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020103">Переменные</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020104">Модули и встраиваемые модули</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020105">Зависимости</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020106">Файлы и шаблоны</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020107">Собираем всё вместе</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0202">Зависимости ролей</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020201">Переменные зависимости ролей</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020202">Тэги</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020203">Условные зависимости ролей</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0203">Приложения ролей</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020301">Смешанные роли и задачи</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020302">Включения ролей</a></span></li></ul></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#0204">Совместное использование ролей</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#020401">Ansible Galaxy</a></span></li></ul></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch05.html#03">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html">Глава 6. Минимизация времени простоя и накатывания развёртываний</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#01">Обновления на месте</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#02">Расширение вовне и контрактация</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#03">Быстрые отказы</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#0301">Опция any_errors_fatal</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#0302">Опция max_fail_percentage</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#0303">Форсирование обработки</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#04">Минимизация срывов</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#0401">Откладывание срывов</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#0402">Одноразовое исполнение разрушающих задач</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#05">Построение в серию отдельных задач</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch06.html#06">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html">Глава 7. Поиск неисправностей Ansible</a><sup>~</sup></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#01">Ведение журналов и подробности плейбуков</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#0101">Подробности</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#0102">Ведение журнала</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#02">Самонаблюдение переменной</a></span><ul style="display: none;"><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#0201">Подэлементы переменной</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#020101">Сопоставление подэлементов и методов объектов Python</a></span></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#03">Исполнение отладочного кода</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#0301">Отладка плейбуков</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#0302">Отладка локального кода</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#030201">Отладка кода учёта ресурсов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#030202">Отладка кода плейбуков</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#030203">Отладка кода исполнителя</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#030204">Отладка удалённого кода</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#030205">Отладка действия встраиваемого модуля</a></span></li></ul></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch07.html#04">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html">Глава 8. Расширение Ansible</a><sup>...</sup></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#01">Разработка модулей</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0101">Построение базового модуля</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0102">Пользовательские модули</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0103">Простой модуль</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#010301">Документирование модуля</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#010302">Предоставление фактических данных</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#010303">Режим проверки</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#01030301">Поддержка режима проверки</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#01030302">Обработка режима проверки</a></span></li></ul></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#02">Разработка встраиваемых модулей</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0201">Тип подключения встраиваемого модуля</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0202">Встраиваемые модули оболочки</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0203">Встраиваемые модули поиска</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0204">Встраиваемые модули переменных</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0205">Встраиваемые модули кэширования фактов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0206">Встраиваемые модули обратного вызова</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0207">Встраиваемые модули действия</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0208">Встраиваемые модули распространения</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#03">Разработка встраиваемых модулей динамического учёта резервов</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0301">Просмотр хостов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0302">Просмотр переменных хостов</a></span></li><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0303">Простой встраиваемый модуль учёта ресурсов</a></span><ul style="display: none;"><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#030301">Оптимизация производительности сценария</a></span></li></ul></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#04">Участие в проекте Ansible</a></span><ul style="display: none;"><li class="expandable lastExpandable" tabindex="2"><div class="hitarea expandable-hitarea lastExpandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#0401">Представление содействия</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#040101">Репозиторий Ansible</a></span></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#040102">Исполнение тестов</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#04010201">Тестирование модуля</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#04010202">Интеграция тестов</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#04010203">Стиль кодирования тестов</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#040103">Выполнение запроса пула</a></span></li></ul></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch08.html#05">Выводы</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html">Глава 9. Предоставление инфраструктуры</a><sup>~</sup></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#01">Управление облачной инфраструктурой</a></span><ul style="display: none;"><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0101">Создание серверов</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#010101">Загрузка виртуальных серверов</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#010102">Добавление учёта ресурсов в реальном времени</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0102">Использование исходного кода учёта ресурсов OpenStack</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#02">Взаимодействие с контейнерами Docker</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0201">Построение образов</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0202">Построение контейнеров без Dockerfile</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0203">Учёт Docker</a></span></li></ul></li><li class="expandable" tabindex="2"><div class="hitarea expandable-hitarea"></div><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#03">Предварительный просмотр контейнера Ansible</a></span><ul style="display: none;"><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0301">Init</a></span></li><li tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0302">Build</a></span></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#0303">Run</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ch09.html#04">Выводы</a></span></li></ul></li><li class="last" tabindex="2"><span class="file"><a href="http://onreader.mdl.ru/MasteringAnsible2nd/content/Ix01.html">Указатель<sup>-</sup></a></span></li></ul>	</div></div>		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide" id="searchDiv">	 <div id="search"><form onsubmit="Verifie(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm">	  <fieldset class="searchFieldSet"><legend>Поиск</legend><center><input id="textToSearch" name="textToSearch" class="searchText" type="text"> &nbsp; <input onclick="Verifie(ditaSearch_Form)" class="searchButton" value="Go" id="doSearch" type="button"></center></fieldset></form>	 </div>	<div id="searchResults"><center>		</center></div>	<p class="searchHighlight"><a href="#" onclick="toggleHighlight()">Подсветка поиска (Вкл/Выкл)</a>	</p>	</div></div></div></div>

</div></body><div data="{&quot;a&quot;:&quot;show_Div&quot;,&quot;url&quot;:&quot;http://onreader.mdl.ru/MasteringPythonNetworking/content/Ch04.html#01&quot;,&quot;host&quot;:&quot;onreader.mdl.ru&quot;,&quot;safe&quot;:true,&quot;preview&quot;:true,&quot;live&quot;:true}" style="display:none" id="sp_console_event"></div></html>