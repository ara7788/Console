<!DOCTYPE html>
<html itemscope="itemscope" itemtype="http://schema.org/Article" lang="ru-RU"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/osd.js"></script><script src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/ca-pub-1760715558497552.js"></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="https://letsclearitup.com.ua/xmlrpc.php">
	<!--[if lt IE 9]>
	<script async src="https://letsclearitup.com.ua/wp-content/themes/independent-publisher/js/html5.js" type="text/javascript"></script>
	<![endif]-->

	<script src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/show_ads_impl_single_load.js"></script><script async="" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-1760715558497552",
	    enable_page_level_ads: true
	  });
	</script>

	<title>Знакомство с Ansible. Часть 5: роли, условия и циклы | Let'sclearITup</title>

<!-- All in One SEO Pack 2.4.2 by Michael Torbert of Semper Fi Web Design[783,870] -->
<link rel="author" href="https://plus.google.com/u/0/+%D0%95%D0%B2%D0%B3%D0%B5%D0%BD%D0%B8%D0%B9%D0%9B%D0%B5%D0%B1%D0%B5%D0%B4%D1%8C/posts">
<meta name="description" content="Мы разобрались с установкой и базовой настройкой системы управления конфигурациями, написали первый playbook, разобрали результат его выполнения, ознакомились с">

<meta name="keywords" content="ansible,debian,ansible playbook,ansible file,ansible ssh,ansible modules,install ansible,установка ansible,давайте разберемся,let\'s clear it up,ubuntu">

<link rel="canonical" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html">
			<script type="text/javascript">
				window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
				ga('create', 'UA-64873290-1', 'auto');
				// Plugins
				
				ga('send', 'pageview');
			</script>
			<script async="" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/analytics.js"></script>
			<!-- /all in one seo pack -->
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Let'sclearITup » Лента" href="https://letsclearitup.com.ua/feed">
<link rel="alternate" type="application/rss+xml" title="Let'sclearITup » Лента комментариев" href="https://letsclearitup.com.ua/comments/feed">
<link rel="alternate" type="application/rss+xml" title="Let'sclearITup » Лента комментариев к «Знакомство с Ansible. Часть 5: роли, условия и циклы»" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html/feed">
<link rel="stylesheet" id="genericons-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="independent-publisher-jetpack-sharing-enhancements-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/jetpack-sharing-enhancements.css" type="text/css" media="all">
<link rel="stylesheet" id="independent-publisher-jetpack-sharing-label-enhancements-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/jetpack-sharing-label-enhancements.css" type="text/css" media="all">
<link rel="stylesheet" id="independent-publisher-style-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="customizer-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/admin-ajax.css" type="text/css" media="all">
<link rel="stylesheet" id="social-logos-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/social-logos.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/jquery.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/jquery-migrate.js"></script><link href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/integrator.js" rel="preload"><script src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/integrator.js" type="text/javascript"></script><link href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/integrator_002.js" rel="preload"><script src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/integrator_002.js" type="text/javascript"></script>
<script type="text/javascript">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/related-posts.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/fade-post-title.js"></script>
<link rel="https://api.w.org/" href="https://letsclearitup.com.ua/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://letsclearitup.com.ua/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://letsclearitup.com.ua/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Настройка логов DNS-сервера bind9" href="https://letsclearitup.com.ua/debian/nastroyka-logov-dns-servera-bind9.html">
<link rel="next" title="Алиасы в SSH" href="https://letsclearitup.com.ua/ubuntu/aliasyi-v-ssh.html">
<meta name="generator" content="WordPress 4.8.3">
<link rel="shortlink" href="https://letsclearitup.com.ua/?p=603">
<link rel="alternate" type="application/json+oembed" href="https://letsclearitup.com.ua/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fletsclearitup.com.ua%2Fubuntu%2Fznakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html">
<link rel="alternate" type="text/xml+oembed" href="https://letsclearitup.com.ua/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fletsclearitup.com.ua%2Fubuntu%2Fznakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html&amp;format=xml">

<link rel="dns-prefetch" href="https://jetpack.wordpress.com/">
<link rel="dns-prefetch" href="https://s0.wp.com/">
<link rel="dns-prefetch" href="https://s1.wp.com/">
<link rel="dns-prefetch" href="https://s2.wp.com/">
<link rel="dns-prefetch" href="https://public-api.wordpress.com/">
<link rel="dns-prefetch" href="https://0.gravatar.com/">
<link rel="dns-prefetch" href="https://1.gravatar.com/">
<link rel="dns-prefetch" href="https://2.gravatar.com/">
<link rel="dns-prefetch" href="https://i0.wp.com/">
<link rel="dns-prefetch" href="https://i1.wp.com/">
<link rel="dns-prefetch" href="https://i2.wp.com/">
<style type="text/css">img#wpstats{display:none}</style><link rel="amphtml" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html/amp">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Знакомство с Ansible. Часть 5: роли, условия и циклы">
<meta property="og:url" content="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html">
<meta property="og:description" content="В первой части знакомства с Ansible мы разобрались с установкой и базовой настройкой системы управления конфигурациями и написали наш первый playbook, а во второй части разобрали результат его выпо…">
<meta property="article:published_time" content="2015-11-16T08:47:29+00:00">
<meta property="article:modified_time" content="2017-02-07T07:02:02+00:00">
<meta property="og:site_name" content="Let'sclearITup">
<meta property="og:image" content="https://letsclearitup.com.ua/wp-content/uploads/2015/12/ansible.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="ru_RU">
<meta name="twitter:card" content="summary">
<link href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/shCore.css" type="text/css" rel="stylesheet"><link href="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/shThemeRDark.css" type="text/css" rel="stylesheet"><style type="text/css" id="syntaxhighlighteranchor"></style>
<link rel="icon" href="https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/11/cropped-favicon.png?fit=32%2C32&amp;ssl=1" sizes="32x32">
<link rel="icon" href="https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/11/cropped-favicon.png?fit=192%2C192&amp;ssl=1" sizes="192x192">
<link rel="apple-touch-icon-precomposed" href="https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/11/cropped-favicon.png?fit=180%2C180&amp;ssl=1">
<meta name="msapplication-TileImage" content="https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/11/cropped-favicon.png?fit=270%2C270&amp;ssl=1">
</head>

<body class="post-template-default single single-post postid-603 single-format-standard" itemscope="itemscope" itemtype="http://schema.org/WebPage">



<div id="page" class="site">
	<header id="masthead" class="site-header" role="banner" itemscope="" itemtype="http://schema.org/WPHeader">

		<div class="site-header-info">
											
					<a class="site-logo" href="https://letsclearitup.com.ua/" title="Let'sclearITup" rel="home">
				<img class="no-grav" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/DSC.jpg" alt="Let'sclearITup" height="1530" width="1454">
			</a>
		
		<h1 class="site-title"><span class="byline"><span class="author p-author vcard h-card"><a class="u-url url fn n" href="https://letsclearitup.com.ua/" title="Показать все записи от Евгений Лебедь" rel="author">Евгений Лебедь</a></span></span></h1>
		<h2 class="site-description"></h2>

		
		<div class="site-published-separator"></div>
		<h2 class="site-published">Опубликовано</h2>
		<h2 class="site-published-date"><a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html" title="Знакомство с Ansible. Часть 5: роли, условия и циклы" rel="bookmark"><time class="entry-date dt-published" datetime="2015-11-16T11:47:29+0000" itemprop="datePublished" pubdate="pubdate">16.11.2015</time></a></h2>
				
									</div>

							<nav role="navigation" class="site-navigation main-navigation">
				<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>

													<div class="menu-obo-mne-container"><ul id="menu-obo-mne" class="menu"><li id="menu-item-894" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-894"><a title="Обо мне" href="https://letsclearitup.com.ua/about">Обо мне</a></li>
<li id="menu-item-1640" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1640"><a href="https://letsclearitup.com.ua/hochu-primu-v-dar">Книги для чтения 2017</a></li>
</ul></div>				
			</nav><!-- .site-navigation .main-navigation -->
		
			</header>
	<!-- #masthead .site-header -->

	<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<main id="content" class="site-content" role="main">

			
				
<article id="post-603" class="post-603 post type-post status-publish format-standard hentry category-ansible category-debian category-ubuntu tag-ansible tag-debian" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
		<header class="entry-header">
					<h2 class="entry-title-meta">
			<span class="entry-title-meta-author">
				<span class="byline"><span class="author p-author vcard h-card"><a class="u-url url fn n" href="https://letsclearitup.com.ua/" title="Показать все записи от Евгений Лебедь" rel="author">Евгений Лебедь</a></span></span>			</span>
				в <a href="https://letsclearitup.com.ua/category/ansible" rel="category tag">ansible</a>, <a href="https://letsclearitup.com.ua/category/debian" rel="category tag">debian</a>, <a href="https://letsclearitup.com.ua/category/ubuntu" rel="category tag">ubuntu</a>				<span class="entry-title-meta-post-date">
				<span class="sep"> | </span>
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html" title="Знакомство с Ansible. Часть 5: роли, условия и циклы" rel="bookmark"><time class="entry-date dt-published" datetime="2015-11-16T11:47:29+0000" itemprop="datePublished" pubdate="pubdate">16.11.2015</time></a>			</span>
							</h2>
			<h1 class="entry-title p-name" itemprop="name">Знакомство с Ansible. Часть 5: роли, условия и циклы</h1>
			</header>
	<!-- .entry-header -->
	<div class="entry-content e-content" itemprop="mainContentOfPage">
		<p><a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html"><img src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/ansible_002.png" alt="ansible" class="aligncenter size-full wp-image-763" srcset="https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/12/ansible.png?w=1200&amp;ssl=1 1200w, https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/12/ansible.png?resize=300%2C158&amp;ssl=1 300w, https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/12/ansible.png?resize=1024%2C538&amp;ssl=1 1024w, https://i0.wp.com/letsclearitup.com.ua/wp-content/uploads/2015/12/ansible.png?resize=700%2C368&amp;ssl=1 700w" sizes="(max-width: 700px) 100vw, 700px" height="368" width="700"></a>В <a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast1-vvedenie.html" target="_blank">первой части</a> знакомства с <strong>Ansible</strong> мы разобрались с установкой и базовой настройкой системы управления конфигурациями и написали наш первый <strong>playbook</strong>, а во <a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-2-razbor-vyivoda-playbook.html" target="_blank">второй части</a> разобрали результат его выполнения. <a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-3-peremennyie.html">Третью часть</a> цикла посвятили использованию переменных в <strong>Ansible</strong>, а в <a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-4-moduli.html" target="_blank">четвертой</a> разбирались с наиболее популярными модулями и их параметрами.</p>
<p>В завершающей части знакомства с <strong>Ansible</strong> давайте разберемся с условиями и циклами, а также научимся организовывать <strong>playbook</strong> в роли!<br>
<span id="more-603"></span></p>
<p>Для сокращения количества задач в наборах инструкций (<strong>playbook</strong>)
 разумно использовать циклы. Например, иногда требуется установить 
несколько пакетов на один и тот же удаленный хост или выполнить 
несколько операций над одним и тем же ресурсом.</p>
<p>Рассмотрим простой <strong>playbook</strong>, который поможет установить несколько пакетов на удаленный сервер:</p>
<div><div id="highlighter_328825" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">---</code></div><div class="line number2 index1 alt1"><code class="plain plain">- hosts: test</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">tasks:</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Install packages</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">apt: name={{ item }} state=latest</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">with_items:</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- htop</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- mytop</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- wget</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">sudo: yes</code></div></div></td></tr></tbody></table></div></div>
<p>В результате выполнения данного набора инструкций на удаленном хосте будут установлены пакеты, перечисленные в <code>with_items:</code>. <strong>Playbook</strong> будет запущен один раз, но модуль apt будет вызываться для каждого указанного пакета:</p>
<pre># ansible-playbook install_packages.yml 

PLAY [test] ******************************************************************* 

GATHERING FACTS *************************************************************** 
ok: [test-1]

TASK: [Install packages] ****************************************************** 
changed: [test-1] =&gt; (item=htop,mytop,wget)

PLAY RECAP ******************************************************************** 
test-1                 : ok=2    changed=1    unreachable=0    failed=0   
</pre>
<p>Создать нескольких пользователей и добавить их в определенные группы можно с помощью такого набора инструкций:</p>
<div><div id="highlighter_945050" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">---</code></div><div class="line number2 index1 alt1"><code class="plain plain">- hosts: test</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">tasks:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- name: Add test users</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">user: name={{ item.name }} state=present groups={{ item.groups }}</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">with_items:</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- { name: 'user1', groups: 'adm'&nbsp; }</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- { name: 'user2', groups: 'lpadmin' }</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">sudo: yes</code></div></div></td></tr></tbody></table></div></div>
<p>Результат выполнения данного <strong>playbook</strong> будет выглядеть так:</p>
<pre># ansible-playbook add_users.yml 

PLAY [test] ******************************************************************* 

GATHERING FACTS *************************************************************** 
ok: [test-1]

TASK: [Add test users] ******************************************************** 
changed: [test-1] =&gt; (item={'name': 'user1', 'groups': 'adm'})
changed: [test-1] =&gt; (item={'name': 'user2', 'groups': 'lpadmin'})

PLAY RECAP ******************************************************************** 
test-1                 : ok=2    changed=1    unreachable=0    failed=0   
</pre>
<blockquote><p><strong>Примечание.</strong> Больше примеров с использованием циклов можно найти в <a href="http://docs.ansible.com/ansible/playbooks_loops.html" target="_blank">официальной документации</a> по <strong>Ansible</strong></p></blockquote>
<p><strong>Ansible</strong> выполняет задачи в порядке их следования в 
наборе инструкций, но бывают случаи, когда требуется выполнить только 
часть задач. В <a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-3-peremennyie.html" target="_blank">третьей части</a>
 нашего цикла мы уже пробовали правильно устанавливать web-сервер Apache
 на разные дистрибутивы с помощью переменных. Чтобы задачи выполнялись 
только в определенном случае, можно (и нужно) указывать условия с 
помощью <code>when:</code>.</p>
<p>В условиях в <strong>Ansible</strong> для сравнения используются <code>==</code> (равно), <code>!=</code> (не равно), <code>&gt;</code> (больше), <code>&lt;</code> (меньше), <code>&gt;=</code> (больше равно), <code>&lt;=</code> (меньше равно). Можно также указать несколько условий с помощью операторов <code>and</code> (и) и <code>or</code> (или). Для проверки вхождения символа или подстроки в строку используются операторы <code>in</code> и <code>not</code>.</p>
<p>Для проверки работы некоторых условий в <strong>Ansible</strong> создадим <strong>playbook</strong> следующего содержания:</p>
<div><div id="highlighter_986049" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">---</code></div><div class="line number2 index1 alt1"><code class="plain plain">- hosts: test</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">tasks:</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Check OS family</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">debug: msg="This is my OS"</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">when: ansible_os_family == "Debian"</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Check if Apache2 is installed</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">command: dpkg-query -W apache2</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">register: apache2_check</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Print message if apache installed</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">debug: msg="Apache2 is installed on remote host"</code></div><div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">when: "'apache2' in apache2_check.stdout"</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Check if admin logged</code></div><div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">command: who</code></div><div class="line number19 index18 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">register: who_check</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">- name: Print message if user admin not logged</code></div><div class="line number22 index21 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">debug: msg="User admin is not logged on remote host"</code></div><div class="line number23 index22 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">when: not 'admin' in who_check.stdout</code></div></div></td></tr></tbody></table></div></div>
<p>Результат выполнения данного набора инструкций будет таким:</p>
<pre># ansible-playbook debug.yml 

PLAY [test] ******************************************************************* 

GATHERING FACTS *************************************************************** 
ok: [test-1]

TASK: [Check OS family] ******************************************************* 
ok: [test-1] =&gt; {
    "msg": "This is my OS"
}

TASK: [Check if Apache2 is installed] ***************************************** 
changed: [test-1]

TASK: [Print message if apache installed] ************************************* 
ok: [test-1] =&gt; {
    "msg": "Apache2 is installed on remote host"
}

TASK: [Check if admin logged] ************************************************* 
changed: [test-1]

TASK: [Print message if user admin not logged] ******************************** 
ok: [test-1] =&gt; {
    "msg": "User admin is not logged on remote host"
}

PLAY RECAP ******************************************************************** 
test-1                 : ok=6    changed=2    unreachable=0    failed=0   
</pre>
<p>Напоследок у нас остается немного "магии". В архитектуре проекта 
обычно сервера разделяются по своему предназначению и выполняют 
определенную <strong>роль</strong> - web-сервер, сервер баз данных, 
почтовый сервер и т. д. Каждому из серверов требуется отличающийся набор
 пакетов и настроек для правильного выполнения своей роли. С ростом 
количества серверов будет расти количество наборов инструкций (<strong>playbook</strong>), которые будут использоваться повторно.</p>
<p><strong>Ansible</strong> позволяет удобно организовать и 
структурировать наборы инструкций в соответствии с ролями серверов. 
Пример структуры набора инструкций с ролями выглядит так:</p>
<div><div id="highlighter_756098" class="syntaxhighlighter nogutter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">---</code></div><div class="line number2 index1 alt1"><code class="plain plain">- hosts: servers</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;</code><code class="plain plain">roles:</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- web</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">– db</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">- post</code></div></div></td></tr></tbody></table></div></div>
<p>Тогда файловая структура ролей может выглядеть таким образом:</p>
<pre>site.yml
servers.yml
roles/
   web/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/
   db/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/
   post/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/
</pre>
<blockquote><p><strong>Примечание.</strong> Файловая структура не 
обязательно должна выглядеть так - если какой-либо каталог отсутствует в
 роли, то он будет проигнорирован и набор инструкций будет выполняться 
дальше</p></blockquote>
<p>Путь к каталогу с ролями можно задать с помощью параметра <code>roles_path</code> в конфигурационном файле <strong>Ansible</strong>. При указании ролей можно использовать тэги. </p>
<p>Также для каждой роли будут применяться следующие правила:</p>
<ul>
<li>если существует <em>roles/.../tasks/main.yml</em>, то задачи из этого файла будут добавлены в набор инструкций;</li>
<li>если существует <em>roles/.../handlers/main.yml</em>, то обработчики из этого файла будут добавлены в набор инструкций;</li>
<li>если существует <em>roles/.../vars/main.yml</em>, то переменные из этого файла будут добавлены в набор инструкций;</li>
<li>если существует <em>roles/.../meta/main.yml</em>, то любые роли-зависимости будут добавлены в список ролей;</li>
<li>задача копирования может ссылаться на файл в <em>roles/.../files</em> без указания абсолютного или относительного пути;</li>
<li>скриптовая задача может ссылаться на скрипт в <em>roles/.../files</em> без указания абсолютного или относительного пути;</li>
<li>задача шаблонизации может ссылаться на <em>roles/.../templates</em> без указания абсолютного или относительного пути;</li>
<li>импортируемые задачи могут ссылаться на файлы в <em>roles/.../tasks</em> без указания абсолютного или относительного пути.</li>
</ul>
<p>О ролях можно писать очень много и долго, поэтому я лучше порекомендую <a href="https://galaxy.ansible.com/list#/roles?page=1&amp;page_size=10" target="_blank">Ansible Galaxy</a> - крупнейший репозиторий ролей <strong>Ansible</strong>, там можно брать уже готовые роли (например, для обучения) или делиться своими ролями.</p>
<p>На этом все, <strong>знакомство с Ansible</strong> завершено, но это только вершина айсберга - намного больше предстоит узнать активно используя <strong>Ansible</strong> при настройке IT-инфраструктуры.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-603" class="share-twitter sd-button share-icon" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?share=twitter&amp;nb=1" target="_blank" title="Нажмите, чтобы поделиться на Twitter"><span>Twitter</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-603" class="share-facebook sd-button share-icon" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?share=facebook&amp;nb=1" target="_blank" title="Нажмите здесь, чтобы поделиться контентом на Facebook."><span>Facebook</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-603" class="share-google-plus-1 sd-button share-icon" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?share=google-plus-1&amp;nb=1" target="_blank" title="Нажмите, чтобы поделиться в Google+"><span>Google</span></a></li><li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-603" class="share-linkedin sd-button share-icon" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?share=linkedin&amp;nb=1" target="_blank" title="Нажмите, чтобы поделиться на LinkedIn"><span>LinkedIn<span class="share-count">2</span></span></a></li><li class="share-end"></li></ul></div></div></div>
<div style="display: block;" id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em></em></h3>
<div class="jp-relatedposts-items jp-relatedposts-items-visual jp-relatedposts-grid "><div class="jp-relatedposts-post jp-relatedposts-post0 jp-relatedposts-post-thumbs" data-post-id="590" data-post-format="false"><a data-position="0" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть 3: переменные

В первой части знакомства с Ansible мы успешно установили систему управления конфигурациями и написали первый playbook, во второй части разобрали результат выполнения нашего набора инструкций и научились повторно использовать playbook'и. В этой части давайте разберемся с использованием переменных в Ansible. В системе управления конфигурациями Ansible переменные хранят значения, которые могут…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-3-peremennyie.html" class="jp-relatedposts-post-a"><img class="jp-relatedposts-post-img" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/ansible.png" alt="Знакомство с Ansible. Часть 3: переменные" width="350"></a><h4 class="jp-relatedposts-post-title"><a data-position="0" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть 3: переменные

В первой части знакомства с Ansible мы успешно установили систему управления конфигурациями и написали первый playbook, во второй части разобрали результат выполнения нашего набора инструкций и научились повторно использовать playbook'и. В этой части давайте разберемся с использованием переменных в Ansible. В системе управления конфигурациями Ansible переменные хранят значения, которые могут…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-3-peremennyie.html" class="jp-relatedposts-post-a">Знакомство с Ansible. Часть 3: переменные</a></h4><p class="jp-relatedposts-post-excerpt">В
 первой части знакомства с Ansible мы успешно установили систему 
управления конфигурациями и написали первый playbook, во второй части 
разобрали результат выполнения нашего набора инструкций и научились 
повторно использовать playbook'и. В этой части давайте разберемся с 
использованием переменных в Ansible. В системе управления конфигурациями
 Ansible переменные хранят значения, которые могут…</p></div><div class="jp-relatedposts-post jp-relatedposts-post1 jp-relatedposts-post-thumbs" data-post-id="597" data-post-format="false"><a data-position="1" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть 4: модули

Мы уже справились установкой системы управления конфигурациями Ansible, написали первый набор инструкций (playbook) и разобрали результат его выполнения, а также ознакомились с использованием переменных в Ansible. В этой части давайте разберемся с модулями в Ansible. Система управления конфигурациями Ansible позволяет использовать более двух сотен модулей (полный список модулей и их…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-4-moduli.html" class="jp-relatedposts-post-a"><img class="jp-relatedposts-post-img" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/ansible.png" alt="Знакомство с Ansible. Часть 4: модули" width="350"></a><h4 class="jp-relatedposts-post-title"><a data-position="1" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть 4: модули

Мы уже справились установкой системы управления конфигурациями Ansible, написали первый набор инструкций (playbook) и разобрали результат его выполнения, а также ознакомились с использованием переменных в Ansible. В этой части давайте разберемся с модулями в Ansible. Система управления конфигурациями Ansible позволяет использовать более двух сотен модулей (полный список модулей и их…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-4-moduli.html" class="jp-relatedposts-post-a">Знакомство с Ansible. Часть 4: модули</a></h4><p class="jp-relatedposts-post-excerpt">Мы
 уже справились установкой системы управления конфигурациями Ansible, 
написали первый набор инструкций (playbook) и разобрали результат его 
выполнения, а также ознакомились с использованием переменных в Ansible. В
 этой части давайте разберемся с модулями в Ansible. Система управления 
конфигурациями Ansible позволяет использовать более двух сотен модулей 
(полный список модулей и их…</p></div><div class="jp-relatedposts-post jp-relatedposts-post2 jp-relatedposts-post-thumbs" data-post-id="562" data-post-format="false"><a data-position="2" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть1: введение

Ansible – одна из систем управления конфигурациями (автоматизации настройки и развертывания серверов). Особенность Ansible – наличие управляющего сервера, с которого отправляются команды или наборы инструкций (playbooks) на удаленные хосты посредством протокола SSH. Ansible успешно решает следующие задачи: правильная и быстрая настройка серверов до нужной конфигурации; управление развертыванием облачных серверов (через…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast1-vvedenie.html" class="jp-relatedposts-post-a"><img class="jp-relatedposts-post-img" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/2.png" alt="Знакомство с Ansible. Часть1: введение" width="350"></a><h4 class="jp-relatedposts-post-title"><a data-position="2" data-origin="603" rel="nofollow" title="Знакомство с Ansible. Часть1: введение

Ansible – одна из систем управления конфигурациями (автоматизации настройки и развертывания серверов). Особенность Ansible – наличие управляющего сервера, с которого отправляются команды или наборы инструкций (playbooks) на удаленные хосты посредством протокола SSH. Ansible успешно решает следующие задачи: правильная и быстрая настройка серверов до нужной конфигурации; управление развертыванием облачных серверов (через…" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast1-vvedenie.html" class="jp-relatedposts-post-a">Знакомство с Ansible. Часть1: введение</a></h4><p class="jp-relatedposts-post-excerpt">Ansible
 – одна из систем управления конфигурациями (автоматизации настройки и 
развертывания серверов). Особенность Ansible – наличие управляющего 
сервера, с которого отправляются команды или наборы инструкций 
(playbooks) на удаленные хосты посредством протокола SSH. Ansible 
успешно решает следующие задачи: правильная и быстрая настройка серверов
 до нужной конфигурации; управление развертыванием облачных серверов 
(через…</p></div></div></div>
		
									</div>
	<!-- .entry-content -->

	
	<footer class="entry-meta">
		
					<div id="share-comment-button">
				<button>
					<i class="share-comment-icon"></i>Написать Комментарий				</button>
			</div>
		
			</footer>
	<!-- .entry-meta -->

</article><!-- #post-603 -->

				
	<div id="commentform-top"></div> <!-- do not remove; used by jQuery to move the comment reply form here -->
	
		<div id="respond" class="comment-respond">
							<h3 id="reply-title" class="comment-reply-title">Добавить комментарий					<small><a rel="nofollow" id="cancel-comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html" style="display:none;">Отменить ответ</a></small>
				</h3>
						<form id="commentform" class="comment-form">
				<iframe scrolling="no" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/a.htm" style="width: 100%; height: 55px; border: 0px none;" name="jetpack_remote_comment" class="jetpack_remote_comment" id="jetpack_remote_comment"></iframe>
				<!--[if !IE]><!-->
				<script>
					document.addEventListener('DOMContentLoaded', function () {
						var commentForms = document.getElementsByClassName('jetpack_remote_comment');
						for (var i = 0; i < commentForms.length; i++) {
							commentForms[i].allowTransparency = false;
							commentForms[i].scrolling = 'no';
						}
					});
				</script>
				<!--<![endif]-->
			</form>
		</div>

		
		<input name="comment_parent" id="comment_parent" value="" type="hidden">

		

	<div id="comments" class="comments-area">
				
							<h2 class="comments-title">
					<i class="comments-title-icon"></i>
					26 Комментария				</h2>
			
			
			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-210">
		<article id="comment-210" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Ильнур</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-210">
						<time pubdate="" datetime="2017-09-09T16:31:37+00:00">
							09.09.2017						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Евгений, спасибо вам больше! Очень доходчиво и просто.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=210#respond" onclick='return addComment.moveForm( "comment-210", "210", "respond", "603" )' aria-label="Комментарий к записи Ильнур">Ответить Ильнур</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-153">
		<article id="comment-153" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://www.facebook.com/app_scoped_user_id/1171580792910112/" rel="external nofollow" class="url">Артем Романчик</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-153">
						<time pubdate="" datetime="2016-12-15T07:39:17+00:00">
							15.12.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Мне очень понравились Ваши статьи по Ansible. Добавил себе в закладки. Спасибо!</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=153#respond" onclick='return addComment.moveForm( "comment-153", "153", "respond", "603" )' aria-label="Комментарий к записи Артем Романчик">Ответить Артем</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor even depth-2" id="li-comment-154">
		<article id="comment-154" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-154">
						<time pubdate="" datetime="2016-12-15T10:14:51+00:00">
							15.12.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Рад был оказаться полезным )</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=154#respond" onclick='return addComment.moveForm( "comment-154", "154", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="li-comment-115">
		<article id="comment-115" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-115">
						<time pubdate="" datetime="2016-11-18T13:56:08+00:00">
							18.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Евгений, здравствуйте! =)</p>
<p>Скажите пожалуйста, как запускать отдельную роль? И как запускать на 
одной группе хостов или на одном хосте из всего файла inventory?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=115#respond" onclick='return addComment.moveForm( "comment-115", "115", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor even depth-2" id="li-comment-118">
		<article id="comment-118" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-118">
						<time pubdate="" datetime="2016-11-21T09:42:33+00:00">
							21.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Я обычно для запуска роли создаю отдельный плейбук, например:</p>
<pre># cat install_monit.yml
---
- hosts: admin
  become: yes
  roles:
    - monit</pre>
<p>Этот плейбук выполнить роль monit на хосте admin</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=118#respond" onclick='return addComment.moveForm( "comment-118", "118", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-2" id="li-comment-119">
		<article id="comment-119" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-119">
						<time pubdate="" datetime="2016-11-21T09:45:02+00:00">
							21.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>вместо одного хоста можно вписать целую группу хостов из файла inventory, если там они идут в формате:</p>
<pre>[managers]
manager1
manager2
manager3
...
[web]
web1
web2
web3
[db]
db1
db2
</pre>
<p>тогда можно в hosts вписать просто db, и роль будет запущена на хостах db1 и db2</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=119#respond" onclick='return addComment.moveForm( "comment-119", "119", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-109">
		<article id="comment-109" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-109">
						<time pubdate="" datetime="2016-11-16T11:49:16+00:00">
							16.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Евгений, добрый день! Как можно 
правильно назвать кучу папок (для ansible) с ролями, переменными, 
файлами — «плейбук»? Мне кажется что плейбуком можно назвать один файл. 
Проект?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=109#respond" onclick='return addComment.moveForm( "comment-109", "109", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-2" id="li-comment-110">
		<article id="comment-110" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-110">
						<time pubdate="" datetime="2016-11-16T12:19:20+00:00">
							16.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Я с этим не заморачивался, у меня все лежит в папке ansible:<br>
<code># find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'<br>
.<br>
|____ansible.cfg<br>
|____files<br>
| |____cupsd.conf<br>
| |____fstab<br>
| |____nsswitch.conf<br>
| |____ntp.conf<br>
| |____skel<br>
| | |____.bash_logout<br>
| | |____.bashrc<br>
| |____skel.tar.gz<br>
| |____sources.list<br>
| |____speedtest-cli<br>
| |____speedtest.sh<br>
| |____zabbix_agentd.conf<br>
|____hosts<br>
|____logs<br>
| |____ansible.log<br>
|____playbooks<br>
| |____copy_files.yml<br>
| |____copy_skel.yml<br>
| |____debug.yml<br>
| |____deploy_io_test.yml<br>
| |____install_apache.yml<br>
| |____install_bash_profile.yml<br>
| |____install_chrome.yml<br>
| |____install_gxneur.yml<br>
| |____install_htop.yml<br>
| |____install_Intel_Driver.yml<br>
| |____install_iperf.yml<br>
| |____install_monit.yml<br>
| |____install_ntpdate.yml<br>
| |____install_packages.yml<br>
| |____install_rsync.yml<br>
| |____mkdir.yml<br>
| |____purge_packages.yml<br>
| |____reboot.yml<br>
| |____reconfigure_cups.yml<br>
| |____remove_apt_sources.yml<br>
| |____roles<br>
| | |____bashrc<br>
| | | |____files<br>
| | | | |____.bashrc<br>
| | | | |____bash.bashrc<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____chrome<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____htop<br>
| | | |____defaults<br>
| | | | |____main.yml<br>
| | | |____files<br>
| | | | |____etc<br>
| | | | | |____skel<br>
| | | | | | |____.config<br>
| | | | | | | |____htop<br>
| | | | | | | | |____htoprc<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____install_packages<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____Intel_HD<br>
| | | |____files<br>
| | | | |____grub<br>
| | | | |____intel1_amd64.deb<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____monit<br>
| | | |____defaults<br>
| | | | |____main.yml<br>
| | | |____handlers<br>
| | | | |____main.yml<br>
| | | |____tasks<br>
| | | | |____configure.yml<br>
| | | | |____install.yml<br>
| | | | |____logging.yml<br>
| | | | |____main.yml<br>
| | | | |____services.yml<br>
| | | |____templates<br>
| | | | |____etc<br>
| | | | | |____monit<br>
| | | | | | |____conf.d<br>
| | | | | | | |____metrics<br>
| | | | | | |____monitrc<br>
| | |____munin-node<br>
| | | |____defaults<br>
| | | | |____main.yml<br>
| | | |____handlers<br>
| | | | |____main.yml<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | | |____templates<br>
| | | | |____munin-node.conf.j2<br>
| | | | |____plugin-conf.j2<br>
| | | |____tests<br>
| | | | |____inventory<br>
| | | | |____test1.yml<br>
| | | | |____test2.yml<br>
| | | | |____test_vars.yml<br>
| | | |____vars<br>
| | | | |____Debian.yml<br>
| | | | |____RedHat.yml<br>
| | |____mytop<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | |____newrelic-sysmond<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | | |____templates<br>
| | | | |____nrsysmond.cfg.j2<br>
| | | |____vars<br>
| | | | |____main.yml<br>
| | |____ntp<br>
| | | |____handlers<br>
| | | | |____main.yml<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | | |____templates<br>
| | | | |____ntp.conf.j2<br>
| | | |____vars<br>
| | | | |____main.yml<br>
| | |____rsync<br>
| | | |____tasks<br>
| | | | |____CentOS.yml<br>
| | | | |____main.yml<br>
| | | | |____Ubuntu.yml<br>
| | | |____vars<br>
| | | | |____CentOS.yml<br>
| | | | |____main.yml<br>
| | | | |____Ubuntu.yml<br>
| | |____testrole<br>
| | | |____tasks<br>
| | | | |____main.yml<br>
| | | |____templates<br>
| | | | |____file<br>
| | | |____vars<br>
| | | | |____main.yml<br>
| |____safe_upgrade.retry<br>
| |____safe_upgrade.yml<br>
| |____test.yml<br>
| |____useradd.yml</code></p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=110#respond" onclick='return addComment.moveForm( "comment-110", "110", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-3" id="li-comment-111">
		<article id="comment-111" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-111">
						<time pubdate="" datetime="2016-11-16T12:39:45+00:00">
							16.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Я просто думаю как назвать такую структуру в описании, которое я пишу 🙂 «Плейбук» или «Проект»?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=111#respond" onclick='return addComment.moveForm( "comment-111", "111", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-4" id="li-comment-112">
		<article id="comment-112" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-112">
						<time pubdate="" datetime="2016-11-16T12:52:44+00:00">
							16.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Ну тогда наверно лучше «Проект» )</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=112#respond" onclick='return addComment.moveForm( "comment-112", "112", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-102">
		<article id="comment-102" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-102">
						<time pubdate="" datetime="2016-11-08T09:35:45+00:00">
							08.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Добрый день. Не подскажете как 
запустить один плейбук на двух серверах, так, чтобы на одном он 
выполнился полностью, а на втором — только часть его?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=102#respond" onclick='return addComment.moveForm( "comment-102", "102", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-2" id="li-comment-103">
		<article id="comment-103" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-103">
						<time pubdate="" datetime="2016-11-08T09:42:50+00:00">
							08.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Запустить выполнение плейбука с конкретной задачи (и выполнять остальные до конца плейбука) можно так:</p>
<pre>ansible-playbook debug.yml --start-at-task="Debug"</pre>
<p>В вашем случае также подойдет запуск playbook-а з параметром <code>--step</code></p>
<pre>ansible-playbook install_nginx.yml --step --start-at-task "Debug"</pre>
<p>В случае использования <code>--step</code> можно самостоятельно решать, какую задачу выполнять ( y ), а какую пропускать ( n )</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=103#respond" onclick='return addComment.moveForm( "comment-103", "103", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-3" id="li-comment-104">
		<article id="comment-104" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-104">
						<time pubdate="" datetime="2016-11-08T09:58:31+00:00">
							08.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Спасибо! А если мне нужно 
автоматически запустить только один плейбук, один раз, например из 
Jenkins? То есть я могу запустить один плейбук, но хочу чтобы он 
сработал к разным хостам по-разному.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=104#respond" onclick='return addComment.moveForm( "comment-104", "104", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-4" id="li-comment-105">
		<article id="comment-105" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-105">
						<time pubdate="" datetime="2016-11-08T10:08:08+00:00">
							08.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Тогда я советую посмотреть в сторону ролей — они именно для таких случаев и придуманы</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=105#respond" onclick='return addComment.moveForm( "comment-105", "105", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-96">
		<article id="comment-96" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-96">
						<time pubdate="" datetime="2016-11-07T14:11:29+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Решение такое — добавить в файл инвентария строку </p>
<p>127.0.0.1 ansible_connection=local</p>
<p>Мне это нужно для того, что я собираюсь собирать пакеты на локальной 
машине, через Jenkins, а потом выкладывать на удаленные сервера c 
помощью Ansible. Конечно, и в самом Jenkins есть такая возможность после
 сборки произвести деплой, но это только для одного сервера. Мне же 
нужно произвести деплой на несколько серверов, и присвоить права.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=96#respond" onclick='return addComment.moveForm( "comment-96", "96", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-2" id="li-comment-97">
		<article id="comment-97" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-97">
						<time pubdate="" datetime="2016-11-07T14:13:57+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Ага, тогда действительно это нужная вещь ))<br>
С ansible_connection=local раньше не встречался, спасибо за полезную информацию )</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=97#respond" onclick='return addComment.moveForm( "comment-97", "97", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-3" id="li-comment-98">
		<article id="comment-98" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-98">
						<time pubdate="" datetime="2016-11-07T15:03:50+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Вот и не понимаю как мне это сделать. Даже сначала не могу:</p>
<p>—<br>
— hosts: test<br>
  tasks:<br>
    — find: paths=»/tmp/» patterns=»*.jar» recurse=yes<br>
      register: file_to_copy<br>
    — synchronize: src={{ item }} dest=/home/user/warjar/ delete=yes recursive=yes<br>
      with_items: file_to_copy.stdout_lines</p>
<p>Делаю вот так, но не работает. В /tmp/ точно есть файл *.jar для теста</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=98#respond" onclick='return addComment.moveForm( "comment-98", "98", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-4" id="li-comment-99">
		<article id="comment-99" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-99">
						<time pubdate="" datetime="2016-11-07T15:27:58+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>а если тестировать с одним файлом, 
без использования цикла? Мне кажется тут дело как раз в цикле, возможно 
file_to_copy.stdout_lines неправильно передает данные в секцию 
with_items (может отступы/пробелы/дефис теряются)</p>
<p>там же должно быть что-то вида:</p>
<pre>...
with_items:
  - item1
  - item2
  - item3</pre>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=99#respond" onclick='return addComment.moveForm( "comment-99", "99", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-5" id="li-comment-100">
		<article id="comment-100" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-100">
						<time pubdate="" datetime="2016-11-07T16:29:21+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Сработало вот так: </p>
<p>— hosts: server<br>
  tasks:<br>
    — find: paths=»/var/lib/jenkins/workspace/» patterns=»*.jar» recurse=yes<br>
      register: file_to_copy<br>
      delegate_to: localhost<br>
    — copy: src={{ item.path }} dest=/tmp/warjar/<br>
      with_items: file_to_copy.files</p>
<p>Вот этой строкой: delegate_to: localhost мы говорим что этот таск 
нужно выполнить на локалхосте, который тоже есть в файле инвентария, а 
все остальное — на сервере. Этим мы нашли и скопировали файлы с 
локалхоста на сервер.</p>
</div>

			<div class="reply">
							</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-5" id="li-comment-101">
		<article id="comment-101" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-101">
						<time pubdate="" datetime="2016-11-07T17:00:38+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Спасибо, этот полезный плейбук пригодится и мне! )</p>
</div>

			<div class="reply">
							</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-84">
		<article id="comment-84" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-84">
						<time pubdate="" datetime="2016-11-06T13:42:13+00:00">
							06.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Спасибо! Прекрасный цикл статей, 
пожалуй лучший из того, что я видел! Особенно понравилось то, что Вы 
привели базовые знания синтаксиса YAML, мне кажется этого никто не 
делал. До этого я долго мучался с тем, что у меня ничего не работает, 
просто скопировав из чьего-то блога пример playbook’a. </p>
<p>Сейчас у меня такая задача, не знаю как ее решить. Мне нужно из двух 
папок на локалхосте скопировать в две папки на сервере (а если их нет, 
то создать их (папки) с правами пользователя) скопировать файлы, и если в
 папке есть файлы, то удалить их по маске (.jpg в первой папке, .png — 
во второй), так как они старые и не нужны, а скопировать туда новые. То 
есть сначала удалить там файлы, в нужных папках, если папок нет, то 
создать их с правами, и скопировать туда файлы. Совсем запутался и не 
знаю как это сделать, не могли бы Вы посоветовать, как это сделать?</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=84#respond" onclick='return addComment.moveForm( "comment-84", "84", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-2" id="li-comment-91">
		<article id="comment-91" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-91">
						<time pubdate="" datetime="2016-11-07T10:31:13+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Давайте вместе подумаем над этой задачей ))</p>
<p>Для начала вспомним, что ansible поддерживает свойство идемпотентности (<a href="https://ru.wikipedia.org/wiki/%D0%98%D0%B4%D0%B5%D0%BC%D0%BF%D0%BE%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C" rel="nofollow">https://ru.wikipedia.org/wiki/%D0%98%D0%B4%D0%B5%D0%BC%D0%BF%D0%BE%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C</a>).
 Следовательно, в плейбуке обязательно надо прописать создание папок на 
удаленном хосте (если папок нет — они будут созданы, если они есть — шаг
 будет пропущен).</p>
<p>У меня, например, есть наготове парочка плейбуков — один для создания
 папки, а второй для копирования файла на удаленный хост. Нам просто 
нужно их объединить )))</p>
<p>Вот первый:</p>
<pre># cat mkdir.yml
---
- hosts: test
  vars:
    dir: /home/admin/testdir
  become: yes
  tasks:

  - name: Create directory
    file: path={{ dir }} state=directory owner=admin group=admin mode=0777</pre>
<p>а вот второй:</p>
<pre># cat copy_files.yml
---
- hosts: d-donchenko
  become: yes
  tasks:

  - name: Copy sources.list
    copy: src=~/ansible/files/sources.list dest=/etc/apt/sources.list group=root owner=root mode=0664</pre>
<p>Еще для решения этой задачи можно использовать модуль synchronize 
(работает по принципу rsync), думаю это будет выглядеть примерно так:</p>
<pre>---
- hosts: test
  become: yes
  tasks:

  - name: Create directory
    file: path={{ item }} state=directory owner=admin group=admin mode=0777
    with_items:
    - /home/admin/testdir1
    - /home/admin/testdir2

  - name: Sync files to remote host
    # Synchronize and delete files in dest on the remote host that are not found in src of localhost.
    synchronize: src={{ item.src }} dest={{ item.dest }} delete=yes recursive=yes
    with_items:
      - { src: '/local/testdir1', dest: '/home/admin/testdir1' }
      - { src: '/local/testdir2', dest: '/home/admin/testdir2' }
</pre>
<p>Проверьте и отпишитесь о результатах ))</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=91#respond" onclick='return addComment.moveForm( "comment-91", "91", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-3" id="li-comment-92">
		<article id="comment-92" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-92">
						<time pubdate="" datetime="2016-11-07T10:42:35+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Спасибо за ответ!</p>
<p>Не совсем понятно как начать, то есть копировать с локалхоста на удаленный сервер.</p>
<p>В документации есть примеры вроде: </p>
<p><a href="http://docs.ansible.com/ansible/copy_module.html" rel="nofollow">http://docs.ansible.com/ansible/copy_module.html</a></p>
<p>copy: src=/srv/myfiles/foo.conf dest=/etc/foo.conf owner=foo group=foo mode=»u+rw,g-wx,o-rwx»</p>
<p>Но не совсем понятно, как указывать что вот файлы лежат на локалхосте, а копируй их сюда.</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=92#respond" onclick='return addComment.moveForm( "comment-92", "92", "respond", "603" )' aria-label="Комментарий к записи Мика">Ответить Мика</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-4" id="li-comment-93">
		<article id="comment-93" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-93">
						<time pubdate="" datetime="2016-11-07T11:19:15+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>параметр src (source, источник) указывает откуда брать файлы (где они лежат на локалхосте)</p>
<p>параметр dest (destination, назначение) указывает куда ложить файлы (куда складывать на удаленный хост)</p>
<p>Но это решение задачи «в лоб», когда больше ничего не помогает. 
Попробуйте сделать с модулем synchronize, как я написал выше — это 
должно быть красивее ))</p>
</div>

			<div class="reply">
				<a rel="nofollow" class="comment-reply-link" href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html?replytocom=93#respond" onclick='return addComment.moveForm( "comment-93", "93", "respond", "603" )' aria-label="Комментарий к записи Евгений Лебедь">Ответить Евгений</a>			</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		<ul class="children">
		<li class="comment even depth-5" id="li-comment-94">
		<article id="comment-94" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Мика</cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-94">
						<time pubdate="" datetime="2016-11-07T13:06:24+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Спасибо, Евгений!</p>
<p>Еще такой вопрос: как мне сделать из Ansible поиск на локалхосте?</p>
<p>Хоть и стоит openssh-server, но все равно ругается:</p>
<p>Failed to connect to the host via ssh: Permission denied (publickey,password).\r\n»</p>
</div>

			<div class="reply">
							</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-e-lebed bypostauthor odd alt depth-5" id="li-comment-95">
		<article id="comment-95" class="comment">
			<footer>
				<div class="comment-author vcard">
										<cite class="fn"><a href="https://letsclearitup.com.ua/" rel="external nofollow" class="url">Евгений Лебедь</a></cite>									</div>
				<!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html#comment-95">
						<time pubdate="" datetime="2016-11-07T14:00:25+00:00">
							07.11.2016						</time>
					</a>
									</div>
				<!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content "><p>Крайне странная задача )))<br>
Используйте обычный поиск на локалхосте с помощью find</p>
<p>Смысл использования Ansible как раз и состоит в управлении удаленными
 хостами, а не локалхостом, поэтому в данном вопросе я вам ничем не могу
 помочь )</p>
</div>

			<div class="reply">
							</div>
			<!-- .reply -->
		</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
			</ol><!-- .commentlist -->

			
		
		
		
			
			<div id="share-comment-button-bottom">
				<button>
					<i class="share-comment-icon"></i>Написать Комментарий				</button>
			</div>
			<div id="commentform-bottom"></div> <!-- do not remove; used by jQuery to move the comment reply form here -->
		
		
							
	</div><!-- #comments .comments-area -->


				
																			<div id="taglist">
						<ul class="taglist"><li class="taglist-title">Посты с тегом</li><li><a href="https://letsclearitup.com.ua/tag/ansible" rel="tag">ansible</a></li><li><a href="https://letsclearitup.com.ua/tag/debian" rel="tag">debian</a></li></ul>					</div>
				
			
		</main>
		<!-- #content .site-content -->
	</div><!-- #primary .content-area -->

<div id="secondary" class="widget-area" role="complementary">
					<aside id="search-5" class="widget widget_search"><form method="get" id="searchform" action="https://letsclearitup.com.ua/" role="search">
	<label for="s" class="screen-reader-text">Поиск</label>
	<input class="field" name="s" id="s" placeholder="Поиск …" type="text">
	<input class="submit" name="submit" id="searchsubmit" value="Поиск" type="submit">
</form>
</aside><aside id="blog_subscription-5" class="widget jetpack_subscription_widget">			<form action="#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-5">
				<div id="subscribe-text"></div><p>Присоединиться к еще 441 подписчику</p>
					<p id="subscribe-email">
						<label style="clip: rect(1px, 1px, 1px, 1px); position: absolute; height: 1px; width: 1px; overflow: hidden;" id="jetpack-subscribe-label" for="subscribe-field-blog_subscription-5">
							E-mail адрес						</label>
						<input name="email" required="required" class="required" id="subscribe-field-blog_subscription-5" placeholder="E-mail адрес" type="email">
					</p>

					<p id="subscribe-submit">
						<input name="action" value="subscribe" type="hidden">
						<input name="source" value="https://letsclearitup.com.ua/ubuntu/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html" type="hidden">
						<input name="sub-type" value="widget" type="hidden">
						<input name="redirect_fragment" value="blog_subscription-5" type="hidden">
												<input value="Подписаться" name="jetpack_subscriptions_widget" type="submit">
					</p>
							</form>

			<script>
			/*
			Custom functionality for safari and IE
			 */
			(function( d ) {
				// In case the placeholder functionality is available we remove labels
				if ( ( 'placeholder' in d.createElement( 'input' ) ) ) {
					var label = d.querySelector( 'label[for=subscribe-field-blog_subscription-5]' );
						label.style.clip 	 = 'rect(1px, 1px, 1px, 1px)';
						label.style.position = 'absolute';
						label.style.height   = '1px';
						label.style.width    = '1px';
						label.style.overflow = 'hidden';
				}

				// Make sure the email value is filled in before allowing submit
				var form = d.getElementById('subscribe-blog-blog_subscription-5'),
					input = d.getElementById('subscribe-field-blog_subscription-5'),
					handler = function( event ) {
						if ( '' === input.value ) {
							input.focus();

							if ( event.preventDefault ){
								event.preventDefault();
							}

							return false;
						}
					};

				if ( window.addEventListener ) {
					form.addEventListener( 'submit', handler, false );
				} else {
					form.attachEvent( 'onsubmit', handler );
				}
			})( document );
			</script>
				
</aside>		<aside id="recent-posts-4" class="widget widget_recent_entries">		<h1 class="widget-title">Свежие записи</h1>		<ul>
					<li>
				<a href="https://letsclearitup.com.ua/centos/problemyi-s-udaleniem-docker-konteynerov-device-or-resource-busy.html">Проблемы с удалением docker-контейнеров: device or resource busy</a>
						</li>
					<li>
				<a href="https://letsclearitup.com.ua/monitoring/ispolzovanie-modulya-nginx-module-vts-dlya-sbora-rasshirennoy-statistiki-nginx.html">Использование модуля nginx-module-vts для сбора расширенной статистики Nginx</a>
						</li>
					<li>
				<a href="https://letsclearitup.com.ua/gitlab/verifikatsiya-kommitov-v-gitlab-9-5-x.html">Верификация коммитов в GitLab 9.5.x</a>
						</li>
					<li>
				<a href="https://letsclearitup.com.ua/docker/docker-sovet-4-struktura-proekta-s-neskolkimi-dockerfile-i-docker-compose.html">Docker совет №4: Структура проекта с несколькими Dockerfile и docker-compose</a>
						</li>
					<li>
				<a href="https://letsclearitup.com.ua/debian/ustanovka-i-aktivatsiya-atlassian-confluence-6-3-4.html">Установка и активация Atlassian Confluence 6.3.4</a>
						</li>
				</ul>
		</aside>		<aside id="tag_cloud-5" class="widget widget_tag_cloud"><h1 class="widget-title">Метки</h1><div class="tagcloud"><a href="https://letsclearitup.com.ua/tag/ansible" class="tag-cloud-link tag-link-51 tag-link-position-1" style="font-size: 12.079470198675pt;" aria-label="ansible (10 элементов)">ansible</a>
<a href="https://letsclearitup.com.ua/tag/apache" class="tag-cloud-link tag-link-92 tag-link-position-2" style="font-size: 8pt;" aria-label="apache (3 элемента)">apache</a>
<a href="https://letsclearitup.com.ua/tag/asterisk" class="tag-cloud-link tag-link-31 tag-link-position-3" style="font-size: 12.450331125828pt;" aria-label="asterisk (11 элементов)">asterisk</a>
<a href="https://letsclearitup.com.ua/tag/backup" class="tag-cloud-link tag-link-25 tag-link-position-4" style="font-size: 12.728476821192pt;" aria-label="backup (12 элементов)">backup</a>
<a href="https://letsclearitup.com.ua/tag/bash" class="tag-cloud-link tag-link-81 tag-link-position-5" style="font-size: 8.9271523178808pt;" aria-label="bash (4 элемента)">bash</a>
<a href="https://letsclearitup.com.ua/tag/centos" class="tag-cloud-link tag-link-214 tag-link-position-6" style="font-size: 10.317880794702pt;" aria-label="centos (6 элементов)">centos</a>
<a href="https://letsclearitup.com.ua/tag/cluster" class="tag-cloud-link tag-link-70 tag-link-position-7" style="font-size: 10.781456953642pt;" aria-label="cluster (7 элементов)">cluster</a>
<a href="https://letsclearitup.com.ua/tag/corosync" class="tag-cloud-link tag-link-69 tag-link-position-8" style="font-size: 10.317880794702pt;" aria-label="corosync (6 элементов)">corosync</a>
<a href="https://letsclearitup.com.ua/tag/curl" class="tag-cloud-link tag-link-38 tag-link-position-9" style="font-size: 8pt;" aria-label="curl (3 элемента)">curl</a>
<a href="https://letsclearitup.com.ua/tag/debian" class="tag-cloud-link tag-link-18 tag-link-position-10" style="font-size: 22pt;" aria-label="debian (129 элементов)">debian</a>
<a href="https://letsclearitup.com.ua/tag/docker" class="tag-cloud-link tag-link-229 tag-link-position-11" style="font-size: 15.973509933775pt;" aria-label="docker (28 элементов)">docker</a>
<a href="https://letsclearitup.com.ua/tag/docker-compose" class="tag-cloud-link tag-link-237 tag-link-position-12" style="font-size: 11.245033112583pt;" aria-label="docker-compose (8 элементов)">docker-compose</a>
<a href="https://letsclearitup.com.ua/tag/docker-engine" class="tag-cloud-link tag-link-231 tag-link-position-13" style="font-size: 10.317880794702pt;" aria-label="docker-engine (6 элементов)">docker-engine</a>
<a href="https://letsclearitup.com.ua/tag/docker-tips" class="tag-cloud-link tag-link-272 tag-link-position-14" style="font-size: 9.6688741721854pt;" aria-label="docker tips (5 элементов)">docker tips</a>
<a href="https://letsclearitup.com.ua/tag/drbd" class="tag-cloud-link tag-link-53 tag-link-position-15" style="font-size: 9.6688741721854pt;" aria-label="drbd (5 элементов)">drbd</a>
<a href="https://letsclearitup.com.ua/tag/exim" class="tag-cloud-link tag-link-75 tag-link-position-16" style="font-size: 8pt;" aria-label="exim (3 элемента)">exim</a>
<a href="https://letsclearitup.com.ua/tag/fail2ban" class="tag-cloud-link tag-link-45 tag-link-position-17" style="font-size: 8.9271523178808pt;" aria-label="fail2ban (4 элемента)">fail2ban</a>
<a href="https://letsclearitup.com.ua/tag/git" class="tag-cloud-link tag-link-94 tag-link-position-18" style="font-size: 9.6688741721854pt;" aria-label="git (5 элементов)">git</a>
<a href="https://letsclearitup.com.ua/tag/gitlab" class="tag-cloud-link tag-link-233 tag-link-position-19" style="font-size: 14.675496688742pt;" aria-label="gitlab (20 элементов)">gitlab</a>
<a href="https://letsclearitup.com.ua/tag/gitlab-ci" class="tag-cloud-link tag-link-240 tag-link-position-20" style="font-size: 13.377483443709pt;" aria-label="gitlab ci (14 элементов)">gitlab ci</a>
<a href="https://letsclearitup.com.ua/tag/grafana" class="tag-cloud-link tag-link-87 tag-link-position-21" style="font-size: 8.9271523178808pt;" aria-label="grafana (4 элемента)">grafana</a>
<a href="https://letsclearitup.com.ua/tag/innodb" class="tag-cloud-link tag-link-20 tag-link-position-22" style="font-size: 11.245033112583pt;" aria-label="InnoDB (8 элементов)">InnoDB</a>
<a href="https://letsclearitup.com.ua/tag/innodb-mysql" class="tag-cloud-link tag-link-21 tag-link-position-23" style="font-size: 11.245033112583pt;" aria-label="innodb mysql (8 элементов)">innodb mysql</a>
<a href="https://letsclearitup.com.ua/tag/letsencrypt" class="tag-cloud-link tag-link-109 tag-link-position-24" style="font-size: 10.317880794702pt;" aria-label="letsencrypt (6 элементов)">letsencrypt</a>
<a href="https://letsclearitup.com.ua/tag/linux" class="tag-cloud-link tag-link-59 tag-link-position-25" style="font-size: 13.099337748344pt;" aria-label="linux (13 элементов)">linux</a>
<a href="https://letsclearitup.com.ua/tag/logs" class="tag-cloud-link tag-link-79 tag-link-position-26" style="font-size: 8pt;" aria-label="logs (3 элемента)">logs</a>
<a href="https://letsclearitup.com.ua/tag/monitoring" class="tag-cloud-link tag-link-19 tag-link-position-27" style="font-size: 16.900662251656pt;" aria-label="monitoring (35 элементов)">monitoring</a>
<a href="https://letsclearitup.com.ua/tag/munin" class="tag-cloud-link tag-link-17 tag-link-position-28" style="font-size: 12.079470198675pt;" aria-label="munin (10 элементов)">munin</a>
<a href="https://letsclearitup.com.ua/tag/mysql" class="tag-cloud-link tag-link-30 tag-link-position-29" style="font-size: 14.675496688742pt;" aria-label="mysql (20 элементов)">mysql</a>
<a href="https://letsclearitup.com.ua/tag/newrelic" class="tag-cloud-link tag-link-100 tag-link-position-30" style="font-size: 9.6688741721854pt;" aria-label="newrelic (5 элементов)">newrelic</a>
<a href="https://letsclearitup.com.ua/tag/nginx" class="tag-cloud-link tag-link-32 tag-link-position-31" style="font-size: 15.880794701987pt;" aria-label="nginx (27 элементов)">nginx</a>
<a href="https://letsclearitup.com.ua/tag/nixstats" class="tag-cloud-link tag-link-260 tag-link-position-32" style="font-size: 8pt;" aria-label="nixstats (3 элемента)">nixstats</a>
<a href="https://letsclearitup.com.ua/tag/openssl" class="tag-cloud-link tag-link-175 tag-link-position-33" style="font-size: 8.9271523178808pt;" aria-label="OpenSSL (4 элемента)">OpenSSL</a>
<a href="https://letsclearitup.com.ua/tag/pacemaker" class="tag-cloud-link tag-link-68 tag-link-position-34" style="font-size: 10.317880794702pt;" aria-label="pacemaker (6 элементов)">pacemaker</a>
<a href="https://letsclearitup.com.ua/tag/percona-server" class="tag-cloud-link tag-link-74 tag-link-position-35" style="font-size: 10.317880794702pt;" aria-label="Percona Server (6 элементов)">Percona Server</a>
<a href="https://letsclearitup.com.ua/tag/percona-toolkit" class="tag-cloud-link tag-link-76 tag-link-position-36" style="font-size: 8pt;" aria-label="percona toolkit (3 элемента)">percona toolkit</a>
<a href="https://letsclearitup.com.ua/tag/percona-xtrabackup" class="tag-cloud-link tag-link-24 tag-link-position-37" style="font-size: 9.6688741721854pt;" aria-label="Percona XtraBackup (5 элементов)">Percona XtraBackup</a>
<a href="https://letsclearitup.com.ua/tag/prometheus" class="tag-cloud-link tag-link-85 tag-link-position-38" style="font-size: 13.377483443709pt;" aria-label="prometheus (14 элементов)">prometheus</a>
<a href="https://letsclearitup.com.ua/tag/scripts" class="tag-cloud-link tag-link-26 tag-link-position-39" style="font-size: 11.245033112583pt;" aria-label="scripts (8 элементов)">scripts</a>
<a href="https://letsclearitup.com.ua/tag/security" class="tag-cloud-link tag-link-164 tag-link-position-40" style="font-size: 10.317880794702pt;" aria-label="security (6 элементов)">security</a>
<a href="https://letsclearitup.com.ua/tag/ssh" class="tag-cloud-link tag-link-60 tag-link-position-41" style="font-size: 8pt;" aria-label="ssh (3 элемента)">ssh</a>
<a href="https://letsclearitup.com.ua/tag/subversion" class="tag-cloud-link tag-link-49 tag-link-position-42" style="font-size: 8.9271523178808pt;" aria-label="subversion (4 элемента)">subversion</a>
<a href="https://letsclearitup.com.ua/tag/svn" class="tag-cloud-link tag-link-48 tag-link-position-43" style="font-size: 8.9271523178808pt;" aria-label="svn (4 элемента)">svn</a>
<a href="https://letsclearitup.com.ua/tag/systemd" class="tag-cloud-link tag-link-72 tag-link-position-44" style="font-size: 8pt;" aria-label="systemd (3 элемента)">systemd</a>
<a href="https://letsclearitup.com.ua/tag/ubuntu" class="tag-cloud-link tag-link-37 tag-link-position-45" style="font-size: 17.549668874172pt;" aria-label="ubuntu (42 элемента)">ubuntu</a></div>
</aside><aside id="custom_html-2" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><a href="https://hashflare.io/r/479A0FA8-1"><img src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/profit_160x600_ru.gif" alt="HashFlare" height="600" width="160"></a></div></aside>	</div><!-- #secondary .widget-area -->

</div><!-- #main .site-main -->

<footer id="colophon" class="site-footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter" role="contentinfo">
	<div class="site-info">
		 Copyright © 2017 <a href="https://letsclearitup.com.ua/" title="Давайте разберемся!">Let'sclearITup</a>	</div>
	<!-- .site-info -->
	<div>
<!--LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='//www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t14.4;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: показано число просмотров за 24"+
" часа, посетителей за 24 часа и за сегодня' "+
"border='0' width='88' height='31'><\/a>")
//--></script><a href="https://www.liveinternet.ru/click" target="_blank"><img src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/hit.gif" alt="" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодня" border="0" height="31" width="88"></a><!--/LiveInternet-->

<!-- I.UA counter --><a href="http://www.i.ua/" target="_blank" onclick="this.href='http://i.ua/r.php?196836';" title="Rated by I.UA">
<script async="" type="text/javascript"><!--
iS='http'+(window.location.protocol=='https:'?'s':'')+
'://r.i.ua/s?u196836&p8&n'+Math.random();
iD=document;if(!iD.cookie)iD.cookie="b=b; path=/";if(iD.cookie)iS+='&c1';
iS+='&d'+(screen.colorDepth?screen.colorDepth:screen.pixelDepth)
+"&w"+screen.width+'&h'+screen.height;
iT=iR=iD.referrer.replace(iP=/^[a-z]*:\/\//,'');iH=window.location.href.replace(iP,'');
((iI=iT.indexOf('/'))!=-1)?(iT=iT.substring(0,iI)):(iI=iT.length);
if(iT!=iH.substring(0,iI))iS+='&f'+escape(iR);
iS+='&r'+escape(iH);
iD.write('<img src="'+iS+'" border="0" width="88" height="31" />');
//--></script><img src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/s.png" border="0" height="31" width="88"></a><!-- End of I.UA counter -->
    </div>
</footer><!-- #colophon .site-footer -->
</div><!-- #page .hfeed .site -->


	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"https:\/\/letsclearitup.com.ua\/ubuntu\/znakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html":603};
	</script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/shCore.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/shBrushPlain.js"></script>
<script async="" type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://letsclearitup.com.ua/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://letsclearitup.com.ua/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['light'] = true;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['tab-size'] = 2;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/photon.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/skip-link-focus-fix.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/comment-reply.js"></script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/wp-embed.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/sharing.js"></script>
<script type="text/javascript">
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-twitter', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-facebook', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-google-plus-1', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
var windowOpen;
			jQuery( document.body ).on( 'click', 'a.share-linkedin', function() {
				// If there's another sharing window open, close it.
				if ( 'undefined' !== typeof windowOpen ) {
					windowOpen.close();
				}
				windowOpen = window.open( jQuery( this ).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
</script>

		<!--[if IE]>
		<script type="text/javascript">
			if ( 0 === window.location.hash.indexOf( '#comment-' ) ) {
				// window.location.reload() doesn't respect the Hash in IE
				window.location.hash = window.location.hash;
			}
		</script>
		<![endif]-->
		<script type="text/javascript">
			(function () {
				var comm_par_el = document.getElementById( 'comment_parent' ),
					comm_par = ( comm_par_el && comm_par_el.value ) ? comm_par_el.value : '',
					frame = document.getElementById( 'jetpack_remote_comment' ),
					tellFrameNewParent;

				tellFrameNewParent = function () {
					if ( comm_par ) {
						frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=103259130&postid=603&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=0&avatar_default=mystery&greeting=%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9&greeting_reply=%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9+%D0%B4%D0%BB%D1%8F+%25s&color_scheme=light&lang=ru_RU&jetpack_version=5.4&sig=5b3633656f7b02f737e4e24285e8a0579c1b1e54#parent=https%3A%2F%2Fletsclearitup.com.ua%2Fubuntu%2Fznakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html" + '&replytocom=' + parseInt( comm_par, 10 ).toString();
					} else {
						frame.src = "https://jetpack.wordpress.com/jetpack-comment/?blogid=103259130&postid=603&comment_registration=0&require_name_email=1&stc_enabled=1&stb_enabled=1&show_avatars=0&avatar_default=mystery&greeting=%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9&greeting_reply=%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C+%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9+%D0%B4%D0%BB%D1%8F+%25s&color_scheme=light&lang=ru_RU&jetpack_version=5.4&sig=5b3633656f7b02f737e4e24285e8a0579c1b1e54#parent=https%3A%2F%2Fletsclearitup.com.ua%2Fubuntu%2Fznakomstvo-s-ansible-chast-5-roli-usloviya-i-tsiklyi.html";
					}
				};

				
				if ( 'undefined' !== typeof addComment ) {
					addComment._Jetpack_moveForm = addComment.moveForm;

					addComment.moveForm = function ( commId, parentId, respondId, postId ) {
						var returnValue = addComment._Jetpack_moveForm( commId, parentId, respondId, postId ),
							cancelClick, cancel;

						if ( false === returnValue ) {
							cancel = document.getElementById( 'cancel-comment-reply-link' );
							cancelClick = cancel.onclick;
							cancel.onclick = function () {
								var cancelReturn = cancelClick.call( this );
								if ( false !== cancelReturn ) {
									return cancelReturn;
								}

								if ( ! comm_par ) {
									return cancelReturn;
								}

								comm_par = 0;

								tellFrameNewParent();

								return cancelReturn;
							};
						}

						if ( comm_par == parentId ) {
							return returnValue;
						}

						comm_par = parentId;

						tellFrameNewParent();

						return returnValue;
					};
				}

				
				// Do the post message bit after the dom has loaded.
				document.addEventListener( 'DOMContentLoaded', function () {
					var iframe_url = "https:\/\/jetpack.wordpress.com";
					if ( window.postMessage ) {
						if ( document.addEventListener ) {
							window.addEventListener( 'message', function ( event ) {
								var origin = event.origin.replace( /^http:\/\//i, 'https://' );
								if ( iframe_url.replace( /^http:\/\//i, 'https://' ) !== origin ) {
									return;
								}
								jQuery( frame ).height( event.data );
							});
						} else if ( document.attachEvent ) {
							window.attachEvent( 'message', function ( event ) {
								var origin = event.origin.replace( /^http:\/\//i, 'https://' );
								if ( iframe_url.replace( /^http:\/\//i, 'https://' ) !== origin ) {
									return;
								}
								jQuery( frame ).height( event.data );
							});
						}
					}
				})

			})();
		</script>

		<script type="text/javascript" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/e-201744.js" async="" defer="defer"></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:5.4',blog:'103259130',post:'603',tz:'2',srv:'letsclearitup.com.ua'} ]);
	_stq.push([ 'clickTrackerInit', '103259130', '603' ]);
</script>



<ins data-adsbygoogle-status="done" style="display: none; width: auto; height: auto;" class="adsbygoogle"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:0px;height:0px;" frameborder="0" height="0" width="0"></iframe></ins></ins></ins><iframe style="display: none; width: 0px; height: 0px;" name="google_osd_static_frame" id="google_osd_static_frame_6676417545072"></iframe><img id="wpstats" alt=":)" src="%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D1%81%20Ansible.%20%D0%A7%D0%B0%D1%81%D1%82%D1%8C%205%20%20%D1%80%D0%BE%D0%BB%D0%B8,%20%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F%20%D0%B8%20%D1%86%D0%B8%D0%BA%D0%BB%D1%8B%20_%20Let%27sclearITup_files/g.gif" height="5" width="6"></body><div data="{&quot;a&quot;:&quot;setShowingSafe&quot;,&quot;f&quot;:false}" style="display:none" id="sp_console_event"></div></html>