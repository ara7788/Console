<!DOCTYPE html>
<html lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Playing with h2o http server – </title>

	<meta charset="UTF-8"><script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/f7db081690"></script><script src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/nr-1026.js"></script><script async="" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/analytics.js"></script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1026.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script>
	<meta name="viewport" content="width=device-width">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://isselguberna.com/xmlrpc.php">

	

	<link rel="dns-prefetch" href="http://isselguberna.com/">
<link rel="dns-prefetch" href="http://fonts.googleapis.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title=" » Feed" href="http://isselguberna.com/feed/">
<link rel="alternate" type="application/rss+xml" title=" » Comments Feed" href="http://isselguberna.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title=" » Playing with h2o http server Comments Feed" href="http://isselguberna.com/playing-with-h2o-http-server/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/isselguberna.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/wp-emoji-release.js" type="text/javascript" defer="defer"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="athemes-headings-fonts-css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/css.css" type="text/css" media="all">
<link rel="stylesheet" id="athemes-glyphs-css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/athemes-glyphs.css" type="text/css" media="all">
<link rel="stylesheet" id="athemes-bootstrap-css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/bootstrap.css" type="text/css" media="all">
<link rel="stylesheet" id="athemes-style-css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/style.css" type="text/css" media="all">
<style id="athemes-style-inline-css" type="text/css">
a, #main-navigation .sf-menu > ul > li:hover:after, #main-navigation .sf-menu > ul > li.sfHover:after, #main-navigation .sf-menu > ul > li.current_page_item:after, #main-navigation .sf-menu > ul > li.current-menu-item:after, .entry-title a:hover, .comment-list li.comment .comment-author .fn a:hover, .comment-list li.comment .reply a, .widget li a:hover, .site-extra .widget li a:hover, .site-extra .widget_athemes_social_icons li a:hover [class^="ico-"]:before, .site-footer a:hover { color: #21d32a; }
button:hover, a.button:hover, input[type="button"]:hover, .widget-title span, input[type="reset"]:hover, input[type="submit"]:hover { border-color: #21d32a; }
button:hover, a.button:hover, .widget_athemes_social_icons li a:hover [class^="ico-"]:before, input[type="button"]:hover, .widget_athemes_tabs .widget-tab-nav li.active a, input[type="reset"]:hover, .comments-link a, .site-content [class*="navigation"] a:hover, input[type="submit"]:hover, #main-navigation li:hover ul, #main-navigation li.sfHover ul, #main-navigation li a:hover, #main-navigation li.sfHover > a, #main-navigation li.current_page_item > a, #main-navigation li.current-menu-item > a, #main-navigation li.current-menu-parent > a, #main-navigation li.current-page-parent > a, #main-navigation li.current-page-ancestor > a, #main-navigation li.current_page_ancestor > a { background: #21d32a; }
.site-title a { color: ; }
.site-description { color: ; }
.entry-title, .entry-title a { color: #309b35; }
body { color: ; }

</style>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/jquery.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/jquery-migrate.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/bootstrap.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/superfish.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/supersubs.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/settings.js"></script>
<link rel="https://api.w.org/" href="http://isselguberna.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://isselguberna.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://isselguberna.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Problems editing css and js with virtualbox and NFS shared folders" href="http://isselguberna.com/problems-editing-css-and-js-with-virtualbox-and-nfs-shared-folders/">
<link rel="next" title="How-to run mocha tests with webstorm" href="http://isselguberna.com/how-to-run-mocha-tests-with-webstorm/">
<meta name="generator" content="WordPress 4.7.3">
<link rel="canonical" href="http://isselguberna.com/playing-with-h2o-http-server/">
<link rel="shortlink" href="http://isselguberna.com/?p=9">
<link rel="alternate" type="application/json+oembed" href="http://isselguberna.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fisselguberna.com%2Fplaying-with-h2o-http-server%2F">
<link rel="alternate" type="text/xml+oembed" href="http://isselguberna.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fisselguberna.com%2Fplaying-with-h2o-http-server%2F&amp;format=xml">
<!--[if lt IE 9]>
<script src="http://isselguberna.com/wp-content/themes/hiero/js/html5shiv.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/shCore.css"><link rel="stylesheet" type="text/css" href="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="post-template-default single single-post postid-9 single-format-standard">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80426-20', 'auto');
  ga('send', 'pageview');

</script>
	<header id="masthead" class="site-header" role="banner">
		<div class="clearfix container">
			<div class="site-branding">
							
										<div class="site-title">
						<a href="http://isselguberna.com/" title="" rel="home">
													</a>
					</div>
					<div class="site-description">Software Engineer: an organism that turns caffeine into code</div>
							<!-- .site-branding --></div>

						
			<nav id="main-navigation" class="main-navigation" role="navigation">
				<a href="#main-navigation" class="nav-open">Menu</a>
				<a href="#" class="nav-close">Close</a>
				<div class="clearfix sf-menu"><ul class="sf-js-enabled">
<li><a href="http://isselguberna.com/">Home</a></li><li class="page_item page-item-81"><a href="http://isselguberna.com/me/">Me</a></li>
</ul></div>
			<!-- #main-navigation --></nav>
		</div>
	<!-- #masthead --></header>

	<div id="main" class="site-main">
		<div class="clearfix container">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

		
			
<article id="post-9" class="clearfix post-9 post type-post status-publish format-standard has-post-thumbnail hentry category-devops">
	<header class="entry-header">
				<span class="comments-link"> <a href="http://isselguberna.com/playing-with-h2o-http-server/#respond">0</a></span>
		
		<h1 class="entry-title">Playing with h2o http server</h1>

		<div class="entry-meta">
			<span class="posted-on">Posted on <a href="http://isselguberna.com/playing-with-h2o-http-server/" title="12:37 am" rel="bookmark"><time class="entry-date published updated" datetime="2015-12-17T00:37:45+00:00">December 17, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="http://isselguberna.com/author/isselguberna/" title="View all posts by isselguberna">isselguberna</a></span></span>		<!-- .entry-meta --></div>
	<!-- .entry-header --></header>

			

	<div class="clearfix entry-content">
		<p>What’s <strong>h2o</strong>?</p>
<p>Shortly, h2o is a <strong>http server with http2 full support</strong> explained here written in C</p>
<p>Why h2o?</p>
<p>Firsty, for his <strong>http2 native support</strong>. You don’t need
 to install mods (like nginx). And second, because performance seems 
better than apache and nginx. Benchmarks here.</p>
<p>Can I install h2o http server in production?</p>
<p>Definitely no, h2o is under development, so install it only on a 
development environment for now. Fun to play and a project to monitor.</p>
<p>Well.. seems interesting… How can I install it?</p>
<p>For now we don’t have any package to install h2o using apt-get, dpkg 
and so on, so we need to compile it. But keep calm, is very simple <img draggable="false" class="emoji" alt="😉" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/1f609.svg"></p>
<p>1) sudo apt-get install -y libtool automake libyaml-dev libssl-dev cmake git build-essential<br>
2) clone repository of h2o [https://github.com/h2o/h2o/]<br>
3) sudo apt-get install cmake<br>
4) cmake -DWITH_BUNDLED_SSL=on .<br>
5) make<br>
6) sudo make install<br>
7) mv h2o/examples/h2o/examples/h2o /etc/h2o/h2o.conf<br>
8) /usr/local/bin/h2o -c /etc/h2o/h2o.conf</p>
<p>To test:<br>
1) mkdir /var/www/test<br>
2) cd /var/www/test<br>
3) echo “hello world” &gt; index.html<br>
4) Edit virtualhost configuration:<br>
5) Create logs directory: sudo mkdir -p /var/log/h2o.access</p>
<div><div id="highlighter_937044" class="syntaxhighlighter  ruby"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">hosts:</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby string">"www.test.loc"</code><code class="ruby plain">:</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">listen:</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">port: </code><code class="ruby constants">443</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">ssl:</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">certificate-file: /etc/h2o/certificate.pem</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">key-file: /etc/h2o/key.pem</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">paths:</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby string">"/"</code><code class="ruby plain">:</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">file.dir: /var/www/test</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">access-log: /var/log/h2o.access</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby string">"www.test.loc"</code><code class="ruby plain">:</code></div><div class="line number13 index12 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">listen:</code></div><div class="line number14 index13 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">port: </code><code class="ruby constants">80</code></div><div class="line number15 index14 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">paths:</code></div><div class="line number16 index15 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby string">"/"</code><code class="ruby plain">:</code></div><div class="line number17 index16 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">file.dir: /var/www/test</code></div><div class="line number18 index17 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">access-log: /var/log/h2o.access</code></div></div></td></tr></tbody></table></div></div>
<p>6) And restart h2o server: /usr/local/bin/h2o -c /etc/h2o/h2o.conf<br>
7) Type https://www.test.loc in your favourite browser</p>
<p>Here you can see an example using SSL. You can see the browser using http2.</p>
<p>Second example is without SSL, now browser is using http 1.1, because doesn’t support http2 without SSL.</p>
<p>Ok, but I need php support…</p>
<p>Is not a problem, we can configure h2o virtualhost to use php. Edit h2o.conf file to add php support:</p>
<div><div id="highlighter_34310" class="syntaxhighlighter  ruby"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">file.custom-handler:</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">extension: .php</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">fastcgi.connect:</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">host: </code><code class="ruby constants">127</code><code class="ruby plain">.</code><code class="ruby constants">0</code><code class="ruby plain">.</code><code class="ruby constants">0</code><code class="ruby plain">.</code><code class="ruby constants">1</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">port: </code><code class="ruby constants">9000</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">type: tcp</code></div></div></td></tr></tbody></table></div></div>
<p>Create an index.php file, restart h2o http server again and type https://www.test.loc/index.php in your favourite browser.</p>
<p>Execute request with curl</p>
<p>If you try to use curl: “curl -v –http2 
http://www.test.loc/index.php” you can obtain “curl: (1) Unsupported 
protocol”. Patience, they are working on it, or you can install nghttp2 
manually <img draggable="false" class="emoji" alt="😉" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/1f609.svg"><br>
[http://csspit.com/fae221adeff940eaa/using-http2-option-with-curl-7-33-gives-unsupported-protocol.html]</p>
<p>Bonus track: How-to create self-signed SSL certificates to test</p>
<p>openssl genrsa -out key.pem 2048<br>
openssl req -new -key key.pem -out csr.pem<br>
openssl req -x509 -days 365 -key key.pem -in csr.pem -out certificate.pem</p>
			<!-- .entry-content --></div>

	<footer class="entry-meta entry-footer">
		<span class="cat-links"><i class="ico-folder"></i> <a href="http://isselguberna.com/category/devops/" rel="category tag">devops</a></span>	<!-- .entry-meta --></footer>
<!-- #post-9 --></article>

			
				<nav role="navigation" id="nav-below" class="post-navigation">
		<h1 class="screen-reader-text">Post navigation</h1>

	
		<div class="nav-previous"><a href="http://isselguberna.com/problems-editing-css-and-js-with-virtualbox-and-nfs-shared-folders/" rel="prev"><span class="meta-nav"><i class="ico-left-open"></i></span> Problems editing css and js with virtualbox and NFS shared folders</a></div>		<div class="nav-next"><a href="http://isselguberna.com/how-to-run-mocha-tests-with-webstorm/" rel="next">How-to run mocha tests with webstorm <span class="meta-nav"><i class="ico-right-open"></i></span></a></div>
	
	</nav><!-- #nav-below -->
	
			
	<div id="comments" class="comments-area">

	
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://isselguberna.com/playing-with-h2o-http-server/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="http://isselguberna.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" size="30" maxlength="245" aria-required="true" required="required" type="text"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required" type="text"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" size="30" maxlength="200" type="text"></p>
<p class="form-submit"><input name="submit" id="submit" class="submit" value="Post Comment" type="submit"> <input name="comment_post_ID" value="9" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
</p>			</form>
			</div><!-- #respond -->
	
</div><!-- #comments -->

		
		</div><!-- #content -->
	</div><!-- #primary -->

<div id="widget-area-2" class="site-sidebar widget-area" role="complementary">
	<aside id="athemes_social_icons-2" class="widget widget_athemes_social_icons"><h3 class="widget-title"><span></span></h3><ul class="clearfix widget-social-icons">					<li class="widget-si-twitter"><a href="https://twitter.com/octante" title="Twitter"><i class="ico-twitter"></i></a></li>
										<li class="widget-si-linkedin"><a href="https://es.linkedin.com/in/isselguberna" title="LinkedIn"><i class="ico-linkedin"></i></a></li>
					<!-- .widget-social-icons --></ul></aside><aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="http://isselguberna.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input class="search-field" placeholder="Search …" name="s" title="Search for:" type="search">
	</label>
	<input class="search-submit" value="Search" type="submit">
</form>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title"><span>Recent Posts</span></h3>		<ul>
					<li>
				<a href="http://isselguberna.com/automatically-api-mocking/">Automatically API mocking</a>
						</li>
					<li>
				<a href="http://isselguberna.com/build-an-api-prototype-with-sinatra-in-6-steps/">Build an API prototype with Sinatra in 6 steps</a>
						</li>
					<li>
				<a href="http://isselguberna.com/graphite-to-monitor-distributed-systems/">Graphite to monitor distributed systems</a>
						</li>
					<li>
				<a href="http://isselguberna.com/http-caching-for-restful-apis/">HTTP Caching for RESTful APIs</a>
						</li>
					<li>
				<a href="http://isselguberna.com/rest-api-composite-resources/">REST API composite resources</a>
						</li>
				</ul>
		</aside>		<aside id="archives-2" class="widget widget_archive"><h3 class="widget-title"><span>Archives</span></h3>		<ul>
			<li><a href="http://isselguberna.com/2017/03/">March 2017</a></li>
	<li><a href="http://isselguberna.com/2016/06/">June 2016</a></li>
	<li><a href="http://isselguberna.com/2016/05/">May 2016</a></li>
	<li><a href="http://isselguberna.com/2016/03/">March 2016</a></li>
	<li><a href="http://isselguberna.com/2016/02/">February 2016</a></li>
	<li><a href="http://isselguberna.com/2015/12/">December 2015</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title"><span>Categories</span></h3>		<ul>
	<li class="cat-item cat-item-30"><a href="http://isselguberna.com/category/devops/ansible/">Ansible</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://isselguberna.com/category/api/">API</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://isselguberna.com/category/devops/">devops</a>
</li>
	<li class="cat-item cat-item-29"><a href="http://isselguberna.com/category/devops/docker/">Docker</a>
</li>
	<li class="cat-item cat-item-2"><a href="http://isselguberna.com/category/node-js/">Node.js</a>
</li>
	<li class="cat-item cat-item-25"><a href="http://isselguberna.com/category/ruby/">ruby</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://isselguberna.com/category/sinatra/">sinatra</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://isselguberna.com/category/symfony2/">Symfony2</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title"><span>Meta</span></h3>			<ul>
						<li><a href="http://isselguberna.com/wp-login.php">Log in</a></li>
			<li><a href="http://isselguberna.com/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://isselguberna.com/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside><!-- #widget-area-2 --></div>		</div>
	<!-- #main --></div>

	

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="clearfix container">
			<div class="site-info">
				© 2017 . All rights reserved.
			</div><!-- .site-info -->

			<div class="site-credit">
				<a href="http://athemes.com/theme/hiero">Hiero</a> by aThemes
			</div><!-- .site-credit -->
		</div>
	<!-- #colophon --></footer>

<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/shCore.js"></script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/shBrushRuby.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = 
"http://isselguberna.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";

		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, 
document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = 
"http://isselguberna.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";

		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		
//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);

		document.getElementsByTagName("head")[0].insertBefore( themecss, 
document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t 
configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="Playing%20with%20h2o%20http%20server%20%E2%80%93_files/wp-embed.js"></script>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"f7db081690","applicationID":"26542194","transactionName":"NVAGbUZTV0EHWhcPDAwaJVpAW1ZcSUoKCAQOUA==","queueTime":0,"applicationTime":88,"atts":"GRcFGw5JRE8=","errorBeacon":"bam.nr-data.net","agent":""}</script>

</body></html>