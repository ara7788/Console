if(reformalOptions&&!Reformal){var Reformal=(function(b){var c={renderTemplate:function(d,e){return d.replace(/{{(.*?)}}/g,function(g,f){var h=e[f];return typeof h==="string"||typeof h==="number"?h:g})},extendObject:function(e,d){for(prop in d){e[prop]=d[prop]}return e},includeCss:function(e){var d=document.createElement("style");d.setAttribute("type","text/css");d.setAttribute("media","screen");if(d.styleSheet){d.styleSheet.cssText=e}else{d.appendChild(document.createTextNode(e))}document.getElementsByTagName("head")[0].appendChild(d)},isPng:function(d){return/\.png$/.test(d)||/\.png?/.test(d)||/tab\.reformal\.ru/.test(d)},isSsl:"https:"==document.location.protocol,proto:"https:"==document.location.protocol?"https://":"http://",compact:function(m){str="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d="";var n,k,h,l,j,g,f;var e=0;m=c.utf8encode(m);while(e<m.length){n=m.charCodeAt(e++);k=m.charCodeAt(e++);h=m.charCodeAt(e++);l=n>>2;j=((n&3)<<4)|(k>>4);g=((k&15)<<2)|(h>>6);f=h&63;if(isNaN(k)){g=f=64}else{if(isNaN(h)){f=64}}d=d+str.charAt(l)+str.charAt(j)+str.charAt(g)+str.charAt(f)}return d},utf8encode:function(e){e=e.replace(/\r\n/g,"\n");var d="";for(var g=0;g<e.length;g++){var f=e.charCodeAt(g);if(f<128){d+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){d+=String.fromCharCode((f>>6)|192)+String.fromCharCode((f&63)|128)}else{d+=String.fromCharCode((f>>12)|224)+String.fromCharCode(((f>>6)&63)|128)+String.fromCharCode((f&63)|128)}}}return d}};c.ieVersion=(function(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){return new Number(RegExp.$1)}return null})();c.supportsCssPositionFixed=(function(){function d(){return document.compatMode&&document.compatMode=="BackCompat"}if(c.ieVersion===null){return true}if(c.ieVersion<7){return false}return !d()})();var a=c.extendObject({show_tab:true,force_new_window:false,tab_top:300,tab_alignment:"left",tab_image_url:"",tab_image_isPng:false,tab_bg_color:"transparent",widget_width:720,widget_height:500,widget_top:80},b);a.project_url=["http://",a.project_host].join("");a.widget_url=[c.proto,"reformal.ru/widget/",a.project_id,"?_=",Math.round(10000*Math.random())].join("");a.empty_gif_url=[c.proto,"media.reformal.ru/widgets/v1/x.gif"].join("");a.close_image_url=[c.proto,"media.reformal.ru/widgets/v1/close.png"].join("");if(c.ieVersion&&c.ieVersion<7
/*!Util.supportsCssPositionFixed*/
){a.force_new_window=true}if(!a.tab_image_url){a.tab_image_url=a.empty_gif_url}if(c.isSsl){a.tab_image_url=function(d){var e=d.split("//");if(e[0]=="https:"){return d}return"https://"+e[1]}(a.tab_image_url)}Tab={isPngInIe6:c.ieVersion&&c.ieVersion<7&&(a.tab_image_isPng||c.isPng(a.tab_image_url)),css_template:"        #reformal_tab {position:fixed; top:{{top}}; {{alignment}}:0; z-index:100001;}         #reformal_tab a {display:block; padding: {{tab_padding}}px; background:{{background_color}};}         #reformal_tab img {border: none;} "+(!c.supportsCssPositionFixed?"#reformal_tab {position: absolute;}":"")+(this.isPngInIe6?"#reformal_tab img {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{{tab_image_url}}', sizingMethod='scale');}":""),l:window.location.href,show:function(){var f,g,d,j;g=c.renderTemplate(this.css_template,{top:[a.tab_top,"px"].join(""),alignment:a.tab_alignment,background_color:a.tab_bg_color,tab_image_url:a.tab_image_url,tab_padding:/tab\.reformal\.ru/.test(a.tab_image_url)?2:0});c.includeCss(g);d=[a.force_new_window?"window.open('"+a.project_url+"')":"Reformal.widgetOpen()","return false;"].join(";"),j=a.force_new_window?"":"Reformal.widgetPreload();";f=document.createElement("div");f.setAttribute("id","reformal_tab");f.innerHTML=c.renderTemplate('           <a href="{{project_url}}" onclick="{{onclick}}" onmouseover="{{onmouseover}}">                 <img src="{{tab_image_url}}" alt="" />             </a>',{project_url:a.project_url,tab_image_url:this.isPngInIe6?a.empty_gif_url:a.tab_image_url,onclick:d,onmouseover:j});document.body.insertBefore(f,document.body.firstChild);var e=new Image();e.src=c.proto+"log.reformal.ru/st.php?w=15&pid="+a.project_id;var h=new Image();h.src=c.proto+"reformal.ru/human_check/"+a.project_id+"|"+c.compact(Tab.l)+"|"+c.compact(Widget.r)+"|"+Math.round(100000*Math.random())}};Widget={preloaded:false,overleyElement:null,widgetElement:null,css_template:"        #reformal_widget-overlay {width:100%; height:100%; background:#000; position:fixed; top:0; left:0; z-index:100002;}         #reformal_widget-overlay {filter:progid:DXImageTransform.Microsoft.Alpha(opacity=60);-moz-opacity: 0.6;-khtml-opacity: 0.6;opacity: 0.6;}         #reformal_widget {position: fixed; z-index:100003; top:{{top}}px; left:50%; width:{{width}}px; height:{{height}}px; background:#ECECEC; margin: 0 0 0 {{margin_left}}px; -webkit-border-radius: 6px; -moz-border-radius:  6px; border-radius:  6px;}         #reformal_widget {-webkit-box-shadow:0 0 15px #000; -moz-box-shadow: 0 0 15px #000; box-shadow:0 0 15px #000;}         #reformal_widget iframe {padding:0; margin:0; border:0;}         #reformal_widget #reformal_widget-close {display:block; width:34px; height:34px; background: url({{close_image_url}}) no-repeat 0 0; position:absolute; top:-17px; right:-17px; z-index:100004;}",open:function(){if(!this.preloaded){this.preload()}this.overleyElement.style.display="block";this.widgetElement.style.display="block"},close:function(){this.overleyElement.style.display="none";this.widgetElement.style.display="none"},preload:function(){if(this.preloaded){return}var d=c.renderTemplate(this.css_template,{top:a.widget_top,width:a.widget_width,height:a.widget_height,margin_left:-a.widget_width/2,close_image_url:a.close_image_url});c.includeCss(d);this.overleyElement=document.createElement("div");this.overleyElement.setAttribute("id","reformal_widget-overlay");this.overleyElement.setAttribute("onclick","Reformal.widgetClose();");this.widgetElement=document.createElement("div");this.widgetElement.setAttribute("id","reformal_widget");this.widgetElement.innerHTML='             <a href="#" onclick="Reformal.widgetClose(); return false;" id="reformal_widget-close"></a>             <iframe src="'+a.widget_url+'" frameborder="0" scrolling="no" width="100%" height="100%"></iframe>';this.widgetElement.style.display="none";this.overleyElement.style.display="none";document.body.insertBefore(this.widgetElement,document.body.firstChild);document.body.insertBefore(this.overleyElement,document.body.firstChild);this.preloaded=true},r:typeof document.referrer==="undefined"?"":document.referrer};if(a.show_tab){Tab.show()}return{widgetOpen:function(){Widget.open()},widgetPreload:function(){},widgetClose:function(){Widget.close()},tabShow:function(){Tab.show()}}})(reformalOptions)};