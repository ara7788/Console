Forums.ForumDetails={wireForumDetailLinks:function(){var n=null,t=1e3;$.each($(".forumItem,.forumBreadcrumb").not(".selectAllCheckboxContainer"),function(){if($(this).parents("#allCategoryPopupContainer:first").length==0){var i=$(this).find(".forumDetailsTip");$(this).hover(function(r){r.stopPropagation(),$(".forumDetailsTip").hide(),$(this).data("hover",1),i.children().size()==0?(n=setTimeout(function(){},t),Forums.ForumDetails.showForumDetails($(this),i,t-n)):n=setTimeout(function(){i&&i.show()},t)},function(t){t.stopPropagation(),$(this).data("hover",0),i&&i.hide(),n&&clearTimeout(n)})}})},showForumDetails:function(n,t,i){var r=n.data("forumdetailsurl");$.getJSON(r,function(r){if(!$(t).data("details_loaded")){$(t).data("details_loaded",!0);var u=Forums.ForumDetails.loadForumDetails(r);$(t).empty().append(u),setTimeout(function(){$(n).data("hover")&&t&&t.show()},i)}}).fail(function(t,i,r){n.next(".forumDetailsTip").html("Error: "+r)})},loadForumDetails:function(n){var t=n,o="forumDetailsTip_"+t.Name,s=$("#"+o+":first"),e,i,u,r,f;return s.length==1?s:(e=$("#forumDetailsTemplate:first"),i=$(e).clone(),$(i).attr("id",o),$(i).children("h3.header").prepend(t.DisplayName),$(i).children("div.content").html(t.Description),$(i).find("img.rss").parent().attr("href",t.RSSUrl),$(i).find(".announcements span").text(t.AnnouncementsText+": "+t.AnnouncementCount).addClass("bold"),t.ShowManageForums&&(u=$(i).find(".manageForumSection"),$(u).find(".manageForumLink").attr("href",t.ManageForumUrl).text(t.ManageForumsText),$(u).find(".manageRolesLink").attr("href",t.ManageRolesUrl).text(t.ManageRolesText),$(u).find(".addAnnouncementLink").attr("href",t.AddAnnouncementUrl).text(t.AddAnnouncementText),$(u).show()),r=$(i).find("a.addRemoveForum"),$(r).attr("href",t.FavoriteUrl),t.HasFavoritePermission?$(r).attr("title",t.AddToMyForumsText).attr("name","favorite").attr("data-reverseText",t.RemoveFromMyForumsText).attr("data-reversename","unfavorite").text(t.AddToMyForumsText):t.HasUnFavoritePermission===!0&&$(r).attr("title",t.RemoveFromMyForumsText).attr("name","unfavorite").attr("data-reverseText",t.AddToMyForumsText).attr("data-reversename","favorite").text(t.RemoveFromMyForumsText),f=$(r).attr("name"),typeof f!="undefined"&&f!==!1&&$(r).show(),$(i).find("a.addRemoveForum").click(function(){var i=$(this).attr("name")==="favorite",t=$(this);return $.post($(t).attr("href"),{isFavorited:i},function(n){if(n.success){var u=$(t).text(),f=$(t).attr("name"),i=$(t).attr("data-reverseText"),r=$(t).attr("data-reversename");$(t).attr("title",i).attr("name",r).attr("data-reverseText",u).attr("data-reversename",f),$(t).text(i)}},"json"),!1}),i)}}